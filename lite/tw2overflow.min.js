/*! tw2overflow.min.js@1.0.7 | Licence MIT */
!function(a,b){define("Lockr",function(a,b){"use strict";return b.prefix="",b._getPrefixedKey=function(a,b){return b=b||{},b.noPrefix?a:this.prefix+a},b.set=function(a,b,c){var d=this._getPrefixedKey(a,c);try{localStorage.setItem(d,JSON.stringify({data:b}))}catch(a){}},b.get=function(a,b,c){var d,e=this._getPrefixedKey(a,c);try{d=JSON.parse(localStorage.getItem(e))}catch(a){d=localStorage[e]?{data:localStorage.getItem(e)}:null}return null===d?b:"object"==typeof d&&void 0!==d.data?d.data:b},b}(a,{}))}(this),function(){var a,b,c,d=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(){this.translate=d(this.translate,this),this.data={values:{},contexts:[]},this.globalContext={}}return a.prototype.translate=function(a,b,c,d,e){var f,g,h,i;return null==e&&(e=this.globalContext),h=function(a){var b;return"function"===(b=typeof a)||"object"===b&&!!a},h(b)?(f=null,i=null,g=b,e=c||this.globalContext):"number"==typeof b?(f=null,i=b,g=c,e=d||this.globalContext):(f=b,"number"==typeof c?(i=c,g=d,e=e):(i=null,g=c,e=d||this.globalContext)),h(a)?(h(a.i18n)&&(a=a.i18n),this.translateHash(a,e)):this.translateText(a,i,g,e,f)},a.prototype.add=function(a){var b,c,d,e,f,g,h,i;if(null!=a.values){g=a.values;for(c in g)d=g[c],this.data.values[c]=d}if(null!=a.contexts){for(h=a.contexts,i=[],e=0,f=h.length;e<f;e++)b=h[e],i.push(this.data.contexts.push(b));return i}},a.prototype.setContext=function(a,b){return this.globalContext[a]=b},a.prototype.clearContext=function(a){return this.lobalContext[a]=null},a.prototype.reset=function(){return this.data={values:{},contexts:[]},this.globalContext={}},a.prototype.resetData=function(){return this.data={values:{},contexts:[]}},a.prototype.resetContext=function(){return this.globalContext={}},a.prototype.translateHash=function(a,b){var c,d;for(c in a)"string"==typeof(d=a[c])&&(a[c]=this.translateText(d,null,null,b));return a},a.prototype.translateText=function(a,b,c,d,e){var f,g;return null==d&&(d=this.globalContext),null==this.data?this.useOriginalText(e||a,b,c):(f=this.getContextData(this.data,d),null!=f&&(g=this.findTranslation(a,b,c,f.values,e)),null==g&&(g=this.findTranslation(a,b,c,this.data.values,e)),null==g?this.useOriginalText(e||a,b,c):g)},a.prototype.findTranslation=function(a,b,c,d){var e,f,g,h,i;if(null==(g=d[a]))return null;if(null==b){if("string"==typeof g)return this.applyFormatting(g,b,c)}else if(g instanceof Array||g.length)for(h=0,i=g.length;h<i;h++)if(f=g[h],(b>=f[0]||null===f[0])&&(b<=f[1]||null===f[1]))return e=this.applyFormatting(f[2].replace("-%n",String(-b)),b,c),this.applyFormatting(e.replace("%n",String(b)),b,c);return null},a.prototype.getContextData=function(a,b){var c,d,e,f,g,h,i,j;if(null==a.contexts)return null;for(i=a.contexts,g=0,h=i.length;g<h;g++){c=i[g],d=!0,j=c.matches;for(e in j)f=j[e],d=d&&f===b[e];if(d)return c}return null},a.prototype.useOriginalText=function(a,b,c){return null==b?this.applyFormatting(a,b,c):this.applyFormatting(a.replace("%n",String(b)),b,c)},a.prototype.applyFormatting=function(a,b,c){var d,e;for(d in c)e=new RegExp("%{"+d+"}","g"),a=a.replace(e,c[d]);return a},a}(),c=new a,b=c.translate,b.translator=c,b.create=function(c){var d;return d=new a,null!=c&&d.add(c),d.translate.create=b.create,d.translate},define("i18n",function(){return b})}.call(this),function(a){define("ejs",function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){var d;if("/"==a.charAt(0))d=c.resolveInclude(a.replace(/^\/*/,""),b.root||"/",!0);else{if(!b.filename)throw new Error("`include` use relative path requires the 'filename' option.");d=c.resolveInclude(a,b.filename)}return d}function e(a,b){var d,e=a.filename,f=arguments.length>1;if(a.cache){if(!e)throw new Error("cache option requires a filename");if(d=c.cache.get(e))return d;f||(b=g(e).toString().replace(v,""))}else if(!f){if(!e)throw new Error("Internal EJS error: no file name or template provided");b=g(e).toString().replace(v,"")}return d=c.compile(b,a),a.cache&&c.cache.set(e,d),d}function f(a,b,c){var d;try{d=e(a)(b)}catch(a){return c(a)}return c(null,d)}function g(a){return c.fileLoader(a)}function h(a,b){var c=o.shallowCopy({},b);return c.filename=d(a,c),e(c)}function i(a,b){var c,e,f=o.shallowCopy({},b);c=d(a,f),e=g(c).toString().replace(v,""),f.filename=c;var h=new l(e,f);return h.generateSource(),{source:h.source,filename:c,template:e}}function j(a,b,c,d,e){var f=b.split("\n"),g=Math.max(d-3,0),h=Math.min(f.length,d+3),i=e(c),j=f.slice(g,h).map(function(a,b){var c=b+g+1;return(c==d?" >> ":"    ")+c+"| "+a}).join("\n");throw a.path=i,a.message=(i||"ejs")+":"+d+"\n"+j+"\n\n"+a.message,a}function k(a){return a.replace(/;(\s*$)/,"$1")}function l(a,b){b=b||{};var d={};this.templateText=a,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],d.client=b.client||!1,d.escapeFunction=b.escape||o.escapeXML,d.compileDebug=!1!==b.compileDebug,d.debug=!!b.debug,d.filename=b.filename,d.delimiter=b.delimiter||c.delimiter||r,d.strict=b.strict||!1,d.context=b.context,d.cache=b.cache||!1,d.rmWhitespace=b.rmWhitespace,d.root=b.root,d.localsName=b.localsName||c.localsName||s,d.strict?d._with=!1:d._with=void 0===b._with||b._with,this.opts=d,this.regex=this.createRegex()}var m=a("fs"),n=a("path"),o=a("./utils"),p=!1,q=a("../package.json").version,r="%",s="locals",t=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename"],u=t.concat("cache"),v=/^\uFEFF/;c.cache=o.cache,c.fileLoader=m.readFileSync,c.localsName=s,c.resolveInclude=function(a,b,c){var d=n.dirname,e=n.extname,f=n.resolve,g=f(c?b:d(b),a);return e(a)||(g+=".ejs"),g},c.compile=function(a,b){var c;return b&&b.scope&&(p||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),p=!0),b.context||(b.context=b.scope),delete b.scope),c=new l(a,b),c.compile()},c.render=function(a,b,c){var d=b||{},f=c||{};return 2==arguments.length&&o.shallowCopyFromList(f,d,t),e(f,a)(d)},c.renderFile=function(){var a,b=arguments[0],c=arguments[arguments.length-1],d={filename:b};return arguments.length>2?(a=arguments[1],3===arguments.length?a.settings&&a.settings["view options"]?o.shallowCopyFromList(d,a.settings["view options"],u):o.shallowCopyFromList(d,a,u):o.shallowCopy(d,arguments[2]),d.filename=b):a={},f(d,a,c)},c.clearCache=function(){c.cache.reset()},l.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},l.prototype={createRegex:function(){var a="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",b=o.escapeRegExpChars(this.opts.delimiter);return a=a.replace(/%/g,b),new RegExp(a)},compile:function(){var a,b,c=this.opts,d="",e="",f=c.escapeFunction;this.source||(this.generateSource(),d+="  var __output = [], __append = __output.push.bind(__output);\n",!1!==c._with&&(d+="  with ("+c.localsName+" || {}) {\n",e+="  }\n"),e+='  return __output.join("");\n',this.source=d+this.source+e),a=c.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(c.filename?JSON.stringify(c.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,c.debug&&console.log(a),c.client&&(a="escapeFn = escapeFn || "+f.toString()+";\n"+a,c.compileDebug&&(a="rethrow = rethrow || "+j.toString()+";\n"+a)),c.strict&&(a='"use strict";\n'+a);try{b=new Function(c.localsName+", escapeFn, include, rethrow",a)}catch(a){throw a instanceof SyntaxError&&(c.filename&&(a.message+=" in "+c.filename),a.message+=" while compiling ejs\n\n",a.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",a.message+="https://github.com/RyanZim/EJS-Lint"),a}if(c.client)return b.dependencies=this.dependencies,b;var g=function(a){var d=function(b,d){var e=o.shallowCopy({},a);return d&&(e=o.shallowCopy(e,d)),h(b,c)(e)};return b.apply(c.context,[a||{},f,d,j])};return g.dependencies=this.dependencies,g},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/\r/g,"").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var a=this,b=this.parseTemplateText(),d=this.opts.delimiter;b&&b.length&&b.forEach(function(e,f){var g,h,j,k,l,m;if(0===e.indexOf("<"+d)&&0!==e.indexOf("<"+d+d)&&(h=b[f+2])!=d+">"&&h!="-"+d+">"&&h!="_"+d+">")throw new Error('Could not find matching close tag for "'+e+'".');if((j=e.match(/^\s*include\s+(\S+)/))&&(g=b[f-1])&&(g=="<"+d||g=="<"+d+"-"||g=="<"+d+"_"))return k=o.shallowCopy({},a.opts),l=i(j[1],k),m=a.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(l.template)+"\n      , __filename = "+JSON.stringify(l.filename)+";\n      try {\n"+l.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+l.source+"    ; }).call(this)\n",a.source+=m,void a.dependencies.push(c.resolveInclude(j[1],k.filename));a.scanLine(e)})},parseTemplateText:function(){for(var a,b=this.templateText,c=this.regex,d=c.exec(b),e=[];d;)a=d.index,0!==a&&(e.push(b.substring(0,a)),b=b.slice(a)),e.push(d[0]),b=b.slice(d[0].length),d=c.exec(b);return b&&e.push(b),e},scanLine:function(a){function b(){c.truncate?(a=a.replace(/^(?:\r\n|\r|\n)/,""),c.truncate=!1):c.opts.rmWhitespace&&(a=a.replace(/^\n/,"")),a&&(a=a.replace(/\\/g,"\\\\"),a=a.replace(/\n/g,"\\n"),a=a.replace(/\r/g,"\\r"),a=a.replace(/"/g,'\\"'),c.source+='    ; __append("'+a+'")\n')}var c=this,d=this.opts.delimiter,e=0;switch(e=a.split("\n").length-1,a){case"<"+d:case"<"+d+"_":this.mode=l.modes.EVAL;break;case"<"+d+"=":this.mode=l.modes.ESCAPED;break;case"<"+d+"-":this.mode=l.modes.RAW;break;case"<"+d+"#":this.mode=l.modes.COMMENT;break;case"<"+d+d:this.mode=l.modes.LITERAL,this.source+='    ; __append("'+a.replace("<"+d+d,"<"+d)+'")\n';break;case d+d+">":this.mode=l.modes.LITERAL,this.source+='    ; __append("'+a.replace(d+d+">",d+">")+'")\n';break;case d+">":case"-"+d+">":case"_"+d+">":this.mode==l.modes.LITERAL&&b(),this.mode=null,this.truncate=0===a.indexOf("-")||0===a.indexOf("_");break;default:if(this.mode){switch(this.mode){case l.modes.EVAL:case l.modes.ESCAPED:case l.modes.RAW:a.lastIndexOf("//")>a.lastIndexOf("\n")&&(a+="\n")}switch(this.mode){case l.modes.EVAL:this.source+="    ; "+a+"\n";break;case l.modes.ESCAPED:this.source+="    ; __append(escapeFn("+k(a)+"))\n";break;case l.modes.RAW:this.source+="    ; __append("+k(a)+")\n";break;case l.modes.COMMENT:break;case l.modes.LITERAL:b()}}else b()}c.opts.compileDebug&&e&&(this.currentLine+=e,this.source+="    ; __line = "+this.currentLine+"\n")}},c.escapeXML=o.escapeXML,c.__express=c.renderFile,a.extensions&&(a.extensions[".ejs"]=function(a,b){var d=b||a.filename,e={filename:d,client:!0},f=g(d).toString(),h=c.compile(f,e);a._compile("module.exports = "+h.toString()+";",d)}),c.VERSION=q,c.name="ejs","undefined"!=typeof window&&(window.ejs=c)},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(a,b,c){"use strict";function d(a){return f[a]||a}var e=/[|\\{}()[\]^$+*?.]/g;c.escapeRegExpChars=function(a){return a?String(a).replace(e,"\\$&"):""};var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},g=/[&<>\'"]/g;c.escapeXML=function(a){return void 0==a?"":String(a).replace(g,d)},c.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},c.shallowCopy=function(a,b){b=b||{};for(var c in b)a[c]=b[c];return a},c.shallowCopyFromList=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];void 0!==b[e]&&(a[e]=b[e])}return a},c.cache={_data:{},set:function(a,b){this._data[a]=b},get:function(a){return this._data[a]},reset:function(){this._data={}}}},{}],3:[function(a,b,c){},{}],4:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:5}],5:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],6:[function(a,b,c){b.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.5.6",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.0.1",eslint:"^3.0.0","git-directory-deploy":"^1.5.1",istanbul:"~0.4.3",jake:"^8.0.0",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^3.0.2","uglify-js":"^2.6.2"},engines:{node:">=0.10.0"},scripts:{test:"mocha",lint:'eslint "**/*.js" Jakefile',coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"jake doc",devdoc:"jake doc[dev]"}}},{}]},{},[1])(1)}())}(),function(a,b){var c=injector.get("$rootScope"),d=injector.get("transferredSharedDataService"),e=injector.get("modelDataService"),f=injector.get("socketService"),g=injector.get("routeProvider"),h=injector.get("eventTypeProvider"),j=injector.get("windowDisplayService"),k=injector.get("windowManagerService"),l=injector.get("hotkeys"),m=injector.get("armyService"),n=injector.get("villageService"),o=injector.get("mapService"),p=injector.get("$filter");define("two/eventQueue",function(){var a={},b={};return b.bind=function(b,c){a.hasOwnProperty(b)||(a[b]=[]),a[b].push(c)},b.trigger=function(b,c){a.hasOwnProperty(b)&&a[b].forEach(function(a){a.apply(this,c)})},b}),define("two/utils",["helper/time"],function(a){var b={};return b.randomSeconds=function(a){a=parseInt(a,10);var b=a+a/2,c=a-a/2;return Math.round(Math.random()*(b-c)+c)},b.time2seconds=function(a){return a=a.split(":"),a[0]=60*parseInt(a[0],10)*60,a[1]=60*parseInt(a[1],10),a[2]=parseInt(a[2],10),a.reduce(function(a,b){return a+b})},b.emitNotif=function(a,b){var d="success"===a?h.MESSAGE_SUCCESS:h.MESSAGE_ERROR;c.$broadcast(d,{message:b})},b.genVillageLabel=function(a){return a.name+" ("+a.x+"|"+a.y+")"},b.isValidCoords=function(a){return/\s*\d{2,3}\|\d{2,3}\s*/.test(a)},b.isValidDateTime=function(a){return/^\s*([01][0-9]|2[0-3]):[0-5]\d:[0-5]\d(:\d{1,3})? (0[1-9]|[12][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/\d{4}\s*$/.test(a)},b.fixDate=function(a){var b=a.split(" "),c=b[0],d=b[1].split("/");return c+" "+d[1]+"/"+d[0]+"/"+d[2]},b.guid=function(){return Math.floor(16777216*Math.random()).toString(16)},b.matchesElem=function(a,b){return!!$(a).parents(b).length},b.getTimeFromString=function(a,b){var c=a.trim().split(" "),d=c[0].split(":"),e=c[1].split("/"),f=d[0],g=d[1],h=d[2],i=d[3]||null,j=parseInt(e[0],10)-1,k=e[1],l=e[2],e=new Date(l,j,k,f,g,h,i);return e.getTime()+(b||0)},b.formatDate=function(a,b){return p("readableDateFilter")(a,null,c.GAME_TIMEZONE,c.GAME_TIME_OFFSET,b||"HH:mm:ss dd/MM/yyyy")},b.getTimeOffset=function(){return 1e3*a.gameDate().getTimezoneOffset()*60+c.GAME_TIME_OFFSET},b.xhrGet=function(a,b,c){if(!a)return!1;c=c||"text",b=b||function(){};var d;d=new XMLHttpRequest,d.open("GET",a,!0),d.responseType=c,d.addEventListener("load",function(){b(d.response)},!1),d.send()},b}),define("two/locale",["conf/locale","i18n"],function(a,b){function c(a,b,c){if(!d.hasOwnProperty(a))return console.error("Language for module "+a+" not created");var e=Array.from(arguments).slice(1),g=f[a];return d[a][g].apply(this,e)}var d={},e={},f={},g=a.LANGUAGE.split("_")[0],h=function(a){for(var b in a)return b};return c.create=function(a,c,i){if(d.hasOwnProperty(a))return!1;d[a]={};var j=c.hasOwnProperty(g),k=c.hasOwnProperty(i);e[a]=k?i:h(c),f[a]=j?g:e[a];for(var l in c)d[a][l]=b.create({values:c[l]})},c.change=function(a,b){d[a].hasOwnProperty(b)?f[a]=b:(console.error("Language "+b+" of module "+a+" not created. Selection default ("+e[a]+")"),f[a]=e[a])},c.current=function(a){return f[a]},c.eachLang=function(a,b){var c=d[a];for(var e in c)b(e,c[e]("langName"))},c}),define("two/ready",["conf/gameStates"],function(a){var b=function(f,g){g=g||["map"];var i=function(a){g=g.filter(function(b){return b!==a}),g.length||f()},j={map:function(){if(d.getSharedData("MapController").isInitialized)return i("map");c.$on(h.MAP_INITIALIZED,function(){i("map")})},tribe_relations:function(){var a=e.getSelectedCharacter();if(a){var b=a.getTribeRelations();if(!a.getTribeId()||b)return i("tribe_relations")}var d=c.$on(h.TRIBE_RELATION_LIST,function(){d(),i("tribe_relations")})},initial_village:function(){if(e.getGameState().getGameState(a.INITIAL_VILLAGE_READY))return i("initial_village");c.$on(h.GAME_STATE_INITIAL_VILLAGE_READY,function(){i("initial_village")})},all_villages_ready:function(){if(e.getGameState().getGameState(a.ALL_VILLAGES_READY))return i("all_villages_ready");c.$on(h.GAME_STATE_ALL_VILLAGES_READY,function(){i("all_villages_ready")})}};if(!d.getSharedData("MapController"))return setTimeout(function(){b(f,g)},100);g.forEach(function(a){j[a]()})};return b}),require(["two/ready","Lockr","ejs"],function(a,b,d){a(function(){var a=e.getSelectedCharacter();d.delimiter="#",b.prefix=a.getId()+"_twOverflow_"+a.getWorldId()+"-",l.add("esc",function(){c.$broadcast(h.WINDOW_CLOSED,null,!0)},["INPUT","SELECT","TEXTAREA"])})}),require(["two/locale"],function(a){a.create("common",{en:{start:"Start",started:"Uruchomiony",pause:"Pauza",paused:"Wstrzymany",stop:"Zatrzymany",stopped:"Zatrzymany",status:"Status",none:"Żaden",info:"Informacje",settings:"Ustawienia",others:"Inne",village:"Wioska",villages:"Wioski",building:"Budynek",buildings:"Budynki",level:"Poziom",registers:"Rejestry",filters:"Filtry",add:"Dodaj",waiting:"Oczekujące",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",activate:"Włącz",deactivate:"Wyłącz",units:"Jednostki",officers:"Oficerowie",origin:"Źródło",target:"Cel",save:"Zapisz",logs:"Logi",headquarter:"Ratusz",barracks:"Koszary",tavern:"Tawerna",hospital:"Szpital",preceptory:"Komturia",chapel:"Kaplica",church:"Kościół",academy:"Akademia",rally_point:"Plac",statue:"Piedestał",market:"Rynek",timber_camp:"Tartak",clay_pit:"Kopalnia gliny",iron_mine:"Huta żelaza",farm:"Farma",warehouse:"Magazyn",wall:"Mur",spear:"Pikinier",sword:"Miecznik",axe:"Topornik",archer:"Łucznik",light_cavalry:"Lekki kawalerzysta",mounted_archer:"Łucznik konny",heavy_cavalry:"Ciężki kawalerzysta",ram:"Taran",catapult:"Katapulta",doppelsoldner:"Berserker",trebuchet:"Trebusz",snob:"Szlachcic",knight:"Rycerz","no-results":"Brak wyników...",selected:"Wybrana",now:"Teraz",costs:"Koszty",duration:"Czas trwania",points:"Punkty",reset:"Resetuj",player:"Gracz",players:"Gracze",next_features:"Następne funkcje",misc:"Różne",colors:"Kolory"},pl:{start:"Start",started:"Uruchomiony",pause:"Pauza",paused:"Wstrzymany",stop:"Zatrzymany",stopped:"Zatrzymany",status:"Status",none:"Żaden",info:"Informacje",settings:"Ustawienia",others:"Inne",village:"Wioska",villages:"Wioski",building:"Budynek",buildings:"Budynki",level:"Poziom",registers:"Rejestry",filters:"Filtry",add:"Dodaj",waiting:"Oczekujące",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",activate:"Włącz",deactivate:"Wyłącz",units:"Jednostki",officers:"Oficerowie",origin:"Źródło",target:"Cel",save:"Zapisz",logs:"Logi",headquarter:"Ratusz",barracks:"Koszary",tavern:"Tawerna",hospital:"Szpital",preceptory:"Komturia",chapel:"Kaplica",church:"Kościół",academy:"Akademia",rally_point:"Plac",statue:"Piedestał",market:"Rynek",timber_camp:"Tartak",clay_pit:"Kopalnia gliny",iron_mine:"Huta żelaza",farm:"Farma",warehouse:"Magazyn",wall:"Mur",spear:"Pikinier",sword:"Miecznik",axe:"Topornik",archer:"Łucznik",light_cavalry:"Lekki kawalerzysta",mounted_archer:"Łucznik konny",heavy_cavalry:"Ciężki kawalerzysta",ram:"Taran",catapult:"Katapulta",doppelsoldner:"Berserker",trebuchet:"Trebusz",snob:"Szlachcic",knight:"Rycerz","no-results":"Brak wyników...",selected:"Wybrana",now:"Teraz",costs:"Koszty",duration:"Czas trwania",points:"Punkty",reset:"Resetuj",player:"Gracz",players:"Gracze",next_features:"Następne funkcje",misc:"Różne",colors:"Kolory"}},"en")}),define("two/autoAlerter",["two/eventQueue","two/queue","models/CommandModel","conf/unitTypes","helper/time","two/locale","two/utils","Lockr"],function(a,b,c,d,e,f,g,h){function i(a){var b=new Date(1e3*a);return convert=b.toLocaleString(),convert}var j=injector.get("modelDataService"),k=injector.get("socketService"),l=injector.get("routeProvider"),m=injector.get("overviewService"),n=!1,o=!1,p=j.getSelectedCharacter().getGlobalInfo(),q={ORIGIN_VILLAGE:"origin_village_name",COMMAND_TYPE:"command_type",TARGET_VILLAGE:"target_village_name",TIME_COMPLETED:"time_completed",COMMAND_PROGRESS:"command_progress",ORIGIN_CHARACTER:"origin_character_name"},r={reverse:!1,column:q.COMMAND_PROGRESS},s=j.getSelectedCharacter(),t=s.getVillageList(),u=[],v=s.data.character_id,w=s.data.character_name,x=[],y=[d.LIGHT_CAVALRY,d.HEAVY_CAVALRY,d.AXE,d.SWORD,d.RAM,d.SNOB,d.TREBUCHET],z=function(){t.forEach(function(a){u.push(a.getId())});var a=p.getCommandListModel().getIncomingCommands().length,b=a>25?a:25;k.emit(l.OVERVIEW_GET_INCOMING,{count:b,offset:0,sorting:r.column,reverse:r.reverse?1:0,groups:[],command_types:["attack"],villages:u},A),setTimeout(z,3e4)},A=function(a){for(var b=[],c=a.commands,d=0;d<c.length;d++)if(m.formatCommand(c[d]),"attack"==c[d].command_type)if(x.includes(c[d].command_id));else{x.push(c[d].command_id),c[d].slowestUnit=B(c[d]);var e=c[d].time_completed,f=i(e),g="",h="";"sword"==c[d].slowestUnit?(h=" [color=03709d]MIECZNIK[/color]",g="sword"):"axe"==c[d].slowestUnit?(h=" [color=e21f1f]TOPORNIK[/color]",g="axe"):"ram"==c[d].slowestUnit?(h=" [color=730202]TARAN[/color]",g="ram"):"snob"==c[d].slowestUnit?(h=" [color=ffee00]SZLACHCIC[/color]",g="snob"):"trebuchet"==c[d].slowestUnit?(h=" [color=494500]TREBUSZ[/color]",g="trebuchet"):"light_cavalry"==c[d].slowestUnit?(h=" [color=d96a19]LEKKA KAWALERIA[/color]",g="light_cavalry"):"heavy_cavalry"==c[d].slowestUnit&&(h=" [color=0111af]CIĘŻKA KAWALERIA[/color]",g="heavy_cavalry"),b.push("[size=large][b]Nadchodzący atak [/b]--- [/size][unit]"+g+"[/unit] [size=large][b]"+h+"[/b][/size][br][b][size=XL] Czas dotarcia: "+f+"[/size][/b][br][size=medium][b] Wioska cel: [/b][village="+c[d].target_village_id+"]"+c[d].target_village_name+"[/village][b] Gracz cel: [/b][player="+v+"]"+w+"[/player][b] [br]Wioska pochodzenia: [/b][village="+c[d].origin_village_id+"]"+c[d].origin_village_name+"[/village][b] Gracz atakujący: [/b][player="+c[d].origin_character_id+"]"+c[d].origin_character_name+"[/player][/size]");var j=b.join();"snob"==g||"trebuchet"==g?(k.emit(l.MESSAGE_REPLY,{message_id:4646,message:j}),b=[]):(k.emit(l.MESSAGE_REPLY,{message_id:4648,message:j}),b=[])}},B=function(a){var c=a.model.duration,d={},e={x:a.origin_x,y:a.origin_y},f={x:a.target_x,y:a.target_y},g=[];return y.forEach(function(c){d[c]=1,g.push({unit:c,duration:b.getTravelTime(e,f,d,a.command_type,{})})}),g=g.map(function(a){return a.duration=Math.abs(a.duration-c),a}).sort(function(a,b){return a.duration-b.duration}),g[0].unit},C={};return C.init=function(){n=!0},C.start=function(){a.trigger("Alerter/started"),o=!0,z()},C.stop=function(){a.trigger("Alerter/stopped"),o=!1},C.isRunning=function(){return o},C.isInitialized=function(){return n},C}),require(["two/ready","two/autoAlerter","Lockr","two/eventQueue","two/autoAlerter/ui"],function(a,b,c,d){if(b.isInitialized())return!1;a(function(){b.init(),b.interface(),a(function(){c.get("alerter-active",!1,!0)&&b.start(),d.bind("Alerter/started",function(){c.set("alerter-active",!0)}),d.bind("Alerter/stopped",function(){c.set("alerter-active",!1)})},["initial_village"])})}),define("two/autoAlerter/ui",["two/autoAlerter","two/FrontButton","two/locale","two/utils","two/eventQueue"],function(a,b,c,d,e){function f(){return c.create("alerter",{en:{title:"Goniec",description:"Automatycznie wysyła informacje o nadchodzacych atakach do pw z 'Attacks' w nazwie.",activated:"Goniec aktywowany",deactivated:"Goniec skończył działanie"},pl:{title:"Goniec",description:"Automatycznie wysyła informacje o nadchodzacych atakach do pw z 'Attacks' w nazwie.",activated:"Goniec aktywowany",deactivated:"Goniec skończył działanie"}},"pl"),g=new b(c("alerter","title"),{classHover:!1,classBlur:!1,tooltip:c("alerter","description")}),g.click(function(){a.isRunning()?(a.stop(),d.emitNotif("success",c("alerter","deactivated"))):(a.start(),d.emitNotif("success",c("alerter","activated")))}),e.bind("Alerter/started",function(){g.$elem.removeClass("btn-green").addClass("btn-red")}),e.bind("Alerter/stopped",function(){g.$elem.removeClass("btn-red").addClass("btn-green")}),a.isRunning()&&e.trigger("Alerter/started"),g}var g;a.interface=function(){a.interface=f()}}),define("two/administrator",["two/locale","two/ready"],function(a,b){var c={};return c.version="1.0.0",c.init=function(){a.create("administrator",{en:{title:"Wojewoda",presets:"Przypisz szablony",army:"Wojsko","presets-all":"Wszystkie szablony","presets.all":"Przypisz wszystkie szablony do wszystkich wiosek.",asigningAll:"Przypisuje wszystkie szablony","presets-name":"Szablony z nazwą","entry/name":"Wpisz frazę","presets.name":"Przypisz szablony zawierające wskazaną frazę do wszystkich wiosek.",asigningName:"Przypisuje określone szablony","presets-group":"Szablony do grupy","entry/group":"Wpisz nazwę grupy","presets.group":"Przypisz wszystkie szablony do wybranej grupy wiosek.",asigningGroup:"Przypisuje szablony do wybranej grupy","presets-ng":"Szablony - zaawansowane przypisywanie","presets.ng":"Przypisz szablony zawierające wskazaną fraze do wybranej grupy wiosek.",asigningNG:"Przypisuje określone szablony do wybranej grupy wiosek",asign:"Przypisz",check:"Sprawdź ilość jednostek w wioskach","check.tip":"Zlicza jednostki w wioskach","check.btn":"Zlicz","army.amounts":"Wojsko",unit:"Jednostka",available:"Dostępne",own:"Posiadane","in-town":"W wioskach",support:"Wsparcie",recruiting:"Rekrutacja",total:"Wszystko",calculated:"Wojsko zliczone!",assigned:"Szablony przypisane!",assignedN:"Szablony przypisane wg nazwy!",assignedG:"Szablony przypisane do grupy wiosek!",assignedNG:"Szablony przypisane wg nazwy do grupy wiosek!","deffensive-troops":"Defensywne jednostki","offensive-troops":"Ofensywne jednostki","special-troops":"Specjalne jednostki"},pl:{title:"Wojewoda",presets:"Przypisz szablony",army:"Wojsko","presets-all":"Wszystkie szablony","presets.all":"Przypisz wszystkie szablony do wszystkich wiosek.",asigningAll:"Przypisuje wszystkie szablony","presets-name":"Szablony z nazwą","entry/name":"Wpisz frazę","presets.name":"Przypisz szablony zawierające wskazaną frazę do wszystkich wiosek.",asigningName:"Przypisuje określone szablony","presets-group":"Szablony do grupy","entry/group":"Wpisz nazwę grupy","presets.group":"Przypisz wszystkie szablony do wybranej grupy wiosek.",asigningGroup:"Przypisuje szablony do wybranej grupy","presets-ng":"Szablony - zaawansowane przypisywanie","presets.ng":"Przypisz szablony zawierające wskazaną fraze do wybranej grupy wiosek.",asigningNG:"Przypisuje określone szablony do wybranej grupy wiosek",asign:"Przypisz",check:"Sprawdź ilość jednostek w wioskach","check.tip":"Zlicza jednostki w wioskach","check.btn":"Zlicz","army.amounts":"Wojsko",unit:"Jednostka",available:"Dostępne",own:"Posiadane","in-town":"W wioskach",support:"Wsparcie",recruiting:"Rekrutacja",total:"Wszystko",calculated:"Wojsko zliczone!",assigned:"Szablony przypisane!",assignedN:"Szablony przypisane wg nazwy!",assignedG:"Szablony przypisane do grupy wiosek!",assignedNG:"Szablony przypisane wg nazwy do grupy wiosek!","deffensive-troops":"Defensywne jednostki","offensive-troops":"Ofensywne jednostki","special-troops":"Specjalne jednostki"}},"pl"),c.initialized=!0},c.run=function(){if(!c.interfaceInitialized)throw new Error("ArmyHelper interface not initialized");b(function(){$player=e.getSelectedCharacter()},["initial_village"])},c}),require(["two/ready","two/administrator","two/administrator/ui"],function(a,b){if(b.initialized)return!1
;a(function(){b.init(),b.interface(),b.run()})}),define("two/administrator/ui",["two/administrator","two/locale","two/ui","two/FrontButton","two/utils"],function(a,b,d,f,g){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va=function(){m.on("click",function(){function a(){var a=k.reduce(function(a,b,c){return a[c]=b,a},{});m.content=a,setTimeout(c,3e3)}function c(){j.forEach(function(a,b){setTimeout(function(){e.emit(f.ASSIGN_PRESETS,{village_id:a.getId(),preset_ids:m.content})},b*l*Math.random())}),g.emitNotif("success",b("administrator","assigned"))}var d=injector.get("modelDataService"),e=injector.get("socketService"),f=injector.get("routeProvider"),h=d.getSelectedCharacter(),j=h.getVillageList(),k=[],l=5e3,m={content:{}};!function(){e.emit(f.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)k.push(a.presets[i].id)}),setTimeout(a,3e3)}()}),n.on("click",function(){function a(){var a=k.reduce(function(a,b,c){return a[c]=b,a},{});m.content=a,setTimeout(c,3e3)}function c(){j.forEach(function(a,b){nameN=a.getName(),setTimeout(function(){e.emit(f.ASSIGN_PRESETS,{village_id:a.getId(),preset_ids:m.content});a.getName()},b*l*Math.random())}),g.emitNotif("success",b("administrator","assignedN"))}var d=injector.get("modelDataService"),e=injector.get("socketService"),f=injector.get("routeProvider"),h=d.getSelectedCharacter(),j=h.getVillageList(),k=[],l=5e3,m={content:{}},n=document.getElementById("presetsName").value;!function(){e.emit(f.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name.indexOf(n)>=0&&k.push(a.presets[i].id)}),setTimeout(a,3e3)}()}),o.on("click",function(){function a(){var a=l.reduce(function(a,b,c){return a[c]=b,a},{});n.content=a,setTimeout(c,3e3)}function c(){k.forEach(function(a,b){setTimeout(function(){e.emit(f.ASSIGN_PRESETS,{village_id:a,preset_ids:n.content})},b*m*Math.random())}),g.emitNotif("success",b("administrator","assignedG"))}var d=injector.get("modelDataService"),e=injector.get("socketService"),f=injector.get("routeProvider"),h=(d.getSelectedCharacter(),d.getGroupList()),j=Ta[0].dataset.value,k=h.getGroupVillageIds(j),l=[],m=5e3,n={content:{}};!function(){e.emit(f.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)l.push(a.presets[i].id)}),setTimeout(a,3e3)}()}),p.on("click",function(){function a(){var a=l.reduce(function(a,b,c){return a[c]=b,a},{});n.content=a,setTimeout(c,3e3)}function c(){k.forEach(function(a,b){setTimeout(function(){e.emit(f.ASSIGN_PRESETS,{village_id:a,preset_ids:n.content})},b*m*Math.random())}),g.emitNotif("success",b("administrator","assignedG"))}var d=injector.get("modelDataService"),e=injector.get("socketService"),f=injector.get("routeProvider"),h=(d.getSelectedCharacter(),d.getGroupList()),j=Ua[0].dataset.value,k=h.getGroupVillageIds(j),l=[],m=5e3,n={content:{}},o=document.getElementById("presetsN").value;!function(){e.emit(f.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name.indexOf(o)>=0&&l.push(a.presets[i].id)}),setTimeout(a,3e3)}()}),q.on("click",function(){function a(){r.html(SpearA),s.html(SpearO),t.html(SpearI),u.html(SpearS),v.html(SpearR),w.html(SpearT),x.html(SwordA),y.html(SwordO),z.html(SwordI),A.html(SwordS),B.html(SwordR),C.html(SwordT),D.html(AxeA),E.html(AxeO),F.html(AxeI),G.html(AxeS),H.html(AxeR),I.html(AxeT),J.html(ArcherA),K.html(ArcherO),L.html(ArcherI),M.html(ArcherS),N.html(ArcherR),O.html(ArcherT),P.html(LightCavalryA),Q.html(LightCavalryO),R.html(LightCavalryI),S.html(LightCavalryS),T.html(LightCavalryR),U.html(LightCavalryT),V.html(MountedArcherA),W.html(MountedArcherO),X.html(MountedArcherI),Y.html(MountedArcherS),Z.html(MountedArcherR),_.html(MountedArcherT),aa.html(HeavyCavalryA),ba.html(HeavyCavalryO),ca.html(HeavyCavalryI),da.html(HeavyCavalryS),ea.html(HeavyCavalryR),fa.html(HeavyCavalryT),ga.html(RamA),ha.html(RamO),ia.html(RamI),ja.html(RamS),ka.html(RamR),la.html(RamT),ma.html(CatapultA),na.html(CatapultO),oa.html(CatapultI),pa.html(CatapultS),qa.html(CatapultR),ra.html(CatapultT),sa.html(TrebuchetA),ta.html(TrebuchetO),ua.html(TrebuchetI),va.html(TrebuchetS),wa.html(TrebuchetR),xa.html(TrebuchetT),ya.html(BerserkerA),za.html(BerserkerO),Aa.html(BerserkerI),Ba.html(BerserkerS),Ca.html(BerserkerR),Da.html(BerserkerT),Ea.html(SnobA),Fa.html(SnobO),Ga.html(SnobI),Ha.html(SnobS),Ia.html(SnobR),Ja.html(SnobT),Ka.html(KnightA),La.html(KnightO),Ma.html(KnightI),Na.html(KnightS),Oa.html(KnightR),Pa.html(KnightT),g.emitNotif("success",b("administrator","calculated"))}var c=injector.get("modelDataService"),d=(injector.get("socketService"),injector.get("routeProvider"),c.getSelectedCharacter()),e=d.getVillageList();SpearA=0,SpearO=0,SpearI=0,SpearS=0,SpearR=0,SpearT=0,SwordA=0,SwordO=0,SwordI=0,SwordS=0,SwordR=0,SwordT=0,AxeA=0,AxeO=0,AxeI=0,AxeS=0,AxeR=0,AxeT=0,ArcherA=0,ArcherO=0,ArcherI=0,ArcherS=0,ArcherR=0,ArcherT=0,LightCavalryA=0,LightCavalryO=0,LightCavalryI=0,LightCavalryS=0,LightCavalryR=0,LightCavalryT=0,MountedArcherA=0,MountedArcherO=0,MountedArcherI=0,MountedArcherS=0,MountedArcherR=0,MountedArcherT=0,HeavyCavalryA=0,HeavyCavalryO=0,HeavyCavalryI=0,HeavyCavalryS=0,HeavyCavalryR=0,HeavyCavalryT=0,RamA=0,RamO=0,RamI=0,RamS=0,RamR=0,RamT=0,CatapultA=0,CatapultO=0,CatapultI=0,CatapultS=0,CatapultR=0,CatapultT=0,TrebuchetA=0,TrebuchetO=0,TrebuchetI=0,TrebuchetS=0,TrebuchetR=0,TrebuchetT=0,BerserkerA=0,BerserkerO=0,BerserkerI=0,BerserkerS=0,BerserkerR=0,BerserkerT=0,SnobA=0,SnobO=0,SnobI=0,SnobS=0,SnobR=0,SnobT=0,KnightA=0,KnightO=0,KnightI=0,KnightS=0,KnightR=0,KnightT=0,function(){e.forEach(function(a){var b=a.unitInfo,c=b.units,d=c.spear,e=c.sword,f=c.axe,g=c.archer,h=c.light_cavalry,i=c.mounted_archer,j=c.heavy_cavalry,k=c.ram,l=c.catapult,m=c.trebuchet,n=c.doppelsoldner,o=c.snob,p=c.knight;SpearA+=d.available,SpearO+=d.own,SpearI+=d.in_town,SpearS+=d.support,SpearR+=d.recruiting,SpearT+=d.total,SwordA+=e.available,SwordO+=e.own,SwordI+=e.in_town,SwordS+=e.support,SwordR+=e.recruiting,SwordT+=e.total,AxeA+=f.available,AxeO+=f.own,AxeI+=f.in_town,AxeS+=f.support,AxeR+=f.recruiting,AxeT+=f.total,ArcherA+=g.available,ArcherO+=g.own,ArcherI+=g.in_town,ArcherS+=g.support,ArcherR+=g.recruiting,ArcherT+=g.total,LightCavalryA+=h.available,LightCavalryO+=h.own,LightCavalryI+=h.in_town,LightCavalryS+=h.support,LightCavalryR+=h.recruiting,LightCavalryT+=h.total,MountedArcherA+=i.available,MountedArcherO+=i.own,MountedArcherI+=i.in_town,MountedArcherS+=i.support,MountedArcherR+=i.recruiting,MountedArcherT+=i.total,HeavyCavalryA+=j.available,HeavyCavalryO+=j.own,HeavyCavalryI+=j.in_town,HeavyCavalryS+=j.support,HeavyCavalryR+=j.recruiting,HeavyCavalryT+=j.total,RamA+=k.available,RamO+=k.own,RamI+=k.in_town,RamS+=k.support,RamR+=k.recruiting,RamT+=k.total,CatapultA+=l.available,CatapultO+=l.own,CatapultI+=l.in_town,CatapultS+=l.support,CatapultR+=l.recruiting,CatapultT+=l.total,TrebuchetA+=m.available,TrebuchetO+=m.own,TrebuchetI+=m.in_town,TrebuchetS+=m.support,TrebuchetR+=m.recruiting,TrebuchetT+=m.total,BerserkerA+=n.available,BerserkerO+=n.own,BerserkerI+=n.in_town,BerserkerS+=n.support,BerserkerR+=n.recruiting,BerserkerT+=n.total,SnobA+=o.available,SnobO+=o.own,SnobI+=o.in_town,SnobS+=o.support,SnobR+=o.recruiting,SnobT+=o.total,KnightA+=p.available,KnightO+=p.own,KnightI+=p.in_town,KnightS+=p.support,KnightR+=p.recruiting,KnightT+=p.total}),setTimeout(a,3e3)}()}),c.$on(h.GROUPS_UPDATED,function(){Ya()}),Ta.on("selectSelected",function(){selectedGroup1=Ta[0].dataset.value}),Ua.on("selectSelected",function(){selectedGroup2=Ua[0].dataset.value})},Wa=function(){return Qa=e.getGroupList().getGroups(),j=new d("ArmyHelper",{activeTab:"presets",template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("administrator", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-two-col"><div class="tab" tab="presets"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("administrator", "presets") #></a></div></div></div><div class="tab" tab="army"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("administrator", "army") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-presets"><h5 class="twx-section"><#= locale("administrator", "presets-all") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col><col width="18%"></colgroup><tbody><tr><td class="item-name"><#= locale("administrator", "presets.all") #></td><td class="item-asignAll"><span class="btn btn-orange addSelected" tooltip="<#= locale("administrator", "asigningAll") #>"><#= locale("administrator", "asign") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("administrator", "presets-name") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="presetsName" value="" autocomplete="off" placeholder="<#= locale("administrator", "entry/name") #>"></td><td class="item-name"><#= locale("administrator", "presets.name") #></td><td class="item-asignName"><span class="btn btn-orange addSelected" tooltip="<#= locale("administrator", "asigningName") #>"><#= locale("administrator", "asign") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("administrator", "presets-group") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="18%"></colgroup><tbody><tr><td><select data-setting="group1" class="group1"></select></td><td class="item-name"><#= locale("administrator", "presets.group") #></td><td class="item-asignGroup"><span class="btn btn-orange addSelected" tooltip="<#= locale("administrator", "asigningGroup") #>"><#= locale("administrator", "asign") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("administrator", "presets-ng") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col width="20%"><col><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="presetsN" value="" autocomplete="off" placeholder="<#= locale("administrator", "entry/name") #>"></td><td><select data-setting="group2" class="group2"></select></td><td class="item-name"><#= locale("administrator", "presets.ng") #></td><td class="item-asignNG"><span class="btn btn-orange addSelected" tooltip="<#= locale("administrator", "asigningNG") #>"><#= locale("administrator", "asign") #></span></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-army"><h5 class="twx-section"><#= locale("administrator", "check") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col></colgroup><tbody><tr><td class="item-check"><span class="btn btn-orange addSelected" tooltip="<#= locale("administrator", "check.tip") #>"><#= locale("administrator", "check.btn") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("administrator", "army.amounts") #></h5><form class="addForm1"><table class="tbl-border-light tbl-striped"><colgroup><col><col width="12%"><col width="12%"><col width="12%"><col width="12%"><col width="12%"><col width="12%"></colgroup><tbody><tr><th class="item-head"><#= locale("administrator", "unit") #></th><th class="item-head"><#= locale("administrator", "available") #></th><th class="item-head"><#= locale("administrator", "own") #></th><th class="item-head"><#= locale("administrator", "in-town") #></th><th class="item-head"><#= locale("administrator", "support") #></th><th class="item-head"><#= locale("administrator", "recruiting") #></th><th class="item-head"><#= locale("administrator", "total") #></th></tr><tr><td class="item-nameX" colspan="7"><#= locale("administrator", "deffensive-troops") #></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-spear"></span> <#= locale("common", "spear") #></td><td class="item-spear-a"></td><td class="item-spear-o"></td><td class="item-spear-i"></td><td class="item-spear-s"></td><td class="item-spear-r"></td><td class="item-spear-t"></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-sword"></span> <#= locale("common", "sword") #></td><td class="item-sword-a"></td><td class="item-sword-o"></td><td class="item-sword-i"></td><td class="item-sword-s"></td><td class="item-sword-r"></td><td class="item-sword-t"></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-archer"></span> <#= locale("common", "archer") #></td><td class="item-archer-a"></td><td class="item-archer-o"></td><td class="item-archer-i"></td><td class="item-archer-s"></td><td class="item-archer-r"></td><td class="item-archer-t"></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-heavy_cavalry"></span> <#= locale("common", "heavy_cavalry") #></td><td class="item-hc-a"></td><td class="item-hc-o"></td><td class="item-hc-i"></td><td class="item-hc-s"></td><td class="item-hc-r"></td><td class="item-hc-t"></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-trebuchet"></span> <#= locale("common", "trebuchet") #></td><td class="item-trebuchet-a"></td><td class="item-trebuchet-o"></td><td class="item-trebuchet-i"></td><td class="item-trebuchet-s"></td><td class="item-trebuchet-r"></td><td class="item-trebuchet-t"></td></tr><tr><td class="item-nameX" colspan="7"><#= locale("administrator", "offensive-troops") #></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-axe"></span> <#= locale("common", "axe") #></td><td class="item-axe-a"></td><td class="item-axe-o"></td><td class="item-axe-i"></td><td class="item-axe-s"></td><td class="item-axe-r"></td><td class="item-axe-t"></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-light_cavalry"></span> <#= locale("common", "light_cavalry") #></td><td class="item-lc-a"></td><td class="item-lc-o"></td><td class="item-lc-i"></td><td class="item-lc-s"></td><td class="item-lc-r"></td><td class="item-lc-t"></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-mounted_archer"></span> <#= locale("common", "mounted_archer") #></td><td class="item-ma-a"></td><td class="item-ma-o"></td><td class="item-ma-i"></td><td class="item-ma-s"></td><td class="item-ma-r"></td><td class="item-ma-t"></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-ram"></span> <#= locale("common", "ram") #></td><td class="item-ram-a"></td><td class="item-ram-o"></td><td class="item-ram-i"></td><td class="item-ram-s"></td><td class="item-ram-r"></td><td class="item-ram-t"></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-catapult"></span> <#= locale("common", "catapult") #></td><td class="item-catapult-a"></td><td class="item-catapult-o"></td><td class="item-catapult-i"></td><td class="item-catapult-s"></td><td class="item-catapult-r"></td><td class="item-catapult-t"></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-doppelsoldner"></span> <#= locale("common", "doppelsoldner") #></td><td class="item-berserker-a"></td><td class="item-berserker-o"></td><td class="item-berserker-i"></td><td class="item-berserker-s"></td><td class="item-berserker-r"></td><td class="item-berserker-t"></td></tr><tr><td class="item-nameX" colspan="7"><#= locale("administrator", "special-troops") #></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-snob"></span> <#= locale("common", "snob") #></td><td class="item-snob-a"></td><td class="item-snob-o"></td><td class="item-snob-i"></td><td class="item-snob-s"></td><td class="item-snob-r"></td><td class="item-snob-t"></td></tr><tr><td class="item-name"><span class="icon-bg-black icon-34x34-unit-knight"></span> <#= locale("common", "knight") #></td><td class="item-knight-a"></td><td class="item-knight-o"></td><td class="item-knight-i"></td><td class="item-knight-s"></td><td class="item-knight-r"></td><td class="item-knight-t"></td></tr></tbody></table></form></div></div></div>',css:"#ArmyHelper .addForm input{width:100%}#ArmyHelper .addForm td{text-align:center}#ArmyHelper .addForm th{text-align:center;padding:0}#ArmyHelper .addForm span{height:26px;line-height:26px;padding:0 10px}#ArmyHelper .group1{width:175px}#ArmyHelper .group2{width:175px}#ArmyHelper .addForm1 input{width:100%}#ArmyHelper .addForm1 td{text-align:center;height:34px;line-height:34px}#ArmyHelper .addForm1 th{text-align:center;padding:0}#ArmyHelper .addForm1 span{height:34px;line-height:34px;padding:0 10px}#ArmyHelper .addForm1 .item-name{text-align:left}",replaces:{locale:b,version:a.version,types:["village","character"]}}),k=new f(b("administrator","title"),{classHover:!1,classBlur:!1,onClick:function(){j.openWindow()}}),l=$(j.$window),m=l.find(".item-asignAll span"),n=l.find(".item-asignName span"),o=l.find(".item-asignGroup span"),p=l.find(".item-asignNG span"),q=l.find(".item-check span"),r=l.find(".item-spear-a"),s=l.find(".item-spear-o"),t=l.find(".item-spear-i"),u=l.find(".item-spear-s"),v=l.find(".item-spear-r"),w=l.find(".item-spear-t"),x=l.find(".item-sword-a"),y=l.find(".item-sword-o"),z=l.find(".item-sword-i"),A=l.find(".item-sword-s"),B=l.find(".item-sword-r"),C=l.find(".item-sword-t"),D=l.find(".item-axe-a"),E=l.find(".item-axe-o"),F=l.find(".item-axe-i"),G=l.find(".item-axe-s"),H=l.find(".item-axe-r"),I=l.find(".item-axe-t"),J=l.find(".item-archer-a"),K=l.find(".item-archer-o"),L=l.find(".item-archer-i"),M=l.find(".item-archer-s"),N=l.find(".item-archer-r"),O=l.find(".item-archer-t"),P=l.find(".item-lc-a"),Q=l.find(".item-lc-o"),R=l.find(".item-lc-i"),S=l.find(".item-lc-s"),T=l.find(".item-lc-r"),U=l.find(".item-lc-t"),V=l.find(".item-ma-a"),W=l.find(".item-ma-o"),X=l.find(".item-ma-i"),Y=l.find(".item-ma-s"),Z=l.find(".item-ma-r"),_=l.find(".item-ma-t"),aa=l.find(".item-hc-a"),ba=l.find(".item-hc-o"),ca=l.find(".item-hc-i"),da=l.find(".item-hc-s"),ea=l.find(".item-hc-r"),fa=l.find(".item-hc-t"),ga=l.find(".item-ram-a"),ha=l.find(".item-ram-o"),ia=l.find(".item-ram-i"),ja=l.find(".item-ram-s"),ka=l.find(".item-ram-r"),la=l.find(".item-ram-t"),ma=l.find(".item-catapult-a"),na=l.find(".item-catapult-o"),oa=l.find(".item-catapult-i"),pa=l.find(".item-catapult-s"),qa=l.find(".item-catapult-r"),ra=l.find(".item-catapult-t"),sa=l.find(".item-trebuchet-a"),ta=l.find(".item-trebuchet-o"),ua=l.find(".item-trebuchet-i"),va=l.find(".item-trebuchet-s"),wa=l.find(".item-trebuchet-r"),xa=l.find(".item-trebuchet-t"),ya=l.find(".item-berserker-a"),za=l.find(".item-berserker-o"),Aa=l.find(".item-berserker-i"),Ba=l.find(".item-berserker-s"),Ca=l.find(".item-berserker-r"),Da=l.find(".item-berserker-t"),Ea=l.find(".item-snob-a"),Fa=l.find(".item-snob-o"),Ga=l.find(".item-snob-i"),Ha=l.find(".item-snob-s"),Ia=l.find(".item-snob-r"),Ja=l.find(".item-snob-t"),Ka=l.find(".item-knight-a"),La=l.find(".item-knight-o"),Ma=l.find(".item-knight-i"),Na=l.find(".item-knight-s"),Oa=l.find(".item-knight-r"),Pa=l.find(".item-knight-t"),Ra=l.find(".group1"),Sa=l.find(".group2"),Ta=l.find(".group1"),Ua=l.find(".group2"),Ya(),Za(),Va(),a.interfaceInitialized=!0,j},Xa=function(a,b){var c=document.createElement("span");for(var d in b)c.dataset[d]=b[d];a.append(c)},Ya=function(){var a=(Ra.find(".custom-select-handler").html(""),Ra.find(".custom-select-data").html(""));for(var b in Qa){var c=Qa[b].name;Xa(a,{name:c,value:b,icon:Qa[b].icon}),Ra.append(a)}},Za=function(){var a=(Sa.find(".custom-select-handler").html(""),Sa.find(".custom-select-data").html(""));for(var b in Qa){var c=Qa[b].name;Xa(a,{name:c,value:b,icon:Qa[b].icon}),Sa.append(a)}};a.interface=function(){a.interface=Wa()}}),define("two/attackView",["two/queue","two/eventQueue","two/ready","two/locale","models/CommandModel","conf/unitTypes","Lockr","two/utils","helper/math","helper/mapconvert","struct/MapData"],function(a,b,d,i,j,k,l,m,n,o,p){for(var q={ORIGIN_VILLAGE:"origin_village_name",COMMAND_TYPE:"command_type",TARGET_VILLAGE:"target_village_name",TIME_COMPLETED:"time_completed",COMMAND_PROGRESS:"command_progress",ORIGIN_CHARACTER:"origin_character_name"},r={ATTACK:"attack",SUPPORT:"support",RELOCATE:"relocate"},s={COMMAND_TYPES:"commandTypes",VILLAGE:"village",INCOMING_UNITS:"incomingUnits"},t=[k.LIGHT_CAVALRY,k.HEAVY_CAVALRY,k.AXE,k.SWORD,k.RAM,k.SNOB,k.TREBUCHET],u={},v=0;v<t.length;v++)u[t[v]]=!0;var w,x=!1,y={},z=injector.get("overviewService"),A=[],B={},C={},D={reverse:!1,column:q.COMMAND_PROGRESS},E=function(){var a,b,c=[s.COMMAND_TYPES],d=e.getSelectedVillage().getId(),f={};for(a=0;a<c.length;a++)for(b in B[c[a]])if(f[c[a]]||(f[c[a]]=[]),B[c[a]][b])switch(c[a]){case s.COMMAND_TYPES:"ATTACK"===b?f[c[a]].push(r.ATTACK):"SUPPORT"===b?f[c[a]].push(r.SUPPORT):"RELOCATE"===b&&f[c[a]].push(r.RELOCATE)}C=f,C.village=B[s.VILLAGE]?[d]:[]},F=function(a,c){c?B[a][c]=!B[a][c]:B[a]=!B[a],E(),b.trigger("attackView/filtersChanged")},G=function(a){if(!q[a])return!1;q[a]===D.column?D.reverse=!D.reverse:(D.column=q[a],D.reverse=!1),b.trigger("attackView/sortingChanged")},H=function(){P()},I=function(a,c){b.trigger("attackView/commandCancelled",[c.id||c.command_id])},J=function(a,c){for(var d=0;d<A.length;d++)A[d].command_id===c.command_id&&A.splice(d,1);b.trigger("attackView/commandIgnored",[c.command_id])},K=function(a,c){for(var d=0;d<A.length;d++)A[d].target_village_id===c.village_id&&(A[d].target_village_name=c.name,A[d].targetVillage.name=c.name);b.trigger("attackView/villageRenamed",[c])},L=function(a,b){C[s.VILLAGE].length&&(C[s.VILLAGE]=[b],P())},M=function(){l.set("attackView-filters",B),P()},N=function(){P()},O=function(a){A=a.commands;for(var c=0;c<A.length;c++)z.formatCommand(A[c]),A[c].slowestUnit=Q(A[c]);A=A.filter(function(a){return B[s.INCOMING_UNITS][a.slowestUnit]}),b.trigger("attackView/commandsLoaded",[A])},P=function(){var a=w.getCommandListModel().getIncomingCommands().length,b=a>25?a:25;f.emit(g.OVERVIEW_GET_INCOMING,{count:b,offset:0,sorting:D.column,reverse:D.reverse?1:0,groups:[],command_types:C[s.COMMAND_TYPES],villages:C[s.VILLAGE]},O)},Q=function(b){var c=b.model.duration,d={},e={x:b.origin_x,y:b.origin_y},f={x:b.target_x,y:b.target_y},g=[];return t.forEach(function(c){d[c]=1,g.push({unit:c,duration:a.getTravelTime(e,f,d,b.command_type,{})})}),g=g.map(function(a){return a.duration=Math.abs(a.duration-c),a}).sort(function(a,b){return a.duration-b.duration}),g[0].unit},R=function(){return A},S=function(){return B},T=function(){return D},U=function(){y[h.COMMAND_INCOMING]=c.$on(h.COMMAND_INCOMING,H),y[h.COMMAND_CANCELLED]=c.$on(h.COMMAND_CANCELLED,I),y[h.MAP_SELECTED_VILLAGE]=c.$on(h.MAP_SELECTED_VILLAGE,L),y[h.VILLAGE_NAME_CHANGED]=c.$on(h.VILLAGE_NAME_CHANGED,K),y[h.COMMAND_IGNORED]=c.$on(h.COMMAND_IGNORED,J)},V=function(){for(var a in y)y[a]()},W=function(a,b){return a.sort(function(a,c){return n.actualDistance(b,a)-n.actualDistance(b,c)})},X=function(a,b){if(p.hasTownDataInChunk(a.x,a.y)){var c,d,f,g=p.loadTownData(a.x,a.y,25,25,25),h=[],i=[],j=[],k=[],l=e.getSelectedCharacter().getTribeId(),m=e.getSelectedCharacter().getId();if(g.forEach(function(a){for(d in a.data)for(f in a.data[d])h.push(a.data[d][f])}),i=h.filter(function(a){return null===a.character_id&&a.id>0}),j=h.filter(function(b){return b.character_id===m&&a.id!==b.id}),l&&(k=h.filter(function(a){return l&&a.tribe_id===l})),i.length)c=W(i,a);else if(j.length)c=W(j,a);else{if(!k.length)return b(!1);c=W(k,a)}return b(c[0])}var n=o.scaledGridCoordinates(a.x,a.y,25,25,25),q=0;p.loadTownDataAsync(a.x,a.y,25,25,function(){++q===n.length&&X(a,b)})},Y=function(b,c){X(b.targetVillage,function(d){var e=b.targetVillage,f=d,g=null===f.character_id?"attack":"support";a.addCommand({origin:e,target:f,date:c,dateType:"out",units:{spear:"*",sword:"*",axe:"*",archer:"*",light_cavalry:"*",mounted_archer:"*",heavy_cavalry:"*",ram:"*",catapult:"*",snob:"*",knight:"*",doppelsoldner:"*",trebuchet:"*"},officers:{},type:g,catapultTarget:"wall"}),a.isRunning()||a.start()})},Z=function(a,b){return a.sort(function(a,c){return n.actualDistance(b,a)-n.actualDistance(b,c)})},$=function(a,b){if(p.hasTownDataInChunk(a.x,a.y)){var c,d,f,g=p.loadTownData(a.x,a.y,40,40,40),h=[],i=[],j=e.getSelectedCharacter().getId();return g.forEach(function(a){for(d in a.data)for(f in a.data[d])h.push(a.data[d][f])}),(i=h.filter(function(b){return b.character_id===j&&a.id!==b.id}),i.length)?(c=Z(i,a),b(c[0])):b(!1)}var k=o.scaledGridCoordinates(a.x,a.y,40,40,40),l=0;p.loadTownDataAsync(a.x,a.y,40,40,function(){++l===k.length&&$(a,b)})},_=function(b,c){$(b.targetVillage,function(d){function e(){n>=38?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{heavy_cavalry:"38"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 38 ciężkich kawalerzystów")):q>=350&&r>=250&&k>=125?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{spear:"350",sword:"250",archer:"125"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 350 pik, 250 mieczy i 125 łuczników")):q>=600?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{spear:"600"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 600 pik")):k>=600?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{archer:"600"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 600 łuczników")):r>=1200?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{sword:"1200"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 1200 mieczy")):o>=200?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{light_cavalry:"200"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 200 lekkich kawalerzystów")):p>=200?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{mounted_archer:"200"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 200 łuczników konnych")):l>=1200?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{axe:"1200"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 1200 toporników")):m.emitNotif("error","Brak jednostek spełniających wymogi w najbliższej wiosce. Spróbuj ręczniew Generale!")}var f=(injector.get("modelDataService"),injector.get("socketService")),g=injector.get("routeProvider"),h=d,i=d.id;console.log(i);var j=b.targetVillage,k=0,l=0,n=0,o=0,p=0,q=0,r=0;!function(){f.emit(g.VILLAGE_UNIT_INFO,{village_id:i},function(a){l=a.available_units.axe.total,k=a.available_units.archer.total,n=a.available_units.heavy_cavalry.total,o=a.available_units.light_cavalry.total,p=a.available_units.mounted_archer.total,q=a.available_units.spear.total,r=a.available_units.sword.total}),setTimeout(e,2e3)}()})},aa=function(b,c){$(b.targetVillage,function(d){function e(){n>=80?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{heavy_cavalry:"80"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 80 ciężkich kawalerzystów")):q>=700&&r>=500&&k>=250?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{spear:"700",sword:"500",archer:"250"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 700 pik, 500 mieczy i 250 łuczników")):q>=1200?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{spear:"1200"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 1200 pik")):k>=1200?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{archer:"1200"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 1200 łuczników")):r>=2400?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{sword:"2400"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 2400 mieczy")):o>=400?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{light_cavalry:"400"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 400 lekkich kawalerzystów")):p>=400?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{mounted_archer:"400"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 400 łuczników konnych")):l>=2400?(a.addCommand({origin:h,target:j,date:c,dateType:"arrive",units:{axe:"2400"},officers:{},type:"support",catapultTarget:""}),a.isRunning()||a.start(),m.emitNotif("success","Dodano do Generała mały klin 2400 toporników")):m.emitNotif("error","Brak jednostek spełniających wymogi w najbliższej wiosce. Spróbuj ręczniew Generale!")}var f=(injector.get("modelDataService"),injector.get("socketService")),g=injector.get("routeProvider"),h=d,i=d.id;console.log(i);var j=b.targetVillage,k=0,l=0,n=0,o=0,p=0,q=0,r=0;!function(){f.emit(g.VILLAGE_UNIT_INFO,{village_id:i},function(a){l=a.available_units.axe.total,k=a.available_units.archer.total,n=a.available_units.heavy_cavalry.total,o=a.available_units.light_cavalry.total,p=a.available_units.mounted_archer.total,q=a.available_units.spear.total,r=a.available_units.sword.total}),setTimeout(e,2e3)}()})};return{init:function(){i.create("attackView",{en:{title:"Strażnik","filters.tooltip.current-only":"Tylko aktywna wioska","filters.types":"Rodzaj","filters.tooltip.show-attacks":"Pokaż ataki","filters.tooltip.show-supports":"Pokaż wsparcia","filters.tooltip.show-relocations":"Pokaż przeniesienia","filters.incoming-units":"Nadchodzące jednostki","tooltip.command-type":"Rodzaj","tooltip.slowest-unit":"Najwolniejsza jednostka","command-type":"Rodzaj","slowest-unit":"Co?",actions:"Działania",arrive:"Dotrze",arrivetime:"Czas dotarcia skopiowany!",backtime:"Czas powrotu skopiowany!",spyorigin:"Szpiedzy wysłani do %{name}!","no-incoming":"Brak nadchodzących wojsk.","commands.tooltip.kill":"Wstaw rozkaz klinowania do Kolejki rozkazów. MAŁY KLIN.","commands.tooltip.killBig":"Wstaw rozkaz klinowania do Kolejki rozkazów. DUŻY KLIN.","commands.tooltip.spy":"Szpieguj wioske źródłową.","commands.tooltip.copy-arrival":"Kopiuj czas dotarcia.","commands.tooltip.copy-back":"Kopiuj czas powrotu do wioski źródłowej.","commands.tooltip.set-remove":"Wstaw rozkaz wycofania wojsk przed dotarciem ataku do Kolejki rozkazów."},pl:{title:"Strażnik","filters.tooltip.current-only":"Tylko aktywna wioska","filters.types":"Rodzaj","filters.tooltip.show-attacks":"Pokaż ataki","filters.tooltip.show-supports":"Pokaż wsparcia","filters.tooltip.show-relocations":"Pokaż przeniesienia","filters.incoming-units":"Nadchodzące jednostki","tooltip.command-type":"Rodzaj","tooltip.slowest-unit":"Najwolniejsza jednostka","command-type":"Rodzaj","slowest-unit":"Co?",actions:"Działania",arrive:"Dotrze",arrivetime:"Czas dotarcia skopiowany!",backtime:"Czas powrotu skopiowany!",
spyorigin:"Szpiedzy wysłani do %{name}!","no-incoming":"Brak nadchodzących wojsk.","commands.tooltip.kill":"Wstaw rozkaz klinowania do Kolejki rozkazów. MAŁY KLIN.","commands.tooltip.killBig":"Wstaw rozkaz klinowania do Kolejki rozkazów. DUŻY KLIN.","commands.tooltip.spy":"Szpieguj wioske źródłową.","commands.tooltip.copy-arrival":"Kopiuj czas dotarcia.","commands.tooltip.copy-back":"Kopiuj czas powrotu do wioski źródłowej.","commands.tooltip.set-remove":"Wstaw rozkaz wycofania wojsk przed dotarciem ataku do Kolejki rozkazów."},us:{title:"AttackView","filters.tooltip.current-only":"Current village only","filters.types":"Types","filters.tooltip.show-attacks":"Show attacks","filters.tooltip.show-supports":"Show supports","filters.tooltip.show-relocations":"Show relocations","filters.incoming-units":"Incoming Units","tooltip.command-type":"Command Type","tooltip.slowest-unit":"Slowest Unit","command-type":"CT","slowest-unit":"SU",actions:"Actions",arrive:"Arrive",arrivetime:"Arrive time copied!",backtime:"Back time copied!",spyorigin:"Spies sended on %{name}!","no-incoming":"No commands incoming.","commands.tooltip.spy":"Spy origin village.","commands.tooltip.copy-arrival":"Copy arrival date.","commands.tooltip.copy-back":"Copy backtime date.","commands.tooltip.set-remove":"Set a CommandQueue to remove all troops before the attack hit."}},"pl");var a={};a[s.COMMAND_TYPES]=angular.copy(r),a[s.INCOMING_UNITS]=angular.copy(u),a[s.VILLAGE]=!1,x=!0,w=e.getSelectedCharacter().getGlobalInfo(),B=l.get("attackView-filters",{},!0),angular.merge(B,a),d(function(){E()},["initial_village"]),b.bind("attackView/filtersChanged",M),b.bind("attackView/sortingChanged",N)},version:"1.0.0",loadCommands:P,getCommands:R,getFilters:S,getSortings:T,toggleFilter:F,toggleSorting:G,FILTER_TYPES:s,COMMAND_TYPES:r,UNIT_SPEED_ORDER:t,COLUMN_TYPES:q,registerListeners:U,unregisterListeners:V,setQueueCommand:Y,setQueueSupportCommand:_,setQueueSupportBigCommand:aa}}),require(["two/ready","two/attackView","two/attackView/ui"],function(a,b){if(b.initialized)return!1;a(function(){b.init(),b.interface()})}),define("two/attackView/ui",["two/attackView","two/locale","two/ui","two/FrontButton","two/utils","two/eventQueue","helper/time","conf/unitTypes","ejs"],function(a,b,d,f,g,i,k,l,m){var n,p,q,r,s,t,u,v,w=function(){return n=new d("AttackView",{template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("attackView", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="win-main"><div class="box-paper"><div class="filters"><table class="tbl-border-light"><tbody><tr><th><#= locale("common", "village") #></th></tr><tr><td><div class="box-border-dark icon village" tooltip="<#= locale("attackView", "filters.tooltip.current-only") #>"><span class="icon-34x34-village-info icon-bg-black"></span></div></td></tr></tbody></table><table class="tbl-border-light"><tbody><tr><th><#= locale("attackView", "filters.types") #></th></tr><tr><td><div data-filter="ATTACK" class="box-border-dark icon commandTypes attack" tooltip="<#= locale("attackView", "filters.tooltip.show-attacks") #>"><span class="icon-34x34-attack icon-bg-black"></span></div><div data-filter="SUPPORT" class="box-border-dark icon commandTypes support" tooltip="<#= locale("attackView", "filters.tooltip.show-supports") #>"><span class="icon-34x34-support icon-bg-black"></span></div><div data-filter="RELOCATE" class="box-border-dark icon commandTypes relocate" tooltip="<#= locale("attackView", "filters.tooltip.show-relocations") #>"><span class="icon-34x34-relocate icon-bg-black"></span></div></td></tr></tbody></table><table class="tbl-border-light"><tbody><tr><th><#= locale("attackView", "filters.incoming-units") #></th></tr><tr><td> <# UNIT_SPEED_ORDER.forEach(function(unit) { #> <div data-filter="<#= unit #>" class="box-border-dark icon incomingUnits <#= unit #>" tooltip="<#= locale("common", unit) #>"><span class="icon-34x34-unit-<#= unit #> icon-bg-black"></span></div> <# }) #> </td></tr></tbody></table></div><table class="tbl-border-light commands-table"><colgroup><col width="7%"><col width="15%"><col width=""><col width=""><col width="5%"><col width="13%"><col width="22%"></colgroup><thead class="sorting"><tr><th data-sort="COMMAND_TYPE" tooltip="<#= locale("attackView", "tooltip.command-type") #>"><#= locale("attackView", "command-type") #></th><th data-sort="ORIGIN_CHARACTER"><#= locale("common", "player") #></th><th data-sort="ORIGIN_VILLAGE"><#= locale("common", "origin") #></th><th data-sort="TARGET_VILLAGE"><#= locale("common", "target") #></th><th tooltip="<#= locale("attackView", "tooltip.slowest-unit") #>"><#= locale("attackView", "slowest-unit") #></th><th data-sort="TIME_COMPLETED"><#= locale("attackView", "arrive") #></th><th><#= locale("attackView", "actions") #></th></tr></thead><tbody class="commands"></tbody><tbody class="empty"><tr><td colspan="7"><#= locale("attackView", "no-incoming") #></td></tr></tbody></table></div></div></div>',activeTab:"attacks",replaces:{version:a.version,author:{name:"Relaxeaza",email:"mafrazzrafael@gmail.com",url:"https://gitlab.com/relaxeaza",gitlab_user_id:518047},locale:b,UNIT_SPEED_ORDER:a.UNIT_SPEED_ORDER},css:'#AttackView table.commands-table{table-layout:fixed;font-size:13px}#AttackView table.commands-table th{text-align:center;padding:0}#AttackView table.commands-table td{padding:1px 0;min-height:initial;border:none;text-align:center}#AttackView table.commands-table tr.attack.snob td{background:#ea7d69}#AttackView table.commands-table tr.attack.trebuchet td{background:#eab268}#AttackView table.commands-table tr.support td{background:#6884ea}#AttackView table.commands-table tr.relocate td{background:#afea68}#AttackView table.commands-table .empty td{height:32px}#AttackView .village .coords{font-size:11px;color:#71471a}#AttackView .village .coords:hover{color:#ffde00;text-shadow:0 1px 0 #000}#AttackView .village .name:hover{color:#fff;text-shadow:0 1px 0 #000}#AttackView .village.selected .name{font-weight:bold}#AttackView .character .name:hover{color:#fff;text-shadow:1px 1px 0 #000}#AttackView .progress-wrapper{height:20px;margin-bottom:0}#AttackView .progress-wrapper .progress-text{position:absolute;width:100%;height:100%;text-align:center;z-index:10;padding:0 5px;line-height:20px;color:#f0ffc9;overflow:hidden}#AttackView .filters{height:95px;margin-bottom:10px}#AttackView .filters table{width:auto;float:left;margin:5px}#AttackView .filters .icon{width:38px;float:left;margin:0 6px}#AttackView .filters .icon.active:before{box-shadow:0 0 0 1px #000,-1px -1px 0 2px #ac9c44,0 0 0 3px #ac9c44,0 0 0 4px #000;border-radius:1px;content:"";position:absolute;width:38px;height:38px;left:-1px;top:-1px}#AttackView .filters td{padding:6px}#AttackView .icon-20x20-backtime{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAEMklEQVQ4y42US2xUdRTGf3funZn/PHqnnVdpKZZ2RCWBVESgoZogSAKKEEAlGhVNLMGg0QiJKxYudIdoTEyDj8SFGo2seDUGhEQqRHk/UimDpdAptHMr8+jM3Dv35QJbi9KEszzJ+eU753z5JKYuOQGBUpAa2SLiuPgBPBKGrZAPlSlmoQLYk4ekqUCmEHHL0pslRb7fsNwWF8L/DIz5Fanftey0oogBr65rk8HS3WC6jyY8ckfZdNtfWdX++tzGIDMabAJmArte4my/l/c//vaLoFc6jmP3iCqD41B5Mi0BId1Hk+V6ljfEQlvWL2xZoY/lKOTLGCY01tZhVLMkRJEtqzoeyUvSnN70SNZRXC1iUylDVZmszhQiDmbH9Lrgpta4mKPlCjy95D6Wrn8GAKFEEfEmdG2Qowd+4I0XFrUC7+w7eL5sCu8hdL3imaQuYFl6c9l021vjYk7Y72Xjq4/z1IaNCCVKMRckq+moiQDJ2bN48uV3GbnSx9b1ra1l0223LL05AYF/Vw4S80jyonnN6paq5YTe3LyU2rpaYrFpJGfPItlcTzI1H8R8cC38NTFiaojhSzeJJ8KNJ/4YOmP43GsTCmWLiGG5LTUBb2LuzGm3e3Ij3321m5Hey6A0AVAcPjmhQcSbuDyU5sF6e5phuS2yRWQC6Lj4x62h1vjJ3BwjlUoiYn52ffolmUtnuXj4ADu2b7/DFoN9RVQ1gAthx8U/+Sk4LiGAQtFAHzXIajpr16yiu/tX98euzyWAzrc6Abj8+1G0TIZ8uYx/xJpgjANlWfEKqjaZbIlixQQgdDHDyuULWLFisZTVdBJxQTIVA2uQ+qZ6KoU0nhqV09f+QoIxj4ThAWRVJWLZToNXUaarYR8Hdm+iZBic7N5LbmgI0xclERcAFLIVAHRtkFOHjwBwNHNryK9I/bZCXlFVIk6ZuSbukidmR1Z+/cliAHzRBjKjBTq37bz9gEAAgA+2vQjAjb4j9F6pUCga/Hzm5v6A5KRDFkXF1UnWRcRj256d/vam9zrJXT0GwGc7V+ONRwAwtTwAa9bs4ND+PTy8MMW5az7+vJ7lXKZ4IeiVjsuIgaylVxTHxf/S84+u3bh5Mbmrx/D6Y1hjGtaYBjduH9g0RonNSmH4o/T1j9JzeoBixSRbsi9ktNIuRXJ6vFVbA2ypVoiZNuay+qj62r6u1R0ee4i65Iw7rDEOnLegC4CSqwxf18b23C0cFMenF5wKJzLZfLDtuW/4pWt1Ry6XY8/ug8jRB6gN3GI0k6VtXcq9csvqtm2rTyjS+YDkpGXEgLdq/z++EhA2hYjbmMtMx7P8+4/Wbdj64U89/cP5Xlli2HGcUsAnjziulMGxbrheRu4lYH21QjSarvXQoraZbQC/nUoflzwMyx6hVz26MRVkysROQNhQ8XmqQr1XwH/rb2Du69Eebp25AAAAAElFTkSuQmCC")}#AttackView .icon-20x20-arrivetime{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAEW0lEQVQ4y4WUWWxUZRiGn7PMnNPOVtvODHQBSlulAUFBoQiEaBHBhCsSFaIhIe6JSyAkRkO8NpErY2KoYuINISkkRFAjEUyAUCQsBSu1BVpKZ2DmTNuZzsyZMz3L70Vbgkjqe/Ul//89//K9eSX+KyUKFcVKQopDxBNoALJE2VXJBUzyBpQA9xG9SA+DbF2vdRxrvqQqLWVHNAkITm8saKo0KBz3hqrqt32WlXkUWHoQZvlpQFbWmLZo//zj7W8ua7JRUoKSz+DOXYVrSZMfjnV/W+mTuvHcs/okIw9DFYAoBCw/DY6QX9yycemer9/p6KiQE7ilIj4vwNXBFIO3M1iFLKta4suNvLUwZzpZTxWZiEvJhMkHgYpf1+cKSazfsnHpnve2rVqYTg2xdvMrPL76JWKNNSxesYB1LyyDiQQ9fWkCmhxzkRuLZTcpVC1lOU4eEDNPDUzitJVc6eUDn6zuSAwl2PDGLqrnx9ECPob6kkxaPiLBEK1LniIaFVz/c4SAJsf6U2ZaEfZwxMOYuaVCJTWypKz68LXV7y6sigWf7thMdfMKkMOgryA2r5pYYwWBaA3FzBhFM8uiRXFOnumn/jGt0SjYl8t+MWzbFABkxSFSdkTTE3F3zkDyBnptw/2J5VMXpwq1gfT1AQ4eOIyi1AHw5II5hCp80bIjmhSHyEyP7Ak0AcFwuIKR/vy/PLVv7156T/1M4u8e9n/1HXqNRnNzjMS9AuGQBlMfF5zxKoA6U2hph5xp0nv+ErX1KVqfXctbH+yk65tOAOa1tolNm56TjIyFNVpmIl8GwBMEHnSzKkuUJUHh8vAYcihMIFQi3hAHZ4T65hq27dyKkbGI1uqS7a/mXO8F+gZGuDZ0j4nClFsU1adj2wrgyq5KTlOlwTOJ8STApVO/Y2VGAJgwSgBEa3VsfzXZZJKLvxyjWC7z8+G3CQf9+FS13nG9ueEwEUBRqmywEfrAvWLF4rqq5fmiwCvcIjuqYCTu8v5nnXQd7+bgoZ/48dduXF8F4ZpaNj0/j60bgly+YLTeNMyUYosxPUhONaBUpeq3K7G7T/Ym2pfWh5ZU1MzBX/0XV/64iVYe4+jR3QD4aqeGaWdylPNjABw9upv9X3R+9GVXwsjmrZQCiJDjOI4scjnTyZZc0ZhKJmM9PcNYlsu4CLJjez3jt65ij45jpZPYhVG8SRNFrcQc7eeZ9evIl9xI96Xh4yqAAaXoJCOW3zuRGjfNwbRob6wNbkkYxTizaDx9B0+pY93rnWdTYxPf+xQ9p0yvCRPciEtJqFpKEfZwyXaupArOYLbM+JK2lS3HDhyRbgwanO6eoPvEaWLxOixLY+WOrrP5onUI4Z2TdMeQZgtYySaGrM6VJVFfmnRjsiwHXEG8KR5p2/fpxjWv7jpyyCd7JxR8v03nY0Fidt2H+z1dcz1LFx7xlctb2gHO9wz1+CS1L2tZSabD4f+Asx7g+a0JbYJJg6lgAPgHUh4QWRIJr4EAAAAASUVORK5CYII=")}#AttackView .icon-20x20-spy{background-image:url("https://twxen.innogamescdn.com/img/icons/alpha_907725c8a7.png");background-position:-40px -1130px;height:20px;width:20px}#AttackView .icon-20x20-kill{background-image:url("https://twxen.innogamescdn.com/img/icons/alpha_907725c8a7.png");background-position:-80px -1130px;height:20px;width:20px}#AttackView .icon-20x20-killBig{background-image:url("https://twxen.innogamescdn.com/img/icons/alpha_907725c8a7.png");background-position:-80px -1130px;height:20px;width:20px}',onClose:function(){a.unregisterListeners()}}),p=new f(b("attackView","title"),{onClick:function(){a.registerListeners(),a.loadCommands(),x(),n.openWindow()},classHover:!1,classBlur:!1}),q=$(n.$window),r=q.find(".commands"),s=q.find(".empty"),u=q.find(".filters"),t={village:u.find(".village"),commandTypes:{ATTACK:u.find(".attack"),SUPPORT:u.find(".support"),RELOCATE:u.find(".relocate")},incomingUnits:{light_cavalry:u.find(".light_cavalry"),heavy_cavalry:u.find(".heavy_cavalry"),axe:u.find(".axe"),sword:u.find(".sword"),ram:u.find(".ram"),snob:u.find(".snob"),trebuchet:u.find(".trebuchet")}},v=q.find(".sorting th[data-sort]"),t.village.on("click",function(){a.toggleFilter(a.FILTER_TYPES.VILLAGE)}),u.find(".commandTypes").on("click",function(){a.toggleFilter(a.FILTER_TYPES.COMMAND_TYPES,this.dataset.filter)}),u.find(".incomingUnits").on("click",function(){a.toggleFilter(a.FILTER_TYPES.INCOMING_UNITS,this.dataset.filter)}),v.on("click",function(){a.toggleSorting(this.dataset.sort)}),setInterval(function(){n.isVisible("attacks")&&x()},1e3),i.bind("attackView/commandsLoaded",y),i.bind("attackView/commandCancelled",z),i.bind("attackView/commandIgnored",A),i.bind("attackView/villageRenamed",B),i.bind("attackView/filtersChanged",F),i.bind("attackView/sortingChanged",G),c.$on(h.MAP_SELECTED_VILLAGE,C),F(),n},x=function(){for(var b,c=a.getCommands(),d=.001*Date.now(),e=0;e<c.length;e++)b=c[e].model.percent(),100!==b?(c[e].$arrivalProgress.style.width=b+"%",c[e].$arrivalIn.innerHTML=k.readableSeconds(k.server2ClientTimeInSeconds(c[e].time_completed-d))):c[e].$command.remove()},y=function(c){r.children().remove();var d=Date.now();if(!c.length)return s.css("display","");s.hide(),c.forEach(function(c){var e=document.createElement("tr"),f=1e3*c.time_completed,h=g.formatDate(f,"HH:mm:ss dd/MM/yyyy"),i=k.server2ClientTimeInSeconds(f-d),n=k.readableMilliseconds(i,!1,!0),p=c.time_completed-c.time_start,q=1e3*(c.time_completed+p),s=g.formatDate(q,"HH:mm:ss dd/MM/yyyy"),t="command-"+c.command_id+" "+c.command_type;c.slowestUnit===l.SNOB?t+=" snob":c.slowestUnit===l.TREBUCHET&&(t+=" trebuchet"),e.className=t,e.innerHTML=m.render('<td class="commandType"><span class="icon-20x20-<#= commandType #>"></span></td><td class="originCharacter character player-<#= originCharacter.id #>"><span class="name"><#= originCharacter.name #> </span></td><td class="originVillage village village-<#= originVillage.id #>"><span class="name"><#= originVillage.name #></span><span class="coords"> <#= originVillage.x #>|<#= originVillage.y #></span></td><td class="targetVillage village village-<#= targetVillage.id #>"><span class="name"><#= targetVillage.name #></span><span class="coords"> <#= targetVillage.x #>|<#= targetVillage.y #></span></td><td><span class="icon-20x20-unit-<#= slowestUnit #>"></span></td><td><div class="progress-wrapper" tooltip="<#= arrivalDate #>"><div class="progress-bar arrivalProgress" style="width:<#= progress #>%"></div><div class="progress-text"><span class="arrivalIn"><#= arrivalIn #></span></div></div></td><td class="actions"><a class="killNobleman btn btn-orange size-20x20 icon-20x20-kill" tooltip="<#= locale("attackView", "commands.tooltip.kill") #>"></a> <a class="killNoblemanBig btn btn-red size-20x20 icon-20x20-killBig" tooltip="<#= locale("attackView", "commands.tooltip.killBig") #>"></a> <a class="spyVillage btn btn-orange size-20x20 icon-20x20-spy" tooltip="<#= locale("attackView", "commands.tooltip.spy") #>"></a> <a class="copyArriveTime btn btn-orange size-20x20 icon-20x20-arrivetime" tooltip="<#= locale("attackView", "commands.tooltip.copy-arrival") #>"></a> <a class="copyBackTime btn btn-red size-20x20 icon-20x20-backtime" tooltip="<#= locale("attackView", "commands.tooltip.copy-back") #>"></a> <a class="removeTroops btn btn-orange size-20x20 icon-20x20-units-outgoing" tooltip="<#= locale("attackView", "commands.tooltip.set-remove") #>"></a></td>',{locale:b,originCharacter:c.originCharacter,originVillage:c.originVillage,targetVillage:c.targetVillage,arrivalDate:h,arrivalIn:n,slowestUnit:c.slowestUnit,progress:c.model.percent(),commandType:c.command_type});var u=e.querySelector(".originCharacter .name"),v=e.querySelector(".originVillage .name"),w=e.querySelector(".originVillage .coords"),x=e.querySelector(".targetVillage .name"),y=e.querySelector(".targetVillage .coords"),z=e.querySelector(".arrivalProgress"),A=e.querySelector(".arrivalIn"),B=e.querySelector(".spyVillage"),C=e.querySelector(".killNobleman"),D=e.querySelector(".killNoblemanBig"),E=e.querySelector(".removeTroops"),F=e.querySelector(".copyArriveTime"),G=e.querySelector(".copyBackTime");u.addEventListener("click",function(){j.openCharacterProfile(c.originCharacter.id)}),v.addEventListener("click",function(){j.openVillageInfo(c.originVillage.id)}),w.addEventListener("click",function(){o.jumpToVillage(c.originVillage.x,c.originVillage.y)}),x.addEventListener("click",function(){j.openVillageInfo(c.targetVillage.id)}),y.addEventListener("click",function(){o.jumpToVillage(c.targetVillage.x,c.targetVillage.y)}),B.addEventListener("click",function(){var a=c.originVillage.id,b=c.originVillage.name,d=injector.get("modelDataService"),e=injector.get("socketService"),f=injector.get("routeProvider"),h=d.getSelectedCharacter(),i=h.getVillageList(),j=0;i.forEach(function(c,d){var h=c.scoutingInfo,i=h.spies;setTimeout(function(){i.forEach(function(d,h){1==d.type&&(j+=1)<=7&&(setTimeout(function(){e.emit(f.SCOUTING_SEND_COMMAND,{startVillage:c.getId(),targetVillage:a,spys:1,type:"units"})},5e3*h*Math.random()),g.emitNotif("success","Szpieg nr "+j+" wysłany na "+b))})},7e3*d*Math.random())})}),C.addEventListener("click",function(){var b=g.formatDate(1e3*c.time_completed,"HH:mm:ss:sss dd/MM/yyyy");a.setQueueSupportCommand(c,b)}),D.addEventListener("click",function(){var b=g.formatDate(1e3*c.time_completed,"HH:mm:ss:sss dd/MM/yyyy");a.setQueueSupportBigCommand(c,b)}),E.addEventListener("click",function(){var b=g.formatDate(1e3*(c.time_completed-10),"HH:mm:ss:sss dd/MM/yyyy");a.setQueueCommand(c,b)}),F.addEventListener("click",function(){document.execCommand("copy")}),F.addEventListener("copy",function(a){a.preventDefault(),a.clipboardData.setData("text/plain",h),g.emitNotif("success",b("attackView","arrivetime"))}),G.addEventListener("click",function(){document.execCommand("copy")}),G.addEventListener("copy",function(a){a.preventDefault(),a.clipboardData.setData("text/plain",s),g.emitNotif("success",b("attackView","backtime"))}),r.append(e),c.$command=e,c.$arrivalProgress=z,c.$arrivalIn=A}),n.setTooltips(),n.recalcScrollbar(),E()},z=function(a){r.find(".command-"+a).remove(),n.recalcScrollbar()},A=function(a){r.find(".command-"+a).remove(),n.recalcScrollbar()},B=function(a){var b=".village-"+a.village_id+" .name";r.find(b).html(a.name)},C=function(b,c){a.getFilters()[a.FILTER_TYPES.VILLAGE]||E(c)},D=function(){r.find(".village.selected").removeClass("selected")},E=function(a){D(),a=a||e.getSelectedVillage().getId(),r.find(".village-"+a).addClass("selected")},F=function(){var b,c,d,e=a.getFilters();for(b in e)if(angular.isObject(e[b]))for(c in e[b])d=e[b][c]?"addClass":"removeClass",t[b][c][d]("active");else d=e[b]?"addClass":"removeClass",t[b][d]("active")},G=function(){var b=a.getSortings(),c=document.createElement("span");c.className="float-right arrow ",c.className+=b.reverse?"icon-26x26-normal-arrow-up":"icon-26x26-normal-arrow-down",v.find(".arrow").remove(),v.some(function(d,e){var f=d.dataset.sort;if(b.column===a.COLUMN_TYPES[f])return d.appendChild(c),!0})};a.interface=function(){a.interface=w()}}),define("two/autoCollector",["two/eventQueue","Lockr"],function(a,b){var d=!1,i=!1,j=!0,k=0,l=function(a){f.emit(g.RESOURCE_DEPOSIT_START_JOB,{job_id:a.id})},m=function(a){f.emit(g.RESOURCE_DEPOSIT_COLLECT,{job_id:a.id,village_id:e.getSelectedVillage().getId()})},n=function(){f.emit(g.RESOURCE_DEPOSIT_GET_INFO,{})},o=function(){if(!i)return!1;var a=e.getSelectedCharacter().getResourceDeposit();if(!a)return!1;if(a.getCurrentJob())return!1;var b=a.getCollectibleJobs();if(b)return m(b.shift());var c=a.getReadyJobs();return c?l(p(c)):void 0},p=function(a){return a.sort(function(a,b){return a.duration-b.duration})[0]},q=function(a){var b=1e3*a.time_next_reset-Date.now()+1e3;clearTimeout(k),k=setTimeout(n,b)},r={};return r.init=function(){d=!0,c.$on(h.RESOURCE_DEPOSIT_JOB_COLLECTIBLE,function(){if(!j||!i)return!1;j=!1,setTimeout(function(){j=!0,o()},1500)}),c.$on(h.RESOURCE_DEPOSIT_JOBS_REROLLED,o),c.$on(h.RESOURCE_DEPOSIT_JOB_COLLECTED,o),c.$on(h.RESOURCE_DEPOSIT_INFO,function(a,b){o(),q(b)})},r.start=function(){a.trigger("Collector/started"),i=!0,o()},r.stop=function(){a.trigger("Collector/stopped"),i=!1},r.isRunning=function(){return i},r.isInitialized=function(){return d},r}),define("two/autoCollector/secondVillage",["two/autoCollector","two/eventQueue","helper/time","models/SecondVillageModel"],function(a,b,d,i){var j=!1,k=!1,l=injector.get("secondVillageService"),m=function(a){var b=Date.now();for(var c in a)if(a[c].time_started&&a[c].time_completed&&b<d.server2ClientTime(a[c].time_completed))return a[c];return!1},n=function(a){var b=Date.now();for(var c in a)if(a[c].time_started&&a[c].time_completed&&b>=d.server2ClientTime(a[c].time_completed)&&!a[c].collected)return c;return!1},o=function(a){f.emit(g.SECOND_VILLAGE_COLLECT_JOB_REWARD,{village_id:e.getSelectedVillage().getId(),job_id:a})},p=function(a,b){f.emit(g.SECOND_VILLAGE_START_JOB,{village_id:e.getSelectedVillage().getId(),job_id:a},b)},q=function(a){for(var b in a)return b;return!1},r=function(a){f.emit(g.SECOND_VILLAGE_GET_INFO,{},function(b){var c=new i(b);e.getSelectedCharacter().setSecondVillage(c),a()})},s=function(){r(t)},t=function(){var a=e.getSelectedCharacter().getSecondVillage();if(!k||!a||!a.isAvailable())return!1;var b=m(a.data.jobs);if(b){var c=d.server2ClientTime(b.time_completed),f=c-Date.now()+1e3;return setTimeout(s,f),!1}var g=n(a.data.jobs);if(g)return o(g);var h=l.getCurrentDayJobs(a.data.jobs,a.data.day),i=l.getCollectedJobs(a.data.jobs),j=e.getSelectedVillage().getResources().getResources(),r=l.getAvailableJobs(h,i,j,[]);if(r){var t=q(r);p(t,function(){var a=r[t];setTimeout(s,1e3*a.duration+1e3)})}},u={};u.init=function(){if(!l.isFeatureActive())return!1;j=!0,c.$on(h.SECOND_VILLAGE_VILLAGE_CREATED,s),c.$on(h.SECOND_VILLAGE_JOB_COLLECTED,s),c.$on(h.SECOND_VILLAGE_VILLAGE_CREATED,s)},u.start=function(){if(!j)return!1;b.trigger("Collector/secondVillage/started"),k=!0,s()},u.stop=function(){if(!j)return!1;b.trigger("Collector/secondVillage/stopped"),k=!1},u.isRunning=function(){return k},u.isInitialized=function(){return j},a.secondVillage=u}),require(["two/ready","two/autoCollector","Lockr","two/eventQueue","two/autoCollector/secondVillage","two/autoCollector/ui"],function(a,b,c,d){if(b.isInitialized())return!1;a(function(){b.init(),b.secondVillage.init(),b.interface(),a(function(){c.get("collector-active",!1,!0)&&(b.start(),b.secondVillage.start()),d.bind("Collector/started",function(){c.set("collector-active",!0)}),d.bind("Collector/stopped",function(){c.set("collector-active",!1)})},["initial_village"])})}),define("two/autoCollector/ui",["two/autoCollector","two/FrontButton","two/locale","two/utils","two/eventQueue"],function(a,b,c,d,e){function f(){return c.create("collector",{en:{title:"Kolekcjoner",description:"Automatyczny kolekcjoner depozytu/drugiej wioski.",activated:"Kolekcjoner aktywowany",deactivated:"Kolekcjoner deaktywowany"},pl:{title:"Kolekcjoner",description:"Automatyczny kolekcjoner depozytu/drugiej wioski.",activated:"Kolekcjoner aktywowany",deactivated:"Kolekcjoner deaktywowany"}},"pl"),g=new b(c("collector","title"),{classHover:!1,classBlur:!1,tooltip:c("collector","description")}),g.click(function(){a.isRunning()?(a.stop(),a.secondVillage.stop(),d.emitNotif("success",c("collector","deactivated"))):(a.start(),a.secondVillage.start(),d.emitNotif("success",c("collector","activated")))}),e.bind("Collector/started",function(){g.$elem.removeClass("btn-green").addClass("btn-red")}),e.bind("Collector/stopped",function(){g.$elem.removeClass("btn-red").addClass("btn-green")}),a.isRunning()&&e.trigger("Collector/started"),g}var g;a.interface=function(){a.interface=f()}}),define("two/builder",["two/locale","two/utils","two/eventQueue","two/ready","Lockr","conf/upgradeabilityStates","conf/buildingTypes","conf/locationTypes"],function(a,b,d,i,j,k,l,m){var o,p,q,r,s,t=injector.get("buildingService"),u=!1,v=!1,w={},x={},y={};y.Essential=[l.HEADQUARTER,l.FARM,l.WAREHOUSE,l.RALLY_POINT,l.BARRACKS,l.TIMBER_CAMP,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.HEADQUARTER,l.RALLY_POINT,l.FARM,l.WAREHOUSE,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.WAREHOUSE,l.HEADQUARTER,l.STATUE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.HEADQUARTER,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.HOSPITAL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.HEADQUARTER,l.WALL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.HEADQUARTER,l.MARKET,l.BARRACKS,l.WALL,l.WALL,l.FARM,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WALL,l.WALL,l.WALL,l.MARKET,l.MARKET,l.MARKET,l.BARRACKS,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.TAVERN,l.TAVERN,l.TAVERN,l.RALLY_POINT,l.BARRACKS,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.BARRACKS,l.BARRACKS,l.STATUE,l.STATUE,l.WALL,l.WALL,l.HEADQUARTER,l.HEADQUARTER,l.WAREHOUSE,l.FARM,l.FARM,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.WAREHOUSE,l.BARRACKS,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WALL,l.WALL,l.TAVERN,l.TAVERN,l.TAVERN,l.MARKET,l.MARKET,l.MARKET,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.RALLY_POINT,l.BARRACKS,l.BARRACKS,l.FARM,l.FARM,l.FARM,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.HEADQUARTER,l.HEADQUARTER,l.STATUE,l.STATUE,l.FARM,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.FARM,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.ACADEMY,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.MARKET,l.MARKET,l.MARKET,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.TIMBER_CAMP,l.WALL,l.WALL,l.MARKET,l.MARKET,l.MARKET,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.TAVERN,l.TAVERN,l.TAVERN,l.WALL,l.WALL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.TAVERN,l.TAVERN,l.TAVERN,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.WALL,l.WALL,l.WALL,l.WALL,l.TAVERN,l.TAVERN,l.RALLY_POINT,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.CLAY_PIT,l.IRON_MINE,l.WALL,l.WALL],y["Pełna rozbudowa"]=[l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.PRECEPTORY,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.PRECEPTORY,l.PRECEPTORY,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY],y["War Build"]=[l.HEADQUARTER,l.FARM,l.WAREHOUSE,l.RALLY_POINT,l.BARRACKS,l.TIMBER_CAMP,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.HEADQUARTER,l.RALLY_POINT,l.FARM,l.WAREHOUSE,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.WAREHOUSE,l.HEADQUARTER,l.STATUE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.HEADQUARTER,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.HOSPITAL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.HEADQUARTER,l.WALL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.HEADQUARTER,l.MARKET,l.BARRACKS,l.WALL,l.WALL,l.FARM,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WALL,l.WALL,l.WALL,l.MARKET,l.MARKET,l.MARKET,l.BARRACKS,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.TAVERN,l.TAVERN,l.TAVERN,l.RALLY_POINT,l.BARRACKS,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.BARRACKS,l.BARRACKS,l.STATUE,l.STATUE,l.WALL,l.WALL,l.HEADQUARTER,l.HEADQUARTER,l.WAREHOUSE,l.FARM,l.FARM,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.WAREHOUSE,l.BARRACKS,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WALL,l.WALL,l.TAVERN,l.TAVERN,l.TAVERN,l.MARKET,l.MARKET,l.MARKET,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.RALLY_POINT,l.BARRACKS,l.BARRACKS,l.FARM,l.FARM,l.FARM,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.HEADQUARTER,l.HEADQUARTER,l.STATUE,l.STATUE,l.FARM,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.FARM,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.ACADEMY,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.PRECEPTORY,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.MARKET,l.MARKET,l.MARKET,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.TIMBER_CAMP,l.WALL,l.WALL,l.MARKET,l.MARKET,l.MARKET,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.TAVERN,l.TAVERN,l.TAVERN,l.WALL,l.WALL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.TAVERN,l.TAVERN,l.TAVERN,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.CLAY_PIT,l.CLAY_PIT,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.WALL,l.WALL,l.WALL,l.WALL,l.TAVERN,l.TAVERN,l.RALLY_POINT,l.WALL,l.WALL],Array.prototype.unshift.apply(y["Pełna rozbudowa"],y.Essential),y["Standard bez murów"]=y.Essential.filter(function(a){return a!==l.WALL}),y["FARM-K"]=[l.HEADQUARTER,l.FARM,l.WAREHOUSE,l.BARRACKS,l.HEADQUARTER,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.HEADQUARTER,l.BARRACKS,l.HEADQUARTER,l.FARM,l.WAREHOUSE,l.HEADQUARTER,l.FARM,l.BARRACKS,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.HEADQUARTER,l.BARRACKS,l.FARM,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.BARRACKS,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.BARRACKS,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.WAREHOUSE,l.FARM,l.FARM,l.WAREHOUSE,l.BARRACKS,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.BARRACKS,l.BARRACKS,l.FARM,l.FARM,l.FARM,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.HEADQUARTER,l.HEADQUARTER,l.FARM,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.FARM,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.ACADEMY,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE],y.EkoMax=[l.WAREHOUSE,l.TIMBER_CAMP,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.TIMBER_CAMP,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.CLAY_PIT,l.IRON_MINE],
y.KomturiaMax=[l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY],y.SzpitalMax=[l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL],y.RynekMax=[l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.MARKET],y.KoszarMax=[l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.BARRACKS],y.MuryMax=[l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL],y.IrooStyle=[l.HEADQUARTER,l.FARM,l.WAREHOUSE,l.RALLY_POINT,l.BARRACKS,l.TIMBER_CAMP,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.HEADQUARTER,l.RALLY_POINT,l.FARM,l.WAREHOUSE,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.WAREHOUSE,l.HEADQUARTER,l.STATUE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.HEADQUARTER,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.HOSPITAL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.HEADQUARTER,l.WALL,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.FARM,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.HEADQUARTER,l.FARM,l.WAREHOUSE,l.MARKET,l.BARRACKS,l.WALL,l.WALL,l.FARM,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WALL,l.WALL,l.WALL,l.MARKET,l.MARKET,l.MARKET,l.BARRACKS,l.HEADQUARTER,l.BARRACKS,l.HEADQUARTER,l.TAVERN,l.TAVERN,l.TAVERN,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.RALLY_POINT,l.BARRACKS,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.BARRACKS,l.STATUE,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.BARRACKS,l.TIMBER_CAMP,l.CLAY_PIT,l.BARRACKS,l.WAREHOUSE,l.FARM,l.HEADQUARTER,l.TIMBER_CAMP,l.CLAY_PIT,l.HEADQUARTER,l.WAREHOUSE,l.FARM,l.HEADQUARTER,l.HEADQUARTER,l.TIMBER_CAMP,l.CLAY_PIT,l.CLAY_PIT,l.IRON_MINE,l.HEADQUARTER,l.WAREHOUSE,l.HEADQUARTER,l.TIMBER_CAMP,l.HEADQUARTER,l.WAREHOUSE,l.HEADQUARTER,l.WAREHOUSE,l.HEADQUARTER,l.WAREHOUSE,l.HEADQUARTER,l.HEADQUARTER,l.WAREHOUSE,l.HEADQUARTER,l.WAREHOUSE,l.ACADEMY],y.DirtyStyle=[l.HEADQUARTER,l.FARM,l.WAREHOUSE,l.RALLY_POINT,l.BARRACKS,l.TIMBER_CAMP,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.HEADQUARTER,l.RALLY_POINT,l.FARM,l.WAREHOUSE,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.WAREHOUSE,l.HEADQUARTER,l.STATUE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.HEADQUARTER,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.HOSPITAL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.HEADQUARTER,l.WALL,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.FARM,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.HEADQUARTER,l.FARM,l.WAREHOUSE,l.MARKET,l.BARRACKS,l.WALL,l.WALL,l.FARM,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WALL,l.WALL,l.WALL,l.MARKET,l.BARRACKS,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.TAVERN,l.TAVERN,l.TAVERN,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.HEADQUARTER,l.HEADQUARTER,l.WAREHOUSE,l.FARM,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.WAREHOUSE,l.WAREHOUSE,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.WAREHOUSE,l.ACADEMY,l.FARM,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.RALLY_POINT,l.MARKET,l.MARKET,l.FARM,l.FARM,l.FARM,l.WAREHOUSE,l.STATUE,l.STATUE,l.WALL,l.WALL,l.FARM,l.FARM,l.FARM,l.FARM,l.WALL,l.WALL,l.TAVERN,l.TAVERN,l.TAVERN,l.BARRACKS,l.BARRACKS,l.FARM,l.BARRACKS,l.FARM,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.MARKET,l.MARKET,l.MARKET,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.RALLY_POINT,l.STATUE,l.STATUE,l.MARKET,l.MARKET,l.MARKET,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.TIMBER_CAMP,l.WALL,l.WALL,l.MARKET,l.MARKET,l.MARKET,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.TAVERN,l.TAVERN,l.TAVERN,l.WALL,l.WALL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TAVERN,l.TAVERN,l.TAVERN,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WALL,l.WALL,l.WALL,l.WALL,l.TAVERN,l.TAVERN,l.RALLY_POINT,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.CLAY_PIT,l.IRON_MINE,l.WALL,l.WALL];var z={groupVillages:{default:"",inputType:"select"},buildingPreset:{default:"Essential",inputType:"select"},buildingOrder:{default:y,inputType:"buildingOrder"}};for(var A in l)w[l[A]]=0;var B=function(){a.create("builder",{en:{title:"Architekt","info.header":"Tytuł","info.content":"Zawartość",duration:"Czas","general.disabled":"— Wyłączony —","general.started":"Architekt Uruchomiony","general.stopped":"Architekt Zatrzymany",settings:"Ustawienia","settings.groupVillages":"Buduj w wioskach z grupy","settings.buildingPreset":"Szablon kolejki budowy","settings.buildingsOrder":"Kolejność budowy","settings.buildingsOrderFinal":"Poziom budynków","settings.saved":"Ustawienia zapisane!","logs.noBuilds":"Nie rozpoczęto żadnej rozbudowy","logs.clear":"Wyczyść logi"},pl:{title:"Architekt","info.header":"Tytuł","info.content":"Zawartość",duration:"Czas","general.disabled":"— Wyłączony —","general.started":"Architekt Uruchomiony","general.stopped":"Architekt Zatrzymany",settings:"Ustawienia","settings.groupVillages":"Buduj w wioskach z grupy","settings.buildingPreset":"Szablon kolejki budowy","settings.buildingsOrder":"Kolejność budowy","settings.buildingsOrderFinal":"Poziom budynków","settings.saved":"Ustawienia zapisane!","logs.noBuilds":"Nie rozpoczęto żadnej rozbudowy","logs.clear":"Wyczyść logi"}},"pl"),u=!0,o=j.get("builder-settings",{},!0),s=j.get("builder-log",[],!0),r=e.getSelectedCharacter(),q=e.getGroupList();for(var b in z){var d=z[b].default;x[b]=o.hasOwnProperty(b)?o[b]:d}buildingOrderLimit=H(x.buildingPreset),c.$on(h.BUILDING_LEVEL_CHANGED,function(a,b){if(!v)return!1;setTimeout(function(){var a=r.getVillage(b.village_id);E(a)},1e3)})},C=function(){(x.groupVillages?q.getGroupVillageIds(x.groupVillages):D()).forEach(function(a){var b=r.getVillage(a),c=b.checkReadyState(),d=b.buildingQueue;return d.getAmountJobs()!==d.getUnlockedSlots()&&!(!c.buildingQueue||!c.buildings)&&(b.isInitialized()||n.initializeVillage(b),void E(b))})},D=function(){var a=[],b=r.getVillages();for(var c in b)a.push(c);return a},E=function(a){var b=angular.copy(a.buildingData.getBuildingLevels()),c=a.buildingQueue.getQueue(),e=angular.copy(w);if(c.forEach(function(a){b[a.building]++}),G(b))return!1;x.buildingOrder[x.buildingPreset].some(function(c){if(++e[c]>b[c])return t.compute(a),F(a,c,function(b,c){if(b){var e=Date.now(),f=[{x:a.getX(),y:a.getY(),name:a.getName(),id:a.getId()},c.job.building,c.job.level,e];d.trigger("Builder/jobStarted",f),s.unshift(f),j.set("builder-log",s)}}),!0})},F=function(a,b,c){a.getBuildingData().getDataForBuilding(b).upgradeability===k.POSSIBLE?f.emit(g.VILLAGE_UPGRADE_BUILDING,{building:b,village_id:a.getId(),location:m.MASS_SCREEN,premium:!1},function(a,b){c(!0,a)}):c(!1)},G=function(a){for(var b in a)if(a[b]<buildingOrderLimit[b])return!1;return!0},H=function(a){var b=x.buildingOrder[a],c=angular.copy(w);return b.forEach(function(a){c[a]++}),c},I=function(a){var b,c;for(c in a){if(!z[c])return d.trigger("Builder/settings/unknownSetting",[c]),!1;b=a[c],angular.equals(x[c],b)||(x[c]=b)}return buildingOrderLimit=H(a.buildingPreset),j.set("builder-settings",x),!0},J=function(){return x},K=function(){v=!0,p=setInterval(C,6e4),i(C,["all_villages_ready"]),d.trigger("Builder/start")},L=function(){v=!1,clearInterval(p),d.trigger("Builder/stop")},M=function(){return u};return{init:B,start:K,stop:L,updateSettings:I,isRunning:function(){return v},isInitialized:M,settingsMap:z,getSettings:J,getBuildLog:function(){return s},clearLogs:function(){s=[],j.set("builder-log",s),d.trigger("Builder/clearLogs")},version:"1.0.0"}}),require(["two/ready","two/builder","two/builder/ui"],function(a,b){if(b.isInitialized())return!1;a(function(){b.init(),b.interface()})}),define("two/builder/ui",["two/builder","two/locale","two/ui","two/FrontButton","two/eventQueue","two/utils","ejs","conf/buildingTypes","helper/time","two/ready"],function(a,b,d,f,g,i,k,l,m,n){var o,p,q,r,s,t,u,v,w,x,y,z,A,B,C={},D=[l.HEADQUARTER,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.WAREHOUSE,l.CHURCH,l.CHAPEL,l.RALLY_POINT,l.BARRACKS,l.STATUE,l.HOSPITAL,l.WALL,l.MARKET,l.TAVERN,l.ACADEMY,l.PRECEPTORY],E=function(){return q=e.getGroupList().getGroups(),B=b("builder","general.disabled"),o=new d("BuilderQueue",{activeTab:"settings",template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("builder", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-two-col"><div class="tab" tab="settings"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "settings") #></a></div></div></div><div class="tab" tab="log"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "logs") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-settings"><form class="settings"><h5 class="twx-section collapse"><#= locale("builder", "settings") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="50%"><col></colgroup><tbody><tr><td><span class="ff-cell-fix"><#= locale("builder", "settings.groupVillages") #></span></td><td><select data-setting="groupVillages" class="groupVillages"></select></td></tr><tr><td><span class="ff-cell-fix"><#= locale("builder", "settings.buildingPreset") #></span></td><td><select data-setting="buildingPreset" class="buildingPreset"></select></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("builder", "settings.buildingsOrderFinal") #></h5><table class="tbl-border-light header-center"><colgroup><col width="10%"><col width="50%"><col></colgroup><thead><tr><th colspan="2"><#= locale("common", "building") #></th><th><#= locale("common", "level") #></th></tr></thead><tbody class="buildingOrderFinal"></tbody></table><h5 class="twx-section collapse"><#= locale("builder", "settings.buildingsOrder") #></h5><table class="tbl-border-light header-center"><colgroup><col width="5%"><col width="26%"><col width="7%"><col width="13%"><col width="8%"><col></colgroup><thead><tr><th colspan="2"><#= locale("common", "building") #></th><th><#= locale("common", "level") #></th><th><#= locale("builder", "duration") #></th><th><#= locale("common", "points") #></th><th><#= locale("common", "costs") #></th></tr></thead><tbody class="buildingOrder"></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-log"><table class="tbl-border-light tbl-striped header-center"><colgroup><col width="40%"><col width="30%"><col width="5%"><col width="25%"><col></colgroup><thead><tr><th><#= locale("common", "village") #></th><th><#= locale("common", "building") #></th><th><#= locale("common", "level") #></th><th><#= locale("common", "started") #></th></tr></thead><tbody class="buildLog"><tr class="noBuilds"><td colspan="4"><#= locale("builder", "logs.noBuilds") #></td></tr></tbody></table></div></div><footer class="win-foot"><ul class="list-btn list-center buttons"><li class="twOverflow-button-settings"><a class="btn-orange btn-border save"><#= locale("common", "save") #></a></li><li class="twOverflow-button-log"><a class="btn-orange btn-border clearLogs"><#= locale("builder", "logs.clear") #></a></li><li class="twOverflow-button"><a class="btn-green btn-border switch"><#= locale("common", "start") #></a></li></ul></footer></div>',replaces:{locale:b,version:"1.0.0"},css:'#BuilderQueue .buildingOrder td,#BuilderQueue .buildingOrderFinal td{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAl7SURBVHjatF3bcRtJDIRYigLhnGNRAnYcSsCORekgDd3HmazdWfQDQx6rVJKopbiDwaPRwIBv39/f8efXj4z5oyIiyfPo7+tr2XXuezmvmd6XfHx8ftUqu9vxiY/PryJvdPwe5I1T/D0OC4tm0ev7HgVx/Apz8QWEu/6vy3rv8kBy+fPrRx7/9vH5VW93De2kvbtzYAGrMNPU3G4TkfYhRUjz+Ysmr3K5/47k9fb75z+thh4uVsJcTUkttgzBMjMtIKAUG5LGxrbCZMq2yuyG/MHhwhRuQAk9m9+z0bjO5FO4iBBuZb0+m98ts3cfb2tQArvhap9rqlMXwqwhhIXE4H5P93kX5ioPprHv7oXgJpgZdotT2p7CxyGNLaCRDpqAroLJArjH/6L8x+dXHYV5uFgtLIBZ1YYbCKDRCGlkI2B232m4h8662mh/l9Uqs1un0oaWFoAgAQRbQ7Mu4O+CQCwltGq+l2FVFxR0/L762JsRkKY33gWgFILoNKPbjBIuxkElnYl3LuKkeR3m7H6+rWq7CLeAOQcwvyI3y8w5wSYkCXBhWAl73y4OUPDeaeTFh65SXl7kLt7JTlgmpCBREu0qAJNK+N4kSUehQI3c411ut+Mf0A4QcwyirUGuL+JCigi/M+0E0V8BeIRXE0X0uwWzaP/O1HcQFdfFFADjRYSosGMO09NdAgUKtZPNGuXffv/8B+arG0C8jEU5P09BfYSXSanUdMRdtGwTcsTDaL5qUhlQC+X2Cqa5llPGfUhczFJPCJsaQB/CjxXxdQ7wT1O7WNBJkkQkyYpSwDVq0uv3VUMfJg986NS8HBOeUHe7VKFL5RULZB+fX1ZMOQr37fv7+5INEIJEEcJpCnsiTCUgRcXtEC5t3HC4jtsdLnUpFjGXAiDcWTxyGbXhtx334frl7PjQo4l3rNP6/Sacbw0dPFtc5+MYS4TglZsETAialgY8Khsy8dVNQj602ZEJF8rM2SUyXgHTJhCtUIRnbP0lKJlVz3oC700wZgyE6N5Dme6Irm9VtI7u/PPrR55qSgZj72YXDsNfgovcRQKqZqWCo8WorS7yLuSLQE2TmmqvW6hTG+BG/0nJhZr/avYq0r8fVRiA2hr6qtxg6FU0TuN/VBPskliBw+AHo+1agSJpN+lnGWRtbmi6WuBOwS2Hmtheq6i7jvZ8N5mmXUIjBoJmOT2j26YcQ5oW0WomEvL9uvehMAOYVGz6Obferjo8WJROI8NqrcyFTUch3xiZGrz02pElaWqmYqQcd4NMPA1rSUGYnEh3ZcVtCaSj9A3qLAPXZmrAwjuMVQnSOYDmuVovg04HldbnIWz6q8bhMtomuJ6Sx4r4rf/hXmxmqSVHBA+YIv9V+b3K013TdEnoMghsVe96vAaVihmMuolaMyNGknCJzLzToN9S0IIVXj2JUYqsqJjIpFU33g2p8UFDp06/q82rlLPTvgJCD4I6UNBjGw/hXEe8d4nQqdEBUfwgcDhtNSqKqoqASgIm0XyanRWL6F07zkqS3FZ40Ki5AtIMDSCf5kAm9L9Ve7qqi4WxuckC0FqfP3bcXFrCQSuOXb8eECJhMFiv4k5dBovynU4J5G14CmRSF7L8lAmPXnFPE/pPUnfosIfDh06Oz0xw4rTJwWG7HCZ+q7rq9NvTTMnwY06Hcg59JYvwChKxQJYCLbRFRIQ1uwB+asUxsoFd4neivU5D1zNuZztDYia+BvJ3wYWqHF5pJcKLDo2mtB5tAGoJckshVsMYIkluaEcMhjqJvyqhParMrNxFCU0uAzapDmaoYAy7n1pxXlSc67RIIYBnCexnSJFS2ZQbkB5BiVD7zpEUtutpanYOUlCXZOkSkxL3c0q3UXrJAtMN9Y8vQp40KuSGKaLNy9B98IjEcTGwZL+6Ux/oOWXyYZi4W0ufNm+5Wdnu/51kUyGwepxST+RsD2Vkh1yYdrq9AtK4TQux8X718flFkU9H66lGh3hywY52s/dwnmPtiIoMiVfh1ruG3pDEFyfswKMaQhQ3rQzDMliwcRswLgcj2OmPzs+egtLK6y1ZkuqljNCFOpXCIkGtXwglKO0sApPooS/SMn+FTaosCqIpgiNuswJqlUmRCLidKUm4AHSiDmp9J1TUunRjjjbw4aogUKUETk2TPc8B096dRlYaiPzwqVFsLQsRIv7MNoELVTbT4UQkeDU9QWl1CDPO8LtWSihLxN8OZlVDWpVRlZFXgbiwhJkiO6fZ+bqKeZ+nU1gcNac5h2gfGiqimNtK6LBFJYLYpB9+B7YFybwubmTVzuOwBkR3XnJ5NasIaAej0ZDLKIH9MvYnQigiOgSLDw8lqH6n01nPhlV5toThzGuaENIT9zLtBJTA3irSPZnLT4hal+zdOa/0bG5Phd/5Tto5Quh9x19N60YJoq0TyYNAtimnoCBUa9JHk+9q886hhWdIEec69/BBvFjzXnas+/i7w9grTdwlInaZJqdS8Arqj7JNKCV9aCiQepCgssPOuHPv3OEALmMV8eToS0K+nx7vBrBnMKNIlhIig1JR350EpkyfrcMWsorup0FYIqVS0xdQcSs3TTFFMCxBzITx+qewbReMHsDe6MxltSXkBhBFloCa6wSdgjpkGusmBRW68zlW4XXA/nEKBI0hM3J2NoqSmXoA03dOkaCJt4i2Y+f0FaM1Mns6+26A4YrQZ6xCybCg4gUSMEVhBskU7ov2giIhP2pKx3ZG0NM0zVp2T3Q88yhSTXDmPdP7GowBPQelJvGfHHINYrbO+CHmU1nWpNwQ00y6RocDXQV/GYQ12Y1NAmL36PW0FYhNkmCVU2mRCNRfGh1MAmAnVXQFqg4vTBprkfuZnrkfPdoxQwNqTVFfrxiNMdWmqc9+irZbla+dfTek73Z39ZVBaceKQvGzJq15DkpdDg+ggnOY1aXgdoSvJt6qEURtZZNlgd0IUPXzTiuOOzboVf1KLs2222TmfgqEJEkuOBT5hanPGTJHyPeG8NnTsUQqKLbv3ckC9dzDMUOHHYjwZx9N6LGJZrMPAdiBWY4bG318BQT2DcBPkqOz1FMxRmh6uPJzkyqBO3ITkTKwDEKP1XSp5/JPXN/kks+Tj5vYLlMYvlIB/tO4S3TEe9XcE2NP8GiIgOQSE8/2hO4Q0k7O77ojGWNOHwxgfFgVm1SbBkk8WXCErop2AUVNI3d6Ri+HFhiVd6opGQNZJ0FhR+scBLELpSYYmX5ijcuJ/jsA5u4AhqNud/gAAAAASUVORK5CYII=") #d1ad86}#BuilderQueue .buildingOrder tr.reached td,#BuilderQueue .buildingOrderFinal tr.reached td{background-color:#b9af7e}#BuilderQueue .buildingOrder tr.progress td,#BuilderQueue .buildingOrderFinal tr.progress td{background-color:#af9d57}#BuilderQueue input[type="text"],#BuilderQueue input[type="number"],#BuilderQueue select{color:#000;min-width:70%}#BuilderQueue .settings .helper{font-weight:bold;vertical-align:-1px;font-family:helvetica;color:rgba(0,0,0,0.3)}#BuilderQueue .settings .helper:hover{color:#000}#BuilderQueue .settings .custom-select{width:200px}#BuilderQueue .settings td{text-align:center}#BuilderQueue .settings .green{color:#297720}#BuilderQueue .buildLog td{text-align:center}#BuilderQueue .buildLog .village:hover{color:#fff;text-shadow:0 1px 0 #000}#BuilderQueue table.header-center th{text-align:center}#BuilderQueue .noBuilds td{height:26px;text-align:center}#BuilderQueue .force-26to20{transform:scale(.8);width:20px;height:20px}'}),p=new f(b("builder","title"),{classHover:!1,classBlur:!1,onClick:function(){o.openWindow(),R()}}),C=X(),r=$(o.$window),s=r.find(".buildingOrder"),$buildingOrderFinal=r.find(".buildingOrderFinal"),t=r.find(".groupVillages"),u=r.find(".buildingPreset"),v=r.find(".settings"),w=r.find(".save"),x=r.find(".switch"),y=r.find(".buildLog"),z=r.find(".noBuilds"),A=r.find(".clearLogs"),M(),H(),G(),V(),F(),o},F=function(){u.on("selectSelected",function(){N(this.dataset.value),O(this.dataset.value),R()}),w.on("click",function(a){L()}),x.on("click",function(b){a.isRunning()?a.stop():a.start()}),A.on("click",function(b){a.clearLogs()}),g.bind("Builder/start",function(){x.html(b("common","stop")),x.removeClass("btn-green").addClass("btn-red"),p.$elem.removeClass("btn-green").addClass("btn-red"),i.emitNotif("success",b("builder","general.started"))}),g.bind("Builder/stop",function(){x.html(b("common","start")),x.removeClass("btn-red").addClass("btn-green"),p.$elem.removeClass("btn-red").addClass("btn-green"),i.emitNotif("success",b("builder","general.stopped"))}),g.bind("Builder/jobStarted",T),g.bind("Builder/clearLogs",U),c.$on(h.GROUPS_UPDATED,function(){H()}),c.$on(h.VILLAGE_SELECTED_CHANGED,function(){o.isVisible()&&R()}),c.$on(h.BUILDING_UPGRADING,S),c.$on(h.BUILDING_LEVEL_CHANGED,S),c.$on(h.BUILDING_TEARING_DOWN,S),c.$on(h.VILLAGE_BUILDING_QUEUE_CHANGED,S)},G=function(){var b=u.find(".custom-select-handler").html(""),c=u.find(".custom-select-data").html(""),d=a.getSettings();for(var e in d.buildingOrder){d.buildingPreset==e&&(b.html(e),u[0].dataset.name=e,u[0].dataset.value=e),J(c,{name:e,value:e}),u.append(c)}},H=function(){var b=t.find(".custom-select-handler").html(""),c=t.find(".custom-select-data").html(""),d=a.getSettings();I(c,"");for(var e in q){var f=q[e].name;d.groupVillages;""===d.groupVillages?(b.html(B),t[0].dataset.name=B,t[0].dataset.value=""):d.groupVillages==e&&(b.html(f),t[0].dataset.name=f,t[0].dataset.value=e),J(c,{name:f,value:e,icon:q[e].icon}),t.append(c)}d.groupVillages||b.html(B)},I=function(a,b){var c=document.createElement("span");c.dataset.name=B,c.dataset.value=b||"",a.append(c)},J=function(a,b){var c=document.createElement("span");for(var d in b)c.dataset[d]=b[d];a.append(c)},K=function(a){r.find("[data-setting]").forEach(function(b){var c=b.dataset.setting;a(b,c)})},L=function(){var c={};return K(function(b,d){switch(a.settingsMap[d].inputType){case"text":c[d]="number"===b.type?parseInt(b.value,10):b.value;break;case"select":c[d]=b.dataset.value;break;case"checkbox":c[d]=b.checked}}),!!a.updateSettings(c)&&(i.emitNotif("success",b("builder","settings.saved")),!0)},M=function(){var b=a.getSettings();K(function(c,d){switch(a.settingsMap[d].inputType){case"text":c.value=b[d];break;case"select":c.dataset.value=b[d];break;case"checkbox":b[d]&&(c.checked=!0,c.parentElement.classList.add("icon-26x26-checkbox-checked"))}}),n(function(){N(),O(),R()},["initial_village"])},N=function(c){var d={},f=a.getSettings(),g=f.buildingOrder[c||f.buildingPreset],h=e.getGameData().getBuildings();for(var i in l)d[l[i]]=0;s.html(""),g.forEach(function(a){var c=++d[a],e=document.createElement("tr"),f=h[a].individual_level_costs[c];e.innerHTML=k.render('<td><span class="building-icon icon-20x20-building-<#= building #>"></span></td><td><#= locale("common", building) #></td><td><#= level #></td><td><#= duration #></td><td class="green">+<#= levelPoints #></td><td><span class="icon-26x26-resource-wood force-26to20"></span> <#= wood #> <span class="icon-26x26-resource-clay force-26to20"></span> <#= clay #> <span class="icon-26x26-resource-iron force-26to20"></span> <#= iron #> </td>',{locale:b,building:a,level:c,duration:m.readableSeconds(f.build_time),wood:f.wood,clay:f.clay,iron:f.iron,levelPoints:C[a][c-1]}),e.dataset.building=a,e.dataset.level=c,s.append(e)}),o.recalcScrollbar()},O=function(c){var d={},e=a.getSettings(),f=e.buildingOrder[c||e.buildingPreset];$buildingOrderFinal.html(""),f.forEach(function(a){d[a]=d[a]||0,++d[a]}),D.forEach(function(a){if(a in d){var c=document.createElement("tr"),e=d[a];c.innerHTML=k.render('<td><span class="building-icon icon-20x20-building-<#= building #>"></span></td><td><#= locale("common", building) #></td><td><#= level #></td>',{locale:b,building:a,level:e}),c.dataset.building=a,c.dataset.level=e,$buildingOrderFinal.append(c)}}),o.recalcScrollbar()},P=function(a,b){return e.getSelectedVillage().getBuildingData().getBuildingLevel(a)>=b},Q=function(a,b){var c=e.getSelectedVillage().getBuildingQueue().getQueue(),d=!1;return c.some(function(c){if(c.building===a&&c.level===b)return d=!0}),d},R=function(){s.find("tr").forEach(function(a){var b=a.dataset.building,c=parseInt(a.dataset.level,10),d="";P(b,c)?d="reached":Q(b,c)&&(d="progress"),a.className=d}),$buildingOrderFinal.find("tr").forEach(function(a){var b=P(a.dataset.building,a.dataset.level);a.className=b?"reached":""})},S=function(a,b){var c=b.village_id||b.id;o.isVisible()&&e.getSelectedVillage().getId()===c&&R()},T=function(a,c,d,e){z.hide();var f=document.createElement("tr");f.innerHTML=k.render('<td class="village"><#= village #></td><td><span class="building-icon icon-20x20-building-<#= building #>"></span> <#= locale("common", building) #></td><td><#= level #></td><td><#= started #></td>',{locale:b,village:i.genVillageLabel(a),building:c,level:d,started:i.formatDate(e)}),f.querySelector(".village").addEventListener("click",function(){j.openVillageInfo(a.id)}),y.prepend(f),o.recalcScrollbar()},U=function(){y.find("tr:not(.noBuilds)").remove(),z.css("display","")},V=function(){a.getBuildLog().forEach(function(a){T.apply(this,a)})},W=function(a,b,c){return c?parseInt(Math.round(a*Math.pow(b,c-1)),10):0},X=function(){var a,b,c,d,f,g,h=e.getGameData(),i={};for(a in h.data.buildings)for(b=h.getBuildingDataForBuilding(a),c=0,i[a]=[],g=1;g<=b.max_level;g++)f=W(b.points,b.points_factor,g),d=f-c,c+=d,i[a].push(d);return i};a.interface=function(){a.interface=E()}}),define("two/queue",["two/locale","two/utils","two/eventQueue","helper/time","helper/math","struct/MapData","conf/conf","Lockr"],function(b,c,d,h,i,j,k,l){var n,o,p={NOT_OWN_VILLAGE:"notOwnVillage",NOT_ENOUGH_UNITS:"notEnoughUnits",TIME_LIMIT:"timeLimit",COMMAND_REMOVED:"commandRemoved",COMMAND_SENT:"commandSent"},q={INVALID_ORIGIN:"invalidOrigin",INVALID_TARGET:"invalidTarget"},r=[],s={},t=[],u=[],v=!1,w={selectedVillage:function(a){return a.origin.id===e.getSelectedVillage().getId()},barbarianTarget:function(a){return!a.target.character_id},allowedTypes:function(a,b){return b.allowedTypes[a.type]},attack:function(a){return"attack"!==a.type},support:function(a){return"support"!==a.type},relocate:function(a){return"relocate"!==a.type},textMatch:function(a,b){var c=!0,d=b.textMatch.toLowerCase().split(/\W/),e=[a.origin.name,a.originCoords,a.originCoords,a.origin.character_name||"",a.target.name,a.targetCoords,a.target.character_name||"",a.target.tribe_name||"",a.target.tribe_tag||""];return e=e.join("").toLowerCase(),d.some(function(a){if(a.length&&!e.includes(a))return c=!1,!0}),c}},x=function(a){return a<h.gameTime()+o},y=function(a){var b={};for(var c in a){var d=a[c];"*"!==d&&0===d||(b[c]=d)}return b},z=function(){r=r.sort(function(a,b){return a.sendTime-b.sendTime})},A=function(a){r.push(a)},B=function(a){s[a.id]=a},C=function(a){t.push(a)},D=function(a){u.push(a)},E=function(){l.set("queue-commands",r)},F=function(){l.set("queue-sent",t)},G=function(){l.set("queue-expired",u)},H=function(){var a=l.get("queue-commands",[],!0);if(a.length)for(var b=0;b<a.length;b++){var c=a[b];h.gameTime()>c.sendTime?K.expireCommand(c,p.TIME_LIMIT):(A(c),B(c))}},I=function(a){var b=e.getVillages(),c=b[a.origin.id];if(!c)return p.NOT_OWN_VILLAGE;var d=c.unitInfo.units,f={};for(var g in a.units){var h=a.units[g];if("*"===h){if(0===(h=d[g].available))continue}else if(h<0){if((h=d[g].available-Math.abs(h))<0)return p.NOT_ENOUGH_UNITS}else if(h>0&&h>d[g].available)return p.NOT_ENOUGH_UNITS;f[g]=h}return angular.equals({},f)?p.NOT_ENOUGH_UNITS:f},J=function(){setInterval(function(){r.length&&r.some(function(a){if(!x(a.sendTime))return!0;v?K.sendCommand(a):K.expireCommand(a,p.TIME_LIMIT)})},100)},K={};return K.initialized=!1,K.version="1.2.0",K.init=function(){b.create("queue",{en:{title:"Generał",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",sent:"wysłany/e",activated:"włączony",deactivated:"wyłączony",expired:"przedawniony/e",removed:"usunięty/e",added:"dodany/e","add.clear":"Wyczyść pola","add.insert-preset":"Wybierz szablon","general.clear":"Wyczyść logi","general.nextCommand":"Następny rozkaz","add.basics":"Podstawowe informacje","add.origin":"Źródło","add.addSelected":"Aktywna wioska","add.target":"Cel","add.addMapSelected":"Wybrana wioska na mapie","add.arrive":"Czas dotarcia na cel","add.out":"Czas wyjścia z  twojej wioski","add.currentDate":"Obecny czas","add.currentDatePlus":"Zwiększ czas o 100 milisekund.","add.currentDateMinus":"Zmniejsz czas o 100 milisekund.","add.travelTimes":"Czas podróży jendostek","add.date":"Czas/Data","add.no-village":"Wybierz wioskę...","add.village-search":"Znajdź wioskę...","queue.waiting":"Rozkazy","queue.noneAdded":"Brak dodanych rozkazów.","queue.sent":"Rozkazy wysłane","queue.noneSent":"Brak wysłanych rozkazów.","queue.expired":"Przedawnione rozkazy","queue.noneExpired":"Brak przedawnionych rozkazów.","queue.remove":"Usuń rozkaz z listy","queue.filters":"Filtruj rozkazy","filters.selectedVillage":"Pokaż tylko rozkazy z aktywnej wioski","filters.barbarianTarget":"Pokaż tylko rozkazy na wioski barbarzyńskie","filters.attack":"Pokaż ataki","filters.support":"Pokaż wsparcia","filters.relocate":"Pokaż przeniesienia","filters.textMatch":"Filtruj za pomocą tekstu...","command.out":"Czas wyjścia","command.timeLeft":"Pozostały czas","command.arrive":"Czas dotarcia","error.noUnitsEnough":"Brak wystarczającej liczby jednostek do wysłania rozkazu!","error.notOwnVillage":"Wioska źródłowa nie należy do ciebie!","error.origin":"Nieprawidłowa wioska źródłowa!","error.target":"Nieprawidłowa wioska cel!","error.noUnits":"Nie wybrano jednostek!","error.invalidDate":"Nieprawidłowy Czas","error.alreadySent":"Ten rozkaz %{type} powinien zostać wysłany %{date}","error.noMapSelectedVillage":"Nie zaznaczono wioski na mapie.","error.removeError":"Błąd usuwania rozkazu."},pl:{title:"Generał",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",sent:"wysłany/e",activated:"włączony",deactivated:"wyłączony",expired:"przedawniony/e",removed:"usunięty/e",added:"dodany/e","add.clear":"Wyczyść pola","add.insert-preset":"Wybierz szablon","general.clear":"Wyczyść logi","general.nextCommand":"Następny rozkaz","add.basics":"Podstawowe informacje","add.origin":"Źródło","add.addSelected":"Aktywna wioska","add.target":"Cel","add.addMapSelected":"Wybrana wioska na mapie","add.arrive":"Czas dotarcia na cel","add.out":"Czas wyjścia z  twojej wioski","add.currentDate":"Obecny czas","add.currentDatePlus":"Zwiększ czas o 100 milisekund.","add.currentDateMinus":"Zmniejsz czas o 100 milisekund.","add.travelTimes":"Czas podróży jendostek","add.date":"Czas/Data","add.no-village":"Wybierz wioskę...","add.village-search":"Znajdź wioskę...","queue.waiting":"Rozkazy","queue.noneAdded":"Brak dodanych rozkazów.","queue.sent":"Rozkazy wysłane","queue.noneSent":"Brak wysłanych rozkazów.","queue.expired":"Przedawnione rozkazy","queue.noneExpired":"Brak przedawnionych rozkazów.","queue.remove":"Usuń rozkaz z listy","queue.filters":"Filtruj rozkazy","filters.selectedVillage":"Pokaż tylko rozkazy z aktywnej wioski","filters.barbarianTarget":"Pokaż tylko rozkazy na wioski barbarzyńskie","filters.attack":"Pokaż ataki","filters.support":"Pokaż wsparcia","filters.relocate":"Pokaż przeniesienia","filters.textMatch":"Filtruj za pomocą tekstu...","command.out":"Czas wyjścia","command.timeLeft":"Pozostały czas","command.arrive":"Czas dotarcia","error.noUnitsEnough":"Brak wystarczającej liczby jednostek do wysłania rozkazu!","error.notOwnVillage":"Wioska źródłowa nie należy do ciebie!","error.origin":"Nieprawidłowa wioska źródłowa!","error.target":"Nieprawidłowa wioska cel!","error.noUnits":"Nie wybrano jednostek!","error.invalidDate":"Nieprawidłowy Czas","error.alreadySent":"Ten rozkaz %{type} powinien zostać wysłany %{date}","error.noMapSelectedVillage":"Nie zaznaczono wioski na mapie.","error.removeError":"Błąd usuwania rozkazu."}},"pl"),o=c.getTimeOffset(),n=e.getSelectedCharacter(),K.initialized=!0,t=l.get("queue-sent",[],!0),u=l.get("queue-expired",[],!0),H(),J(),a.addEventListener("beforeunload",function(a){v&&r.length&&(a.returnValue=!0)})},K.sendCommand=function(a){var b=I(a);if("string"==typeof b)return K.expireCommand(a,b);a.units=b,f.emit(g.SEND_CUSTOM_ARMY,{start_village:a.origin.id,target_village:a.target.id,type:a.type,units:a.units,icon:0,officers:a.officers,catapult_target:a.catapultTarget}),C(a),F(),K.removeCommand(a,p.COMMAND_SENT),d.trigger("Queue/command/send",[a])},K.expireCommand=function(a,b){D(a),G(),K.removeCommand(a,b)},K.addCommand=function(a){if(!a.origin)return d.trigger("Queue/command/add/invalidOrigin",[a]);if(!a.target)return d.trigger("Queue/command/add/invalidTarget",[a]);if(!c.isValidDateTime(a.date))return d.trigger("Queue/command/add/invalidDate",[a]);if(!a.units||angular.equals(a.units,{}))return d.trigger("Queue/command/add/noUnits",[a]);a.originCoords=a.origin.x+"|"+a.origin.y,a.targetCoords=a.target.y+"|"+a.target.y;var b=new Promise(function(b,c){K.getVillageByCoords(a.origin.x,a.origin.y,function(a){a?b(a):c(q.INVALID_ORIGIN)})}),e=new Promise(function(b,c){K.getVillageByCoords(a.target.x,a.target.y,function(a){a?b(a):c(q.INVALID_TARGET)})}),f=Promise.all([b,e]);f.then(function(b){a.origin=b[0],a.target=b[1],a.units=y(a.units),a.date=c.fixDate(a.date),a.travelTime=K.getTravelTime(a.origin,a.target,a.units,a.type,a.officers);var e=c.getTimeFromString(a.date);if("arrive"===a.dateType?(a.sendTime=e-a.travelTime,a.arriveTime=e):(a.sendTime=e,a.arriveTime=e+a.travelTime),x(a.sendTime))return d.trigger("Queue/command/add/alreadySent",[a]);"attack"===a.type&&"supporter"in a.officers&&delete a.officers.supporter;for(var f in a.officers)a.officers[f]=1
;"attack"===a.type&&a.units.catapult?a.catapultTarget=a.catapultTarget||"headquarter":a.catapultTarget=null,a.id=c.guid(),A(a),B(a),z(),E(),d.trigger("Queue/command/add",[a])}),f.catch(function(b){switch(b){case q.INVALID_ORIGIN:d.trigger("Queue/command/add/invalidOrigin",[a]);break;case q.INVALID_TARGET:d.trigger("Queue/command/add/invalidTarget",[a])}})},K.removeCommand=function(a,b){var c=!1;delete s[a.id];for(var e=0;e<r.length;e++)if(r[e].id==a.id){r.splice(e,1),E(),c=!0;break}if(c){switch(b){case p.TIME_LIMIT:d.trigger("Queue/command/send/timeLimit",[a]);break;case p.NOT_OWN_VILLAGE:d.trigger("Queue/command/send/notOwnVillage",[a]);break;case p.NOT_ENOUGH_UNITS:d.trigger("Queue/command/send/noUnitsEnough",[a]);break;case p.COMMAND_REMOVED:d.trigger("Queue/command/remove",[a])}return!0}return d.trigger("Queue/command/remove/error",[a]),!1},K.clearRegisters=function(){l.set("queue-expired",[]),l.set("queue-sent",[]),u=[],t=[]},K.start=function(a){v=!0,d.trigger("Queue/start",[a])},K.stop=function(){v=!1,d.trigger("Queue/stop")},K.isRunning=function(){return v},K.getWaitingCommands=function(){return r},K.getWaitingCommandsObject=function(){return s},K.getSentCommands=function(){return t},K.getExpiredCommands=function(){return u},K.getTravelTime=function(a,b,c,d,e){var f=!1,g=null===b.character_id,h=b.character_id&&b.tribe_id&&b.tribe_id===n.getTribeId();"attack"===d?("supporter"in e&&delete e.supporter,g&&(f=!0)):"support"===d&&(h&&(f=!0),"supporter"in e&&(f=!0));var j={units:c,officers:angular.copy(e)},k=m.calculateTravelTime(j,{barbarian:g,ownTribe:h,officers:e,effects:f},d),l=i.actualDistance(a,b);return 1e3*m.getTravelTimeForDistance(j,k,l,d)},K.getVillageByCoords=function(a,b,c){j.loadTownDataAsync(a,b,1,1,c)},K.filterCommands=function(a,b,c){var d=w[a];return(c||r).filter(function(a){return d(a,b)})},K}),define("two/queue/analytics",["two/queue","two/eventQueue"],function(a,b){a.analytics=function(){ga("create","UA-92130203-5","auto","CommandQueue");var a=e.getPlayer(),c=a.getSelectedCharacter(),d=[];d.push(c.getName()),d.push(c.getId()),d.push(c.getWorldId()),b.bind("Queue/send",function(a){ga("CommandQueue.send","event","commands",a.type,d.join("~"))}),b.bind("Queue/expired",function(){ga("CommandQueue.send","event","commands","expired",d.join("~"))})}}),require(["two/ready","two/queue","two/queue/ui","two/queue/analytics"],function(a,b){if(b.initialized)return!1;a(function(){b.init(),b.interface(),b.analytics(),b.getWaitingCommands().length>0&&b.start(!0)})}),define("two/queue/ui",["two/queue","two/locale","two/ui","two/ui/buttonLink","two/ui/autoComplete","two/FrontButton","two/utils","two/eventQueue","helper/time","ejs"],function(a,b,d,i,j,k,l,m,n,o){function q(){M=l.getTimeOffset(),L=Object.keys(S.getBuildings()),J=e.getSelectedCharacter();var c={version:a.version,locale:b,units:Ha(),officers:X,buildings:L};return r=new d("CommandQueue",{activeTab:"add",template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("queue", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-three-col"><div class="tab" tab="add"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "add") #></a></div></div></div><div class="tab" tab="queue"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "waiting") #></a></div></div></div><div class="tab" tab="log"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "logs") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper rich-text twOverflow-content-add"><form class="addForm"><div><table class="tbl-border-light tbl-striped"><colgroup><col width="30%"><col width="5%"><col><col width="18%"></colgroup><tbody><tr><td><input data-setting="origin" type="text" class="textfield-border origin" pattern="\\d{2,3}\\|\\d{2,3}" placeholder="<#= locale("queue", "add.village-search") #>" required></td><td class="text-center"><span class="icon-26x26-rte-village"></span></td><td class="originVillage"><#= locale("queue", "add.no-village") #></td><td class="actions"><a class="btn btn-orange addSelected" tooltip="<#= locale("queue", "add.addSelected") #>"><#= locale("common", "selected") #></a></td></tr><tr><td><input data-setting="target" type="text" class="textfield-border target" pattern="\\d{2,3}\\|\\d{2,3}" placeholder="<#= locale("queue", "add.village-search") #>" required></td><td class="text-center"><span class="icon-26x26-rte-village"></span></td><td class="targetVillage"><#= locale("queue", "add.no-village") #></td><td class="actions"><a class="btn btn-orange addMapSelected" tooltip="<#= locale("queue", "add.addMapSelected") #>"><#= locale("common", "selected") #></a></td></tr><tr><td><input data-setting="date" type="text" class="textfield-border date" pattern="\\s*\\d{1,2}:\\d{1,2}:\\d{1,2}(:\\d{1,3})? \\d{1,2}\\/\\d{1,2}\\/\\d{4}\\s*" placeholder="<#= locale("queue", "add.date") #>" tooltip="00:00:00:000 00/00/0000" required></td><td class="text-center"><span class="icon-26x26-time"></span></td><td><span class="ff-cell-fix"><select data-setting="dateType" class="dateType"><option value="arrive" selected="selected"><#= locale("queue", "add.arrive") #></option><option value="out"><#= locale("queue", "add.out") #></option></select></span></td><td class="actions"><a class="btn btn-orange currentDateMinus" tooltip="<#= locale("queue", "add.currentDateMinus") #>">-</a><a class="btn btn-orange addCurrentDate" tooltip="<#= locale("queue", "add.currentDate") #>"><#= locale("common", "now") #></a><a class="btn btn-orange currentDatePlus" tooltip="<#= locale("queue", "add.currentDatePlus") #>">+</a></td></tr></tbody></table><table class="tbl-border-light tbl-units tbl-speed screen-village-info travelTimes" style="display:none"><thead><tr><th colspan="7"><#= locale("queue", "add.travelTimes") #></th></tr></thead><tbody><tr><td class="odd"><div class="unit-wrap"><span class="icon icon-34x34-unit-knight"></span> <span class="icon icon-34x34-unit-light_cavalry"></span> <span class="icon icon-34x34-unit-mounted_archer"></span></div><div class="travelTime box-time-sub-icon"><div class="time-icon icon-20x20-attack"></div><span class="attack" data-unit="knight"></span></div><div class="travelTime box-time-sub-icon"><div class="time-icon icon-20x20-support"></div><span class="support" data-unit="knight"></span></div></td><td><div class="unit-wrap"><span class="icon icon-single icon-34x34-unit-heavy_cavalry"></span></div><div class="travelTime"><span class="attack" data-unit="heavy_cavalry"></span></div><div class="travelTime"><span class="support" data-unit="heavy_cavalry"></span></div></td><td class="odd"><div class="unit-wrap"><span class="icon icon-34x34-unit-archer"></span> <span class="icon icon-34x34-unit-spear"></span> <span class="icon icon-34x34-unit-axe"></span> <span class="icon icon-34x34-unit-doppelsoldner"></span></div><div class="travelTime"><span class="attack" data-unit="axe"></span></div><div class="travelTime"><span class="support" data-unit="axe"></span></div></td><td><div class="unit-wrap"><span class="icon icon-single icon-34x34-unit-sword"></span></div><div class="travelTime"><span class="attack" data-unit="sword"></span></div><div class="travelTime"><span class="support" data-unit="sword"></span></div></td><td class="odd"><div class="unit-wrap"><span class="icon icon-34x34-unit-catapult"></span> <span class="icon icon-34x34-unit-ram"></span></div><div class="travelTime"><span class="attack" data-unit="ram"></span></div><div class="travelTime"><span class="support" data-unit="ram"></span></div></td><td><div class="unit-wrap"><span class="icon icon-single icon-34x34-unit-snob"></span></div><div class="travelTime"><span class="attack" data-unit="snob"></span></div><div class="travelTime"><span class="support" data-unit="snob"></span></div></td><td class="odd"><div class="unit-wrap"><span class="icon icon-single icon-34x34-unit-trebuchet"></span></div><div class="travelTime"><span class="attack" data-unit="trebuchet"></span></div><div class="travelTime"><span class="support" data-unit="trebuchet"></span></div></td></tr></tbody></table></div><h5 class="twx-section collapse"><#= locale("common", "units") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="25%"><col width="25%"><col width="25%"><col width="25%"></colgroup><tbody class="add-units"><tr><td colspan="4" class="actions"><select class="insert-preset"></select> <a class="clear-units btn btn-orange"><#= locale("queue", "add.clear") #></a></td></tr><tr> <# units.forEach(function(unit, i) { #> <# if (i !== 0 && i % 4 === 0) { #> </tr><tr> <# } #> <td class="cell-space-left"><span class="unit-icon icon-bg-black icon-34x34-unit-<#= unit #>"></span> <input class="unit <#= unit #>" type="text" data-setting="<#= unit #>" placeholder="0"></td> <# }) #> <td class="text-center catapult-target" style="display:none" colspan="3"><select data-setting="catapultTarget"> <# buildings.forEach(function(building, i) { #> <# if (building === "headquarter") { #> <option value="headquarter" selected="selected"><#= locale("common", "headquarter") #></option> <# } else { #> <option value="<#= building #>"><#= locale("common", building) #></option> <# } #> <# }) #> </select></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("common", "officers") #></h5><table class="tbl-border-light tbl-striped officers"><tbody><tr> <# officers.forEach(function(officer) { #> <td><span class="icon-34x34-premium_officer_<#= officer #>"></span> <label class="btn-orange icon-26x26-checkbox"><input type="checkbox" data-setting="<#= officer #>" class="<#= officer #>"></label></td> <# }) #> </tr></tbody></table></form></div><div class="box-paper footer has-footer-upper rich-text twOverflow-content-queue"><div class="filters"><table class="tbl-border-light"><tbody><tr><td><div data-filter="selectedVillage" class="box-border-dark icon selectedVillage" tooltip="<#= locale("queue", "filters.selectedVillage") #>"><span class="icon-34x34-village-info icon-bg-black"></span></div><div data-filter="barbarianTarget" class="box-border-dark icon barbarianTarget" tooltip="<#= locale("queue", "filters.barbarianTarget") #>"><span class="icon-34x34-barbarian-village icon-bg-black"></span></div><div data-filter="attack" class="box-border-dark icon allowedTypes active" tooltip="<#= locale("queue", "filters.attack") #>"><span class="icon-34x34-attack icon-bg-black"></span></div><div data-filter="support" class="box-border-dark icon allowedTypes active" tooltip="<#= locale("queue", "filters.support") #>"><span class="icon-34x34-support icon-bg-black"></span></div><div data-filter="relocate" class="box-border-dark icon allowedTypes active" tooltip="<#= locale("queue", "filters.relocate") #>"><span class="icon-34x34-relocate icon-bg-black"></span></div><div class="text"><input data-filter="textMatch" type="text" class="box-border-dark textMatch" placeholder="<#= locale("queue", "filters.textMatch") #>"></div></td></tr></tbody></table></div><h5 class="twx-section collapse"><#= locale("queue", "queue.waiting") #></h5><div class="queue"><p class="center nothing"><#= locale("queue", "queue.noneAdded") #></p></div></div><div class="box-paper footer has-footer-upper rich-text twOverflow-content-log"><h5 class="twx-section collapse"><#= locale("queue", "queue.sent") #></h5><div class="sent"><p class="center nothing"><#= locale("queue", "queue.noneSent") #></p></div><h5 class="twx-section collapse"><#= locale("queue", "queue.expired") #></h5><div class="expired"><p class="center nothing"><#= locale("queue", "queue.noneExpired") #></p></div></div></div><footer class="win-foot"><ul class="list-btn list-center buttons"><li class="twOverflow-button-log"><a class="btn-orange btn-border clear"><#= locale("queue", "general.clear") #></a></li><li class="twOverflow-button-add"><a class="btn-orange btn-border add" name="attack"><span class="icon-26x26-attack-small"></span> <#= locale("common", "attack") #></a></li><li class="twOverflow-button-add"><a class="btn-orange btn-border add" name="support"><span class="icon-26x26-support"></span> <#= locale("common", "support") #></a></li><li class="twOverflow-button-add"><a class="btn-orange btn-border add" name="relocate"><span class="icon-26x26-relocate"></span> <#= locale("common", "relocate") #></a></li><li class="twOverflow-button"><a class="btn-green btn-border switch"><#= locale("common", "activate") #></a></li></ul></footer></div>',replaces:c,css:'#CommandQueue input[type="text"]{width:200px}#CommandQueue input.unit{width:80px;height:34px}#CommandQueue form .padded{padding:2px 8px}#CommandQueue .custom-select{width:240px}#CommandQueue .originVillage,#CommandQueue .targetVillage{padding:0 7px}#CommandQueue .actions{text-align:center}#CommandQueue .actions a{height:26px;line-height:26px;padding:0 10px}#CommandQueue .clear-units{font-size:12px;font-weight:normal;text-decoration:none;font-style:italic}#CommandQueue .clear-units:hover{text-shadow:0 1px 1px #000;color:#c4926f}#CommandQueue .add-units td{text-align:center}#CommandQueue .add-units .unit-icon{top:-1px}#CommandQueue .add-units input{height:34px;line-height:26px;color:#000;font-size:14px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAABGdBTUEAALGPC/xhBQAAALRQTFRFr6+vmJiYoKCgrKysq6urpaWltLS0s7OzsLCwpKSkm5ubqKiojY2NlZWVk5OTqampbGxsWFhYUVFRhISEgYGBmpqaUFBQnp6eYmJidnZ2nZ2dY2NjW1tbZ2dnoaGhe3t7l5eXg4ODVVVVWVlZj4+PXFxcVlZWkpKSZmZmdXV1ZWVlc3NzjIyMXl5eVFRUeHh4hoaGYWFhXV1dbW1tampqb29veXl5fHx8gICAiYmJcnJyTk5Ooj6l1wAAADx0Uk5TGhkZGhoaGxoaGRkaGRkZGhkbHBgYGR0ZGhkZGhsZGRgZGRwbGRscGRoZGhkZGhwZGRobGRkZGRkZGRkeyXExWQAABOJJREFUSMeNVgdy4zgQxIW9TQ7KOVEUo5gz0f//1/WA0sple6+OLokQiUk9PQ2rvlzvT0vA6xDXU3R5hQmqddDVaIELsMl3KLUGoFHugUphjt25PWkE6KMAqPkO/Qh7HRadPmTNxKJpWuhSjLZAoSZmXYoPXh0w2R2z10rjBxpMNRfomhbNFUfUFbfUCh6TWmO4ZqNn6Jxekx6lte3h9IgYv9ZwzIZXfhQ/bejmsYkgOeVInoDGT6KGP9MMbsj7mtEKphKgVFKkJGUM+r/00zybNkPMFWYske+jY9hUblbrK4YosyPtrxl+5kNRWSb2B3+pceKT05SQRPZY8pVSGoWutgen2junRVKPZJ0v5Nu9HAk/CFPr+T1XTkXYFWSJXfTyLPcpcPXtBZIPONq/cFQ0Y0Lr1GF6f5doHdm2RLTbQMpMmCIf/HGm53OLFPiiEOsBKtgHccgKTVwn8l7kbt3iPvqniMX4jgWj4aqlX43xLwXVet5XTG1cYp/29m58q6ULSa7V0M3UQFyjd+AD+1W9WLBpDd9uej7emFbea/+Yw8faySElQQrBDksTpTOVIG/SE2HpPvZsplJWsblRLEGXATEW9YLUY1rPSdivBDmuK3exNiAysfPALfYZFWJrsA4Zt+fftEeRY0UsMDqfyNCKJpdrtI1r2k0vp9LMSwdO0u5SpjBeEYz5ebhWNbwT2g7OJXy1vjW+pEwyd1FTkAtbzzcbmX1yZlkR2pPiXZ/mDbPNWvHRsaKfLH8+FqiZbnodbOK9RGWlNMli8k+wsgbSNwS35QB6qxn53xhu2DFqUilisB9q2Zqw4nNI9tOB2z8GbkvEdNjPaD2j+9pwEC+YlWJvI7xN7xMC09eqhq/qwRvz3JWcFWmkjrWBWSiOysEmc4LmMb0iSsxR8+Z8pk3+oE39cdAmh1xSDXuAryRLZgpp9V62+8IOeBSICjs8LlbtKGN4E7XGoGASIJ+vronVa5mjagPHIFJA2b+BKkZC5I/78wOqmzYp1N8vzTkWIWz6YfsS3eh3w8pBkfKz6TSLxK9Qai5DUGTMZ8NNmrW8ldNudIJq+eJycwjv+xbeOJwPv1jjsSV/rCBaS/IBrafaUQ+5ksHwwl9y9X7kmvvIKWoBDFvbWySGyMU3XflxZRkNeRU63otWb0+P8H8BrRokbJivpWkk6m6LccSlrC2K0i6+4otx4dN3mbAVKt0wbaqBab4/MW8rgrS8JP06HU6UYSTYsQ5pYETpo87ZonORvbPlvYbXwmsMgoQGKr8PUQ5dDEO0EcXp2oOfSk+YpR/Eg4R46O0/Sf7jVnbqbXBrRkCPsZFOQTN8h+aqlcRw9FjJ/j8V7SXZ3hVNXYsOYcxzpfPNgFrvB9S6Dej2PqDqq0su+5ng0WMi527p/pA+OiW0fsYzDa6sPS9C1qxTtxVRMuySrwPD6qGPRKc4uIx4oceJ9FPjxWaqPPebzyXxU7W1jNqqOw+9z6X/k+Na3SBa0v+VjgoaULR30G1nxvZN1vsha2UaSrKy/PyCaHK5zAYnJzm9RSpSPDWbDVu0dkUujMmB/ly4w8EnDdXXoyX/VfhB3yKzMJ2BSaZO+A9GiNQMbll+6z1WGLWpEGMeEg85MESSep0IPFaHYZZ1QOW/xcjfxGhNjP0tRtbhFHOmhhjAv/p77JrCX3+ZAAAAAElFTkSuQmCC) top left #b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px}#CommandQueue .command{margin-bottom:10px}#CommandQueue .command .time-left{width:93px;display:inline-block;padding:0 0 0 3px}#CommandQueue .command .sent-time,#CommandQueue .command .arrive-time{width:160px;display:inline-block;padding:0 0 0 5px}#CommandQueue .command td{padding:3px 6px}#CommandQueue .officers td{width:111px;text-align:center}#CommandQueue .officers label{margin-left:5px}#CommandQueue .officers span{margin-left:2px}#CommandQueue .units div.unit{float:left}#CommandQueue .units div.unit span.icon{transform:scale(.7);width:25px;height:25px}#CommandQueue .units div.unit span.amount{vertical-align:-2px;margin:0 5px 0 2px}#CommandQueue .units div.officer{float:left;margin:0 2px}#CommandQueue .units div.officer span{transform:scale(.7);width:25px;height:25px}#CommandQueue .remove-command{float:right;margin-top:3px}#CommandQueue .tbl-units td{text-align:center}#CommandQueue .travelTimes{margin-top:10px;font-size:13px}#CommandQueue .travelTimes th{text-align:center}#CommandQueue .travelTimes .travelTime{display:block;color:#1c4b1c}#CommandQueue .travelTimes .travelTime.box-time-sub-icon{position:relative}#CommandQueue .travelTimes .travelTime.box-time-sub-icon .time-icon{position:absolute;top:-4px;left:7px;transform:scale(.7)}#CommandQueue .dateType{width:200px}#CommandQueue .dateType .custom-select-handler{text-align:left}#CommandQueue .filters .icon{width:38px;float:left;margin:0 6px}#CommandQueue .filters .icon.active:before{box-shadow:0 0 0 1px #000,-1px -1px 0 2px #ac9c44,0 0 0 3px #ac9c44,0 0 0 4px #000;border-radius:1px;content:"";position:absolute;width:38px;height:38px;left:-1px;top:-1px}#CommandQueue .filters .text{margin-left:262px}#CommandQueue .filters .text input{height:36px;margin-top:1px;width:100%;text-align:left;padding:0 5px}#CommandQueue .filters .text input::placeholder{color:white}#CommandQueue .filters .text input:focus::placeholder{color:transparent}#CommandQueue .filters td{padding:6px}#CommandQueue .icon-34x34-barbarian-village:before{filter:grayscale(100%);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-220px -906px}#CommandQueue .icon-20x20-time-arrival:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-529px -454px}#CommandQueue .icon-20x20-attack:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-546px -1086px;width:26px;height:26px}#CommandQueue .icon-20x20-support:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-462px -360px;width:26px;height:26px}#CommandQueue .icon-20x20-relocate:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-1090px -130px;width:26px;height:26px}#CommandQueue .icon-26x26-attack:before{background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-546px -1086px}'}),s=new k(b("queue","title"),{classHover:!1,classBlur:!1,onClick:function(){r.openWindow()}}),t=$(r.$window),u=t.find("a.switch"),v=t.find("form.addForm"),w=t.find("input.origin"),x=t.find("input.target"),y=t.find("input.date"),z=t.find(".officers input"),$travelTimes=t.find("table.travelTimes"),B=t.find(".dateType"),C=t.find(".filters"),D=t.find("td.catapult-target"),E=t.find("input.unit.catapult"),F=t.find(".originVillage"),G=t.find(".targetVillage"),H=t.find(".clear-units"),I=t.find(".insert-preset"),A={queue:t.find("div.queue"),sent:t.find("div.sent"),expired:t.find("div.expired")},$travelTimes.find(".attack").forEach(function(a){O.attack[a.dataset.unit]=a}),$travelTimes.find(".support").forEach(function(a){O.support[a.dataset.unit]=a}),setInterval(function(){da()&&na()},1e3),Ba(),Ca(),ea(),va(),f.emit(g.GET_PRESETS,{},Ja),r}var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N={NOT_OWN_VILLAGE:"notOwnVillage",NOT_ENOUGH_UNITS:"notEnoughUnits",TIME_LIMIT:"timeLimit",COMMAND_REMOVED:"commandRemoved",COMMAND_SENT:"commandSent"},O={attack:{},support:{}},P=null,Q=null,R={},S=e.getGameData(),T={origin:!1,target:!1,date:!1},U={selectedVillage:!1,barbarianTarget:!1,allowedTypes:!0,attack:!0,support:!0,relocate:!0,textMatch:!0},V=["selectedVillage","barbarianTarget","allowedTypes","textMatch"],W={allowedTypes:{attack:!0,support:!0,relocate:!0},textMatch:""},X=S.getOrderedOfficerNames(),Y=S.getOrderedUnitNames(),Z=["knight","heavy_cavalry","axe","sword","ram","snob","trebuchet"],_="arrive",aa=!1,ba=function(){$travelTimes.css("display","none")},ca=function(){$travelTimes.css("display","")},da=function(){return r.isVisible("add")&&T.origin&&T.target&&T.date},ea=function(a){ha(),fa(),ga(),za()},fa=function(){a.getSentCommands().forEach(function(a){ua(a,"sent")})},ga=function(){a.getExpiredCommands().forEach(function(a){ua(a,"expired")})},ha=function(){a.getWaitingCommands().forEach(function(a){ua(a,"queue")})},ia=function(){A.queue.find(".command").remove(),R={}},ja=function(){ia(),ha()},ka=function(a){return Y.includes(a)},la=function(a){return X.includes(a)},ma=function(a){var b=new Date(a||n.gameTime()+l.getTimeOffset()),c=b.getMilliseconds(),d=n.zerofill(c-c%100,3),e=n.zerofill(b.getSeconds(),2),f=n.zerofill(b.getMinutes(),2);return n.zerofill(b.getHours(),2)+":"+f+":"+e+":"+d+" "+n.zerofill(b.getDate(),2)+"/"+n.zerofill(b.getMonth()+1,2)+"/"+b.getFullYear()},na=function(){if(!T.origin||!T.target)return $travelTimes.hide();var b=(w.val(),x.val(),Ga());if(T.date)var c=l.fixDate(y.val()),d=l.getTimeFromString(c);["attack","support"].forEach(function(c){Z.forEach(function(e){var f={};f[e]=1;var g=a.getTravelTime(P,Q,f,c,b),h=p("readableMillisecondsFilter")(g);if("arrive"===_)if(T.date){var i=d-g;Fa(i)||(h=oa(h))}else h=oa(h);O[c][e].innerHTML=h})}),ca()},oa=function(a){return'<span class="text-red">'+a+"</span>"},pa=function(a){a.css("color","#a1251f")},qa=function(a){a.css("color","")},ra=function(a){t.find("[data-setting]").forEach(function(b){var c=b.dataset.setting;a(b,c)})},sa=function(b){var c={units:{},officers:{},type:b,origin:P,target:Q};ra(function(a,b){var d=a.value;if("dateType"===b)c.dateType=a.dataset.value;else if("catapultTarget"===b)c.catapultTarget=a.dataset.value||null;else{if(!d)return!1;ka(b)?c.units[b]=isNaN(d)?d:parseInt(d,10):la(b)?a.checked&&(c.officers[b]=1):d&&(c[b]=d)}}),a.addCommand(c)},ta=function(a,b){var c=A[b].find(".command").filter(function(b){return b.dataset.id===a.id});$(c).remove(),xa(a.id),Aa(b),r.isVisible("queue")&&r.recalcScrollbar()},ua=function(c,d){var e=document.createElement("div");e.dataset.id=c.id,e.className="command";var f=i("village",l.genVillageLabel(c.origin),c.origin.id),g=i("village",l.genVillageLabel(c.target),c.target.id),h=l.formatDate(c.arriveTime-M),j=l.formatDate(c.sendTime-M),k=!!Object.keys(c.officers).length;if(e.innerHTML=o.render('<table class="tbl-border-light"><colgroup><col width="100px"></colgroup><tbody><tr><th colspan="2"><span class="icon-bg-<#= iconColor #> icon-26x26-<#= type #>" tooltip="<#= locale("common", type) #>"></span> <# if (section === "queue") { #> <span class="size-26x26 icon-bg-black icon-26x26-time-duration" tooltip="<#= locale("queue", "command.timeLeft") #>"></span> <span class="time-left">00:00:00</span> <# } #> <span class="size-26x26 icon-bg-black icon-20x20-units-outgoing" tooltip="<#= locale("queue", "command.out") #>"></span> <span class="sent-time"><#= sendTime #></span><span class="size-26x26 icon-bg-black icon-20x20-time-arrival" tooltip="<#= locale("queue", "command.arrive") #>"></span> <span class="arrive-time"><#= arriveTime #></span> <# if (section === "queue") { #> <a href="#" class="remove-command size-20x20 btn-red icon-20x20-close" tooltip="<#= locale("queue", "queue.remove") #>"></a> <# } #> </th></tr><tr><td><#= locale("common", "villages") #></td><td><a class="origin"></a> <span class="size-20x20 icon-26x26-<#= type #>"></span> <a class="target"></a></td></tr><tr><td><#= locale("common", "units") #></td><td class="units"> <# for (var unit in units) { #> <div class="unit"> <# if (unit === "catapult" && type === "attack") { #> <span class="icon-34x34-unit-<#= unit #> icon"></span><span class="amount"><#= units[unit] #> <span>(<#= locale("common", catapultTarget) #>)</span></span> <# } else { #> <span class="icon-34x34-unit-<#= unit #> icon"></span><span class="amount"><#= units[unit] #></span> <# } #> </div> <# } #> <# if (hasOfficers) { #> <# for (var officer in officers) { #> <div class="officer"><span class="icon-34x34-premium_officer_<#= officer #>"></span></div> <# } #> <# } #> </td></tr></tbody></table>',{sendTime:j,type:c.type,arriveTime:h,units:c.units,hasOfficers:k,officers:c.officers,section:d,locale:b,catapultTarget:c.catapultTarget,iconColor:"attack"===c.type?"red":"blue"}),e.querySelector(".origin").replaceWith(f.elem),e.querySelector(".target").replaceWith(g.elem),"queue"===d){var m=e.querySelector(".remove-command"),n=e.querySelector(".time-left");m.addEventListener("click",function(b){a.removeCommand(c,N.COMMAND_REMOVED)}),wa(n,c.id)}A[d].append(e),r.setTooltips(),Aa(d)},va=function(){var b=a.getWaitingCommandsObject();setInterval(function(){var a=n.gameTime()+M;if(!r.isVisible("queue"))return!1;for(var c in R){var d=b[c],e=d.sendTime-a;e>0&&(R[c].innerHTML=p("readableMillisecondsFilter")(e,!1,!0))}},1e3)},wa=function(a,b){R[b]=a},xa=function(a){delete R[a]},ya=function(b){var c=a.getWaitingCommandsObject();A.queue.find(".command").forEach(function(a){var d=c[a.dataset.id];d&&b(a,d)})},za=function(b){var c=a.getWaitingCommands();V.forEach(function(b){U[b]&&(c=a.filterCommands(b,W,c))});var d=c.map(function(a){return a.id});ya(function(a,b){a.style.display=d.includes(b.id)?"":"none"}),r.recalcScrollbar()},Aa=function(b){var c=A[b],d=c.find("p.nothing"),e="queue"===b?a.getWaitingCommands():c.find("div");d.css("display",0===e.length?"":"none")},Ba=function(){m.bind("Queue/command/add/invalidOrigin",function(a){l.emitNotif("error",b("queue","error.origin"))}),m.bind("Queue/command/add/invalidTarget",function(a){l.emitNotif("error",b("queue","error.target"))}),m.bind("Queue/command/add/invalidDate",function(a){l.emitNotif("error",b("queue","error.invalidDate"))}),m.bind("Queue/command/add/noUnits",function(a){l.emitNotif("error",b("queue","error.noUnits"))}),m.bind("Queue/command/add/alreadySent",function(a){l.emitNotif("error",b("queue","error.alreadySent",{date:l.formatDate(a.sendTime),type:b("common",a.type)}))}),m.bind("Queue/command/remove",function(a){ta(a,"queue"),c.$broadcast(h.TOOLTIP_HIDE,"twoverflow-tooltip"),l.emitNotif("success",Ea(a.type,"removed"))}),m.bind("Queue/command/remove/error",function(a){l.emitNotif("error",b("queue","error.removeError"))}),m.bind("Queue/command/send/timeLimit",function(a){ta(a,"queue"),ua(a,"expired"),l.emitNotif("error",Ea(a.type,"expired"))}),m.bind("Queue/command/send/notOwnVillage",function(a){ta(a,"queue"),ua(a,"expired"),l.emitNotif("error",b("queue","error.notOwnVillage"))}),m.bind("Queue/command/send/noUnitsEnough",function(a){ta(a,"queue"),ua(a,"expired"),l.emitNotif("error",b("queue","error.noUnitsEnough"))}),m.bind("Queue/command/add",function(a){ja(),za(),l.emitNotif("success",Ea(a.type,"added"))}),m.bind("Queue/command/send",function(a){ta(a,"queue"),ua(a,"sent"),l.emitNotif("success",Ea(a.type,"sent"))}),m.bind("Queue/start",function(a){s.$elem.removeClass("btn-green").addClass("btn-red"),u.removeClass("btn-green").addClass("btn-red"),u.html(b("common","deactivate")),a||l.emitNotif("success",Ea("title","activated"))}),m.bind("Queue/stop",function(){s.$elem.removeClass("btn-red").addClass("btn-green"),u.removeClass("btn-red").addClass("btn-green"),u.html(b("common","activate")),l.emitNotif("success",Ea("title","deactivated"))}),B.on("selectSelected",function(){_=B[0].dataset.value,na()}),u.on("click",function(b){a.isRunning()?a.stop():a.start()}),t.find(".buttons .add").on("click",function(){sa(this.name)}),t.find("a.clear").on("click",function(){Da()}),t.find("a.addSelected").on("click",function(){P=e.getSelectedVillage().data,F.html(l.genVillageLabel(P)),T.origin=!0,P&&Q&&ca(),a.getVillageByCoords(P.x,P.y,function(a){P=a,na()})}),t.find("a.addMapSelected").on("click",function(){if(!aa)return l.emitNotif("error",b("queue","error.noMapSelectedVillage"));Q=aa,G.html(l.genVillageLabel(Q)),T.target=!0,P&&Q&&ca(),a.getVillageByCoords(Q.x,Q.y,function(a){Q=a,na()})}),t.find("a.addCurrentDate").on("click",function(){y.val(ma()),y.trigger("input")}),t.find("a.currentDatePlus").on("click",function(){y.val(Ia(y.val(),100))}),t.find("a.currentDateMinus").on("click",function(){y.val(Ia(y.val(),-100))});var d=function(a){return function(){var b="origin"===a?w:x,c=b.val();if(c.length<2)return j.hide();j.search(c,function(c){c.length&&j.show(c,b[0],"commandQueue-"+a)},["village"])}};w.on("input",d("origin")),x.on("input",d("target")),c.$on(h.SELECT_SELECTED,function(a,b,c){"commandQueue-origin"===b?(T.origin=!0,P=c,qa(w),na(),F.html(c.name)):"commandQueue-target"===b&&(T.target=!0,Q=c,qa(x),na(),G.html(c.name)),P&&Q||ba()}),y.on("input",function(){T.date=l.isValidDateTime(y.val()),T.date?qa(y):pa(y),na()}),z.on("change",function(){na()}),E.on("input",function(a){a.target.value?D.css("display",""):D.css("display","none")}),H.on("click",La),c.$on(h.SHOW_CONTEXT_MENU,function(a,b){aa=b.data}),c.$on(h.DESTROY_CONTEXT_MENU,function(){aa=!1}),c.$on(h.VILLAGE_SELECTED_CHANGED,function(){za()}),c.$on(h.ARMY_PRESET_UPDATE,Ja),c.$on(h.ARMY_PRESET_DELETED,Ja),I.on("selectSelected",function(){var a=I[0].dataset.value;Ka(a)})},Ca=function(){C.find(".selectedVillage").on("click",function(){U.selectedVillage?this.classList.remove("active"):this.classList.add("active"),U.selectedVillage=!U.selectedVillage,za()}),C.find(".barbarianTarget").on("click",function(){U.barbarianTarget?this.classList.remove("active"):this.classList.add("active"),U.barbarianTarget=!U.barbarianTarget,za()}),C.find(".allowedTypes").on("click",function(){var a=this.dataset.filter,b=U[a];b?this.classList.remove("active"):this.classList.add("active"),U[a]=!b,W.allowedTypes[a]=!b,za()}),C.find(".textMatch").on("input",function(a){clearTimeout(K),W[this.dataset.filter]=this.value,K=setTimeout(function(){za()},250)})},Da=function(){a.getSentCommands().forEach(function(a){ta(a,"sent")}),a.getExpiredCommands().forEach(function(a){ta(a,"expired")}),a.clearRegisters()},Ea=function(a,c,d){return d&&(a=d+"."+a),b("queue",a)+" "+b("queue",c)},Fa=function(a){return!(n.gameTime()+M>a)},Ga=function(){var a={};return X.forEach(function(b){v.find(".officers ."+b).val()&&(a[b]=!0)}),a},Ha=function(){var a=Y.filter(function(a){return"catapult"!==a});return a.push("catapult"),a},Ia=function(a,b){return l.isValidDateTime(a)?(a=l.fixDate(a),a=l.getTimeFromString(a),a+=b,ma(a)):""},Ja=function(){var a=b("queue","add.insert-preset"),c=e.getPresetList().presets,d=I.find(".custom-select-data").html(""),f=(I.find(".custom-select-handler").html(a),document.createElement("span"));f.dataset.name=a,f.dataset.value="",d.append(f),I[0].dataset.name=a;for(var g in c){var h=document.createElement("span");h.dataset.name=c[g].name,h.dataset.value=g,h.dataset.icon="size-26x26 icon-26x26-preset",d.append(h)}},Ka=function(a){var b=e.getPresetList().presets[a];if(!b)return!1;La(),t.find(".add-units input.unit").forEach(function(a){a.value=b.units[a.dataset.setting]||""}),z.forEach(function(a){var c=a.dataset.setting;b.officers[c]&&(a.checked=!0,$(a).parent().addClass("icon-26x26-checkbox-checked"))})},La=function(){t.find(".add-units input.unit").forEach(function(a){a.value=""}),z.forEach(function(a){a.checked=!1}),z.parent().forEach(function(a){$(a).removeClass("icon-26x26-checkbox-checked")})};a.interface=function(){a.interface=q()}}),define("two/farm",["two/locale","two/farm/Village","two/utils","two/eventQueue","helper/math","conf/conf","struct/MapData","helper/mapconvert","helper/time","conf/locale","conf/gameStates","Lockr"],function(a,b,d,i,j,l,m,n,o,p,q,r){var s,t,u,v,w,x,y=!1,z=/(\(|\{|\[|\"|\')[^\)\}\]\"\']+(\)|\}|\]|\"|\')/,A=null,B=[],C=null,D=null,E={},F=null,G=!0,H=!0,I=[],J=null,K=null,L=null,M=[],N=[],O={},P=!1,Q="",R={},S="paused",T=[function(a){if(a.id<0)return!0},function(a){if(a.character_id===w.getId())return!0},function(a){
if(a.attack_protection)return!0},function(a){if(a.character_id){if(!N.includes(a.id))return!0}},function(a){return a.points<xa.settings.minPoints||(a.points>xa.settings.maxPoints||void 0)},function(a){var b=C.position,c=j.actualDistance(b,a);return c<xa.settings.minDistance||(c>xa.settings.maxDistance||void 0)}],U=function(a){var b={};for(var c in a)a[c]>0&&(b[c]=a[c]);return b},V=function(){r.set("farm-lastEvents",s)},W=function(){var a=e.getGroupList().getGroups();J=xa.settings.groupIgnore in a&&a[xa.settings.groupIgnore],K=xa.settings.groupInclude in a&&a[xa.settings.groupInclude],L=xa.settings.groupOnly in a&&a[xa.settings.groupOnly]},X=function(){var a=e.getGroupList();M=[],N=[],J&&(M=a.getGroupVillageIds(J.id)),K&&(N=a.getGroupVillageIds(K.id))},Y=function(){var a=w.getVillageList().map(function(a){return new b(a)}).filter(function(a){return!M.includes(a.id)});if(L){var c=e.getGroupList(),d=c.getGroupVillageIds(L.id);a=a.filter(function(a){return d.includes(a.id)})}if(A=a,D=1===A.length,C=A[0],xa.commander.running&&P)for(var f=0;f<a.length;f++){var g=a[f];if(!O[g.id]){P=!1,xa.commander.analyse();break}}xa.triggerEvent("Farm/villagesUpdate")},Z=function(a){var b=function(b){if(I=[],!xa.settings.presetName)return void(a&&a());for(var c in b)if(b.hasOwnProperty(c)){var d=b[c].name,e=d.replace(z,"").trim();e===xa.settings.presetName&&(b[c].cleanName=e,b[c].units=U(b[c].units),I.push(b[c]))}a&&a()};e.getPresetList().isLoaded()?b(e.getPresetList().getPresets()):f.emit(g.GET_PRESETS,{},function(a){xa.triggerEvent("Farm/presets/loaded"),b(a.presets)})},$=function(){var a=[],b=function(a){var b=ka(a.target_village_id);return!!b&&(ja(b),!0)},d=function(a){oa(a.id,function(a){var b=a.ReportAttack,c=b.attVillageId,d=b.defVillageId;if(R.hasOwnProperty(c)||(R[c]=[]),R[c].includes(d))return!1;R[c].push(d),xa.triggerEvent("Farm/priorityTargetAdded",[{id:d,name:b.defVillageName,x:b.defVillageX,y:b.defVillageY}])})},e=function(){a.forEach(function(a){d(a)}),a=[]},f=function(c,e){if(!xa.commander.running||"attack"!==e.type)return!1;xa.settings.ignoreOnLoss&&1!==e.result&&b(e),xa.settings.priorityTargets&&"full"===e.haul&&(k.isTemplateOpen("report")?a.push(e):d(e))},g=function(a,b){"report"===b&&e()};c.$on(h.REPORT_NEW,f),c.$on(h.WINDOW_CLOSED,g)},_=function(){var a=function(a,b){var c=xa.settings.remoteId;if(1!==b.participants.length||b.title!==c)return!1;switch(b.message.content.trim().toLowerCase()){case"on":case"start":case"init":case"begin":xa.restart(),pa(b.message_id,qa()),xa.triggerEvent("Farm/remoteCommand",["on"]);break;case"off":case"stop":case"pause":case"end":xa.tempDisableNotifs(function(){xa.pause()}),pa(b.message_id,qa()),xa.triggerEvent("Farm/remoteCommand",["off"]);break;case"status":case"current":pa(b.message_id,qa()),xa.triggerEvent("Farm/remoteCommand",["status"])}return!1};c.$on(h.MESSAGE_SENT,a)},aa=function(){var a=function(){if(Z(),xa.triggerEvent("Farm/presets/change"),xa.commander.running){!!I.length?xa.getGlobalWaiting()&&(la(),xa.restart()):(xa.triggerEvent("Farm/noPreset"),xa.pause())}};c.$on(h.ARMY_PRESET_UPDATE,a),c.$on(h.ARMY_PRESET_DELETED,a)},ba=function(){var a=function(){W(),X(),xa.triggerEvent("Farm/groupsChanged")},b=function(a,b){if(Y(),!K)return!1;K.id===b.group_id&&(E={})};c.$on(h.GROUPS_UPDATED,a),c.$on(h.GROUPS_CREATED,a),c.$on(h.GROUPS_DESTROYED,a),c.$on(h.GROUPS_VILLAGE_LINKED,b),c.$on(h.GROUPS_VILLAGE_UNLINKED,b)},ca=function(){var a=function(a){if(delete O[a],P){if(P=!1,xa.settings.stepCycle)return!1;xa.commander.running&&(ha(a),xa.commander.analyse())}},b=function(b,c){var d=c.village_id,e=O[d]||!1;if("units"===e||"commands"===e)return a(d),!1},d=function(b,c){var d=c.villageId;if("fullStorage"===(O[d]||!1))a(d);else{var e=ga(d);xa.isFullStorage(e)&&xa.setWaitingVillage(d,"fullStorage")}};c.$on(h.VILLAGE_ARMY_CHANGED,b),c.$on(h.VILLAGE_RESOURCES_CHANGED,d)},da=function(){var a=function(){xa.commander.running&&setTimeout(function(){xa.restart()},5e3)};m.setRequestFn(function(a){f.emit(g.MAP_GETVILLAGES,a)}),c.$on(h.RECONNECT,a)},ea=function(){i.bind("Farm/sendCommand",function(){fa(),S="attacking"}),i.bind("Farm/noPreset",function(){S="paused"}),i.bind("Farm/noUnits",function(){S="noUnits"}),i.bind("Farm/noUnitsNoCommands",function(){S="noUnitsNoCommands"}),i.bind("Farm/start",function(){S="attacking"}),i.bind("Farm/pause",function(){S="paused"}),i.bind("Farm/loadingTargets/start",function(){S="loadingTargets"}),i.bind("Farm/loadingTargets/end",function(){S="analyseTargets"}),i.bind("Farm/commandLimit/single",function(){S="commandLimit"}),i.bind("Farm/commandLimit/multi",function(){S="noVillages"}),i.bind("Farm/stepCycle/end",function(){S="stepCycle/end",H&&xa.settings.stepCycleNotifs&&d.emitNotif("error",a("farm","events.stepCycle/end"))}),i.bind("Farm/stepCycle/end/noVillages",function(){S="stepCycle/end/noVillages",H&&d.emitNotif("error",a("farm","events.stepCycle/end/noVillages"))}),i.bind("Farm/stepCycle/next",function(){if(S="stepCycle/next",H&&xa.settings.stepCycleNotifs){var b=o.gameTime()+xa.cycle.getInterval();d.emitNotif("success",a("farm","events.stepCycle/next",{time:d.formatDate(b)}))}}),i.bind("Farm/fullStorage",function(){S="fullStorage"})},fa=function(){u=o.gameTime(),r.set("farm-lastAttack",u)},ga=function(a){var b=A.indexOf(a);return-1!==b&&A[b]},ha=function(a){var b=ga(a);return!!b&&(C=b,!0)},ia=function(a,b){f.emit(g.ASSIGN_PRESETS,{village_id:C.id,preset_ids:a},b)},ja=function(a){if(!J)return!1;f.emit(g.GROUPS_LINK_VILLAGE,{group_id:J.id,village_id:a.id},function(){xa.triggerEvent("Farm/ignoredVillage",[a])})},ka=function(a){for(var b in E)for(var c=E[b],d=0;d<c.length;d++){var e=c[d];if(e.id===a)return e}return!1},la=function(){O={}},ma=function(){setInterval(function(){if(xa.commander.running){var a=3e5;xa.settings.stepCycle&&xa.cycle.intervalEnabled()&&(a+=xa.cycle.getInterval()+6e4);o.gameTime()-u>a&&xa.tempDisableNotifs(function(){xa.pause(),xa.start(!0)})}},6e4)},na=function(){setInterval(function(){E={}},3e5)},oa=function(a,b){f.emit(g.REPORT_GET,{id:a},b)},pa=function(a,b){f.emit(g.MESSAGE_REPLY,{message_id:a,message:b})},qa=function(){var b=a("common","status"),c=a("farm","events.selectedVillage"),e=a("farm","events.lastAttack"),f={};if("stepCycle/next"===S){var g=o.gameTime()+xa.cycle.getInterval();f.time=d.formatDate(g)}var h=a("farm","events."+S,f),i=d.genVillageLabel(C),j=d.formatDate(u),k=C.id,l=[];return l.push("[b]",b,":[/b] ",h,"[br]"),l.push("[b]",c,":[/b] "),l.push("[village=",k,"]",i,"[/village][br]"),l.push("[b]",e,":[/b] ",j),l.join("")},ra=function(){var a=o.gameTime();if(xa.settings.stepCycle&&xa.cycle.intervalEnabled()){if(a>t+xa.cycle.getInterval()+6e4)return!0}else if(a>t+18e5)return!0;return!1},sa=function(a,b,c,d,e,f){if(m.hasTownDataInChunk(a,b)){var g=m.loadTownData(a,b,c,d,e);return f(g)}xa.triggerEvent("Farm/loadingTargets/start");var h=n.scaledGridCoordinates(a,b,c,d,e),i=h.length,j=0;m.loadTownDataAsync(a,b,c,d,function(){if(++j===i){xa.triggerEvent("Farm/loadingTargets/end");var g=m.loadTownData(a,b,c,d,e);f(g)}})},ta=function(a){for(var b=a.length,c=[];b--;){var d=a[b],e=d.data;for(var f in e){var g=e[f];for(var h in g){var i=g[h];c.push(i)}}}return c},ua=function(a){return a.filter(function(a){return T.every(function(b){return!b(a)})})},va=function(a){for(var b,c=[],d=C.position,e=0;e<a.length;e++)b=a[e],c.push({x:b.x,y:b.y,distance:j.actualDistance(d,b),id:b.id,name:b.name,pid:b.character_id});return c},wa=function(){var a=r.get("farm-settings",{},!0);for(var b in xa.settingsMap)xa.settings[b]=a.hasOwnProperty(b)?a[b]:xa.settingsMap[b].default},xa={};return xa.version="4.0.1",xa.settings={},xa.settingsMap={maxDistance:{default:10,updates:["targets"],inputType:"text",min:0,max:50},minDistance:{default:0,updates:["targets"],inputType:"text",min:0,max:50},maxTravelTime:{default:"01:00:00",updates:[],inputType:"text",pattern:/\d{1,2}\:\d{2}\:\d{2}/},randomBase:{default:3,updates:[],inputType:"text",min:0,max:9999},presetName:{default:"",updates:["preset"],inputType:"select"},groupIgnore:{default:"0",updates:["groups"],inputType:"select"},groupInclude:{default:"0",updates:["groups","targets"],inputType:"select"},groupOnly:{default:"0",updates:["groups","villages","targets"],inputType:"select"},minPoints:{default:0,updates:["targets"],inputType:"text",min:0,max:13e3},maxPoints:{default:12500,updates:["targets"],inputType:"text",min:0,max:13e3},eventsLimit:{default:20,updates:["events"],inputType:"text",min:0,max:150},ignoreOnLoss:{default:!0,updates:[],inputType:"checkbox"},priorityTargets:{default:!0,updates:[],inputType:"checkbox"},eventAttack:{default:!0,updates:["events"],inputType:"checkbox"},eventVillageChange:{default:!0,updates:["events"],inputType:"checkbox"},eventPriorityAdd:{default:!0,updates:["events"],inputType:"checkbox"},eventIgnoredVillage:{default:!0,updates:["events"],inputType:"checkbox"},remoteId:{default:"remote",updates:[],inputType:"text"},hotkeySwitch:{default:"shift+z",updates:[],inputType:"text"},hotkeyWindow:{default:"z",updates:[],inputType:"text"},stepCycle:{default:!1,updates:["villages"],inputType:"checkbox"},stepCycleNotifs:{default:!1,updates:[],inputType:"checkbox"},stepCycleInterval:{default:"00:00:00",updates:[],inputType:"text",pattern:/\d{1,2}\:\d{2}\:\d{2}/},commandsPerVillage:{default:48,updates:["waitingVillages"],inputType:"text",min:1,max:50},ignoreFullStorage:{default:!0,updates:["fullStorage"],inputType:"checkbox"}},xa.init=function(){a.create("farm",{en:{langName:"Polski",title:"Farmer","events.attacking":"Atakuje.","events.commandLimit":"Limit 50 ataków osiągnięty, oczekiwanie na powrót wojsk.","events.lastAttack":"Ostatni atak","events.nextVillage":"Przejście do wioski %{village}","events.noPreset":"Brak dostępnych szablonów.","events.noSelectedVillage":"Brak dostępnych wiosek.","events.noUnits":"Brak dostępnych jednostek w wiosce, oczekiwanie na powrót wojsk.","events.noUnitsNoCommands":"Brak jednostek w wioskach lub powracających wojsk.","events.noVillages":"Brak dostępnych wiosek, oczekiwanie na powrót wojsk.","events.nothingYet":"Odpoczywam...","events.presetFirst":"Wybierz najpierw szablon!","events.selectedVillage":"Wybrana wioska","events.sendCommand":"%{origin} atakuje %{target}","events.loadingTargets":"Ładowanie celów...","events.checkingTargets":"Sprawdzanie celów...","events.restartingCommands":"Restartowanie poleceń...","events.ignoredVillage":"Cel %{target} pominięty! (caused loss)","events.priorityTargetAdded":"%{target} dodany do priorytetowych.","events.analyseTargets":"Analizowanie celów.","events.stepCycle/restart":"Restartowanie cyklu poleceń...","events.stepCycle/end":"Lista wiosek zakończona, oczekiwanie na następny cykl.","events.stepCycle/end/noVillages":"Brak wiosek do rozpoczęcia cyklu.","events.stepCycle/next":"Lista wiosek się skończyła, następny cykl: %{time}.","events.stepCycle/next/noVillages":"Brak wioski do rozpoczęcia cyklu, następny cykl: %{time}.","events.fullStorage":"Magazyn w wiosce jest pełny","general.disabled":"— Wyłączony —","general.paused":"Farmer zatrzymany","general.started":"Farmer uruchomiony","settings.docs":"Miłego farmienia!","settings.settings":"Ustawienia","settings.presets":"Szablony","settings.groupIgnore":"Pomijaj wioski z grupy","settings.groupInclude":"Dodaj wioski z grupy","settings.groupOnly":"Tylko wioski z grupy","settings.randomBase":"Domyślny odstęp (sek)","settings.commandsPerVillage":"Limit poleceń","settings.priorityTargets":"Priorytyzuj cele","settings.ignoreOnLoss":"Pomijaj cele jeśli straty","settings.ignoreFullStorage":"Pomijaj wioski jeśli magazyn pełny","settings.stepCycle/header":"Cykl Farmienia","settings.stepCycle":"Włącz Cykl farmienia","settings.stepCycle/interval":"Odstęp między cyklami","settings.stepCycle/notifs":"Powiadomienia","settings.targetFilters":"Filtry celów","settings.minDistance":"Minimalna odległość","settings.maxDistance":"Maksymalna odległość","settings.minPoints":"Minimalna liczba punktów","settings.maxPoints":"Maksymalna liczba punktów","settings.maxTravelTime":"Maksymalny czas podróży","settings.eventsLimit":"Limit logów","settings.eventAttack":"Logi ataków","settings.eventVillageChange":"Logi zmiany wiosek","settings.eventPriorityAdd":"Logi celów priorytetowych","settings.eventIgnoredVillage":"Logi pominiętych wiosek","settings.remote":"Sterowanie Zdalne za pomocą wiadomości PW","settings.hotkeySwitch":"Skrót Start/Pauza","settings.hotkeyWindow":"Skrót okna Farmera","settings.saved":"Ustawienia zapisane!","settingError.minDistance":"Odległość celu musi być większa niż %{min}.","settingError.maxDistance":"Odległość celu nie może przekraczać %{max}.","settingError.maxTravelTime":"Maksymalny czas podróży hh:mm:ss.","settingError.randomBase":"Domyślny odstęp musi być pomiędzy %{min} and %{max}.","settingError.minPoints":"Minimalna liczba punktów celu to %{min}.","settingError.maxPoints":"Maksymalna liczba punktów celu to %{max}.","settingError.eventsLimit":"Liczba zdarzeń musi być wartością między %{min} i %{max}.","settingError.stepCycle/interval":"Format odstępu między cyklami powinien mieć postać hh:mm:ss.","settingError.commandsPerVillage":"Limit poleceń na wioskę musi być wartością między %{min} and %{max}."},pl:{langName:"Polski",title:"Farmer","events.attacking":"Atakuje.","events.commandLimit":"Limit 50 ataków osiągnięty, oczekiwanie na powrót wojsk.","events.lastAttack":"Ostatni atak","events.nextVillage":"Przejście do wioski %{village}","events.noPreset":"Brak dostępnych szablonów.","events.noSelectedVillage":"Brak dostępnych wiosek.","events.noUnits":"Brak dostępnych jednostek w wiosce, oczekiwanie na powrót wojsk.","events.noUnitsNoCommands":"Brak jednostek w wioskach lub powracających wojsk.","events.noVillages":"Brak dostępnych wiosek, oczekiwanie na powrót wojsk.","events.nothingYet":"Odpoczywam...","events.presetFirst":"Wybierz najpierw szablon!","events.selectedVillage":"Wybrana wioska","events.sendCommand":"%{origin} atakuje %{target}","events.loadingTargets":"Ładowanie celów...","events.checkingTargets":"Sprawdzanie celów...","events.restartingCommands":"Restartowanie poleceń...","events.ignoredVillage":"Cel %{target} pominięty! (caused loss)","events.priorityTargetAdded":"%{target} dodany do priorytetowych.","events.analyseTargets":"Analizowanie celów.","events.stepCycle/restart":"Restartowanie cyklu poleceń...","events.stepCycle/end":"Lista wiosek zakończona, oczekiwanie na następny cykl.","events.stepCycle/end/noVillages":"Brak wiosek do rozpoczęcia cyklu.","events.stepCycle/next":"Lista wiosek się skończyła, następny cykl: %{time}.","events.stepCycle/next/noVillages":"Brak wioski do rozpoczęcia cyklu, następny cykl: %{time}.","events.fullStorage":"Magazyn w wiosce jest pełny","general.disabled":"— Wyłączony —","general.paused":"Farmer zatrzymany","general.started":"Farmer uruchomiony","settings.docs":"Miłego farmienia!","settings.settings":"Ustawienia","settings.presets":"Szablony","settings.groupIgnore":"Pomijaj wioski z grupy","settings.groupInclude":"Dodaj wioski z grupy","settings.groupOnly":"Tylko wioski z grupy","settings.randomBase":"Domyślny odstęp (sek)","settings.commandsPerVillage":"Limit poleceń","settings.priorityTargets":"Priorytyzuj cele","settings.ignoreOnLoss":"Pomijaj cele jeśli straty","settings.ignoreFullStorage":"Pomijaj wioski jeśli magazyn pełny","settings.stepCycle/header":"Cykl Farmienia","settings.stepCycle":"Włącz Cykl farmienia","settings.stepCycle/interval":"Odstęp między cyklami","settings.stepCycle/notifs":"Powiadomienia","settings.targetFilters":"Filtry celów","settings.minDistance":"Minimalna odległość","settings.maxDistance":"Maksymalna odległość","settings.minPoints":"Minimalna liczba punktów","settings.maxPoints":"Maksymalna liczba punktów","settings.maxTravelTime":"Maksymalny czas podróży","settings.eventsLimit":"Limit logów","settings.eventAttack":"Logi ataków","settings.eventVillageChange":"Logi zmiany wiosek","settings.eventPriorityAdd":"Logi celów priorytetowych","settings.eventIgnoredVillage":"Logi pominiętych wiosek","settings.remote":"Sterowanie Zdalne za pomocą wiadomości PW","settings.hotkeySwitch":"Skrót Start/Pauza","settings.hotkeyWindow":"Skrót okna Farmera","settings.saved":"Ustawienia zapisane!","settingError.minDistance":"Odległość celu musi być większa niż %{min}.","settingError.maxDistance":"Odległość celu nie może przekraczać %{max}.","settingError.maxTravelTime":"Maksymalny czas podróży hh:mm:ss.","settingError.randomBase":"Domyślny odstęp musi być pomiędzy %{min} and %{max}.","settingError.minPoints":"Minimalna liczba punktów celu to %{min}.","settingError.maxPoints":"Maksymalna liczba punktów celu to %{max}.","settingError.eventsLimit":"Liczba zdarzeń musi być wartością między %{min} i %{max}.","settingError.stepCycle/interval":"Format odstępu między cyklami powinien mieć postać hh:mm:ss.","settingError.commandsPerVillage":"Limit poleceń na wioskę musi być wartością między %{min} and %{max}."}},"pl"),y=!0,xa.commander=xa.createCommander(),w=e.getSelectedCharacter(),x=e.getGameState(),s=r.get("farm-lastEvents",[],!0),t=r.get("farm-lastActivity",o.gameTime(),!0),u=r.get("farm-lastAttack",-1,!0),v=r.get("farm-indexes",{},!0),wa(),W(),X(),Y(),Z(),$(),_(),ba(),aa(),ca(),da(),ea(),ma(),na()},xa.start=function(b){if(!I.length)return!b&&H&&d.emitNotif("error",a("farm","events.presetFirst")),!1;if(!C)return!b&&H&&d.emitNotif("error",a("farm","events.noSelectedVillage")),!1;if(!x.getGameState(q.ALL_VILLAGES_READY)){var e=c.$on(h.GAME_STATE_ALL_VILLAGES_READY,function(){e(),xa.start()});return!1}return ra()&&(R={},v={}),xa.settings.stepCycle?xa.cycle.startStep(b):xa.cycle.startContinuous(),xa.updateActivity(),!0},xa.pause=function(){return xa.breakCommander(),xa.triggerEvent("Farm/pause"),clearTimeout(xa.cycle.getTimeoutId()),H&&d.emitNotif("success",a("common","paused")),!0},xa.breakCommander=function(){clearTimeout(xa.commander.timeoutId),xa.commander.running=!1},xa.restart=function(){xa.tempDisableNotifs(function(){xa.pause(),xa.start()})},xa.switch=function(){xa.commander.running?xa.pause():xa.start()},xa.updateActivity=function(){t=o.gameTime(),r.set("farm-lastActivity",t)},xa.updateSettings=function(a){var b,c,d,e={};for(var f in a)if(b=xa.settingsMap[f],c=a[f],b&&c!==xa.settings[f]){if(b.hasOwnProperty("pattern")){if(!b.pattern.test(c))return xa.triggerEvent("Farm/settingError",[f]),!1}else if(b.hasOwnProperty("min")&&(c<b.min||c>b.max))return xa.triggerEvent("Farm/settingError",[f,{min:b.min,max:b.max}]),!1;b.updates.forEach(function(a){e[a]=!0}),xa.settings[f]=c}if(r.set("farm-settings",xa.settings),e.groups&&(W(),X()),e.villages&&Y(),e.preset&&(Z(),la()),e.targets&&(E={}),e.events&&xa.triggerEvent("Farm/resetEvents"),e.fullStorage)for(d in O)"fullStorage"===O[d]&&delete O[d];if(e.waitingVillages)for(d in O)"commands"===O[d]&&delete O[d];return xa.commander.running&&xa.tempDisableEvents(function(){xa.restart()}),xa.triggerEvent("Farm/settingsChange",[e]),!0},xa.nextTarget=function(a){var b=C.id;if(!E[b])return xa.commander.analyse(),!1;var c=E[b];if(xa.settings.priorityTargets&&R[b])for(var d;d=R[b].shift();)if(!M.includes(d))for(var e=0;e<c.length;e++)if(c[e].id===d)return F=c[e],!0;var f=v[b],g=!1;for(a||(f=++v[b]);f<c.length;f++){var h=c[f];{if(!M.includes(h.id)){F=h,g=!0;break}xa.triggerEvent("Farm/ignoredTarget",[h])}}return g?v[b]=f:(F=c[0],v[b]=0),r.set("farm-indexes",v),!0},xa.hasTarget=function(){var a=C.id,b=v[a],c=E[a];return!!c.length&&((void 0===b||b>c.length)&&(v[a]=b=0),!!c[b])},xa.getTargets=function(a){var b=C.position,c=C.id;if(c in E)return a();var d=l.MAP_CHUNK_SIZE,e=b.x-d,f=b.y-d;sa(e,f,2*d,2*d,d,function(b){var d=ta(b),e=ua(d),f=va(e);if(0===f.length)return xa.nextVillage()?xa.getTargets(a):xa.triggerEvent("Farm/noTargets"),!1;E[c]=f.sort(function(a,b){return a.distance-b.distance}),v.hasOwnProperty(c)?v[c]>E[c].length&&(v[c]=0,r.set("farm-indexes",v)):(v[c]=0,r.set("farm-indexes",v)),a()})},xa.nextVillage=function(){if(D)return!1;if(xa.settings.stepCycle)return xa.cycle.nextVillage();var a=B.shift();if(a){return xa.getFreeVillages().some(function(b){return b.id===a.id})?(C=a,xa.triggerEvent("Farm/nextVillage",[C]),xa.updateActivity(),!0):xa.nextVillage()}return B=xa.getFreeVillages(),B.length?xa.nextVillage():(D?xa.triggerEvent("Farm/noUnits"):xa.triggerEvent("Farm/noVillages"),!1)},xa.checkPresets=function(a){if(!I.length)return xa.pause(),xa.triggerEvent("Farm/noPreset"),!1;var b=C.id,c=e.getPresetList().getPresetsByVillageId(b),d=!1,f=[];if(I.forEach(function(a){c.hasOwnProperty(a.id)||(d=!0,f.push(a.id))}),d){for(var g in c)f.push(g);ia(f,a)}else a()},xa.targetsLoaded=function(){return E.hasOwnProperty(C.id)},xa.hasVillage=function(){return!!C},xa.isWaiting=function(){return O.hasOwnProperty(C.id)},xa.isIgnored=function(){return M.includes(C.id)},xa.isAllWaiting=function(){for(var a=0;a<A.length;a++){var b=A[a].id;if(!O.hasOwnProperty(b))return!1}return!0},xa.setLastEvents=function(a){s=a,V()},xa.getLastEvents=function(){return s},xa.getSelectedVillage=function(){return C},xa.isSingleVillage=function(){return D},xa.getSelectedTarget=function(){return F},xa.getNotifsEnabled=function(){return H},xa.getEventsEnabled=function(){return G},xa.getSelectedPresets=function(){return I},xa.setWaitingVillage=function(a,b){O[a]=b||!0},xa.getWaitingVillages=function(){return O},xa.setGlobalWaiting=function(){P=!0},xa.getGlobalWaiting=function(){return P},xa.getLastError=function(){return Q},xa.setLastError=function(a){Q=a},xa.isInitialized=function(){return y},xa.getLastAttack=function(){return u},xa.createCommander=function(){return new(require("two/farm/Commander"))},xa.setSelectedVillage=function(a){C=a},xa.setLeftVillages=function(a){B=a},xa.isFullStorage=function(a){if(a=a||C,a.original.isReady()){var b=a.original.getResources(),c=b.getComputed(),d=b.getMaxStorage();return["wood","clay","iron"].every(function(a){return c[a].currentStock===d})}return!1},xa.getFreeVillages=function(){return A.filter(function(a){return!O[a.id]&&(!xa.settings.ignoreFullStorage||!xa.isFullStorage(a)||(O[a.id]="fullStorage",!1))})},xa.tempDisableNotifs=function(a){H=!1,a(),H=!0},xa.tempDisableEvents=function(a){G=!1,a(),G=!0},xa.triggerEvent=function(a,b){G&&i.trigger(a,b)},xa}),define("two/farm/analytics",["two/farm","two/eventQueue","Lockr"],function(a,b,c){a.analytics=function(){ga("create","UA-92130203-4","auto","FarmOverflow");var a=e.getPlayer(),c=a.getSelectedCharacter(),d=[];d.push(c.getName()),d.push(c.getId()),d.push(c.getWorldId()),b.bind("Farm/sendCommand",function(){ga("FarmOverflow.send","event","commands","attack",d.join("~"))})}}),define("two/farm/Commander",["two/farm","two/utils","helper/math"],function(a,b,d){function e(){return this.preventNextCommand=!1,this.timeoutId=null,this.running=!1,this}var i=!1;return e.prototype.analyse=function(){var b=this;if(b.running){if(!a.getSelectedPresets().length)return a.pause(),void a.triggerEvent("Farm/noPreset");if(!a.hasVillage())return a.triggerEvent("Farm/noVillageSelected");var c=a.getSelectedVillage();if(!c.loaded())return void c.load(function(){b.analyse()});if(a.isWaiting()||a.isIgnored())return void(a.nextVillage()?b.analyse():a.triggerEvent(a.getLastError()));if(a.settings.ignoreFullStorage&&a.isFullStorage())return void(a.nextVillage()?b.analyse():b.handleError("fullStorage"));if(!a.targetsLoaded())return a.getTargets(function(){b.analyse()});if(!a.hasTarget())return void(a.nextVillage()?b.analyse():a.triggerEvent("Farm/noTargets"));a.nextTarget(!0),a.checkPresets(function(){if(c.countCommands()>=a.settings.commandsPerVillage)return b.handleError("commandLimit");var d=b.getPreset();if(d.error)return b.handleError(d.error);b.getPresetNext(d),b.send(d)})}},e.prototype.handleError=function(b){a.setLastError(b||this.preventNextCommand),this.preventNextCommand=!1;var c=a.getSelectedVillage(),d=c.id;switch(a.getLastError()){case"timeLimit":a.nextTarget(),this.analyse();break;case"noUnits":if(a.triggerEvent("Farm/noUnits",[c]),a.setWaitingVillage(d,"units"),a.isSingleVillage())return void(0===c.countCommands()?a.triggerEvent("Farm/noUnitsNoCommands"):(a.setGlobalWaiting(),a.settings.stepCycle&&a.cycle.endStep()));a.nextVillage()?this.analyse():a.setGlobalWaiting();break;case"commandLimit":a.setWaitingVillage(d,"commands");var e=a.isSingleVillage(),f=a.isAllWaiting();if(e||f){var g=e?"Farm/commandLimit/single":"Farm/commandLimit/multi";if(a.triggerEvent(g,[c]),a.setGlobalWaiting(),a.settings.stepCycle)return a.cycle.endStep()}a.nextVillage(),this.analyse();break;case"fullStorage":if(a.setWaitingVillage(d,"fullStorage"),a.isSingleVillage()){if(a.setGlobalWaiting(),a.settings.stepCycle)return a.cycle.endStep();a.triggerEvent("Farm/fullStorage")}}},e.prototype.getPreset=function(b){for(var c=!1,d=b||a.getSelectedVillage().units,e=a.getSelectedPresets(),f=0;f<e.length;f++){var g=e[f],h=!0;for(var i in g.units)d[i].in_town<g.units[i]&&(h=!1);if(h){if(this.checkPresetTime(g))return g;c=!0}else;}return{error:c?"timeLimit":"noUnits"}},e.prototype.getPresetNext=function(b){var c=angular.copy(a.getSelectedVillage().units),d=b.units;for(var e in d)c[e].in_town-=d[e];var f=this.getPreset(c);f.error&&(this.preventNextCommand=f.error)},e.prototype.checkPresetTime=function(c){var e=a.getSelectedTarget(),f=m.calculateTravelTime(c,{barbarian:!e.pid,officers:!1}),g=a.getSelectedVillage().position,h={x:e.x,y:e.y},i=d.actualDistance(g,h),j=m.getTravelTimeForDistance(c,f,i,"attack");return b.time2seconds(a.settings.maxTravelTime)>j},e.prototype.send=function(c,d){var e=Date.now();if(i&&e-i<100)return!1;if(i=e,!this.running)return!1;var h,j,k=this,l=a.getSelectedVillage();return k.simulate(),h=k.onCommandError(function(){j(),l.updateCommands(function(){k.analyse()})}),j=k.onCommandSend(function(){h(),a.nextTarget();var c;c=b.randomSeconds(a.settings.randomBase),c=100+1e3*c,k.timeoutId=setTimeout(function(){if(k.preventNextCommand)return k.handleError();k.analyse()},c),a.updateActivity()}),f.emit(g.SEND_PRESET,{start_village:l.id,target_village:a.getSelectedTarget().id,army_preset_id:c.id,type:"attack"}),!0},e.prototype.onCommandSend=function(b){var d=a.getSelectedVillage(),e=angular.copy(d.units),f=c.$on(h.VILLAGE_UNIT_INFO,function(c,g){if(d.id!==g.village_id)return!1;var h=d.units;if(angular.equals(e,h))return!1;a.triggerEvent("Farm/sendCommand",[d,a.getSelectedTarget()]),f(),b()});return f},e.prototype.onCommandError=function(b){var d=c.$on(h.MESSAGE_ERROR,function(c,e){return!(!e.cause||!e.code)&&("Command/sendPreset"===e.cause&&("Command/attackLimitExceeded"===e.code&&(a.triggerEvent("Farm/sendCommandError",[e.code]),d(),void b())))});return d},e.prototype.simulate=function(b){!function(){f.emit(g.GET_ATTACKING_FACTOR,{target_id:a.getSelectedTarget().id})}(),b&&b()},e}),define("two/farm/cycle",["two/farm","two/locale","two/utils","two/eventQueue"],function(a,b,c,d){var e=[],f=null,g={};g.intervalEnabled=function(){return!!g.getInterval()},g.startContinuous=function(){if(a.commander=a.createCommander(),a.commander.running=!0,a.triggerEvent("Farm/start"),a.getNotifsEnabled()&&c.emitNotif("success",b("farm","general.started")),!a.getFreeVillages().length)return void(a.isSingleVillage()?a.isFullStorage()?a.triggerEvent("Farm/fullStorage"):a.triggerEvent("Farm/noUnits"):a.triggerEvent("Farm/noVillages"));a.setLeftVillages(a.getFreeVillages()),a.commander.analyse()},g.startStep=function(f){a.commander=a.createCommander(),a.commander.running=!0,a.tempDisableNotifs(function(){a.triggerEvent("Farm/start")});var h=a.getFreeVillages();if(0===h.length)return void(g.intervalEnabled()?(a.triggerEvent("Farm/stepCycle/next/noVillages"),g.setNextCycle()):(a.triggerEvent("Farm/stepCycle/next/noVillages"),a.tempDisableNotifs(function(){a.pause()})));f?d.bind("Farm/stepCycle/restart"):a.getNotifsEnabled()&&c.emitNotif("success",b("farm","general.started")),e=h,a.commander.analyse()},g.endStep=function(){return g.intervalEnabled()?(a.triggerEvent("Farm/stepCycle/next"),a.breakCommander(),g.setNextCycle()):(a.triggerEvent("Farm/stepCycle/end"),a.tempDisableNotifs(function(){a.pause()})),!1},g.setNextCycle=function(){var a=g.getInterval();f=setTimeout(function(){g.startStep(!0)},a)},g.nextVillage=function(){var b=e.shift();return b?a.getFreeVillages().some(function(a){return a.id===b.id})?(a.setSelectedVillage(b),a.triggerEvent("Farm/nextVillage",[b]),!0):g.nextVillage():g.endStep()},g.getInterval=function(){var b=a.settings.stepCycleInterval,c=!1;return!!b&&(b=b.split(/\:/g).map(function(a){return isNaN(c)&&(c=!0),parseInt(a,10)}),!c&&(b=1e3*b[0]*60*60+1e3*b[1]*60+1e3*b[2]))},g.getTimeoutId=function(){return f},a.cycle=g}),define("two/farm/Village",["models/CommandListModel","models/CommandModel","conf/village"],function(a,b,c){function d(a){this.original=a,this.id=a.data.villageId,this.x=a.data.x,this.y=a.data.y,this.name=a.data.name,this.units=a.unitInfo.units,this.position=a.getPosition()}return d.prototype.countCommands=function(){return this.original.getCommandListModel().getOutgoingCommands(!0).length},d.prototype.updateCommands=function(c){var d=this;f.emit(g.GET_OWN_COMMANDS,{village_id:d.id},function(e){for(var f=new a([],d.id),g=0;g<e.commands.length;g++){var h=new b(e.commands[g]);f.add(h)}d.original.setCommandListModel(f),c()})},d.prototype.commandsLoaded=function(){return this.original.isReady(c.OWN_COMMANDS)},d.prototype.unitsLoaded=function(){return this.original.isReady(c.UNITS)},d.prototype.loaded=function(){return!!this.original.isReady()&&(!!this.original.isInitialized()&&(this.commandsLoaded()&&this.unitsLoaded()))},d.prototype.load=function(a){var b=this;return n.ensureVillageDataLoaded(this.id,function(){b.original.isInitialized()||n.initializeVillage(b.original),a()})},d}),require(["two/ready","two/farm","two/farm/ui","two/farm/analytics","two/farm/cycle"],function(a,b){if(b.isInitialized())return!1;a(function(){b.init(),b.interface(),b.analytics()})}),define("two/farm/ui",["two/farm","two/locale","two/ui","two/ui/buttonLink","two/FrontButton","two/utils","two/eventQueue","helper/time","ejs"],function(a,b,c,d,f,g,h,i,j){function k(){return w=e.getGroupList().getGroups(),v=b("farm","general.disabled"),m=new c("FarmOverflow",{activeTab:"settings",
template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2 class="ng-binding"><#= locale("farm", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-two-col"><div class="tab" tab="settings"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "settings") #></a></div></div></div><div class="tab" tab="log"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "logs") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-settings"><p class="center"><#= locale("farm", "settings.docs") #> <a href="https://gitlab.com/twoverflow/farmoverflow/wikis/Documentation" target="_blank"><#= locale("common", "here") #></a>.</p><form class="settings"><h5 class="twx-section collapse"><#= locale("farm", "settings.settings") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="40%"><col></colgroup><tbody><tr><td><span class="icon-34x34-preset"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.presets") #></span></td><td><select data-setting="presetName" class="preset"></select></td></tr><tr><td><span class="icon-20x20-queue-indicator-short"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.groupIgnore") #></span></td><td><select data-setting="groupIgnore" class="ignore"></select></td></tr><tr><td><span class="icon-20x20-queue-indicator-long"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.groupInclude") #></span></td><td><select data-setting="groupInclude" class="include"></select></td></tr><tr><td><span class="icon-20x20-favourite"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.groupOnly") #></span></td><td><select data-setting="groupOnly" class="only"></select></td></tr><tr><td><span class="ff-cell-fix"><#= locale("farm", "settings.randomBase") #></span></td><td><input data-setting="randomBase" type="number" class="textfield-border" min="0" required></td></tr><tr><td><span class="ff-cell-fix"><#= locale("farm", "settings.commandsPerVillage") #></span></td><td><input data-setting="commandsPerVillage" type="number" class="textfield-border" min="0" max="50" required></td></tr><tr><td><span class="icon-34x34-name_changed"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.priorityTargets") #></span></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-priorityTargets"><input id="settings-priorityTargets" type="checkbox" data-setting="priorityTargets"></label></td></tr><tr><td><span class="ff-cell-fix"><#- locale("farm", "settings.ignoreOnLoss") #></span></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-ignoreOnLoss"><input id="settings-ignoreOnLoss" type="checkbox" data-setting="ignoreOnLoss"></label></td></tr><tr><td><span class="ff-cell-fix"><#- locale("farm", "settings.ignoreFullStorage") #></span></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-ignoreFullStorage"><input id="settings-ignoreFullStorage" type="checkbox" data-setting="ignoreFullStorage"></label></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("farm", "settings.stepCycle/header") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="40%"><col></colgroup><tbody><tr><td><span class="ff-cell-fix"><#= locale("farm", "settings.stepCycle") #></span></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-stepCycle"><input id="settings-stepCycle" type="checkbox" data-setting="stepCycle"></label></td></tr><tr><td><span class="ff-cell-fix"><#= locale("farm", "settings.stepCycle/interval") #></span></td><td><input data-setting="stepCycleInterval" type="text" class="textfield-border" placeholder="00:00:00"></td></tr><tr><td><span class="ff-cell-fix"><#= locale("farm", "settings.stepCycle/notifs") #></span></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-stepCycle/notifs"><input id="settings-stepCycle/notifs" type="checkbox" data-setting="stepCycleNotifs"></label></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("farm", "settings.targetFilters") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="40%"><col></colgroup><tbody><tr><td><span class="icon-26x26-double-arrow"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.minDistance") #></span></td><td><input data-setting="minDistance" type="number" class="textfield-border" min="0" max="60" required></td></tr><tr><td><span class="icon-26x26-double-arrow"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.maxDistance") #></span></td><td><input data-setting="maxDistance" type="number" class="textfield-border" min="1" max="60" required></td></tr><tr><td><span class="icon-34x34-points-per-village"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.minPoints") #></span></td><td><input data-setting="minPoints" type="number" class="textfield-border" required></td></tr><tr><td><span class="icon-34x34-points-per-village"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.maxPoints") #></span></td><td><input data-setting="maxPoints" type="number" class="textfield-border" required></td></tr><tr><td><span class="icon-26x26-time"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.maxTravelTime") #></span></td><td><input data-setting="maxTravelTime" type="text" class="textfield-border" pattern="\\d{1,2}:\\d{1,2}:\\d{1,2}" required></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("common", "logs") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="40%"><col></colgroup><tbody><tr><td><span class="icon-26x26-info"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.eventsLimit") #></span></td><td><input data-setting="eventsLimit" type="number" class="textfield-border" min="1" required></td></tr><tr><td><#= locale("farm", "settings.eventAttack") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-eventAttack"><input id="settings-eventAttack" type="checkbox" data-setting="eventAttack"></label></td></tr><tr><td><#= locale("farm", "settings.eventVillageChange") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-eventVillageChange"><input id="settings-eventVillageChange" type="checkbox" data-setting="eventVillageChange"></label></td></tr><tr><td><#= locale("farm", "settings.eventPriorityAdd") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-eventPriorityAdd"><input id="settings-eventPriorityAdd" type="checkbox" data-setting="eventPriorityAdd"></label></td></tr><tr><td><#= locale("farm", "settings.eventIgnoredVillage") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-eventIgnoredVillage"><input id="settings-eventIgnoredVillage" type="checkbox" data-setting="eventIgnoredVillage"></label></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("common", "others") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="40%"><col></colgroup><tbody><tr><td><span class="icon-26x26-message-misc"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.remote") #></span></td><td><input data-setting="remoteId" type="text" class="textfield-border" min="3" max="45"></td></tr><tr><td><#= locale("farm", "settings.hotkeySwitch") #></td><td><input data-setting="hotkeySwitch" type="text" class="textfield-border"></td></tr><tr><td><#= locale("farm", "settings.hotkeyWindow") #></td><td><input data-setting="hotkeyWindow" type="text" class="textfield-border"></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-log"><div class="screen-tribe-news rich-text"><h5 class="twx-section collapse"><#= locale("common", "status") #></h5><table class="tbl-border-light tbl-news tbl-big-header"><colgroup><col width="135px"><col width="*"></colgroup><tbody><tr class="list-item"><td class="status" colspan="2" class="cell-center"><#= locale("common", "paused") #></td></tr><tr class="reduced"><td><#= locale("farm", "events.selectedVillage") #></td><td class="selected"></td></tr><tr class="reduced"><td><#= locale("farm", "events.lastAttack") #></td><td class="last"><#= locale("common", "none") #></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("common", "logs") #></h5><table class="tbl-border-light tbl-news tbl-big-header"><colgroup><col width="76px"><col></colgroup><tbody class="events"><tr class="reduced nothing"><td colspan="2"><div><span><#= locale("farm", "events.nothingYet") #></span></div></td></tr></tbody></table></div></div></div><footer class="win-foot"><ul class="list-btn list-center"><li class="twOverflow-button-settings"><a class="btn-orange btn-border save"><#= locale("common", "save") #></a></li><li class="twOverflow-button"><a class="btn-green btn-border start"><#= locale("common", "start") #></a></li></ul></footer></div>',replaces:{version:a.version,author:{name:"Relaxeaza",email:"mafrazzrafael@gmail.com",url:"https://gitlab.com/relaxeaza",gitlab_user_id:518047},locale:b},css:'#FarmOverflow input[type="text"],#FarmOverflow input[type="number"],#FarmOverflow select{color:#000;min-width:70%}#FarmOverflow .info a{font-weight:bold;color:#544231}#FarmOverflow .settings .custom-select{width:70%}#FarmOverflow .settings .helper{font-weight:bold;vertical-align:-1px;font-family:helvetica;color:rgba(0,0,0,0.3)}#FarmOverflow .settings .helper:hover{color:#000}#FarmOverflow .settings [class^="icon-"]{display:inline;margin:0 9px 0 0}#FarmOverflow .settings .icon-34x34-preset,#FarmOverflow .settings .icon-26x26-time,#FarmOverflow .settings .icon-26x26-info,#FarmOverflow .settings .icon-26x26-double-arrow{zoom:.6}#FarmOverflow .settings .icon-34x34-preset:before,#FarmOverflow .settings .icon-26x26-time:before,#FarmOverflow .settings .icon-26x26-info:before,#FarmOverflow .settings .icon-26x26-double-arrow:before{-moz-transform:scale(.6)}#FarmOverflow .settings .icon-20x20-queue-indicator-short,#FarmOverflow .settings .icon-20x20-queue-indicator-long,#FarmOverflow .settings .icon-20x20-favourite{vertical-align:0;margin:0 5px 0 0}#FarmOverflow .settings .icon-34x34-preset,#FarmOverflow .settings .icon-26x26-time{vertical-align:3px}#FarmOverflow .settings .icon-26x26-double-arrow{vertical-align:4px}#FarmOverflow .settings .icon-26x26-info{vertical-align:5px}#FarmOverflow .settings .icon-34x34-points-per-village,#FarmOverflow .settings .icon-34x34-name_changed{vertical-align:6px;zoom:.5}#FarmOverflow .settings .icon-34x34-points-per-village:before,#FarmOverflow .settings .icon-34x34-name_changed:before{-moz-transform:scale(.5)}#FarmOverflow .settings .icon-26x26-message-misc{vertical-align:1px}#FarmOverflow .settings .icon-34x34-general{zoom:.5}#FarmOverflow .settings .icon-34x34-general:before{-moz-transform:scale(.5)}#FarmOverflow .settings .icon-26x26-time-spy{zoom:.7}#FarmOverflow .settings .icon-26x26-time-spy:before{-moz-transform:scale(.7)}#FarmOverflow .settings td{text-align:center}#FarmOverflow .events tr{height:30px}#FarmOverflow .events tr td.tribe-event-time{white-space:nowrap}'}),n=new f(b("farm","title"),{classHover:!1,classBlur:!1,onClick:function(){m.openWindow()}}),o=$(m.$window),p=o.find(".events"),q=o.find(".last"),r=o.find(".status"),s=o.find(".start"),t=o.find(".settings"),u=o.find(".preset"),x={groupIgnore:o.find(".ignore"),groupInclude:o.find(".include"),groupOnly:o.find(".only")},h.bind("Farm/sendCommand",function(c,d){if(r.html(b("farm","events.attacking")),I(i.gameTime()),!a.settings.eventAttack)return!1;F({links:{origin:{type:"village",name:g.genVillageLabel(c),id:c.id},target:{type:"village",name:g.genVillageLabel(d),id:d.id}},icon:"attack-small",type:"sendCommand"})}),h.bind("Farm/nextVillage",function(b){if(H(),!a.settings.eventVillageChange)return!1;F({links:{village:{type:"village",name:g.genVillageLabel(b),id:b.id}},icon:"village",type:"nextVillage"})}),h.bind("Farm/ignoredVillage",function(b){if(!a.settings.eventIgnoredVillage)return!1;F({links:{target:{type:"village",name:g.genVillageLabel(b),id:b.id}},icon:"check-negative",type:"ignoredVillage"})}),h.bind("Farm/priorityTargetAdded",function(b){if(!a.settings.eventPriorityAdd)return!1;F({links:{target:{type:"village",name:g.genVillageLabel(b),id:b.id}},icon:"parallel-recruiting",type:"priorityTargetAdded"})}),h.bind("Farm/noPreset",function(){F({icon:"info",type:"noPreset"}),r.html(b("common","paused"))}),h.bind("Farm/noUnits",function(){a.isSingleVillage()&&r.html(b("farm","events.noUnits"))}),h.bind("Farm/noUnitsNoCommands",function(){r.html(b("farm","events.noUnitsNoCommands"))}),h.bind("Farm/start",function(){r.html(b("farm","events.attacking"))}),h.bind("Farm/pause",function(){r.html(b("common","paused"))}),h.bind("Farm/noVillages",function(){r.html(b("farm","events.noVillages"))}),h.bind("Farm/stepCycle/end",function(){r.html(b("farm","events.stepCycle/nnd"))}),h.bind("Farm/stepCycle/next",function(){var c=i.gameTime()+a.cycle.getInterval();r.html(b("farm","events.stepCycle/next",{time:g.formatDate(c)}))}),h.bind("Farm/stepCycle/next/noVillages",function(){var c=i.gameTime()+a.cycle.getInterval();r.html(b("farm","events.stepCycle/next/noVillages",{time:g.formatDate(c)}))}),h.bind("Farm/villagesUpdate",function(){H()}),h.bind("Farm/loadingTargets/start",function(){r.html(b("farm","events.loadingTargets"))}),h.bind("Farm/loadingTargets/end",function(){r.html(b("farm","events.analyseTargets"))}),h.bind("Farm/attacking",function(){r.html(b("farm","events.attacking"))}),h.bind("Farm/commandLimit/single",function(){r.html(b("farm","events.commandLimit"))}),h.bind("Farm/commandLimit/multi",function(){r.html(b("farm","events.noVillages"))}),h.bind("Farm/resetEvents",function(){y=0,D()}),h.bind("Farm/groupsChanged",function(){J()}),h.bind("Farm/presets/loaded",function(){K()}),h.bind("Farm/presets/change",function(){K()}),h.bind("Farm/start",function(){s.html(b("common","pause")),s.removeClass("btn-green").addClass("btn-red"),n.$elem.removeClass("btn-green").addClass("btn-red")}),h.bind("Farm/pause",function(){s.html(b("common","start")),s.removeClass("btn-red").addClass("btn-green"),n.$elem.removeClass("btn-red").addClass("btn-green")}),h.bind("Farm/settingError",function(a,c){var d="settingError."+a;g.emitNotif("error",b("farm",d,c))}),h.bind("Farm/fullStorage",function(){r.html(b("farm","events.fullStorage"))}),e.getPresetList().isLoaded()&&K(),C(),E(),J(),H(),I(),D(),m}var m,n,o,p,q,r,s,t,u,v,w,x,y=1,z=/(\(|\{|\[|\"|\')[^\)\}\]\"\']+(\)|\}|\]|\"|\')/,A=function(a){o.find("[data-setting]").forEach(function(b){var c=b.dataset.setting;a(b,c)})},B=function(){var c={};return A(function(b,d){switch(a.settingsMap[d].inputType){case"text":c[d]="number"===b.type?parseInt(b.value,10):b.value;break;case"select":c[d]=b.dataset.value;break;case"checkbox":c[d]=b.checked}}),!!a.updateSettings(c)&&(g.emitNotif("success",b("farm","settings.saved")),!0)},C=function(){A(function(b,c){switch(a.settingsMap[c].inputType){case"text":b.value=a.settings[c];break;case"select":b.dataset.value=a.settings[c];break;case"checkbox":a.settings[c]&&(b.checked=!0,b.parentElement.classList.add("icon-26x26-checkbox-checked"))}})},D=function(){var b=a.getLastEvents();b.length>0&&p.find(".nothing").remove(),b.some(function(b){return y>=a.settings.eventsLimit||!(!a.settings.eventAttack&&"sendCommand"===b.type)&&(!(!a.settings.eventVillageChange&&"nextVillage"===b.type)&&(!(!a.settings.eventPriorityAdd&&"priorityTargetAdded"===b.type)&&(!(!a.settings.eventIgnoredVillage&&"ignoredVillage"===b.type)&&void F(b,!0))))})},E=function(){l.add(a.settings.hotkeySwitch,function(){a.switch()}),l.add(a.settings.hotkeyWindow,function(){m.openWindow()}),s.on("click",function(){a.switch()}),o.find(".save").on("click",function(a){B()})},F=function(b,c){p.find(".nothing").remove(),y>=a.settings.eventsLimit&&p.find("tr:last-child").remove();var d=a.getLastEvents();d.length>=a.settings.eventsLimit&&d.pop(),G(p,b,c),y++,c||(b.timestamp=i.gameTime(),d.unshift(b),a.setLastEvents(d))},G=function(a,c,e){var f={},h={},k=c.links,l=c.timestamp||i.gameTime(),n=document.createElement("tr");if(k){for(var o in k)f[o]=d(k[o].type,k[o].name,k[o].id),h[o]='<a id="'+f[o].id+'"></a>';c.content=b("farm","events."+c.type,h)}var p=g.formatDate(l),q=g.formatDate(l,"HH:mm:ss");if(n.innerHTML=j.render('<td class="tribe-event-time" tooltip="<#= longDate #>"><#= shortDate #></td><td class="tribe-event-detail"><span class="icon-bg-black icon-26x26-<#= icon #>"></span><div class="text-tribe-news"><span><#- content #></span></div></td>',{longDate:p,shortDate:q,icon:c.icon,content:c.content}),k)for(var o in f)n.querySelector("#"+f[o].id).replaceWith(f[o].elem);a[e?"append":"prepend"](n),m.isVisible("log")&&m.recalcScrollbar(),m.setTooltips()},H=function(){var c=o.find(".selected"),e=a.getSelectedVillage();if(!e)return c.html(b("common","none"));var f=d("village",g.genVillageLabel(e),e.id);c.html(""),c.append(f.elem)},I=function(b){if(!b&&-1===(b=a.getLastAttack()))return!1;q.html(g.formatDate(b))},J=function(){for(var b in x){var c=x[b].find(".custom-select-handler").html(""),d=x[b].find(".custom-select-data").html("");L(d,"0");for(var e in w){var f=w[e].name,g=a.settings[b];""===g||"0"===g?(c.html(v),x[b][0].dataset.name=v,x[b][0].dataset.value=""):g==e&&(c.html(f),x[b][0].dataset.name=f,x[b][0].dataset.value=e),M(d,{name:f,value:e,icon:w[e].icon}),x[b].append(d)}a.settings[b]||c.html(v)}},K=function(){var b={},c=e.getPresetList().presets,d=!1,f=a.settings.presetName,g=u.find(".custom-select-handler").html(""),h=u.find(".custom-select-data").html("");L(h);for(var i in c){var j=c[i].name.replace(z,"").trim();j in b||j&&(""===f?(g.html(v),u[0].dataset.name=v,u[0].dataset.value=""):f===j&&(g.html(j),u[0].dataset.name=j,u[0].dataset.value=j,d=!0),M(h,{name:j,value:j,icon:"size-26x26 icon-26x26-preset"}),b[j]=!0)}d||(g.html(v),u[0].dataset.name=v,u[0].dataset.value="")},L=function(a,b){var c=document.createElement("span");c.dataset.name=v,c.dataset.value=b||"",a.append(c)},M=function(a,b){var c=document.createElement("span");for(var d in b)c.dataset[d]=b[d];a.append(c)};a.interface=function(){a.interface=k()}}),define("two/ui",["two/utils","queues/EventQueue","helper/dom","ejs"],function(b,d,e,f){function g(a,b){var d=this;return j.push(d),d.windowId=a,d.activeTab=b.activeTab,d.settings=b,m(a,b.css),d.buildWindow(),d.bindTabs(),d.setCollapse(),d.setTooltips(),d.setCheckboxes(),d.setSelects(),d.$window.querySelector(".twOverflow-close").addEventListener("click",function(){d.closeWindow()}),c.$on(h.WINDOW_CLOSED,function(b,c,e){(e||c===a)&&d.closeWindow()}),d}var i=!1,j=[],l=function(){j.forEach(function(a){a.closeWindow()})},m=function(a,b){var c=document.createElement("style");c.type="text/css",c.id="twOverflow-style-"+a,c.innerHTML=b,document.querySelector("head").appendChild(c)},n=function(d){var e=!1,f=document.createElement("span"),g=document.createElement("span"),i=document.createElement("span"),j=document.createElement("span"),k=function(a){var c=a.srcElement||a.target;b.matchesElem(c,".custom-select")||l()},l=function(){c.$broadcast(h.SELECT_HIDE,"custom-select"),$(a).off("click",k),$(".win-main").off("mousewheel",l),e=!1,o()},m=function(a,b){g.innerHTML=a.name,f.dataset.name=a.name,f.dataset.value=a.value,$(f).trigger("selectSelected"),l()},n=function(){i.classList.remove("icon-26x26-arrow-down"),i.classList.add("icon-26x26-arrow-up")},o=function(){i.classList.remove("icon-26x26-arrow-up"),i.classList.add("icon-26x26-arrow-down")};d.querySelectorAll("option").forEach(function(a){var b=document.createElement("span");b.dataset.name=a.innerText,b.dataset.value=a.value,j.appendChild(b),a.hasAttribute("selected")&&(g.innerHTML=a.innerText,f.dataset.name=a.innerText,f.dataset.value=a.value)});for(var p in d.dataset)f.dataset[p]=d.dataset[p];f.className="custom-select "+d.className,i.className="custom-select-button icon-26x26-arrow-down",g.className="custom-select-handler",j.className="custom-select-data",f.appendChild(g),f.appendChild(i),f.appendChild(j),f.addEventListener("click",function(){if(e)return l();var b=j.querySelectorAll("span"),d=[],i={};b.forEach(function(a){var b={name:a.dataset.name,value:a.dataset.value};a.dataset.icon&&(b.leftIcon=isNaN(a.dataset.icon)?a.dataset.icon:parseInt(a.dataset.icon,10)),a.dataset.name===g.innerHTML&&(i=b),d.push(b)}),c.$broadcast(h.SELECT_SHOW,"custom-select",d,i,m,f,!0),e=!0,n(),$(".win-main").on("mousewheel",l),$(a).on("click",k)}),d.replaceWith(f)};return g.prototype.buildWindow=function(){this.$wrapper=$("#wrapper"),this.$window=document.createElement("section"),this.$window.id=this.windowId,this.$window.className="twOverflow-window twx-window screen left",this.$window.style.visibility="hidden",this.$window.innerHTML=f.render(this.settings.template,this.settings.replaces),this.$wrapper.append(this.$window),this.$scrollbar=jsScrollbar(this.$window.querySelector(".win-main"))},g.prototype.openWindow=function(){k.closeAll(),l(),this.$window.style.visibility="visible",this.$wrapper.addClass("window-open"),this.resizeWindowFrame()},g.prototype.resizeWindowFrame=function(){d.trigger(d.types.RESIZE,{instant:!0,right:!0})},g.prototype.closeWindow=function(){"visible"===this.$window.style.visibility&&(this.settings.onClose&&this.settings.onClose(),this.$window.style.visibility="hidden",this.$wrapper.removeClass("window-open"),this.resizeWindowFrame())},g.prototype.toggleWindow=function(a){this.$window.style.visibility=a,this.$wrapper.toggleClass("window-open"),this.resizeWindowFrame()},g.prototype.tabsState=function(a,b){var c=this;if(a===b)return!1;c.$tabs.forEach(function(d){var e=d.getAttribute("tab");if(e!==a&&e!==b)return!1;e===a?c.disableTab(e,d):e===b&&c.enableTab(e,d)})},g.prototype.bindTabs=function(){var a=this;a.$tabs=a.$window.querySelectorAll(".tab"),a.$tabs.forEach(function(b){var c=b.getAttribute("tab");b.addEventListener("click",function(){a.tabsState(a.activeTab,c),a.activeTab=c,a.settings.onTabClick&&a.settings.onTabClick(c)}),a.activeTab===c?a.enableTab(c,b):a.disableTab(c,b),a.recalcScrollbar()})},g.prototype.enableTab=function(a,b){var c=this.$window.querySelector(".twOverflow-content-"+a),d=this.$window.querySelectorAll(".twOverflow-button-"+a),e=this.$window.querySelectorAll(".twOverflow-button"),f=b.querySelector(".tab-inner > div"),g=b.querySelector("a"),h=this.$window.querySelector("footer");c.style.display="",b.classList.add("tab-active"),f.classList.add("box-border-light"),g.classList.remove("btn-icon","btn-orange"),h&&(h.style.display=d.length||e.length?"":"none",d.length&&d.forEach(function(a){a.style.display=""})),this.$scrollbar.content=c,this.recalcScrollbar()},g.prototype.disableTab=function(a,b){var c=this.$window.querySelector(".twOverflow-content-"+a),d=this.$window.querySelectorAll(".twOverflow-button-"+a),e=(this.$window.querySelectorAll(".twOverflow-button"),b.querySelector(".tab-inner > div")),f=b.querySelector("a"),g=this.$window.querySelector("footer");c.style.display="none",b.classList.remove("tab-active"),e.classList.remove("box-border-light"),f.classList.add("btn-icon","btn-orange"),g&&d.length&&d.forEach(function(a){a.style.display="none"})},g.prototype.destroy=function(){document.querySelector("#twOverflow-style-"+this.windowId).remove(),this.$window.remove()},g.prototype.setCollapse=function(){var a=this;a.$window.querySelectorAll(".twx-section.collapse").forEach(function(b){var c=!b.classList.contains("hidden-content"),d=document.createElement("span");d.className="min-max-btn";var e=document.createElement("a");e.className="btn-orange icon-26x26-"+(c?"minus":"plus"),c||(b.nextSibling.style.display="none"),d.appendChild(e),b.appendChild(d),d.addEventListener("click",function(){"none"===b.nextSibling.style.display?(b.nextSibling.style.display="",e.className=e.className.replace("plus","minus"),c=!0):(b.nextSibling.style.display="none",e.className=e.className.replace("minus","plus"),c=!1),a.recalcScrollbar()})})},g.prototype.setTooltips=function(){var a=this,b=$("#tooltip");b.find(".tooltip-content-wrapper");a.$window.querySelectorAll("[tooltip]").forEach(function(a){var b=a.getAttribute("tooltip");a.removeAttribute("tooltip"),a.addEventListener("mouseenter",function(a){c.$broadcast(h.TOOLTIP_SHOW,"twoverflow-tooltip",b,!0,a)}),a.addEventListener("mouseleave",function(){c.$broadcast(h.TOOLTIP_HIDE,"twoverflow-tooltip")})})},g.prototype.setCheckboxes=function(){this.$window.querySelectorAll("input[type=checkbox]").forEach(function(a){a.addEventListener("click",function(){$(a).parent().toggleClass("icon-26x26-checkbox-checked")})})},g.prototype.isVisible=function(a){var b="visible"===this.$window.style.visibility;return b&&a&&(b=this.activeTab===a),b},g.prototype.recalcScrollbar=function(){this.$scrollbar.recalc()},g.prototype.setSelects=function(){this.$window.querySelectorAll("select").forEach(function(a){n(a)})},g.init=function(){i=!0,m("own",'#twOverflow-leftbar{position:relative;top:0;left:0;margin-bottom:7px}#twOverflow-leftbar .button{white-space:nowrap;position:relative;top:-17px;left:0;min-width:70px;height:24px;padding:0 3px}#twOverflow-leftbar .label,#twOverflow-leftbar .quickview{margin:5px 0;font-size:12px}#twOverflow-leftbar .quickview{display:none}#wrapper.window-open #twOverflow-leftbar .button{left:720px}.twOverflow-window{visibility:hidden}.twOverflow-window h3{color:#000}.twOverflow-window p{color:#000;margin:7px 0;padding:0 40px}.twOverflow-window p span.sample{font-weight:bold;font-style:italic}.twOverflow-window p span.brazil{color:green;font-weight:bold}.twOverflow-window p .opensource{background:url(https://i.imgur.com/KFHdWXN.png);width:15px;height:15px;display:inline-block;vertical-align:-2px}.twOverflow-window input::placeholder{color:#6d563c}.twOverflow-window input[type="text"],.twOverflow-window input[type="number"],.twOverflow-window select{color:black;text-align:center}.twOverflow-window select{width:100%;padding:0 0 0 5px;font-size:14px;border:1px solid #976543;height:28px;text-decoration:none;text-align-last:center;border-radius:2px;font-weight:600;font-family:"Trebuchet MS";color:white;box-shadow:0 0 0 1px #421f09 inset,0 0 0 2px #976543 inset,0 0 0 3px #421f09 inset,0 -1px 1px 4px rgba(215,181,144,0.7) inset,0 0 1px 5px rgba(0,0,0,0.4) inset;-webkit-appearance:none;-moz-appearance:none;outline:none;background-image:url(https://i.imgur.com/SlaWRrX.png),url(https://i.imgur.com/e2qKrmX.png);background-repeat:no-repeat,repeat;background-position:293px -3px,top left;background-color:#b28e68}.twOverflow-window .custom-select{position:relative;display:inline-block}.twOverflow-window .custom-select .custom-select-button{height:21px;position:absolute;right:1px;top:1px}.twOverflow-window .custom-select .custom-select-handler{text-align:center;line-height:25px;height:25px;display:block;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAABGdBTUEAALGPC/xhBQAAALRQTFRFr6+vmJiYoKCgrKysq6urpaWltLS0s7OzsLCwpKSkm5ubqKiojY2NlZWVk5OTqampbGxsWFhYUVFRhISEgYGBmpqaUFBQnp6eYmJidnZ2nZ2dY2NjW1tbZ2dnoaGhe3t7l5eXg4ODVVVVWVlZj4+PXFxcVlZWkpKSZmZmdXV1ZWVlc3NzjIyMXl5eVFRUeHh4hoaGYWFhXV1dbW1tampqb29veXl5fHx8gICAiYmJcnJyTk5Ooj6l1wAAADx0Uk5TGhkZGhoaGxoaGRkaGRkZGhkbHBgYGR0ZGhkZGhsZGRgZGRwbGRscGRoZGhkZGhwZGRobGRkZGRkZGRkeyXExWQAABOJJREFUSMeNVgdy4zgQxIW9TQ7KOVEUo5gz0f//1/WA0sple6+OLokQiUk9PQ2rvlzvT0vA6xDXU3R5hQmqddDVaIELsMl3KLUGoFHugUphjt25PWkE6KMAqPkO/Qh7HRadPmTNxKJpWuhSjLZAoSZmXYoPXh0w2R2z10rjBxpMNRfomhbNFUfUFbfUCh6TWmO4ZqNn6Jxekx6lte3h9IgYv9ZwzIZXfhQ/bejmsYkgOeVInoDGT6KGP9MMbsj7mtEKphKgVFKkJGUM+r/00zybNkPMFWYske+jY9hUblbrK4YosyPtrxl+5kNRWSb2B3+pceKT05SQRPZY8pVSGoWutgen2junRVKPZJ0v5Nu9HAk/CFPr+T1XTkXYFWSJXfTyLPcpcPXtBZIPONq/cFQ0Y0Lr1GF6f5doHdm2RLTbQMpMmCIf/HGm53OLFPiiEOsBKtgHccgKTVwn8l7kbt3iPvqniMX4jgWj4aqlX43xLwXVet5XTG1cYp/29m58q6ULSa7V0M3UQFyjd+AD+1W9WLBpDd9uej7emFbea/+Yw8faySElQQrBDksTpTOVIG/SE2HpPvZsplJWsblRLEGXATEW9YLUY1rPSdivBDmuK3exNiAysfPALfYZFWJrsA4Zt+fftEeRY0UsMDqfyNCKJpdrtI1r2k0vp9LMSwdO0u5SpjBeEYz5ebhWNbwT2g7OJXy1vjW+pEwyd1FTkAtbzzcbmX1yZlkR2pPiXZ/mDbPNWvHRsaKfLH8+FqiZbnodbOK9RGWlNMli8k+wsgbSNwS35QB6qxn53xhu2DFqUilisB9q2Zqw4nNI9tOB2z8GbkvEdNjPaD2j+9pwEC+YlWJvI7xN7xMC09eqhq/qwRvz3JWcFWmkjrWBWSiOysEmc4LmMb0iSsxR8+Z8pk3+oE39cdAmh1xSDXuAryRLZgpp9V62+8IOeBSICjs8LlbtKGN4E7XGoGASIJ+vronVa5mjagPHIFJA2b+BKkZC5I/78wOqmzYp1N8vzTkWIWz6YfsS3eh3w8pBkfKz6TSLxK9Qai5DUGTMZ8NNmrW8ldNudIJq+eJycwjv+xbeOJwPv1jjsSV/rCBaS/IBrafaUQ+5ksHwwl9y9X7kmvvIKWoBDFvbWySGyMU3XflxZRkNeRU63otWb0+P8H8BrRokbJivpWkk6m6LccSlrC2K0i6+4otx4dN3mbAVKt0wbaqBab4/MW8rgrS8JP06HU6UYSTYsQ5pYETpo87ZonORvbPlvYbXwmsMgoQGKr8PUQ5dDEO0EcXp2oOfSk+YpR/Eg4R46O0/Sf7jVnbqbXBrRkCPsZFOQTN8h+aqlcRw9FjJ/j8V7SXZ3hVNXYsOYcxzpfPNgFrvB9S6Dej2PqDqq0su+5ng0WMi527p/pA+OiW0fsYzDa6sPS9C1qxTtxVRMuySrwPD6qGPRKc4uIx4oceJ9FPjxWaqPPebzyXxU7W1jNqqOw+9z6X/k+Na3SBa0v+VjgoaULR30G1nxvZN1vsha2UaSrKy/PyCaHK5zAYnJzm9RSpSPDWbDVu0dkUujMmB/ly4w8EnDdXXoyX/VfhB3yKzMJ2BSaZO+A9GiNQMbll+6z1WGLWpEGMeEg85MESSep0IPFaHYZZ1QOW/xcjfxGhNjP0tRtbhFHOmhhjAv/p77JrCX3+ZAAAAAElFTkSuQmCC") top left #ceab84;box-shadow:inset 0 0 0 1px #533a1f,inset 0 0 0 2px #dcba94,0 0 2px rgba(0,0,0,0.6);padding:0 10px}.twOverflow-window .custom-select .custom-select-data{display:none}.twOverflow-window .center{text-align:center}.twOverflow-window .reduced{height:30px}@keyframes expand-button{100%{width:250px}}@keyframes contract-button{0%{width:250px}}.expand-button{animation:expand-button .1s forwards}.contract-button{animation:contract-button .1s forwards}.icon-26x26-preset{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAGEUlEQVR42s2WaVBTZxSGS/aVgFAWhyWAIIpQrASkoCKKOGDrrsTWBVFEgQqiILhVNBBUEqMsUpBKRCGoOCAomwjI4EbB4lZ3x3FfRuuMOsy0eXuSOv1jtW4/vDMnd24mOc93zvve831ffPaXKZdlIuIxGcbgMk0+afI+Aq4hOVfAZYgFbBM7AngIOAx3IZfZx5THYn40gJJxxXyWRMhlOAvYjKECDlPe14y3ZuLEsOqCjYu7hRzmcBGXJf6QxCa0SpaYyxSLeCwnPpsx3MPLc0Hg6JDs0PDQtuiEJVinUSM9LxeXDkzvDfa2ziaYy3u3h1YuJJiHnY3ZzInTIooSVqw+Gpea9iQlS4E0TSYSM1MRl5mApIwkXK1wR/l63y6qchT9h/3OIFoZk882cZZ/P2Xzymz17eUZWb3LVCuRsDEZscp4LM1Yg2UZ6UhRKKDZHKs/u9MTbUVDH/g4S5JJO8t3BpHYHNJBpoiW9eTmyvWxyhgsVC6kWIRFBErJUCBeuQTrVZtRWjwb1ytlOFbihfgF/XdTVe7mfM7/m4J+xKC2SUiTcA83aXdniQcKVWFI2TAb8ZmJWKHKQ5oyG+nZGrSePIkznTtw84QKV5tXoSBLfpVA0wymsaD2v80AbFM+25buIx0s+PnzJgW+OJo7AC1b3XEoyxs5ukUo2V+Ow+3t2FBYjM6Ll/D47mk8f3gKL5904dcWDbhsZg61fpCYx2S/yQAMUwHb1snBNuKHSUGtioTxiA4dAG3GQBzf5oZ6lRcut23Cw8tVuPf4Dto7T6KiLAt3LlTg3vk9+PPlRdzr2oJ8zVC9iMeOosq+NDj3v6phkQEGJc0KP1KbMx8VmyKRvmisPj9JhuMFg3Dz1Gbcv6BF7+Mm3O4qRGOtWl++S6G/0bMb12qm4umNA7jTugAP2mYgNVFWSwoEUE7OG0EzhlhWayN9oEsah59XR+jViSEEGoyLdan461mzMa4cWogLDetx4ng9RRPam2biVtM03KoLNkZHReij0X7SNVSV02t2J/EYNFL6WYnZ6gR386eFziIYIkEqRE3WEHT/4oWzrZl4cb8Rz25sx++6IDQ17kf3+XNo6ehA8T4NzjVMMILutU7GDkXIJas+wrkkh40h978gCZ/FEnIYnvZ9BTunB9pB425mBGU7iRA30hJntW44onHHsW0DcUY7EKd3haOOTLGzqpog1WjvPo3KKh1+q03G9dYoXOueiY3r/Ds9XKwn0IQxk/BY/+hFDxIuiyGXR/s/CouQING3jxG0hWKugwBFCfboKfVDV/EgXNG54fDeKOxtbkVJVS226Sqxdd8h7DhQh+2VB7DvYDla2stQ1bALP6UtUNI7aWM0huGD2iZ1sRZpVNk++ohVNpgabo+CIDsjLNlBiNGOfOjSHHG+dIAR1FgTj+rDR4yJ15TWoojuyrIa47PuyFFk5hcicFRInrenaxC1z8ww1gyTgEGw/stWhrapVcP0alWAPv2nQMwaK4VKZg0ltW+2gxhb46T6K+UDcX2PK3QNScjZWYbCvVXIq2rC1sp6aA82IH9P5fN5Pya20nCIpsV7E8SC9i32q7YZN66+Xl7950THBTRuyp30R5FWjjnxFpD7miNVKsJSZwmm+1qiQT0Y1/a4o6QsTr+tbK+xguLmEyitqcFqxbobQ/x8ckiCYZTP2jD9X5sQ9CWHzGEt4rOHy/ydkr+bGNQRvXwUxs8Tw8eV2kdVTbDjQ+5nhasHQ1FRnwxtbT3Km9uQnBiJ2KgRz8Z847pdwDFuhHxTEv8tw5RtQj/iCTgmtgT25zAZMV97mtYP9pPc9evL6413FmMywdbO8kZD7Q4UVOyHfEI4JgfbYnHMV49kLmapJIPp+2x6DKqOT3a3IqCPkMuKFPM5ecGO4vZYN/OnMVRd5LcBmO3fD/OnuiBt1QisXRvaYyXmjCM9OB92AOEZ3y8RgR1MucyRMgvuyine1mcWS0Uvh9hLmv28zYuCx/TLCgt1nUMLdJTwOR9/SCEol/JISegRNKHD6P3wJWf1J10cyF2WEj5V86kuOkMwX52ChGIei21mqOBzu/4GIvrKMv5t+rQAAAAASUVORK5CYII=);margin-top:2px;margin-left:5px}')},
g.isInitialized=function(){return i},g}),define("two/ui/autoComplete",["two/utils","two/locale","helper/dom","struct/MapData"],function(b,d,e,i){var j="two-autocomplete",k=!1,l=function(a){var c=a.srcElement||a.target;b.matchesElem(c,".custom-select")||n.hide()},m=function(a){n.hide(),c.$broadcast(h.SELECT_HIDE,j),c.$broadcast(h.SELECT_SELECTED,j,a)},n={};return n.hide=function(){c.$broadcast(h.SELECT_HIDE,j),$(a).off("click",l),$(".win-main").off("mousewheel",n.hide),k=!1},n.show=function(b,e,f,g){return j=f,!!b.length&&(c.$broadcast(h.SELECT_SHOW,j,b,null,m,e,!0,0,d("common","no-results")),k||(k=!0,$(".win-main").on("mousewheel",n.hide),$(a).on("click",l)),!0)},n.search=function(a,c,d,e){var h=[];if(b.isValidCoords(a)){var j=a.split("|").map(function(a){return parseInt(a,10)});return void i.loadTownDataAsync(j[0],j[1],1,1,function(a){a&&h.push({id:a.id,type:"village",name:b.genVillageLabel(a)}),c(h)})}f.emit(g.AUTOCOMPLETE,{types:d||["village","character","tribe"],string:a,amount:e||5},function(a){for(var d in a.result)a.result[d].forEach(function(a,c){a.type=d,a.leftIcon="size-34x34 icon-26x26-rte-"+d,"village"===d&&(a.name=b.genVillageLabel(a)),h.push(a)});c(h)})},n}),define("two/ui/buttonLink",["ejs"],function(a){return function(b,c,d){var e=Math.round(1e5*Math.random()),f=a.render('<a id="l<#= uid #>" class="img-link icon-20x20-<#= type #> btn btn-orange padded"><#= text #></a>',{type:b,text:c,uid:e}),g=document.createElement("div");g.innerHTML=f,g=g.firstChild;var h;switch(b){case"village":h=function(){j.openVillageInfo(d)};break;case"character":h=function(){j.openCharacterProfile(d)}}return g.addEventListener("click",h),{html:f,id:"l"+e,elem:g}}}),define("two/FrontButton",["ejs"],function(a){function b(a,b){this.options=b=angular.merge({label:a,className:"",classHover:"expand-button",classBlur:"contract-button",tooltip:!1,onClick:function(){}},b),this.buildWrapper(),this.appendButton();var d=this.$elem,e=d.find(".label"),f=d.find(".quickview");return b.classHover&&d.on("mouseenter",function(){d.addClass(b.classHover),d.removeClass(b.classBlur),e.hide(),f.show()}),b.classBlur&&d.on("mouseleave",function(){d.addClass(b.classBlur),d.removeClass(b.classHover),f.hide(),e.show()}),b.tooltip&&(d.on("mouseenter",function(a){c.$broadcast(h.TOOLTIP_SHOW,"twoverflow-tooltip",b.tooltip,!0,a)}),d.on("mouseleave",function(){c.$broadcast(h.TOOLTIP_HIDE,"twoverflow-tooltip")})),b.onClick&&this.click(b.onClick),this}return b.prototype.updateQuickview=function(a){this.$elem.find(".quickview").html(a)},b.prototype.hover=function(a){this.$elem.on("mouseenter",a)},b.prototype.click=function(a){this.$elem.on("click",a)},b.prototype.buildWrapper=function(){var a=document.getElementById("twOverflow-leftbar");a||(a=document.createElement("div"),a.id="twOverflow-leftbar",$("#toolbar-left").prepend(a)),this.$wrapper=a},b.prototype.appendButton=function(){var b=a.render('<div class="btn-border btn-green button <#= className #>"><div class="top-left"></div><div class="top-right"></div><div class="middle-top"></div><div class="middle-bottom"></div><div class="middle-left"></div><div class="middle-right"></div><div class="bottom-left"></div><div class="bottom-right"></div><div class="label"><#= label #></div><div class="quickview"></div></div>',{className:this.options.className,label:this.options.label}),c=document.createElement("div");c.innerHTML=b;var d=c.children[0];this.$wrapper.appendChild(d),this.$elem=$(d)},b.prototype.destroy=function(){this.$elem.remove()},b}),require(["two/ready","two/ui"],function(a,b){if(b.isInitialized())return!1;a(function(){b.init()})}),define("two/recruiter",["two/locale","two/eventQueue","Lockr"],function(a,b,c){var d,f=!1,g={};return g.version="1.0.0",g.init=function(){a.create("recruiter",{en:{title:"Kapitan","logs.clear":"Wyczyść logi",start:"Rekrutuj","logs.noRecruits":"Nie rozpoczęto żadnych rekrutacji",amount:"Ilość",unit:"Jednostka","entry/amount":"Wpisz ilość","entry/preset":"Nazwa szablonu","recruit.own":"Rekrutacja wg własnych ustawień","recruit.presets":"Rekrutacja z szablonów",presets:"Szablonowa",own:"Własne ustawienia",logs:"Logi",group:"Grupa wiosek",preset:"Szablon cząstkowy",presetfinal:"Szablon docelowy",light_cavalry:"LK",mounted_archer:"ŁK",heavy_cavalry:"CK","general.started":"Kapitan Uruchomiony!","general.stopped":"Kapitan Zatrzymany!","general.disabled":"--Wyłączona--",clear:"Wyczyść","insert.preset":"Wybierz szablon","insert.group":"Wybierz grupę",none:"--Wyłączona--"},pl:{title:"Kapitan","logs.clear":"Wyczyść logi",start:"Rekrutuj","logs.noRecruits":"Nie rozpoczęto żadnych rekrutacji",amount:"Ilość",unit:"Jednostka","entry/amount":"Wpisz ilość","entry/preset":"Nazwa szablonu","recruit.own":"Rekrutacja wg własnych ustawień","recruit.presets":"Rekrutacja z szablonów",presets:"Szablonowa",own:"Własne ustawienia",logs:"Logi",group:"Grupa wiosek",preset:"Szablon cząstkowy",presetfinal:"Szablon docelowy",light_cavalry:"LK",mounted_archer:"ŁK",heavy_cavalry:"CK","general.started":"Kapitan Uruchomiony!","general.stopped":"Kapitan Zatrzymany!","general.disabled":"--Wyłączona--",clear:"Wyczyść","insert.preset":"Wybierz szablon","insert.group":"Wybierz grupę",none:"--Wyłączona--"}},"pl"),g.initialized=!0,d=e.getSelectedCharacter(),groupList=e.getGroupList()},g.start=function(a){f=!0,b.trigger("RecruitQueue/start",[a])},g.start2=function(a){f=!0,b.trigger("RecruitQueue/start2",[a])},g.stop=function(){f=!1,b.trigger("RecruitQueue/stop")},g.stop2=function(){f=!1,b.trigger("RecruitQueue/stop2")},g.isInitialized=function(){return!1},g.isRunning=function(){return f},g}),require(["two/ready","two/recruiter","two/recruiter/ui"],function(a,b){if(b.initialized)return!1;a(function(){b.init(),b.interface()})}),define("two/recruiter/ui",["two/recruiter","two/locale","two/ui","two/FrontButton","two/utils","two/eventQueue","ejs","Lockr"],function(a,b,d,k,l,m,n,o){var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca=function(a,b){var c=document.createElement("span");for(var d in b)c.dataset[d]=b[d];a.append(c)},Da=function(a,b){var c=document.createElement("span");c.dataset.name=B,c.dataset.value=b||"",a.append(c)},Ea=function(){var a=D.find(".custom-select-handler").html(""),b=D.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;D[0].dataset.value;""===D[0].dataset.value?(a.html(B),D[0].dataset.name=B,D[0].dataset.value=""):D[0].dataset.value==c&&(a.html(d),D[0].dataset.name=d,D[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),D.append(b)}D[0].dataset.value||a.html(B)},Fa=function(){var a=E.find(".custom-select-handler").html(""),b=E.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;E[0].dataset.value;""===E[0].dataset.value?(a.html(B),E[0].dataset.name=B,E[0].dataset.value=""):E[0].dataset.value==c&&(a.html(d),E[0].dataset.name=d,E[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),E.append(b)}E[0].dataset.value||a.html(B)},Ga=function(){var a=F.find(".custom-select-handler").html(""),b=F.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;F[0].dataset.value;""===F[0].dataset.value?(a.html(B),F[0].dataset.name=B,F[0].dataset.value=""):F[0].dataset.value==c&&(a.html(d),F[0].dataset.name=d,F[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),F.append(b)}F[0].dataset.value||a.html(B)},Ha=function(){var a=G.find(".custom-select-handler").html(""),b=G.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;G[0].dataset.value;""===G[0].dataset.value?(a.html(B),G[0].dataset.name=B,G[0].dataset.value=""):G[0].dataset.value==c&&(a.html(d),G[0].dataset.name=d,G[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),G.append(b)}G[0].dataset.value||a.html(B)},Ia=function(){var a=H.find(".custom-select-handler").html(""),b=H.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;H[0].dataset.value;""===H[0].dataset.value?(a.html(B),H[0].dataset.name=B,H[0].dataset.value=""):H[0].dataset.value==c&&(a.html(d),H[0].dataset.name=d,H[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),H.append(b)}H[0].dataset.value||a.html(B)},Ja=function(){var a=I.find(".custom-select-handler").html(""),b=I.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;I[0].dataset.value;""===I[0].dataset.value?(a.html(B),I[0].dataset.name=B,I[0].dataset.value=""):I[0].dataset.value==c&&(a.html(d),I[0].dataset.name=d,I[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),I.append(b)}I[0].dataset.value||a.html(B)},Ka=function(){var a=J.find(".custom-select-handler").html(""),b=J.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;J[0].dataset.value;""===J[0].dataset.value?(a.html(B),J[0].dataset.name=B,J[0].dataset.value=""):J[0].dataset.value==c&&(a.html(d),J[0].dataset.name=d,J[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),J.append(b)}J[0].dataset.value||a.html(B)},La=function(){var a=K.find(".custom-select-handler").html(""),b=K.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;K[0].dataset.value;""===K[0].dataset.value?(a.html(B),K[0].dataset.name=B,K[0].dataset.value=""):K[0].dataset.value==c&&(a.html(d),K[0].dataset.name=d,K[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),K.append(b)}K[0].dataset.value||a.html(B)},Ma=function(){var a=L.find(".custom-select-handler").html(""),b=L.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;L[0].dataset.value;""===L[0].dataset.value?(a.html(B),L[0].dataset.name=B,L[0].dataset.value=""):L[0].dataset.value==c&&(a.html(d),L[0].dataset.name=d,L[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),L.append(b)}L[0].dataset.value||a.html(B)},Na=function(){var a=M.find(".custom-select-handler").html(""),b=M.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;M[0].dataset.value;""===M[0].dataset.value?(a.html(B),M[0].dataset.name=B,M[0].dataset.value=""):M[0].dataset.value==c&&(a.html(d),M[0].dataset.name=d,M[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),M.append(b)}M[0].dataset.value||a.html(B)},Oa=function(){var a=N.find(".custom-select-handler").html(""),b=N.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;N[0].dataset.value;""===N[0].dataset.value?(a.html(B),N[0].dataset.name=B,N[0].dataset.value=""):N[0].dataset.value==c&&(a.html(d),N[0].dataset.name=d,N[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),N.append(b)}N[0].dataset.value||a.html(B)},Pa=function(){var a=O.find(".custom-select-handler").html(""),b=O.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;O[0].dataset.value;""===O[0].dataset.value?(a.html(B),O[0].dataset.name=B,O[0].dataset.value=""):O[0].dataset.value==c&&(a.html(d),O[0].dataset.name=d,O[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),O.append(b)}O[0].dataset.value||a.html(B)},Qa=function(){var a=P.find(".custom-select-handler").html(""),b=P.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;P[0].dataset.value;""===P[0].dataset.value?(a.html(B),P[0].dataset.name=B,P[0].dataset.value=""):P[0].dataset.value==c&&(a.html(d),P[0].dataset.name=d,P[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),P.append(b)}P[0].dataset.value||a.html(B)},Ra=function(){var a=Q.find(".custom-select-handler").html(""),b=Q.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;Q[0].dataset.value;""===Q[0].dataset.value?(a.html(B),Q[0].dataset.name=B,Q[0].dataset.value=""):Q[0].dataset.value==c&&(a.html(d),Q[0].dataset.name=d,Q[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),Q.append(b)}Q[0].dataset.value||a.html(B)},Sa=function(){var a=R.find(".custom-select-handler").html(""),b=R.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;R[0].dataset.value;""===R[0].dataset.value?(a.html(B),R[0].dataset.name=B,R[0].dataset.value=""):R[0].dataset.value==c&&(a.html(d),R[0].dataset.name=d,R[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),R.append(b)}R[0].dataset.value||a.html(B)},Ta=function(){var a=S.find(".custom-select-handler").html(""),b=S.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;S[0].dataset.value;""===S[0].dataset.value?(a.html(B),S[0].dataset.name=B,S[0].dataset.value=""):S[0].dataset.value==c&&(a.html(d),S[0].dataset.name=d,S[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),S.append(b)}S[0].dataset.value||a.html(B)},Ua=function(){var a=T.find(".custom-select-handler").html(""),b=T.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;T[0].dataset.value;""===T[0].dataset.value?(a.html(B),T[0].dataset.name=B,T[0].dataset.value=""):T[0].dataset.value==c&&(a.html(d),T[0].dataset.name=d,T[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),T.append(b)}T[0].dataset.value||a.html(B)},Va=function(){var a=U.find(".custom-select-handler").html(""),b=U.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;U[0].dataset.value;""===U[0].dataset.value?(a.html(B),U[0].dataset.name=B,U[0].dataset.value=""):U[0].dataset.value==c&&(a.html(d),U[0].dataset.name=d,U[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),U.append(b)}U[0].dataset.value||a.html(B)},Wa=function(){var a=V.find(".custom-select-handler").html(""),b=V.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;V[0].dataset.value;""===V[0].dataset.value?(a.html(B),V[0].dataset.name=B,V[0].dataset.value=""):V[0].dataset.value==c&&(a.html(d),V[0].dataset.name=d,V[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),V.append(b)}V[0].dataset.value||a.html(B)},Xa=function(){var a=W.find(".custom-select-handler").html(""),b=W.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;W[0].dataset.value;""===W[0].dataset.value?(a.html(B),W[0].dataset.name=B,W[0].dataset.value=""):W[0].dataset.value==c&&(a.html(d),W[0].dataset.name=d,W[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),W.append(b)}W[0].dataset.value||a.html(B)},Ya=function(){var a=X.find(".custom-select-handler").html(""),b=X.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;X[0].dataset.value;""===X[0].dataset.value?(a.html(B),X[0].dataset.name=B,X[0].dataset.value=""):X[0].dataset.value==c&&(a.html(d),X[0].dataset.name=d,X[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),X.append(b)}X[0].dataset.value||a.html(B)},Za=function(){var a=Y.find(".custom-select-handler").html(""),b=Y.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;Y[0].dataset.value;""===Y[0].dataset.value?(a.html(B),Y[0].dataset.name=B,Y[0].dataset.value=""):Y[0].dataset.value==c&&(a.html(d),Y[0].dataset.name=d,Y[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),Y.append(b)}Y[0].dataset.value||a.html(B)},$a=function(){var a=Z.find(".custom-select-handler").html(""),b=Z.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;Z[0].dataset.value;""===Z[0].dataset.value?(a.html(B),Z[0].dataset.name=B,Z[0].dataset.value=""):Z[0].dataset.value==c&&(a.html(d),Z[0].dataset.name=d,Z[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),Z.append(b)}Z[0].dataset.value||a.html(B)},_a=function(){var a=_.find(".custom-select-handler").html(""),b=_.find(".custom-select-data").html("");Da(b,"");for(var c in r){var d=r[c].name;_[0].dataset.value;""===_[0].dataset.value?(a.html(B),_[0].dataset.name=B,_[0].dataset.value=""):_[0].dataset.value==c&&(a.html(d),_[0].dataset.name=d,_[0].dataset.value=c),Ca(b,{name:d,value:c,icon:r[c].icon}),_.append(b)}_[0].dataset.value||a.html(B)},ab=function(){function a(){var a=[],c=[],e=[],i=[],r=0,s=0,t=0,u=0,v=0,w=0,x=[],z=[],D=[],E=[],F=0,G=0,H=0,J=0,N=0,Q=0,U=[],W=[],$=[],ba=[],fa=0,ha=0,la=0,oa=0,sa=0,ua=0,ya=[],Ba=[],Fa=[],Ha=[],La=0,Oa=0,Sa=0,Ua=0,Ya=0,_a=0,db=[50,30,60,80,125,250,200,300,320,0,4e4,4e3,1200],fb=[30,30,30,30,100,100,150,200,400,0,5e4,2e3,1200],jb=[20,70,40,60,250,150,600,200,100,0,5e4,2e3,2400],mb=[1,1,1,1,4,5,6,5,8,1,100,10,6];Cb.forEach(function(qb,sb){setTimeout(function(){h.forEach(function(h){qb.data.villageId==h&&setInterval(function(){function h(){r=a.length>0?a.reduce(function(a,b){return a+b}):0,j()}function j(){u=e.length>0?e.reduce(function(a,b){return a+b}):0,k()}function k(){t=c.length>0?c.reduce(function(a,b){return a+b}):0,l()}function l(){s=i.length>0?i.reduce(function(a,b){return a+b}):0,n()}function n(){w=d>0?r>=936e5?0:r<936e5&&r>=864e5?.1:r<864e5&&r>=72e6?.25:r<72e6&&r>=576e5?.4:r<576e5&&r>=432e5?.55:r<432e5&&r>=288e5?.7:r<288e5&&r>=144e5?.85:r<144e5&&r>=72e5?.925:r<72e5&&r>=36e5?.9625:1:0,J()}function p(){var a=_-N,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(O*w*v),r=Math.floor(P*w*v),s=Math.floor(B*w*v),t=Math.floor(A*w*v),u=Math.floor(K*w*v),x=Math.floor(L*w*v),z=Math.floor(M*w*v),D=Math.floor(C*w*v),E=Math.floor(I*w*v),F=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+x*db[5]+z*db[7]+D*db[8]+E*db[6],G=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+x*fb[5]+z*fb[7]+D*fb[8]+E*fb[6],H=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+x*jb[5]+z*jb[7]+D*jb[8]+E*jb[6],J=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+x*mb[5]+z*mb[7]+D*mb[8]+E*mb[6];if(a<=0);else if(F<=l&&G<=n&&H<=p&&J<=k&&q>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:q});var Q=b("common","spear"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},Q,q,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier1=l/F,spearnew1=Math.floor(woodModifier1*q),swordnew1=Math.floor(woodModifier1*r),axenew1=Math.floor(woodModifier1*s),archernew1=Math.floor(woodModifier1*t),lcnew1=Math.floor(woodModifier1*u),manew1=Math.floor(woodModifier1*x),hcnew1=Math.floor(woodModifier1*E),ramnew1=Math.floor(woodModifier1*z),catapultnew1=Math.floor(woodModifier1*D),spearnew1<=k&&spearnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew1});var Q=b("common","spear"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},Q,spearnew1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,spearavailable1=Math.floor(foodAvailable1*spearnew1),spearavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable1});var Q=b("common","spear"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},Q,spearavailable1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier1=n/G,spearnew1=Math.floor(clayModifier1*q),swordnew1=Math.floor(clayModifier1*r),axenew1=Math.floor(clayModifier1*s),archernew1=Math.floor(clayModifier1*t),lcnew1=Math.floor(clayModifier1*u),manew1=Math.floor(clayModifier1*x),hcnew1=Math.floor(clayModifier1*E),ramnew1=Math.floor(clayModifier1*z),catapultnew1=Math.floor(clayModifier1*D),spearnew1<=k&&spearnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew1});var Q=b("common","spear"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},Q,spearnew1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,spearavailable1=Math.floor(foodAvailable1*spearnew1),spearavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable1});var Q=b("common","spear"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},Q,spearavailable1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier1=p/H,spearnew1=Math.floor(ironModifier1*q),swordnew1=Math.floor(ironModifier1*r),axenew1=Math.floor(ironModifier1*s),archernew1=Math.floor(ironModifier1*t),lcnew1=Math.floor(ironModifier1*u),manew1=Math.floor(ironModifier1*x),hcnew1=Math.floor(ironModifier1*E),ramnew1=Math.floor(ironModifier1*z),catapultnew1=Math.floor(ironModifier1*D),spearnew1<=k&&spearnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew1});var Q=b("common","spear"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},Q,spearnew1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,spearavailable1=Math.floor(foodAvailable1*spearnew1),spearavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable1});var Q=b("common","spear"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},Q,spearavailable1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}}function q(){var a=aa-Q,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(O*w*v),r=Math.floor(P*w*v),s=Math.floor(B*w*v),t=Math.floor(A*w*v),u=Math.floor(K*w*v),x=Math.floor(L*w*v),z=Math.floor(M*w*v),D=Math.floor(C*w*v),E=Math.floor(I*w*v),F=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+x*db[5]+z*db[7]+D*db[8]+E*db[6],G=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+x*fb[5]+z*fb[7]+D*fb[8]+E*fb[6],H=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+x*jb[5]+z*jb[7]+D*jb[8]+E*jb[6],J=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+x*mb[5]+z*mb[7]+D*mb[8]+E*mb[6];if(a<=0);else if(F<=l&&G<=n&&H<=p&&J<=k&&r>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:r});var N=b("common","sword"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,r,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier1=l/F,spearnew1=Math.floor(woodModifier1*q),swordnew1=Math.floor(woodModifier1*r),axenew1=Math.floor(woodModifier1*s),archernew1=Math.floor(woodModifier1*t),lcnew1=Math.floor(woodModifier1*u),manew1=Math.floor(woodModifier1*x),hcnew1=Math.floor(woodModifier1*E),ramnew1=Math.floor(woodModifier1*z),catapultnew1=Math.floor(woodModifier1*D),swordnew1<=k&&swordnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew1});var N=b("common","sword"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,swordnew1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,swordavailable1=Math.floor(foodAvailable1*swordnew1),swordavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable1});var N=b("common","sword"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,swordavailable1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier1=n/G,spearnew1=Math.floor(clayModifier1*q),swordnew1=Math.floor(clayModifier1*r),axenew1=Math.floor(clayModifier1*s),archernew1=Math.floor(clayModifier1*t),lcnew1=Math.floor(clayModifier1*u),manew1=Math.floor(clayModifier1*x),hcnew1=Math.floor(clayModifier1*E),ramnew1=Math.floor(clayModifier1*z),catapultnew1=Math.floor(clayModifier1*D),swordnew1<=k&&swordnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew1});var N=b("common","sword"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,swordnew1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,swordavailable1=Math.floor(foodAvailable1*swordnew1),swordavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable1});var N=b("common","sword"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,swordavailable1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier1=p/H,spearnew1=Math.floor(ironModifier1*q),swordnew1=Math.floor(ironModifier1*r),axenew1=Math.floor(ironModifier1*s),archernew1=Math.floor(ironModifier1*t),lcnew1=Math.floor(ironModifier1*u),manew1=Math.floor(ironModifier1*x),hcnew1=Math.floor(ironModifier1*E),ramnew1=Math.floor(ironModifier1*z),catapultnew1=Math.floor(ironModifier1*D),swordnew1<=k&&swordnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew1});var N=b("common","sword"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,swordnew1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,swordavailable1=Math.floor(foodAvailable1*swordnew1),swordavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable1});var N=b("common","sword"),R=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,swordavailable1,R];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}}function x(){var a=S-U,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(O*w*v),r=Math.floor(P*w*v),s=Math.floor(B*w*v),t=Math.floor(A*w*v),u=Math.floor(K*w*v),x=Math.floor(L*w*v),z=Math.floor(M*w*v),D=Math.floor(C*w*v),E=Math.floor(I*w*v),F=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+x*db[5]+z*db[7]+D*db[8]+E*db[6],G=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+x*fb[5]+z*fb[7]+D*fb[8]+E*fb[6],H=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+x*jb[5]+z*jb[7]+D*jb[8]+E*jb[6],J=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+x*mb[5]+z*mb[7]+D*mb[8]+E*mb[6];if(a<=0);else if(F<=l&&G<=n&&H<=p&&J<=k&&s>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:s});var N=b("common","axe"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,s,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier1=l/F,spearnew1=Math.floor(woodModifier1*q),swordnew1=Math.floor(woodModifier1*r),axenew1=Math.floor(woodModifier1*s),archernew1=Math.floor(woodModifier1*t),lcnew1=Math.floor(woodModifier1*u),manew1=Math.floor(woodModifier1*x),hcnew1=Math.floor(woodModifier1*E),ramnew1=Math.floor(woodModifier1*z),catapultnew1=Math.floor(woodModifier1*D),axenew1<=k&&axenew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew1});var N=b("common","axe"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,axenew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,axeavailable1=Math.floor(foodAvailable1*axenew1),axeavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable1});var N=b("common","axe"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,axeavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier1=n/G,spearnew1=Math.floor(clayModifier1*q),swordnew1=Math.floor(clayModifier1*r),axenew1=Math.floor(clayModifier1*s),archernew1=Math.floor(clayModifier1*t),lcnew1=Math.floor(clayModifier1*u),manew1=Math.floor(clayModifier1*x),hcnew1=Math.floor(clayModifier1*E),ramnew1=Math.floor(clayModifier1*z),catapultnew1=Math.floor(clayModifier1*D),axenew1<=k&&axenew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew1});var N=b("common","axe"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,axenew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,axeavailable1=Math.floor(foodAvailable1*axenew1),axeavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable1});var N=b("common","axe"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,axeavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier1=p/H,spearnew1=Math.floor(ironModifier1*q),swordnew1=Math.floor(ironModifier1*r),axenew1=Math.floor(ironModifier1*s),archernew1=Math.floor(ironModifier1*t),lcnew1=Math.floor(ironModifier1*u),manew1=Math.floor(ironModifier1*x),hcnew1=Math.floor(ironModifier1*E),ramnew1=Math.floor(ironModifier1*z),catapultnew1=Math.floor(ironModifier1*D),axenew1<=k&&axenew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew1});var N=b("common","axe"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,axenew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,axeavailable1=Math.floor(foodAvailable1*axenew1),axeavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable1});var N=b("common","axe"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,axeavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}function z(){var a=R-W,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(O*w*v),r=Math.floor(P*w*v),s=Math.floor(B*w*v),t=Math.floor(A*w*v),u=Math.floor(K*w*v),x=Math.floor(L*w*v),z=Math.floor(M*w*v),D=Math.floor(C*w*v),E=Math.floor(I*w*v),F=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+x*db[5]+z*db[7]+D*db[8]+E*db[6],G=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+x*fb[5]+z*fb[7]+D*fb[8]+E*fb[6],H=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+x*jb[5]+z*jb[7]+D*jb[8]+E*jb[6],J=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+x*mb[5]+z*mb[7]+D*mb[8]+E*mb[6];if(a<=0);else if(F<=l&&G<=n&&H<=p&&J<=k&&t>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:t});var N=b("common","archer"),Q=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,t,Q];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier1=l/F,spearnew1=Math.floor(woodModifier1*q),swordnew1=Math.floor(woodModifier1*r),axenew1=Math.floor(woodModifier1*s),archernew1=Math.floor(woodModifier1*t),lcnew1=Math.floor(woodModifier1*u),manew1=Math.floor(woodModifier1*x),hcnew1=Math.floor(woodModifier1*E),ramnew1=Math.floor(woodModifier1*z),catapultnew1=Math.floor(woodModifier1*D),archernew1<=k&&archernew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew1})
;var N=b("common","archer"),Q=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,archernew1,Q];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,archeravailable1=Math.floor(foodAvailable1*archernew1),archeravailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable1});var N=b("common","archer"),Q=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,archeravailable1,Q];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier1=n/G,spearnew1=Math.floor(clayModifier1*q),swordnew1=Math.floor(clayModifier1*r),axenew1=Math.floor(clayModifier1*s),archernew1=Math.floor(clayModifier1*t),lcnew1=Math.floor(clayModifier1*u),manew1=Math.floor(clayModifier1*x),hcnew1=Math.floor(clayModifier1*E),ramnew1=Math.floor(clayModifier1*z),catapultnew1=Math.floor(clayModifier1*D),archernew1<=k&&archernew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew1});var N=b("common","archer"),Q=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,archernew1,Q];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,archeravailable1=Math.floor(foodAvailable1*archernew1),archeravailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable1});var N=b("common","archer"),Q=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,archeravailable1,Q];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier1=p/H,spearnew1=Math.floor(ironModifier1*q),swordnew1=Math.floor(ironModifier1*r),axenew1=Math.floor(ironModifier1*s),archernew1=Math.floor(ironModifier1*t),lcnew1=Math.floor(ironModifier1*u),manew1=Math.floor(ironModifier1*x),hcnew1=Math.floor(ironModifier1*E),ramnew1=Math.floor(ironModifier1*z),catapultnew1=Math.floor(ironModifier1*D),archernew1<=k&&archernew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew1});var N=b("common","archer"),Q=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,archernew1,Q];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,archeravailable1=Math.floor(foodAvailable1*archernew1),archeravailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable1});var N=b("common","archer"),Q=Date.now(),S=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,archeravailable1,Q];m.trigger("RecruitQueue/jobStarted",S),y.unshift(S),o.set("recruiter-log",y)}}function D(){var a=X-$,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(O*w*v),r=Math.floor(P*w*v),s=Math.floor(B*w*v),t=Math.floor(A*w*v),u=Math.floor(K*w*v),x=Math.floor(L*w*v),z=Math.floor(M*w*v),D=Math.floor(C*w*v),E=Math.floor(I*w*v),F=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+x*db[5]+z*db[7]+D*db[8]+E*db[6],G=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+x*fb[5]+z*fb[7]+D*fb[8]+E*fb[6],H=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+x*jb[5]+z*jb[7]+D*jb[8]+E*jb[6],J=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+x*mb[5]+z*mb[7]+D*mb[8]+E*mb[6];if(a<=0);else if(F<=l&&G<=n&&H<=p&&J<=k&&u>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:u});var N=b("common","light_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,u,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier1=l/F,spearnew1=Math.floor(woodModifier1*q),swordnew1=Math.floor(woodModifier1*r),axenew1=Math.floor(woodModifier1*s),archernew1=Math.floor(woodModifier1*t),lcnew1=Math.floor(woodModifier1*u),manew1=Math.floor(woodModifier1*x),hcnew1=Math.floor(woodModifier1*E),ramnew1=Math.floor(woodModifier1*z),catapultnew1=Math.floor(woodModifier1*D),lcnew1<=k&&lcnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew1});var N=b("common","light_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,lcnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,lcavailable1=Math.floor(foodAvailable1*lcnew1),lcavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable1});var N=b("common","light_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,lcavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier1=n/G,spearnew1=Math.floor(clayModifier1*q),swordnew1=Math.floor(clayModifier1*r),axenew1=Math.floor(clayModifier1*s),archernew1=Math.floor(clayModifier1*t),lcnew1=Math.floor(clayModifier1*u),manew1=Math.floor(clayModifier1*x),hcnew1=Math.floor(clayModifier1*E),ramnew1=Math.floor(clayModifier1*z),catapultnew1=Math.floor(clayModifier1*D),lcnew1<=k&&lcnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew1});var N=b("common","light_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,lcnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,lcavailable1=Math.floor(foodAvailable1*lcnew1),lcavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable1});var N=b("common","light_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,lcavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier1=p/H,spearnew1=Math.floor(ironModifier1*q),swordnew1=Math.floor(ironModifier1*r),axenew1=Math.floor(ironModifier1*s),archernew1=Math.floor(ironModifier1*t),lcnew1=Math.floor(ironModifier1*u),manew1=Math.floor(ironModifier1*x),hcnew1=Math.floor(ironModifier1*E),ramnew1=Math.floor(ironModifier1*z),catapultnew1=Math.floor(ironModifier1*D),lcnew1<=k&&lcnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew1});var N=b("common","light_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,lcnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,lcavailable1=Math.floor(foodAvailable1*lcnew1),lcavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable1});var N=b("common","light_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,lcavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}function E(){var a=Y-ba,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(O*w*v),r=Math.floor(P*w*v),s=Math.floor(B*w*v),t=Math.floor(A*w*v),u=Math.floor(K*w*v),x=Math.floor(L*w*v),z=Math.floor(M*w*v),D=Math.floor(C*w*v),E=Math.floor(I*w*v),F=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+x*db[5]+z*db[7]+D*db[8]+E*db[6],G=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+x*fb[5]+z*fb[7]+D*fb[8]+E*fb[6],H=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+x*jb[5]+z*jb[7]+D*jb[8]+E*jb[6],J=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+x*mb[5]+z*mb[7]+D*mb[8]+E*mb[6];if(a<=0);else if(F<=l&&G<=n&&H<=p&&J<=k&&x>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:x});var N=b("common","mounted_archer"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,x,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier1=l/F,spearnew1=Math.floor(woodModifier1*q),swordnew1=Math.floor(woodModifier1*r),axenew1=Math.floor(woodModifier1*s),archernew1=Math.floor(woodModifier1*t),lcnew1=Math.floor(woodModifier1*u),manew1=Math.floor(woodModifier1*x),hcnew1=Math.floor(woodModifier1*E),ramnew1=Math.floor(woodModifier1*z),catapultnew1=Math.floor(woodModifier1*D),manew1<=k&&manew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew1});var N=b("common","mounted_archer"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,manew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,maavailable1=Math.floor(foodAvailable1*manew1),maavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable1});var N=b("common","mounted_archer"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,maavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier1=n/G,spearnew1=Math.floor(clayModifier1*q),swordnew1=Math.floor(clayModifier1*r),axenew1=Math.floor(clayModifier1*s),archernew1=Math.floor(clayModifier1*t),lcnew1=Math.floor(clayModifier1*u),manew1=Math.floor(clayModifier1*x),hcnew1=Math.floor(clayModifier1*E),ramnew1=Math.floor(clayModifier1*z),catapultnew1=Math.floor(clayModifier1*D),manew1<=k&&manew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew1});var N=b("common","mounted_archer"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,manew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,maavailable1=Math.floor(foodAvailable1*manew1),maavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable1});var N=b("common","mounted_archer"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,maavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier1=p/H,spearnew1=Math.floor(ironModifier1*q),swordnew1=Math.floor(ironModifier1*r),axenew1=Math.floor(ironModifier1*s),archernew1=Math.floor(ironModifier1*t),lcnew1=Math.floor(ironModifier1*u),manew1=Math.floor(ironModifier1*x),hcnew1=Math.floor(ironModifier1*E),ramnew1=Math.floor(ironModifier1*z),catapultnew1=Math.floor(ironModifier1*D),manew1<=k&&manew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew1});var N=b("common","mounted_archer"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,manew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,maavailable1=Math.floor(foodAvailable1*manew1),maavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable1});var N=b("common","mounted_archer"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,maavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}function F(){var a=Z-ca,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(O*w*v),r=Math.floor(P*w*v),s=Math.floor(B*w*v),t=Math.floor(A*w*v),u=Math.floor(K*w*v),x=Math.floor(L*w*v),z=Math.floor(M*w*v),D=Math.floor(C*w*v),E=Math.floor(I*w*v),F=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+x*db[5]+z*db[7]+D*db[8]+E*db[6],G=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+x*fb[5]+z*fb[7]+D*fb[8]+E*fb[6],H=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+x*jb[5]+z*jb[7]+D*jb[8]+E*jb[6],J=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+x*mb[5]+z*mb[7]+D*mb[8]+E*mb[6];if(a<=0);else if(F<=l&&G<=n&&H<=p&&J<=k&&z>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:z});var N=b("common","ram"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,z,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier1=l/F,spearnew1=Math.floor(woodModifier1*q),swordnew1=Math.floor(woodModifier1*r),axenew1=Math.floor(woodModifier1*s),archernew1=Math.floor(woodModifier1*t),lcnew1=Math.floor(woodModifier1*u),manew1=Math.floor(woodModifier1*x),hcnew1=Math.floor(woodModifier1*E),ramnew1=Math.floor(woodModifier1*z),catapultnew1=Math.floor(woodModifier1*D),ramnew1<=k&&ramnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew1});var N=b("common","ram"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,ramnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,ramavailable1=Math.floor(foodAvailable1*ramnew1),ramavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable1});var N=b("common","ram"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,ramavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier1=n/G,spearnew1=Math.floor(clayModifier1*q),swordnew1=Math.floor(clayModifier1*r),axenew1=Math.floor(clayModifier1*s),archernew1=Math.floor(clayModifier1*t),lcnew1=Math.floor(clayModifier1*u),manew1=Math.floor(clayModifier1*x),hcnew1=Math.floor(clayModifier1*E),ramnew1=Math.floor(clayModifier1*z),catapultnew1=Math.floor(clayModifier1*D),ramnew1<=k&&ramnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew1});var N=b("common","ram"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,ramnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,ramavailable1=Math.floor(foodAvailable1*ramnew1),ramavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable1});var N=b("common","ram"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,ramavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier1=p/H,spearnew1=Math.floor(ironModifier1*q),swordnew1=Math.floor(ironModifier1*r),axenew1=Math.floor(ironModifier1*s),archernew1=Math.floor(ironModifier1*t),lcnew1=Math.floor(ironModifier1*u),manew1=Math.floor(ironModifier1*x),hcnew1=Math.floor(ironModifier1*E),ramnew1=Math.floor(ironModifier1*z),catapultnew1=Math.floor(ironModifier1*D),ramnew1<=k&&ramnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew1});var N=b("common","ram"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,ramnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,ramavailable1=Math.floor(foodAvailable1*ramnew1),ramavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable1});var N=b("common","ram"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,ramavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}function G(){var a=T-da,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(O*w*v),r=Math.floor(P*w*v),s=Math.floor(B*w*v),t=Math.floor(A*w*v),u=Math.floor(K*w*v),x=Math.floor(L*w*v),z=Math.floor(M*w*v),D=Math.floor(C*w*v),E=Math.floor(I*w*v),F=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+x*db[5]+z*db[7]+D*db[8]+E*db[6],G=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+x*fb[5]+z*fb[7]+D*fb[8]+E*fb[6],H=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+x*jb[5]+z*jb[7]+D*jb[8]+E*jb[6],J=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+x*mb[5]+z*mb[7]+D*mb[8]+E*mb[6];if(a<=0);else if(F<=l&&G<=n&&H<=p&&J<=k&&D>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:D});var N=b("common","catapult"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,D,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier1=l/F,spearnew1=Math.floor(woodModifier1*q),swordnew1=Math.floor(woodModifier1*r),axenew1=Math.floor(woodModifier1*s),archernew1=Math.floor(woodModifier1*t),lcnew1=Math.floor(woodModifier1*u),manew1=Math.floor(woodModifier1*x),hcnew1=Math.floor(woodModifier1*E),ramnew1=Math.floor(woodModifier1*z),catapultnew1=Math.floor(woodModifier1*D),catapultnew1<=k&&catapultnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew1});var N=b("common","catapult"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,catapultnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,catapultavailable1=Math.floor(foodAvailable1*catapultnew1),catapultavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable1});var N=b("common","catapult"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,catapultavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier1=n/G,spearnew1=Math.floor(clayModifier1*q),swordnew1=Math.floor(clayModifier1*r),axenew1=Math.floor(clayModifier1*s),archernew1=Math.floor(clayModifier1*t),lcnew1=Math.floor(clayModifier1*u),manew1=Math.floor(clayModifier1*x),hcnew1=Math.floor(clayModifier1*E),ramnew1=Math.floor(clayModifier1*z),catapultnew1=Math.floor(clayModifier1*D),catapultnew1<=k&&catapultnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew1});var N=b("common","catapult"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,catapultnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,catapultavailable1=Math.floor(foodAvailable1*catapultnew1),catapultavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable1});var N=b("common","catapult"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,catapultavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier1=p/H,spearnew1=Math.floor(ironModifier1*q),swordnew1=Math.floor(ironModifier1*r),axenew1=Math.floor(ironModifier1*s),archernew1=Math.floor(ironModifier1*t),lcnew1=Math.floor(ironModifier1*u),manew1=Math.floor(ironModifier1*x),hcnew1=Math.floor(ironModifier1*E),ramnew1=Math.floor(ironModifier1*z),catapultnew1=Math.floor(ironModifier1*D),catapultnew1<=k&&catapultnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew1});var N=b("common","catapult"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,catapultnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,catapultavailable1=Math.floor(foodAvailable1*catapultnew1),catapultavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable1});var N=b("common","catapult"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,catapultavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}function H(){var a=V-ea,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(O*w*v),r=Math.floor(P*w*v),s=Math.floor(B*w*v),t=Math.floor(A*w*v),u=Math.floor(K*w*v),x=Math.floor(L*w*v),z=Math.floor(M*w*v),D=Math.floor(C*w*v),E=Math.floor(I*w*v),F=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+x*db[5]+z*db[7]+D*db[8]+E*db[6],G=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+x*fb[5]+z*fb[7]+D*fb[8]+E*fb[6],H=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+x*jb[5]+z*jb[7]+D*jb[8]+E*jb[6],J=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+x*mb[5]+z*mb[7]+D*mb[8]+E*mb[6];if(a<=0);else if(F<=l&&G<=n&&H<=p&&J<=k&&E>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:E});var N=b("common","heavy_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,E,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier1=l/F,spearnew1=Math.floor(woodModifier1*q),swordnew1=Math.floor(woodModifier1*r),axenew1=Math.floor(woodModifier1*s),archernew1=Math.floor(woodModifier1*t),lcnew1=Math.floor(woodModifier1*u),manew1=Math.floor(woodModifier1*x),hcnew1=Math.floor(woodModifier1*E),ramnew1=Math.floor(woodModifier1*z),catapultnew1=Math.floor(woodModifier1*D),hcnew1<=k&&hcnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew1});var N=b("common","heavy_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,hcnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,hcavailable1=Math.floor(foodAvailable1*hcnew1),hcavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable1});var N=b("common","heavy_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,hcavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier1=n/G,spearnew1=Math.floor(clayModifier1*q),swordnew1=Math.floor(clayModifier1*r),axenew1=Math.floor(clayModifier1*s),archernew1=Math.floor(clayModifier1*t),lcnew1=Math.floor(clayModifier1*u),manew1=Math.floor(clayModifier1*x),hcnew1=Math.floor(clayModifier1*E),ramnew1=Math.floor(clayModifier1*z),catapultnew1=Math.floor(clayModifier1*D),hcnew1<=k&&hcnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew1});var N=b("common","heavy_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,hcnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,hcavailable1=Math.floor(foodAvailable1*hcnew1),hcavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable1});var N=b("common","heavy_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,hcavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier1=p/H,spearnew1=Math.floor(ironModifier1*q),swordnew1=Math.floor(ironModifier1*r),axenew1=Math.floor(ironModifier1*s),archernew1=Math.floor(ironModifier1*t),lcnew1=Math.floor(ironModifier1*u),manew1=Math.floor(ironModifier1*x),hcnew1=Math.floor(ironModifier1*E),ramnew1=Math.floor(ironModifier1*z),catapultnew1=Math.floor(ironModifier1*D),hcnew1<=k&&hcnew1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew1});var N=b("common","heavy_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,hcnew1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}else if(foodnew1=spearnew1*mb[0]+swordnew1*mb[1]+axenew1*mb[2]+archernew1*mb[3]+lcnew1*mb[4]+manew1*mb[5]+ramnew1*mb[7]+catapultnew1*mb[8]+hcnew1*mb[6],foodAvailable1=k/foodnew1,hcavailable1=Math.floor(foodAvailable1*hcnew1),hcavailable1>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable1});var N=b("common","heavy_cavalry"),Q=Date.now(),R=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},N,hcavailable1,Q];m.trigger("RecruitQueue/jobStarted",R),y.unshift(R),o.set("recruiter-log",y)}}function J(){fa>0&&fa<3?p():fa>=3&&fa<5?(p(),setTimeout(function(){q()},2e3)):fa>=5&&fa<9?(p(),setTimeout(function(){q()},2e3),setTimeout(function(){x()},4e3)):fa>=9&&fa<11?(p(),setTimeout(function(){q()},2e3),setTimeout(function(){x()},4e3),setTimeout(function(){z()},6e3)):fa>=11&&fa<13?(p(),setTimeout(function(){q()},2e3),setTimeout(function(){x()},4e3),setTimeout(function(){z()},6e3),setTimeout(function(){D()},3e3)):fa>=13&&fa<15?(p(),setTimeout(function(){q()},2e3),setTimeout(function(){x()},4e3),setTimeout(function(){z()},6e3),setTimeout(function(){D()},3e3),setTimeout(function(){E()},5e3)):fa>=15&&fa<17?(p(),setTimeout(function(){q()},2e3),setTimeout(function(){x()},4e3),setTimeout(function(){z()},6e3),setTimeout(function(){D()},3e3),setTimeout(function(){E()},5e3),setTimeout(function(){F()},7e3)):fa>=17&&fa<21?(p(),setTimeout(function(){q()},2e3),setTimeout(function(){x()},4e3),setTimeout(function(){z()},6e3),setTimeout(function(){D()},3e3),setTimeout(function(){E()},5e3),setTimeout(function(){F()},7e3),setTimeout(function(){G()},8e3)):fa>=21&&(p(),setTimeout(function(){q()},2e3),setTimeout(function(){x()},4e3),setTimeout(function(){z()},6e3),setTimeout(function(){D()},3e3),setTimeout(function(){E()},5e3),setTimeout(function(){F()},7e3),setTimeout(function(){G()},8e3),setTimeout(function(){H()},1e3))}var N=qb.unitInfo.units.spear.own+qb.unitInfo.units.spear.recruiting,Q=qb.unitInfo.units.sword.own+qb.unitInfo.units.sword.recruiting,U=qb.unitInfo.units.axe.own+qb.unitInfo.units.axe.recruiting,W=qb.unitInfo.units.archer.own+qb.unitInfo.units.archer.recruiting,$=qb.unitInfo.units.light_cavalry.own+qb.unitInfo.units.light_cavalry.recruiting,ba=qb.unitInfo.units.mounted_archer.own+qb.unitInfo.units.mounted_archer.recruiting,ca=qb.unitInfo.units.ram.own+qb.unitInfo.units.ram.recruiting,da=qb.unitInfo.units.catapult.own+qb.unitInfo.units.catapult.recruiting,ea=qb.unitInfo.units.heavy_cavalry.own+qb.unitInfo.units.heavy_cavalry.recruiting,fa=qb.buildingData.data.barracks.level,ga=(qb.buildingData.data.academy.level,qb.buildingData.data.preceptory.level,qb.buildingData.data.statue.level,qb.buildingQueue.data.queue),ha=qb.getRecruitingQueues(),ia=ha.barracks.jobs,ja=ha.preceptory.jobs,ka=ha.academy.jobs,la=ha.statue.jobs;ia.forEach(function(b){recruitingTime=b.clientRecruitingTime,totalRecruitingTime=1e3*(b.data.time_completed-b.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,a.push(recruitingTimeToFinish)}),ja.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,i.push(recruitingTimeToFinish)}),ka.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,c.push(recruitingTimeToFinish)}),la.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,e.push(recruitingTimeToFinish)}),function(){v=d>0?ga.length>=2?1:1==ga.length?.5:.25:0,h()}()},6e4)})},sb*Ab),setTimeout(function(){k.forEach(function(a){qb.data.villageId==a&&setInterval(function(){function a(){F=x.length>0?x.reduce(function(a,b){return a+b}):0,c()}function c(){J=D.length>0?D.reduce(function(a,b){return a+b}):0,d()}function d(){H=z.length>0?z.reduce(function(a,b){return a+b}):0,e()}function e(){G=E.length>0?E.reduce(function(a,b){return a+b}):0,h()}function h(){Q=j>0?F>=936e5?0:F<936e5&&F>=864e5?.1:F<864e5&&F>=72e6?.25:F<72e6&&F>=576e5?.4:F<576e5&&F>=432e5?.55:F<432e5&&F>=288e5?.7:F<288e5&&F>=144e5?.85:F<144e5&&F>=72e5?.925:F<72e5&&F>=36e5?.9625:1:0,u()}function i(){var a=za-v,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(ma*Q*N),r=Math.floor(na*Q*N),s=Math.floor(da*Q*N),t=Math.floor(ca*Q*N),u=Math.floor(ia*Q*N),w=Math.floor(ja*Q*N),x=Math.floor(ka*Q*N),z=Math.floor(ea*Q*N),A=Math.floor(ga*Q*N),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+w*db[5]+x*db[7]+z*db[8]+A*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+w*fb[5]+x*fb[7]+z*fb[8]+A*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+w*jb[5]+x*jb[7]+z*jb[8]+A*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+w*mb[5]+x*mb[7]+z*mb[8]+A*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&q>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:q});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,q,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier2=l/B,spearnew2=Math.floor(woodModifier2*q),swordnew2=Math.floor(woodModifier2*r),axenew2=Math.floor(woodModifier2*s),archernew2=Math.floor(woodModifier2*t),lcnew2=Math.floor(woodModifier2*u),manew2=Math.floor(woodModifier2*w),hcnew2=Math.floor(woodModifier2*A),ramnew2=Math.floor(woodModifier2*x),catapultnew2=Math.floor(woodModifier2*z),spearnew2<=k&&spearnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew2});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearnew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,
spearavailable2=Math.floor(foodAvailable2*spearnew2),spearavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable2});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier2=n/C,spearnew2=Math.floor(clayModifier2*q),swordnew2=Math.floor(clayModifier2*r),axenew2=Math.floor(clayModifier2*s),archernew2=Math.floor(clayModifier2*t),lcnew2=Math.floor(clayModifier2*u),manew2=Math.floor(clayModifier2*w),hcnew2=Math.floor(clayModifier2*A),ramnew2=Math.floor(clayModifier2*x),catapultnew2=Math.floor(clayModifier2*z),spearnew2<=k&&spearnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew2});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearnew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,spearavailable2=Math.floor(foodAvailable2*spearnew2),spearavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable2});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier2=p/D,spearnew2=Math.floor(ironModifier2*q),swordnew2=Math.floor(ironModifier2*r),axenew2=Math.floor(ironModifier2*s),archernew2=Math.floor(ironModifier2*t),lcnew2=Math.floor(ironModifier2*u),manew2=Math.floor(ironModifier2*w),hcnew2=Math.floor(ironModifier2*A),ramnew2=Math.floor(ironModifier2*x),catapultnew2=Math.floor(ironModifier2*z),spearnew2<=k&&spearnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew2});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearnew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,spearavailable2=Math.floor(foodAvailable2*spearnew2),spearavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable2});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function k(){var a=Aa-w,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(ma*Q*N),r=Math.floor(na*Q*N),s=Math.floor(da*Q*N),t=Math.floor(ca*Q*N),u=Math.floor(ia*Q*N),v=Math.floor(ja*Q*N),x=Math.floor(ka*Q*N),z=Math.floor(ea*Q*N),A=Math.floor(ga*Q*N),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+x*db[7]+z*db[8]+A*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+x*fb[7]+z*fb[8]+A*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+x*jb[7]+z*jb[8]+A*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+x*mb[7]+z*mb[8]+A*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&r>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:r});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,r,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier2=l/B,spearnew2=Math.floor(woodModifier2*q),swordnew2=Math.floor(woodModifier2*r),axenew2=Math.floor(woodModifier2*s),archernew2=Math.floor(woodModifier2*t),lcnew2=Math.floor(woodModifier2*u),manew2=Math.floor(woodModifier2*v),hcnew2=Math.floor(woodModifier2*A),ramnew2=Math.floor(woodModifier2*x),catapultnew2=Math.floor(woodModifier2*z),swordnew2<=k&&swordnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew2});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordnew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,swordavailable2=Math.floor(foodAvailable2*swordnew2),swordavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable2});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier2=n/C,spearnew2=Math.floor(clayModifier2*q),swordnew2=Math.floor(clayModifier2*r),axenew2=Math.floor(clayModifier2*s),archernew2=Math.floor(clayModifier2*t),lcnew2=Math.floor(clayModifier2*u),manew2=Math.floor(clayModifier2*v),hcnew2=Math.floor(clayModifier2*A),ramnew2=Math.floor(clayModifier2*x),catapultnew2=Math.floor(clayModifier2*z),swordnew2<=k&&swordnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew2});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordnew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,swordavailable2=Math.floor(foodAvailable2*swordnew2),swordavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable2});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier2=p/D,spearnew2=Math.floor(ironModifier2*q),swordnew2=Math.floor(ironModifier2*r),axenew2=Math.floor(ironModifier2*s),archernew2=Math.floor(ironModifier2*t),lcnew2=Math.floor(ironModifier2*u),manew2=Math.floor(ironModifier2*v),hcnew2=Math.floor(ironModifier2*A),ramnew2=Math.floor(ironModifier2*x),catapultnew2=Math.floor(ironModifier2*z),swordnew2<=k&&swordnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew2});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordnew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,swordavailable2=Math.floor(foodAvailable2*swordnew2),swordavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable2});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function l(){var a=qa-A,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(ma*Q*N),r=Math.floor(na*Q*N),s=Math.floor(da*Q*N),t=Math.floor(ca*Q*N),u=Math.floor(ia*Q*N),v=Math.floor(ja*Q*N),w=Math.floor(ka*Q*N),x=Math.floor(ea*Q*N),z=Math.floor(ga*Q*N),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&s>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:s});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,s,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier2=l/B,spearnew2=Math.floor(woodModifier2*q),swordnew2=Math.floor(woodModifier2*r),axenew2=Math.floor(woodModifier2*s),archernew2=Math.floor(woodModifier2*t),lcnew2=Math.floor(woodModifier2*u),manew2=Math.floor(woodModifier2*v),hcnew2=Math.floor(woodModifier2*z),ramnew2=Math.floor(woodModifier2*w),catapultnew2=Math.floor(woodModifier2*x),axenew2<=k&&axenew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew2});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axenew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,axeavailable2=Math.floor(foodAvailable2*axenew2),axeavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable2});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axeavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier2=n/C,spearnew2=Math.floor(clayModifier2*q),swordnew2=Math.floor(clayModifier2*r),axenew2=Math.floor(clayModifier2*s),archernew2=Math.floor(clayModifier2*t),lcnew2=Math.floor(clayModifier2*u),manew2=Math.floor(clayModifier2*v),hcnew2=Math.floor(clayModifier2*z),ramnew2=Math.floor(clayModifier2*w),catapultnew2=Math.floor(clayModifier2*x),axenew2<=k&&axenew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew2});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axenew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,axeavailable2=Math.floor(foodAvailable2*axenew2),axeavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable2});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axeavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier2=p/D,spearnew2=Math.floor(ironModifier2*q),swordnew2=Math.floor(ironModifier2*r),axenew2=Math.floor(ironModifier2*s),archernew2=Math.floor(ironModifier2*t),lcnew2=Math.floor(ironModifier2*u),manew2=Math.floor(ironModifier2*v),hcnew2=Math.floor(ironModifier2*z),ramnew2=Math.floor(ironModifier2*w),catapultnew2=Math.floor(ironModifier2*x),axenew2<=k&&axenew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew2});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axenew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,axeavailable2=Math.floor(foodAvailable2*axenew2),axeavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable2});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axeavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function n(){var a=pa-B,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(ma*Q*N),r=Math.floor(na*Q*N),s=Math.floor(da*Q*N),t=Math.floor(ca*Q*N),u=Math.floor(ia*Q*N),v=Math.floor(ja*Q*N),w=Math.floor(ka*Q*N),x=Math.floor(ea*Q*N),z=Math.floor(ga*Q*N),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&C<=n&&D<=p&&E<=k&&t>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:t});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,t,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier2=l/A,spearnew2=Math.floor(woodModifier2*q),swordnew2=Math.floor(woodModifier2*r),axenew2=Math.floor(woodModifier2*s),archernew2=Math.floor(woodModifier2*t),lcnew2=Math.floor(woodModifier2*u),manew2=Math.floor(woodModifier2*v),hcnew2=Math.floor(woodModifier2*z),ramnew2=Math.floor(woodModifier2*w),catapultnew2=Math.floor(woodModifier2*x),archernew2<=k&&archernew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew2});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archernew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,archeravailable2=Math.floor(foodAvailable2*archernew2),archeravailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable2});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archeravailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier2=n/C,spearnew2=Math.floor(clayModifier2*q),swordnew2=Math.floor(clayModifier2*r),axenew2=Math.floor(clayModifier2*s),archernew2=Math.floor(clayModifier2*t),lcnew2=Math.floor(clayModifier2*u),manew2=Math.floor(clayModifier2*v),hcnew2=Math.floor(clayModifier2*z),ramnew2=Math.floor(clayModifier2*w),catapultnew2=Math.floor(clayModifier2*x),archernew2<=k&&archernew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew2});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archernew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,archeravailable2=Math.floor(foodAvailable2*archernew2),archeravailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable2});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archeravailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier2=p/D,spearnew2=Math.floor(ironModifier2*q),swordnew2=Math.floor(ironModifier2*r),axenew2=Math.floor(ironModifier2*s),archernew2=Math.floor(ironModifier2*t),lcnew2=Math.floor(ironModifier2*u),manew2=Math.floor(ironModifier2*v),hcnew2=Math.floor(ironModifier2*z),ramnew2=Math.floor(ironModifier2*w),catapultnew2=Math.floor(ironModifier2*x),archernew2<=k&&archernew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew2});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archernew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,archeravailable2=Math.floor(foodAvailable2*archernew2),archeravailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable2});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archeravailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function p(){var a=va-C,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(ma*Q*N),r=Math.floor(na*Q*N),s=Math.floor(da*Q*N),t=Math.floor(ca*Q*N),u=Math.floor(ia*Q*N),v=Math.floor(ja*Q*N),w=Math.floor(ka*Q*N),x=Math.floor(ea*Q*N),z=Math.floor(ga*Q*N),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&D<=p&&E<=k&&u>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:u});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,u,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier2=l/A,spearnew2=Math.floor(woodModifier2*q),swordnew2=Math.floor(woodModifier2*r),axenew2=Math.floor(woodModifier2*s),archernew2=Math.floor(woodModifier2*t),lcnew2=Math.floor(woodModifier2*u),manew2=Math.floor(woodModifier2*v),hcnew2=Math.floor(woodModifier2*z),ramnew2=Math.floor(woodModifier2*w),catapultnew2=Math.floor(woodModifier2*x),lcnew2<=k&&lcnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew2});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcnew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,lcavailable2=Math.floor(foodAvailable2*lcnew2),lcavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable2});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier2=n/B,spearnew2=Math.floor(clayModifier2*q),swordnew2=Math.floor(clayModifier2*r),axenew2=Math.floor(clayModifier2*s),archernew2=Math.floor(clayModifier2*t),lcnew2=Math.floor(clayModifier2*u),manew2=Math.floor(clayModifier2*v),hcnew2=Math.floor(clayModifier2*z),ramnew2=Math.floor(clayModifier2*w),catapultnew2=Math.floor(clayModifier2*x),lcnew2<=k&&lcnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew2});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcnew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,lcavailable2=Math.floor(foodAvailable2*lcnew2),lcavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable2});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier2=p/D,spearnew2=Math.floor(ironModifier2*q),swordnew2=Math.floor(ironModifier2*r),axenew2=Math.floor(ironModifier2*s),archernew2=Math.floor(ironModifier2*t),lcnew2=Math.floor(ironModifier2*u),manew2=Math.floor(ironModifier2*v),hcnew2=Math.floor(ironModifier2*z),ramnew2=Math.floor(ironModifier2*w),catapultnew2=Math.floor(ironModifier2*x),lcnew2<=k&&lcnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew2});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcnew2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,lcavailable2=Math.floor(foodAvailable2*lcnew2),lcavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable2});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcavailable2,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function q(){var a=wa-I,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(ma*Q*N),r=Math.floor(na*Q*N),s=Math.floor(da*Q*N),t=Math.floor(ca*Q*N),u=Math.floor(ia*Q*N),v=Math.floor(ja*Q*N),w=Math.floor(ka*Q*N),x=Math.floor(ea*Q*N),z=Math.floor(ga*Q*N),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],C=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],D=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&C<=p&&D<=k&&v>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:v});var E=b("common","mounted_archer"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,v,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier2=l/A,spearnew2=Math.floor(woodModifier2*q),swordnew2=Math.floor(woodModifier2*r),axenew2=Math.floor(woodModifier2*s),archernew2=Math.floor(woodModifier2*t),lcnew2=Math.floor(woodModifier2*u),manew2=Math.floor(woodModifier2*v),hcnew2=Math.floor(woodModifier2*z),ramnew2=Math.floor(woodModifier2*w),catapultnew2=Math.floor(woodModifier2*x),manew2<=k&&manew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew2});var E=b("common","mounted_archer"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,manew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,maavailable2=Math.floor(foodAvailable2*manew2),maavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable2});var E=b("common","mounted_archer"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,maavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier2=n/B,spearnew2=Math.floor(clayModifier2*q),swordnew2=Math.floor(clayModifier2*r),axenew2=Math.floor(clayModifier2*s),archernew2=Math.floor(clayModifier2*t),lcnew2=Math.floor(clayModifier2*u),manew2=Math.floor(clayModifier2*v),hcnew2=Math.floor(clayModifier2*z),ramnew2=Math.floor(clayModifier2*w),catapultnew2=Math.floor(clayModifier2*x),manew2<=k&&manew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew2});var E=b("common","mounted_archer"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,manew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,maavailable2=Math.floor(foodAvailable2*manew2),maavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable2});var E=b("common","mounted_archer"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,maavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier2=p/C,spearnew2=Math.floor(ironModifier2*q),swordnew2=Math.floor(ironModifier2*r),axenew2=Math.floor(ironModifier2*s),archernew2=Math.floor(ironModifier2*t),lcnew2=Math.floor(ironModifier2*u),manew2=Math.floor(ironModifier2*v),hcnew2=Math.floor(ironModifier2*z),ramnew2=Math.floor(ironModifier2*w),catapultnew2=Math.floor(ironModifier2*x),manew2<=k&&manew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew2});var E=b("common","mounted_archer"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,manew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,maavailable2=Math.floor(foodAvailable2*manew2),maavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable2});var E=b("common","mounted_archer"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,maavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}function r(){var a=xa-K,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(ma*Q*N),r=Math.floor(na*Q*N),s=Math.floor(da*Q*N),t=Math.floor(ca*Q*N),u=Math.floor(ia*Q*N),v=Math.floor(ja*Q*N),w=Math.floor(ka*Q*N),x=Math.floor(ea*Q*N),z=Math.floor(ga*Q*N),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],C=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],D=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&C<=p&&D<=k&&w>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:w});var E=b("common","ram"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,w,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier2=l/A,spearnew2=Math.floor(woodModifier2*q),swordnew2=Math.floor(woodModifier2*r),axenew2=Math.floor(woodModifier2*s),archernew2=Math.floor(woodModifier2*t),lcnew2=Math.floor(woodModifier2*u),manew2=Math.floor(woodModifier2*v),hcnew2=Math.floor(woodModifier2*z),ramnew2=Math.floor(woodModifier2*w),catapultnew2=Math.floor(woodModifier2*x),ramnew2<=k&&ramnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew2});var E=b("common","ram"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,ramnew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,ramavailable2=Math.floor(foodAvailable2*ramnew2),ramavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable2});var E=b("common","ram"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,ramavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier2=n/B,spearnew2=Math.floor(clayModifier2*q),swordnew2=Math.floor(clayModifier2*r),axenew2=Math.floor(clayModifier2*s),archernew2=Math.floor(clayModifier2*t),lcnew2=Math.floor(clayModifier2*u),manew2=Math.floor(clayModifier2*v),hcnew2=Math.floor(clayModifier2*z),ramnew2=Math.floor(clayModifier2*w),catapultnew2=Math.floor(clayModifier2*x),ramnew2<=k&&ramnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew2});var E=b("common","ram"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,ramnew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,ramavailable2=Math.floor(foodAvailable2*ramnew2),ramavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable2});var E=b("common","ram"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,ramavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier2=p/C,spearnew2=Math.floor(ironModifier2*q),swordnew2=Math.floor(ironModifier2*r),axenew2=Math.floor(ironModifier2*s),archernew2=Math.floor(ironModifier2*t),lcnew2=Math.floor(ironModifier2*u),manew2=Math.floor(ironModifier2*v),hcnew2=Math.floor(ironModifier2*z),ramnew2=Math.floor(ironModifier2*w),catapultnew2=Math.floor(ironModifier2*x),ramnew2<=k&&ramnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew2});var E=b("common","ram"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,ramnew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,ramavailable2=Math.floor(foodAvailable2*ramnew2),ramavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable2});var E=b("common","ram"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,ramavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}function s(){var a=ra-L,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(ma*Q*N),r=Math.floor(na*Q*N),s=Math.floor(da*Q*N),t=Math.floor(ca*Q*N),u=Math.floor(ia*Q*N),v=Math.floor(ja*Q*N),w=Math.floor(ka*Q*N),x=Math.floor(ea*Q*N),z=Math.floor(ga*Q*N),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],C=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],D=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&C<=p&&D<=k&&x>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:x});var E=b("common","catapult"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,x,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier2=l/A,spearnew2=Math.floor(woodModifier2*q),swordnew2=Math.floor(woodModifier2*r),axenew2=Math.floor(woodModifier2*s),archernew2=Math.floor(woodModifier2*t),lcnew2=Math.floor(woodModifier2*u),manew2=Math.floor(woodModifier2*v),hcnew2=Math.floor(woodModifier2*z),ramnew2=Math.floor(woodModifier2*w),catapultnew2=Math.floor(woodModifier2*x),catapultnew2<=k&&catapultnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew2});var E=b("common","catapult"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()
},E,catapultnew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,catapultavailable2=Math.floor(foodAvailable2*catapultnew2),catapultavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable2});var E=b("common","catapult"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,catapultavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier2=n/B,spearnew2=Math.floor(clayModifier2*q),swordnew2=Math.floor(clayModifier2*r),axenew2=Math.floor(clayModifier2*s),archernew2=Math.floor(clayModifier2*t),lcnew2=Math.floor(clayModifier2*u),manew2=Math.floor(clayModifier2*v),hcnew2=Math.floor(clayModifier2*z),ramnew2=Math.floor(clayModifier2*w),catapultnew2=Math.floor(clayModifier2*x),catapultnew2<=k&&catapultnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew2});var E=b("common","catapult"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,catapultnew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,catapultavailable2=Math.floor(foodAvailable2*catapultnew2),catapultavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable2});var E=b("common","catapult"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,catapultavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier2=p/C,spearnew2=Math.floor(ironModifier2*q),swordnew2=Math.floor(ironModifier2*r),axenew2=Math.floor(ironModifier2*s),archernew2=Math.floor(ironModifier2*t),lcnew2=Math.floor(ironModifier2*u),manew2=Math.floor(ironModifier2*v),hcnew2=Math.floor(ironModifier2*z),ramnew2=Math.floor(ironModifier2*w),catapultnew2=Math.floor(ironModifier2*x),catapultnew2<=k&&catapultnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew2});var E=b("common","catapult"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,catapultnew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,catapultavailable2=Math.floor(foodAvailable2*catapultnew2),catapultavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable2});var E=b("common","catapult"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,catapultavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}function t(){var a=ta-M,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(ma*Q*N),r=Math.floor(na*Q*N),s=Math.floor(da*Q*N),t=Math.floor(ca*Q*N),u=Math.floor(ia*Q*N),v=Math.floor(ja*Q*N),w=Math.floor(ka*Q*N),x=Math.floor(ea*Q*N),z=Math.floor(ga*Q*N),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],C=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],D=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&C<=p&&D<=k&&z>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:z});var E=b("common","heavy_cavalry"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,z,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier2=l/A,spearnew2=Math.floor(woodModifier2*q),swordnew2=Math.floor(woodModifier2*r),axenew2=Math.floor(woodModifier2*s),archernew2=Math.floor(woodModifier2*t),lcnew2=Math.floor(woodModifier2*u),manew2=Math.floor(woodModifier2*v),hcnew2=Math.floor(woodModifier2*z),ramnew2=Math.floor(woodModifier2*w),catapultnew2=Math.floor(woodModifier2*x),hcnew2<=k&&hcnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew2});var E=b("common","heavy_cavalry"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,hcnew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,hcavailable2=Math.floor(foodAvailable2*hcnew2),hcavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable2});var E=b("common","heavy_cavalry"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,hcavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier2=n/B,spearnew2=Math.floor(clayModifier2*q),swordnew2=Math.floor(clayModifier2*r),axenew2=Math.floor(clayModifier2*s),archernew2=Math.floor(clayModifier2*t),lcnew2=Math.floor(clayModifier2*u),manew2=Math.floor(clayModifier2*v),hcnew2=Math.floor(clayModifier2*z),ramnew2=Math.floor(clayModifier2*w),catapultnew2=Math.floor(clayModifier2*x),hcnew2<=k&&hcnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew2});var E=b("common","heavy_cavalry"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,hcnew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,hcavailable2=Math.floor(foodAvailable2*hcnew2),hcavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable2});var E=b("common","heavy_cavalry"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,hcavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier2=p/C,spearnew2=Math.floor(ironModifier2*q),swordnew2=Math.floor(ironModifier2*r),axenew2=Math.floor(ironModifier2*s),archernew2=Math.floor(ironModifier2*t),lcnew2=Math.floor(ironModifier2*u),manew2=Math.floor(ironModifier2*v),hcnew2=Math.floor(ironModifier2*z),ramnew2=Math.floor(ironModifier2*w),catapultnew2=Math.floor(ironModifier2*x),hcnew2<=k&&hcnew2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew2});var E=b("common","heavy_cavalry"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,hcnew2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}else if(foodnew2=spearnew2*mb[0]+swordnew2*mb[1]+axenew2*mb[2]+archernew2*mb[3]+lcnew2*mb[4]+manew2*mb[5]+ramnew2*mb[7]+catapultnew2*mb[8]+hcnew2*mb[6],foodAvailable2=k/foodnew2,hcavailable2=Math.floor(foodAvailable2*hcnew2),hcavailable2>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable2});var E=b("common","heavy_cavalry"),F=Date.now(),G=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},E,hcavailable2,F];m.trigger("RecruitQueue/jobStarted",G),y.unshift(G),o.set("recruiter-log",y)}}function u(){O>0&&O<3?i():O>=3&&O<5?(i(),setTimeout(function(){k()},2e3)):O>=5&&O<9?(i(),setTimeout(function(){k()},2e3),setTimeout(function(){l()},4e3)):O>=9&&O<11?(i(),setTimeout(function(){k()},2e3),setTimeout(function(){l()},4e3),setTimeout(function(){n()},6e3)):O>=11&&O<13?(i(),setTimeout(function(){k()},2e3),setTimeout(function(){l()},4e3),setTimeout(function(){n()},6e3),setTimeout(function(){p()},3e3)):O>=13&&O<15?(i(),setTimeout(function(){k()},2e3),setTimeout(function(){l()},4e3),setTimeout(function(){n()},6e3),setTimeout(function(){p()},3e3),setTimeout(function(){q()},5e3)):O>=15&&O<17?(i(),setTimeout(function(){k()},2e3),setTimeout(function(){l()},4e3),setTimeout(function(){n()},6e3),setTimeout(function(){p()},3e3),setTimeout(function(){q()},5e3),setTimeout(function(){r()},7e3)):O>=17&&O<21?(i(),setTimeout(function(){k()},2e3),setTimeout(function(){l()},4e3),setTimeout(function(){n()},6e3),setTimeout(function(){p()},3e3),setTimeout(function(){q()},5e3),setTimeout(function(){r()},7e3),setTimeout(function(){s()},8e3)):O>=21&&(i(),setTimeout(function(){k()},2e3),setTimeout(function(){l()},4e3),setTimeout(function(){n()},6e3),setTimeout(function(){p()},3e3),setTimeout(function(){q()},5e3),setTimeout(function(){r()},7e3),setTimeout(function(){s()},8e3),setTimeout(function(){t()},1e3))}var v=qb.unitInfo.units.spear.own+qb.unitInfo.units.spear.recruiting,w=qb.unitInfo.units.sword.own+qb.unitInfo.units.sword.recruiting,A=qb.unitInfo.units.axe.own+qb.unitInfo.units.axe.recruiting,B=qb.unitInfo.units.archer.own+qb.unitInfo.units.archer.recruiting,C=qb.unitInfo.units.light_cavalry.own+qb.unitInfo.units.light_cavalry.recruiting,I=qb.unitInfo.units.mounted_archer.own+qb.unitInfo.units.mounted_archer.recruiting,K=qb.unitInfo.units.ram.own+qb.unitInfo.units.ram.recruiting,L=qb.unitInfo.units.catapult.own+qb.unitInfo.units.catapult.recruiting,M=qb.unitInfo.units.heavy_cavalry.own+qb.unitInfo.units.heavy_cavalry.recruiting,O=qb.buildingData.data.barracks.level,P=(qb.buildingData.data.academy.level,qb.buildingData.data.preceptory.level,qb.buildingData.data.statue.level,qb.buildingQueue.data.queue),R=qb.getRecruitingQueues(),S=R.barracks.jobs,T=R.preceptory.jobs,U=R.academy.jobs,V=R.statue.jobs;S.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,x.push(recruitingTimeToFinish)}),T.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,E.push(recruitingTimeToFinish)}),U.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,z.push(recruitingTimeToFinish)}),V.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,D.push(recruitingTimeToFinish)}),function(){N=j>0?P.length>=2?1:1==P.length?.5:.25:0,a()}()},6e4)})},sb*Ab),setTimeout(function(){n.forEach(function(a){qb.data.villageId==a&&setInterval(function(){function a(){fa=U.length>0?U.reduce(function(a,b){return a+b}):0,c()}function c(){oa=$.length>0?$.reduce(function(a,b){return a+b}):0,d()}function d(){la=W.length>0?W.reduce(function(a,b){return a+b}):0,e()}function e(){ha=ba.length>0?ba.reduce(function(a,b){return a+b}):0,h()}function h(){ua=l>0?fa>=936e5?0:fa<936e5&&fa>=864e5?.1:fa<864e5&&fa>=72e6?.25:fa<72e6&&fa>=576e5?.4:fa<576e5&&fa>=432e5?.55:fa<432e5&&fa>=288e5?.7:fa<288e5&&fa>=144e5?.85:fa<144e5&&fa>=72e5?.925:fa<72e5&&fa>=36e5?.9625:1:0,u()}function i(){var a=Za-v,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(Ma*ua*sa),r=Math.floor(Na*ua*sa),s=Math.floor(Da*ua*sa),t=Math.floor(Ca*ua*sa),u=Math.floor(Ia*ua*sa),w=Math.floor(Ja*ua*sa),x=Math.floor(Ka*ua*sa),z=Math.floor(Ea*ua*sa),A=Math.floor(Ga*ua*sa),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+w*db[5]+x*db[7]+z*db[8]+A*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+w*fb[5]+x*fb[7]+z*fb[8]+A*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+w*jb[5]+x*jb[7]+z*jb[8]+A*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+w*mb[5]+x*mb[7]+z*mb[8]+A*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&q>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:q});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,q,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier3=l/B,spearnew3=Math.floor(woodModifier3*q),swordnew3=Math.floor(woodModifier3*r),axenew3=Math.floor(woodModifier3*s),archernew3=Math.floor(woodModifier3*t),lcnew3=Math.floor(woodModifier3*u),manew3=Math.floor(woodModifier3*w),hcnew3=Math.floor(woodModifier3*A),ramnew3=Math.floor(woodModifier3*x),catapultnew3=Math.floor(woodModifier3*z),spearnew3<=k&&spearnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew3});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,spearavailable3=Math.floor(foodAvailable3*spearnew3),spearavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable3});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier3=n/C,spearnew3=Math.floor(clayModifier3*q),swordnew3=Math.floor(clayModifier3*r),axenew3=Math.floor(clayModifier3*s),archernew3=Math.floor(clayModifier3*t),lcnew3=Math.floor(clayModifier3*u),manew3=Math.floor(clayModifier3*w),hcnew3=Math.floor(clayModifier3*A),ramnew3=Math.floor(clayModifier3*x),catapultnew3=Math.floor(clayModifier3*z),spearnew3<=k&&spearnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew3});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,spearavailable3=Math.floor(foodAvailable3*spearnew3),spearavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable3});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier3=p/D,spearnew3=Math.floor(ironModifier3*q),swordnew3=Math.floor(ironModifier3*r),axenew3=Math.floor(ironModifier3*s),archernew3=Math.floor(ironModifier3*t),lcnew3=Math.floor(ironModifier3*u),manew3=Math.floor(ironModifier3*w),hcnew3=Math.floor(ironModifier3*A),ramnew3=Math.floor(ironModifier3*x),catapultnew3=Math.floor(ironModifier3*z),spearnew3<=k&&spearnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew3});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,spearavailable3=Math.floor(foodAvailable3*spearnew3),spearavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable3});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function j(){var a=$a-w,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(Ma*ua*sa),r=Math.floor(Na*ua*sa),s=Math.floor(Da*ua*sa),t=Math.floor(Ca*ua*sa),u=Math.floor(Ia*ua*sa),v=Math.floor(Ja*ua*sa),x=Math.floor(Ka*ua*sa),z=Math.floor(Ea*ua*sa),A=Math.floor(Ga*ua*sa),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+x*db[7]+z*db[8]+A*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+x*fb[7]+z*fb[8]+A*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+x*jb[7]+z*jb[8]+A*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+x*mb[7]+z*mb[8]+A*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&r>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:r});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,r,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier3=l/B,spearnew3=Math.floor(woodModifier3*q),swordnew3=Math.floor(woodModifier3*r),axenew3=Math.floor(woodModifier3*s),archernew3=Math.floor(woodModifier3*t),lcnew3=Math.floor(woodModifier3*u),manew3=Math.floor(woodModifier3*v),hcnew3=Math.floor(woodModifier3*A),ramnew3=Math.floor(woodModifier3*x),catapultnew3=Math.floor(woodModifier3*z),swordnew3<=k&&swordnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew3});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,swordavailable3=Math.floor(foodAvailable3*swordnew3),swordavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable3});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier3=n/C,spearnew3=Math.floor(clayModifier3*q),swordnew3=Math.floor(clayModifier3*r),axenew3=Math.floor(clayModifier3*s),archernew3=Math.floor(clayModifier3*t),lcnew3=Math.floor(clayModifier3*u),manew3=Math.floor(clayModifier3*v),hcnew3=Math.floor(clayModifier3*A),ramnew3=Math.floor(clayModifier3*x),catapultnew3=Math.floor(clayModifier3*z),swordnew3<=k&&swordnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew3});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,swordavailable3=Math.floor(foodAvailable3*swordnew3),swordavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable3});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier3=p/D,spearnew3=Math.floor(ironModifier3*q),swordnew3=Math.floor(ironModifier3*r),axenew3=Math.floor(ironModifier3*s),archernew3=Math.floor(ironModifier3*t),lcnew3=Math.floor(ironModifier3*u),manew3=Math.floor(ironModifier3*v),hcnew3=Math.floor(ironModifier3*A),ramnew3=Math.floor(ironModifier3*x),catapultnew3=Math.floor(ironModifier3*z),swordnew3<=k&&swordnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew3});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,swordavailable3=Math.floor(foodAvailable3*swordnew3),swordavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable3});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function k(){var a=Qa-x,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(Ma*ua*sa),r=Math.floor(Na*ua*sa),s=Math.floor(Da*ua*sa),t=Math.floor(Ca*ua*sa),u=Math.floor(Ia*ua*sa),v=Math.floor(Ja*ua*sa),w=Math.floor(Ka*ua*sa),z=Math.floor(Ea*ua*sa),A=Math.floor(Ga*ua*sa),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+z*db[8]+A*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+z*fb[8]+A*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+z*jb[8]+A*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+z*mb[8]+A*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&s>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:s});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,s,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier3=l/B,spearnew3=Math.floor(woodModifier3*q),swordnew3=Math.floor(woodModifier3*r),axenew3=Math.floor(woodModifier3*s),archernew3=Math.floor(woodModifier3*t),lcnew3=Math.floor(woodModifier3*u),manew3=Math.floor(woodModifier3*v),hcnew3=Math.floor(woodModifier3*A),ramnew3=Math.floor(woodModifier3*w),catapultnew3=Math.floor(woodModifier3*z),axenew3<=k&&axenew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew3});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axenew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,axeavailable3=Math.floor(foodAvailable3*axenew3),axeavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable3});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axeavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier3=n/C,spearnew3=Math.floor(clayModifier3*q),swordnew3=Math.floor(clayModifier3*r),axenew3=Math.floor(clayModifier3*s),archernew3=Math.floor(clayModifier3*t),lcnew3=Math.floor(clayModifier3*u),manew3=Math.floor(clayModifier3*v),hcnew3=Math.floor(clayModifier3*A),ramnew3=Math.floor(clayModifier3*w),catapultnew3=Math.floor(clayModifier3*z),axenew3<=k&&axenew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew3});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axenew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,axeavailable3=Math.floor(foodAvailable3*axenew3),axeavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable3});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axeavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier3=p/D,spearnew3=Math.floor(ironModifier3*q),swordnew3=Math.floor(ironModifier3*r),axenew3=Math.floor(ironModifier3*s),archernew3=Math.floor(ironModifier3*t),lcnew3=Math.floor(ironModifier3*u),manew3=Math.floor(ironModifier3*v),hcnew3=Math.floor(ironModifier3*A),ramnew3=Math.floor(ironModifier3*w),catapultnew3=Math.floor(ironModifier3*z),axenew3<=k&&axenew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew3});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axenew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,axeavailable3=Math.floor(foodAvailable3*axenew3),axeavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable3});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axeavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function n(){var a=Pa-z,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(Ma*ua*sa),r=Math.floor(Na*ua*sa),s=Math.floor(Da*ua*sa),t=Math.floor(Ca*ua*sa),u=Math.floor(Ia*ua*sa),v=Math.floor(Ja*ua*sa),w=Math.floor(Ka*ua*sa),x=Math.floor(Ea*ua*sa),A=Math.floor(Ga*ua*sa),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+A*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+A*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+A*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+A*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&t>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:t});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,t,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier3=l/B,spearnew3=Math.floor(woodModifier3*q),swordnew3=Math.floor(woodModifier3*r),axenew3=Math.floor(woodModifier3*s),archernew3=Math.floor(woodModifier3*t),lcnew3=Math.floor(woodModifier3*u),manew3=Math.floor(woodModifier3*v),hcnew3=Math.floor(woodModifier3*A),ramnew3=Math.floor(woodModifier3*w),catapultnew3=Math.floor(woodModifier3*x),archernew3<=k&&archernew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew3});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archernew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,archeravailable3=Math.floor(foodAvailable3*archernew3),archeravailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable3});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archeravailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier3=n/C,spearnew3=Math.floor(clayModifier3*q),swordnew3=Math.floor(clayModifier3*r),axenew3=Math.floor(clayModifier3*s),archernew3=Math.floor(clayModifier3*t),lcnew3=Math.floor(clayModifier3*u),manew3=Math.floor(clayModifier3*v),hcnew3=Math.floor(clayModifier3*A),ramnew3=Math.floor(clayModifier3*w),catapultnew3=Math.floor(clayModifier3*x),archernew3<=k&&archernew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew3});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archernew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,archeravailable3=Math.floor(foodAvailable3*archernew3),archeravailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable3});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archeravailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier3=p/D,spearnew3=Math.floor(ironModifier3*q),swordnew3=Math.floor(ironModifier3*r),axenew3=Math.floor(ironModifier3*s),archernew3=Math.floor(ironModifier3*t),lcnew3=Math.floor(ironModifier3*u),manew3=Math.floor(ironModifier3*v),hcnew3=Math.floor(ironModifier3*A),ramnew3=Math.floor(ironModifier3*w),catapultnew3=Math.floor(ironModifier3*x),archernew3<=k&&archernew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew3});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archernew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,archeravailable3=Math.floor(foodAvailable3*archernew3),archeravailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable3});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archeravailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function p(){var a=Va-A,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(Ma*ua*sa),r=Math.floor(Na*ua*sa),s=Math.floor(Da*ua*sa),t=Math.floor(Ca*ua*sa),u=Math.floor(Ia*ua*sa),v=Math.floor(Ja*ua*sa),w=Math.floor(Ka*ua*sa),x=Math.floor(Ea*ua*sa),z=Math.floor(Ga*ua*sa),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&u>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:u});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,u,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier3=l/B,spearnew3=Math.floor(woodModifier3*q),swordnew3=Math.floor(woodModifier3*r),axenew3=Math.floor(woodModifier3*s),archernew3=Math.floor(woodModifier3*t),lcnew3=Math.floor(woodModifier3*u),manew3=Math.floor(woodModifier3*v),hcnew3=Math.floor(woodModifier3*z),ramnew3=Math.floor(woodModifier3*w),catapultnew3=Math.floor(woodModifier3*x),lcnew3<=k&&lcnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew3});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,lcavailable3=Math.floor(foodAvailable3*lcnew3),lcavailable3>0){f.emit(g.BARRACKS_RECRUIT,{
village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable3});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier3=n/C,spearnew3=Math.floor(clayModifier3*q),swordnew3=Math.floor(clayModifier3*r),axenew3=Math.floor(clayModifier3*s),archernew3=Math.floor(clayModifier3*t),lcnew3=Math.floor(clayModifier3*u),manew3=Math.floor(clayModifier3*v),hcnew3=Math.floor(clayModifier3*z),ramnew3=Math.floor(clayModifier3*w),catapultnew3=Math.floor(clayModifier3*x),lcnew3<=k&&lcnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew3});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,lcavailable3=Math.floor(foodAvailable3*lcnew3),lcavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable3});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier3=p/D,spearnew3=Math.floor(ironModifier3*q),swordnew3=Math.floor(ironModifier3*r),axenew3=Math.floor(ironModifier3*s),archernew3=Math.floor(ironModifier3*t),lcnew3=Math.floor(ironModifier3*u),manew3=Math.floor(ironModifier3*v),hcnew3=Math.floor(ironModifier3*z),ramnew3=Math.floor(ironModifier3*w),catapultnew3=Math.floor(ironModifier3*x),lcnew3<=k&&lcnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew3});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,lcavailable3=Math.floor(foodAvailable3*lcnew3),lcavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable3});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function q(){var a=Wa-B,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(Ma*ua*sa),r=Math.floor(Na*ua*sa),s=Math.floor(Da*ua*sa),t=Math.floor(Ca*ua*sa),u=Math.floor(Ia*ua*sa),v=Math.floor(Ja*ua*sa),w=Math.floor(Ka*ua*sa),x=Math.floor(Ea*ua*sa),z=Math.floor(Ga*ua*sa),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&C<=n&&D<=p&&E<=k&&v>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:v});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,v,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier3=l/A,spearnew3=Math.floor(woodModifier3*q),swordnew3=Math.floor(woodModifier3*r),axenew3=Math.floor(woodModifier3*s),archernew3=Math.floor(woodModifier3*t),lcnew3=Math.floor(woodModifier3*u),manew3=Math.floor(woodModifier3*v),hcnew3=Math.floor(woodModifier3*z),ramnew3=Math.floor(woodModifier3*w),catapultnew3=Math.floor(woodModifier3*x),manew3<=k&&manew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew3});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,manew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,maavailable3=Math.floor(foodAvailable3*manew3),maavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable3});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,maavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier3=n/C,spearnew3=Math.floor(clayModifier3*q),swordnew3=Math.floor(clayModifier3*r),axenew3=Math.floor(clayModifier3*s),archernew3=Math.floor(clayModifier3*t),lcnew3=Math.floor(clayModifier3*u),manew3=Math.floor(clayModifier3*v),hcnew3=Math.floor(clayModifier3*z),ramnew3=Math.floor(clayModifier3*w),catapultnew3=Math.floor(clayModifier3*x),manew3<=k&&manew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew3});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,manew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,maavailable3=Math.floor(foodAvailable3*manew3),maavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable3});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,maavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier3=p/D,spearnew3=Math.floor(ironModifier3*q),swordnew3=Math.floor(ironModifier3*r),axenew3=Math.floor(ironModifier3*s),archernew3=Math.floor(ironModifier3*t),lcnew3=Math.floor(ironModifier3*u),manew3=Math.floor(ironModifier3*v),hcnew3=Math.floor(ironModifier3*z),ramnew3=Math.floor(ironModifier3*w),catapultnew3=Math.floor(ironModifier3*x),manew3<=k&&manew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew3});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,manew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,maavailable3=Math.floor(foodAvailable3*manew3),maavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable3});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,maavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function r(){var a=Xa-C,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(Ma*ua*sa),r=Math.floor(Na*ua*sa),s=Math.floor(Da*ua*sa),t=Math.floor(Ca*ua*sa),u=Math.floor(Ia*ua*sa),v=Math.floor(Ja*ua*sa),w=Math.floor(Ka*ua*sa),x=Math.floor(Ea*ua*sa),z=Math.floor(Ga*ua*sa),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&D<=p&&E<=k&&w>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:w});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,w,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier3=l/A,spearnew3=Math.floor(woodModifier3*q),swordnew3=Math.floor(woodModifier3*r),axenew3=Math.floor(woodModifier3*s),archernew3=Math.floor(woodModifier3*t),lcnew3=Math.floor(woodModifier3*u),manew3=Math.floor(woodModifier3*v),hcnew3=Math.floor(woodModifier3*z),ramnew3=Math.floor(woodModifier3*w),catapultnew3=Math.floor(woodModifier3*x),ramnew3<=k&&ramnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew3});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,ramavailable3=Math.floor(foodAvailable3*ramnew3),ramavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable3});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier3=n/B,spearnew3=Math.floor(clayModifier3*q),swordnew3=Math.floor(clayModifier3*r),axenew3=Math.floor(clayModifier3*s),archernew3=Math.floor(clayModifier3*t),lcnew3=Math.floor(clayModifier3*u),manew3=Math.floor(clayModifier3*v),hcnew3=Math.floor(clayModifier3*z),ramnew3=Math.floor(clayModifier3*w),catapultnew3=Math.floor(clayModifier3*x),ramnew3<=k&&ramnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew3});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,ramavailable3=Math.floor(foodAvailable3*ramnew3),ramavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable3});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier3=p/D,spearnew3=Math.floor(ironModifier3*q),swordnew3=Math.floor(ironModifier3*r),axenew3=Math.floor(ironModifier3*s),archernew3=Math.floor(ironModifier3*t),lcnew3=Math.floor(ironModifier3*u),manew3=Math.floor(ironModifier3*v),hcnew3=Math.floor(ironModifier3*z),ramnew3=Math.floor(ironModifier3*w),catapultnew3=Math.floor(ironModifier3*x),ramnew3<=k&&ramnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew3});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,ramavailable3=Math.floor(foodAvailable3*ramnew3),ramavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable3});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function s(){var a=Ra-D,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(Ma*ua*sa),r=Math.floor(Na*ua*sa),s=Math.floor(Da*ua*sa),t=Math.floor(Ca*ua*sa),u=Math.floor(Ia*ua*sa),v=Math.floor(Ja*ua*sa),w=Math.floor(Ka*ua*sa),x=Math.floor(Ea*ua*sa),z=Math.floor(Ga*ua*sa),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],C=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&C<=p&&E<=k&&x>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:x});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,x,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier3=l/A,spearnew3=Math.floor(woodModifier3*q),swordnew3=Math.floor(woodModifier3*r),axenew3=Math.floor(woodModifier3*s),archernew3=Math.floor(woodModifier3*t),lcnew3=Math.floor(woodModifier3*u),manew3=Math.floor(woodModifier3*v),hcnew3=Math.floor(woodModifier3*z),ramnew3=Math.floor(woodModifier3*w),catapultnew3=Math.floor(woodModifier3*x),catapultnew3<=k&&catapultnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew3});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,catapultavailable3=Math.floor(foodAvailable3*catapultnew3),catapultavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable3});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier3=n/B,spearnew3=Math.floor(clayModifier3*q),swordnew3=Math.floor(clayModifier3*r),axenew3=Math.floor(clayModifier3*s),archernew3=Math.floor(clayModifier3*t),lcnew3=Math.floor(clayModifier3*u),manew3=Math.floor(clayModifier3*v),hcnew3=Math.floor(clayModifier3*z),ramnew3=Math.floor(clayModifier3*w),catapultnew3=Math.floor(clayModifier3*x),catapultnew3<=k&&catapultnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew3});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,catapultavailable3=Math.floor(foodAvailable3*catapultnew3),catapultavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable3});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier3=p/C,spearnew3=Math.floor(ironModifier3*q),swordnew3=Math.floor(ironModifier3*r),axenew3=Math.floor(ironModifier3*s),archernew3=Math.floor(ironModifier3*t),lcnew3=Math.floor(ironModifier3*u),manew3=Math.floor(ironModifier3*v),hcnew3=Math.floor(ironModifier3*z),ramnew3=Math.floor(ironModifier3*w),catapultnew3=Math.floor(ironModifier3*x),catapultnew3<=k&&catapultnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew3});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,catapultavailable3=Math.floor(foodAvailable3*catapultnew3),catapultavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable3});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function t(){var a=Ta-E,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(Ma*ua*sa),r=Math.floor(Na*ua*sa),s=Math.floor(Da*ua*sa),t=Math.floor(Ca*ua*sa),u=Math.floor(Ia*ua*sa),v=Math.floor(Ja*ua*sa),w=Math.floor(Ka*ua*sa),x=Math.floor(Ea*ua*sa),z=Math.floor(Ga*ua*sa),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],C=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],D=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&C<=p&&D<=k&&z>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:z});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,z,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier3=l/A,spearnew3=Math.floor(woodModifier3*q),swordnew3=Math.floor(woodModifier3*r),axenew3=Math.floor(woodModifier3*s),archernew3=Math.floor(woodModifier3*t),lcnew3=Math.floor(woodModifier3*u),manew3=Math.floor(woodModifier3*v),hcnew3=Math.floor(woodModifier3*z),ramnew3=Math.floor(woodModifier3*w),catapultnew3=Math.floor(woodModifier3*x),hcnew3<=k&&hcnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew3});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,hcavailable3=Math.floor(foodAvailable3*hcnew3),hcavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable3});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier3=n/B,spearnew3=Math.floor(clayModifier3*q),swordnew3=Math.floor(clayModifier3*r),axenew3=Math.floor(clayModifier3*s),archernew3=Math.floor(clayModifier3*t),lcnew3=Math.floor(clayModifier3*u),manew3=Math.floor(clayModifier3*v),hcnew3=Math.floor(clayModifier3*z),ramnew3=Math.floor(clayModifier3*w),catapultnew3=Math.floor(clayModifier3*x),hcnew3<=k&&hcnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew3});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,hcavailable3=Math.floor(foodAvailable3*hcnew3),hcavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable3});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier3=p/C,spearnew3=Math.floor(ironModifier3*q),swordnew3=Math.floor(ironModifier3*r),axenew3=Math.floor(ironModifier3*s),archernew3=Math.floor(ironModifier3*t),lcnew3=Math.floor(ironModifier3*u),manew3=Math.floor(ironModifier3*v),hcnew3=Math.floor(ironModifier3*z),ramnew3=Math.floor(ironModifier3*w),catapultnew3=Math.floor(ironModifier3*x),hcnew3<=k&&hcnew3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew3});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcnew3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew3=spearnew3*mb[0]+swordnew3*mb[1]+axenew3*mb[2]+archernew3*mb[3]+lcnew3*mb[4]+manew3*mb[5]+ramnew3*mb[7]+catapultnew3*mb[8]+hcnew3*mb[6],foodAvailable3=k/foodnew3,hcavailable3=Math.floor(foodAvailable3*hcnew3),hcavailable3>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable3});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcavailable3,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function u(){F>0&&F<3?i():F>=3&&F<5?(i(),setTimeout(function(){j()},2e3)):F>=5&&F<9?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3)):F>=9&&F<11?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){n()},6e3)):F>=11&&F<13?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){n()},6e3),setTimeout(function(){p()},3e3)):F>=13&&F<15?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){n()},6e3),setTimeout(function(){p()},3e3),setTimeout(function(){q()},5e3)):F>=15&&F<17?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){n()},6e3),setTimeout(function(){p()},3e3),setTimeout(function(){q()},5e3),setTimeout(function(){r()},7e3)):F>=17&&F<21?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){n()},6e3),setTimeout(function(){p()},3e3),setTimeout(function(){q()},5e3),setTimeout(function(){r()},7e3),setTimeout(function(){s()},8e3)):F>=21&&(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){n()},6e3),setTimeout(function(){p()},3e3),setTimeout(function(){q()},5e3),setTimeout(function(){r()},7e3),setTimeout(function(){s()},8e3),setTimeout(function(){t()},1e3))}var v=qb.unitInfo.units.spear.own+qb.unitInfo.units.spear.recruiting,w=qb.unitInfo.units.sword.own+qb.unitInfo.units.sword.recruiting,x=qb.unitInfo.units.axe.own+qb.unitInfo.units.axe.recruiting,z=qb.unitInfo.units.archer.own+qb.unitInfo.units.archer.recruiting,A=qb.unitInfo.units.light_cavalry.own+qb.unitInfo.units.light_cavalry.recruiting,B=qb.unitInfo.units.mounted_archer.own+qb.unitInfo.units.mounted_archer.recruiting,C=qb.unitInfo.units.ram.own+qb.unitInfo.units.ram.recruiting,D=qb.unitInfo.units.catapult.own+qb.unitInfo.units.catapult.recruiting,E=qb.unitInfo.units.heavy_cavalry.own+qb.unitInfo.units.heavy_cavalry.recruiting,F=qb.buildingData.data.barracks.level,G=(qb.buildingData.data.academy.level,qb.buildingData.data.preceptory.level,qb.buildingData.data.statue.level,qb.buildingQueue.data.queue),H=qb.getRecruitingQueues(),I=H.barracks.jobs,J=H.preceptory.jobs,K=H.academy.jobs,L=H.statue.jobs;I.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,U.push(recruitingTimeToFinish)}),J.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,ba.push(recruitingTimeToFinish)}),K.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,W.push(recruitingTimeToFinish)}),L.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,$.push(recruitingTimeToFinish)}),function(){sa=l>0?G.length>=2?1:1==G.length?.5:.25:0,a()}()},6e4)})},sb*Ab),setTimeout(function(){q.forEach(function(a){qb.data.villageId==a&&setInterval(function(){function a(){La=ya.length>0?ya.reduce(function(a,b){return a+b}):0,c()}function c(){Ua=Fa.length>0?Fa.reduce(function(a,b){return a+b}):0,d()}function d(){Sa=Ba.length>0?Ba.reduce(function(a,b){return a+b}):0,e()}function e(){Oa=Ha.length>0?Ha.reduce(function(a,b){return a+b}):0,h()}function h(){_a=p>0?La>=936e5?0:La<936e5&&La>=864e5?.1:La<864e5&&La>=72e6?.25:La<72e6&&La>=576e5?.4:La<576e5&&La>=432e5?.55:La<432e5&&La>=288e5?.7:La<288e5&&La>=144e5?.85:La<144e5&&La>=72e5?.925:La<72e5&&La>=36e5?.9625:1:0,u()}function i(){var a=xb-v,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(kb*_a*Ya),r=Math.floor(lb*_a*Ya),s=Math.floor(bb*_a*Ya),t=Math.floor(ab*_a*Ya),u=Math.floor(gb*_a*Ya),w=Math.floor(hb*_a*Ya),x=Math.floor(ib*_a*Ya),z=Math.floor(cb*_a*Ya),A=Math.floor(eb*_a*Ya),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+w*db[5]+x*db[7]+z*db[8]+A*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+w*fb[5]+x*fb[7]+z*fb[8]+A*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+w*jb[5]+x*jb[7]+z*jb[8]+A*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+w*mb[5]+x*mb[7]+z*mb[8]+A*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&q>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:q});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,q,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier4=l/B,spearnew4=Math.floor(woodModifier4*q),swordnew4=Math.floor(woodModifier4*r),axenew4=Math.floor(woodModifier4*s),archernew4=Math.floor(woodModifier4*t),lcnew4=Math.floor(woodModifier4*u),manew4=Math.floor(woodModifier4*w),hcnew4=Math.floor(woodModifier4*A),ramnew4=Math.floor(woodModifier4*x),catapultnew4=Math.floor(woodModifier4*z),spearnew4<=k&&spearnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew4});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,spearavailable4=Math.floor(foodAvailable4*spearnew4),spearavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable4});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier4=n/C,spearnew4=Math.floor(clayModifier4*q),swordnew4=Math.floor(clayModifier4*r),axenew4=Math.floor(clayModifier4*s),archernew4=Math.floor(clayModifier4*t),lcnew4=Math.floor(clayModifier4*u),manew4=Math.floor(clayModifier4*w),hcnew4=Math.floor(clayModifier4*A),ramnew4=Math.floor(clayModifier4*x),catapultnew4=Math.floor(clayModifier4*z),spearnew4<=k&&spearnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew4});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,spearavailable4=Math.floor(foodAvailable4*spearnew4),spearavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable4});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier4=p/D,spearnew4=Math.floor(ironModifier4*q),swordnew4=Math.floor(ironModifier4*r),axenew4=Math.floor(ironModifier4*s),archernew4=Math.floor(ironModifier4*t),lcnew4=Math.floor(ironModifier4*u),manew4=Math.floor(ironModifier4*w),hcnew4=Math.floor(ironModifier4*A),ramnew4=Math.floor(ironModifier4*x),catapultnew4=Math.floor(ironModifier4*z),spearnew4<=k&&spearnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearnew4});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,spearavailable4=Math.floor(foodAvailable4*spearnew4),spearavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"spear",amount:spearavailable4});var F=b("common","spear"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,spearavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function j(){var a=yb-w,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(kb*_a*Ya),r=Math.floor(lb*_a*Ya),s=Math.floor(bb*_a*Ya),t=Math.floor(ab*_a*Ya),u=Math.floor(gb*_a*Ya),v=Math.floor(hb*_a*Ya),x=Math.floor(ib*_a*Ya),z=Math.floor(cb*_a*Ya),A=Math.floor(eb*_a*Ya),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+x*db[7]+z*db[8]+A*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+x*fb[7]+z*fb[8]+A*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+x*jb[7]+z*jb[8]+A*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+x*mb[7]+z*mb[8]+A*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&r>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:r});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,r,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier4=l/B,spearnew4=Math.floor(woodModifier4*q),swordnew4=Math.floor(woodModifier4*r),axenew4=Math.floor(woodModifier4*s),archernew4=Math.floor(woodModifier4*t),lcnew4=Math.floor(woodModifier4*u),manew4=Math.floor(woodModifier4*v),hcnew4=Math.floor(woodModifier4*A),ramnew4=Math.floor(woodModifier4*x),catapultnew4=Math.floor(woodModifier4*z),swordnew4<=k&&swordnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew4});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,swordavailable4=Math.floor(foodAvailable4*swordnew4),swordavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable4});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier4=n/C,
spearnew4=Math.floor(clayModifier4*q),swordnew4=Math.floor(clayModifier4*r),axenew4=Math.floor(clayModifier4*s),archernew4=Math.floor(clayModifier4*t),lcnew4=Math.floor(clayModifier4*u),manew4=Math.floor(clayModifier4*v),hcnew4=Math.floor(clayModifier4*A),ramnew4=Math.floor(clayModifier4*x),catapultnew4=Math.floor(clayModifier4*z),swordnew4<=k&&swordnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew4});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,swordavailable4=Math.floor(foodAvailable4*swordnew4),swordavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable4});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier4=p/D,spearnew4=Math.floor(ironModifier4*q),swordnew4=Math.floor(ironModifier4*r),axenew4=Math.floor(ironModifier4*s),archernew4=Math.floor(ironModifier4*t),lcnew4=Math.floor(ironModifier4*u),manew4=Math.floor(ironModifier4*v),hcnew4=Math.floor(ironModifier4*A),ramnew4=Math.floor(ironModifier4*x),catapultnew4=Math.floor(ironModifier4*z),swordnew4<=k&&swordnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordnew4});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,swordavailable4=Math.floor(foodAvailable4*swordnew4),swordavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"sword",amount:swordavailable4});var F=b("common","sword"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,swordavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function k(){var a=ob-x,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(kb*_a*Ya),r=Math.floor(lb*_a*Ya),s=Math.floor(bb*_a*Ya),t=Math.floor(ab*_a*Ya),u=Math.floor(gb*_a*Ya),v=Math.floor(hb*_a*Ya),w=Math.floor(ib*_a*Ya),z=Math.floor(cb*_a*Ya),A=Math.floor(eb*_a*Ya),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+z*db[8]+A*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+z*fb[8]+A*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+z*jb[8]+A*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+z*mb[8]+A*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&s>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:s});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,s,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier4=l/B,spearnew4=Math.floor(woodModifier4*q),swordnew4=Math.floor(woodModifier4*r),axenew4=Math.floor(woodModifier4*s),archernew4=Math.floor(woodModifier4*t),lcnew4=Math.floor(woodModifier4*u),manew4=Math.floor(woodModifier4*v),hcnew4=Math.floor(woodModifier4*A),ramnew4=Math.floor(woodModifier4*w),catapultnew4=Math.floor(woodModifier4*z),axenew4<=k&&axenew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew4});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axenew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,axeavailable4=Math.floor(foodAvailable4*axenew4),axeavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable4});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axeavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier4=n/C,spearnew4=Math.floor(clayModifier4*q),swordnew4=Math.floor(clayModifier4*r),axenew4=Math.floor(clayModifier4*s),archernew4=Math.floor(clayModifier4*t),lcnew4=Math.floor(clayModifier4*u),manew4=Math.floor(clayModifier4*v),hcnew4=Math.floor(clayModifier4*A),ramnew4=Math.floor(clayModifier4*w),catapultnew4=Math.floor(clayModifier4*z),axenew4<=k&&axenew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew4});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axenew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,axeavailable4=Math.floor(foodAvailable4*axenew4),axeavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable4});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axeavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier4=p/D,spearnew4=Math.floor(ironModifier4*q),swordnew4=Math.floor(ironModifier4*r),axenew4=Math.floor(ironModifier4*s),archernew4=Math.floor(ironModifier4*t),lcnew4=Math.floor(ironModifier4*u),manew4=Math.floor(ironModifier4*v),hcnew4=Math.floor(ironModifier4*A),ramnew4=Math.floor(ironModifier4*w),catapultnew4=Math.floor(ironModifier4*z),axenew4<=k&&axenew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axenew4});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axenew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,axeavailable4=Math.floor(foodAvailable4*axenew4),axeavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"axe",amount:axeavailable4});var F=b("common","axe"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,axeavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function l(){var a=nb-z,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(kb*_a*Ya),r=Math.floor(lb*_a*Ya),s=Math.floor(bb*_a*Ya),t=Math.floor(ab*_a*Ya),u=Math.floor(gb*_a*Ya),v=Math.floor(hb*_a*Ya),w=Math.floor(ib*_a*Ya),x=Math.floor(cb*_a*Ya),A=Math.floor(eb*_a*Ya),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+A*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+A*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+A*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+A*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&t>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:t});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,t,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier4=l/B,spearnew4=Math.floor(woodModifier4*q),swordnew4=Math.floor(woodModifier4*r),axenew4=Math.floor(woodModifier4*s),archernew4=Math.floor(woodModifier4*t),lcnew4=Math.floor(woodModifier4*u),manew4=Math.floor(woodModifier4*v),hcnew4=Math.floor(woodModifier4*A),ramnew4=Math.floor(woodModifier4*w),catapultnew4=Math.floor(woodModifier4*x),archernew4<=k&&archernew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew4});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archernew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,archeravailable4=Math.floor(foodAvailable4*archernew4),archeravailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable4});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archeravailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier4=n/C,spearnew4=Math.floor(clayModifier4*q),swordnew4=Math.floor(clayModifier4*r),axenew4=Math.floor(clayModifier4*s),archernew4=Math.floor(clayModifier4*t),lcnew4=Math.floor(clayModifier4*u),manew4=Math.floor(clayModifier4*v),hcnew4=Math.floor(clayModifier4*A),ramnew4=Math.floor(clayModifier4*w),catapultnew4=Math.floor(clayModifier4*x),archernew4<=k&&archernew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew4});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archernew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,archeravailable4=Math.floor(foodAvailable4*archernew4),archeravailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable4});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archeravailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier4=p/D,spearnew4=Math.floor(ironModifier4*q),swordnew4=Math.floor(ironModifier4*r),axenew4=Math.floor(ironModifier4*s),archernew4=Math.floor(ironModifier4*t),lcnew4=Math.floor(ironModifier4*u),manew4=Math.floor(ironModifier4*v),hcnew4=Math.floor(ironModifier4*A),ramnew4=Math.floor(ironModifier4*w),catapultnew4=Math.floor(ironModifier4*x),archernew4<=k&&archernew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archernew4});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archernew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,archeravailable4=Math.floor(foodAvailable4*archernew4),archeravailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"archer",amount:archeravailable4});var F=b("common","archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,archeravailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function n(){var a=tb-A,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(kb*_a*Ya),r=Math.floor(lb*_a*Ya),s=Math.floor(bb*_a*Ya),t=Math.floor(ab*_a*Ya),u=Math.floor(gb*_a*Ya),v=Math.floor(hb*_a*Ya),w=Math.floor(ib*_a*Ya),x=Math.floor(cb*_a*Ya),z=Math.floor(eb*_a*Ya),B=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(B<=l&&C<=n&&D<=p&&E<=k&&u>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:u});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,u,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier4=l/B,spearnew4=Math.floor(woodModifier4*q),swordnew4=Math.floor(woodModifier4*r),axenew4=Math.floor(woodModifier4*s),archernew4=Math.floor(woodModifier4*t),lcnew4=Math.floor(woodModifier4*u),manew4=Math.floor(woodModifier4*v),hcnew4=Math.floor(woodModifier4*z),ramnew4=Math.floor(woodModifier4*w),catapultnew4=Math.floor(woodModifier4*x),lcnew4<=k&&lcnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew4});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,lcavailable4=Math.floor(foodAvailable4*lcnew4),lcavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable4});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier4=n/C,spearnew4=Math.floor(clayModifier4*q),swordnew4=Math.floor(clayModifier4*r),axenew4=Math.floor(clayModifier4*s),archernew4=Math.floor(clayModifier4*t),lcnew4=Math.floor(clayModifier4*u),manew4=Math.floor(clayModifier4*v),hcnew4=Math.floor(clayModifier4*z),ramnew4=Math.floor(clayModifier4*w),catapultnew4=Math.floor(clayModifier4*x),lcnew4<=k&&lcnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew4});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,lcavailable4=Math.floor(foodAvailable4*lcnew4),lcavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable4});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier4=p/D,spearnew4=Math.floor(ironModifier4*q),swordnew4=Math.floor(ironModifier4*r),axenew4=Math.floor(ironModifier4*s),archernew4=Math.floor(ironModifier4*t),lcnew4=Math.floor(ironModifier4*u),manew4=Math.floor(ironModifier4*v),hcnew4=Math.floor(ironModifier4*z),ramnew4=Math.floor(ironModifier4*w),catapultnew4=Math.floor(ironModifier4*x),lcnew4<=k&&lcnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcnew4});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,lcavailable4=Math.floor(foodAvailable4*lcnew4),lcavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"light_cavalry",amount:lcavailable4});var F=b("common","light_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,lcavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function q(){var a=ub-B,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(kb*_a*Ya),r=Math.floor(lb*_a*Ya),s=Math.floor(bb*_a*Ya),t=Math.floor(ab*_a*Ya),u=Math.floor(gb*_a*Ya),v=Math.floor(hb*_a*Ya),w=Math.floor(ib*_a*Ya),x=Math.floor(cb*_a*Ya),z=Math.floor(eb*_a*Ya),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],C=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&C<=n&&D<=p&&E<=k&&v>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:v});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,v,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier4=l/A,spearnew4=Math.floor(woodModifier4*q),swordnew4=Math.floor(woodModifier4*r),axenew4=Math.floor(woodModifier4*s),archernew4=Math.floor(woodModifier4*t),lcnew4=Math.floor(woodModifier4*u),manew4=Math.floor(woodModifier4*v),hcnew4=Math.floor(woodModifier4*z),ramnew4=Math.floor(woodModifier4*w),catapultnew4=Math.floor(woodModifier4*x),manew4<=k&&manew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew4});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,manew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,maavailable4=Math.floor(foodAvailable4*manew4),maavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable4});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,maavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier4=n/C,spearnew4=Math.floor(clayModifier4*q),swordnew4=Math.floor(clayModifier4*r),axenew4=Math.floor(clayModifier4*s),archernew4=Math.floor(clayModifier4*t),lcnew4=Math.floor(clayModifier4*u),manew4=Math.floor(clayModifier4*v),hcnew4=Math.floor(clayModifier4*z),ramnew4=Math.floor(clayModifier4*w),catapultnew4=Math.floor(clayModifier4*x),manew4<=k&&manew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew4});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,manew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,maavailable4=Math.floor(foodAvailable4*manew4),maavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable4});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,maavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier4=p/D,spearnew4=Math.floor(ironModifier4*q),swordnew4=Math.floor(ironModifier4*r),axenew4=Math.floor(ironModifier4*s),archernew4=Math.floor(ironModifier4*t),lcnew4=Math.floor(ironModifier4*u),manew4=Math.floor(ironModifier4*v),hcnew4=Math.floor(ironModifier4*z),ramnew4=Math.floor(ironModifier4*w),catapultnew4=Math.floor(ironModifier4*x),manew4<=k&&manew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:manew4});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,manew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,maavailable4=Math.floor(foodAvailable4*manew4),maavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"mounted_archer",amount:maavailable4});var F=b("common","mounted_archer"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,maavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function r(){var a=vb-C,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(kb*_a*Ya),r=Math.floor(lb*_a*Ya),s=Math.floor(bb*_a*Ya),t=Math.floor(ab*_a*Ya),u=Math.floor(gb*_a*Ya),v=Math.floor(hb*_a*Ya),w=Math.floor(ib*_a*Ya),x=Math.floor(cb*_a*Ya),z=Math.floor(eb*_a*Ya),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],D=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&D<=p&&E<=k&&w>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:w});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,w,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier4=l/A,spearnew4=Math.floor(woodModifier4*q),swordnew4=Math.floor(woodModifier4*r),axenew4=Math.floor(woodModifier4*s),archernew4=Math.floor(woodModifier4*t),lcnew4=Math.floor(woodModifier4*u),manew4=Math.floor(woodModifier4*v),hcnew4=Math.floor(woodModifier4*z),ramnew4=Math.floor(woodModifier4*w),catapultnew4=Math.floor(woodModifier4*x),ramnew4<=k&&ramnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew4});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,ramavailable4=Math.floor(foodAvailable4*ramnew4),ramavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable4});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier4=n/B,spearnew4=Math.floor(clayModifier4*q),swordnew4=Math.floor(clayModifier4*r),axenew4=Math.floor(clayModifier4*s),archernew4=Math.floor(clayModifier4*t),lcnew4=Math.floor(clayModifier4*u),manew4=Math.floor(clayModifier4*v),hcnew4=Math.floor(clayModifier4*z),ramnew4=Math.floor(clayModifier4*w),catapultnew4=Math.floor(clayModifier4*x),ramnew4<=k&&ramnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew4});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,ramavailable4=Math.floor(foodAvailable4*ramnew4),ramavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable4});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier4=p/D,spearnew4=Math.floor(ironModifier4*q),swordnew4=Math.floor(ironModifier4*r),axenew4=Math.floor(ironModifier4*s),archernew4=Math.floor(ironModifier4*t),lcnew4=Math.floor(ironModifier4*u),manew4=Math.floor(ironModifier4*v),hcnew4=Math.floor(ironModifier4*z),ramnew4=Math.floor(ironModifier4*w),catapultnew4=Math.floor(ironModifier4*x),ramnew4<=k&&ramnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramnew4});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,ramavailable4=Math.floor(foodAvailable4*ramnew4),ramavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"ram",amount:ramavailable4});var F=b("common","ram"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,ramavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function s(){var a=pb-D,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(kb*_a*Ya),r=Math.floor(lb*_a*Ya),s=Math.floor(bb*_a*Ya),t=Math.floor(ab*_a*Ya),u=Math.floor(gb*_a*Ya),v=Math.floor(hb*_a*Ya),w=Math.floor(ib*_a*Ya),x=Math.floor(cb*_a*Ya),z=Math.floor(eb*_a*Ya),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],C=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],E=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&C<=p&&E<=k&&x>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:x});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,x,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier4=l/A,spearnew4=Math.floor(woodModifier4*q),swordnew4=Math.floor(woodModifier4*r),axenew4=Math.floor(woodModifier4*s),archernew4=Math.floor(woodModifier4*t),lcnew4=Math.floor(woodModifier4*u),manew4=Math.floor(woodModifier4*v),hcnew4=Math.floor(woodModifier4*z),ramnew4=Math.floor(woodModifier4*w),catapultnew4=Math.floor(woodModifier4*x),catapultnew4<=k&&catapultnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew4});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,catapultavailable4=Math.floor(foodAvailable4*catapultnew4),catapultavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable4});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier4=n/B,spearnew4=Math.floor(clayModifier4*q),swordnew4=Math.floor(clayModifier4*r),axenew4=Math.floor(clayModifier4*s),archernew4=Math.floor(clayModifier4*t),lcnew4=Math.floor(clayModifier4*u),manew4=Math.floor(clayModifier4*v),hcnew4=Math.floor(clayModifier4*z),ramnew4=Math.floor(clayModifier4*w),catapultnew4=Math.floor(clayModifier4*x),catapultnew4<=k&&catapultnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew4});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,catapultavailable4=Math.floor(foodAvailable4*catapultnew4),catapultavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable4});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier4=p/C,spearnew4=Math.floor(ironModifier4*q),swordnew4=Math.floor(ironModifier4*r),axenew4=Math.floor(ironModifier4*s),archernew4=Math.floor(ironModifier4*t),lcnew4=Math.floor(ironModifier4*u),manew4=Math.floor(ironModifier4*v),hcnew4=Math.floor(ironModifier4*z),ramnew4=Math.floor(ironModifier4*w),catapultnew4=Math.floor(ironModifier4*x),catapultnew4<=k&&catapultnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultnew4});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,catapultavailable4=Math.floor(foodAvailable4*catapultnew4),catapultavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"catapult",amount:catapultavailable4});var F=b("common","catapult"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,catapultavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function t(){var a=rb-E,c=qb.getResources(),d=c.getComputed(),e=d.wood,h=d.clay,i=d.iron,j=d.food,k=j.currentStock,l=e.currentStock,n=h.currentStock,p=i.currentStock,q=Math.floor(kb*_a*Ya),r=Math.floor(lb*_a*Ya),s=Math.floor(bb*_a*Ya),t=Math.floor(ab*_a*Ya),u=Math.floor(gb*_a*Ya),v=Math.floor(hb*_a*Ya),w=Math.floor(ib*_a*Ya),x=Math.floor(cb*_a*Ya),z=Math.floor(eb*_a*Ya),A=q*db[0]+r*db[1]+s*db[2]+t*db[3]+u*db[4]+v*db[5]+w*db[7]+x*db[8]+z*db[6],B=q*fb[0]+r*fb[1]+s*fb[2]+t*fb[3]+u*fb[4]+v*fb[5]+w*fb[7]+x*fb[8]+z*fb[6],C=q*jb[0]+r*jb[1]+s*jb[2]+t*jb[3]+u*jb[4]+v*jb[5]+w*jb[7]+x*jb[8]+z*jb[6],D=q*mb[0]+r*mb[1]+s*mb[2]+t*mb[3]+u*mb[4]+v*mb[5]+w*mb[7]+x*mb[8]+z*mb[6];if(a<=0);else if(A<=l&&B<=n&&C<=p&&D<=k&&z>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:z});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,z,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(l<n&&l<p){if(woodModifier4=l/A,spearnew4=Math.floor(woodModifier4*q),swordnew4=Math.floor(woodModifier4*r),axenew4=Math.floor(woodModifier4*s),archernew4=Math.floor(woodModifier4*t),lcnew4=Math.floor(woodModifier4*u),manew4=Math.floor(woodModifier4*v),hcnew4=Math.floor(woodModifier4*z),ramnew4=Math.floor(woodModifier4*w),catapultnew4=Math.floor(woodModifier4*x),hcnew4<=k&&hcnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew4});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)
}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,hcavailable4=Math.floor(foodAvailable4*hcnew4),hcavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable4});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(n<l&&n<p){if(clayModifier4=n/B,spearnew4=Math.floor(clayModifier4*q),swordnew4=Math.floor(clayModifier4*r),axenew4=Math.floor(clayModifier4*s),archernew4=Math.floor(clayModifier4*t),lcnew4=Math.floor(clayModifier4*u),manew4=Math.floor(clayModifier4*v),hcnew4=Math.floor(clayModifier4*z),ramnew4=Math.floor(clayModifier4*w),catapultnew4=Math.floor(clayModifier4*x),hcnew4<=k&&hcnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew4});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,hcavailable4=Math.floor(foodAvailable4*hcnew4),hcavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable4});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}else if(p<l&&n>p)if(ironModifier4=p/C,spearnew4=Math.floor(ironModifier4*q),swordnew4=Math.floor(ironModifier4*r),axenew4=Math.floor(ironModifier4*s),archernew4=Math.floor(ironModifier4*t),lcnew4=Math.floor(ironModifier4*u),manew4=Math.floor(ironModifier4*v),hcnew4=Math.floor(ironModifier4*z),ramnew4=Math.floor(ironModifier4*w),catapultnew4=Math.floor(ironModifier4*x),hcnew4<=k&&hcnew4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcnew4});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcnew4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}else if(foodnew4=spearnew4*mb[0]+swordnew4*mb[1]+axenew4*mb[2]+archernew4*mb[3]+lcnew4*mb[4]+manew4*mb[5]+ramnew4*mb[7]+catapultnew4*mb[8]+hcnew4*mb[6],foodAvailable4=k/foodnew4,hcavailable4=Math.floor(foodAvailable4*hcnew4),hcavailable4>0){f.emit(g.BARRACKS_RECRUIT,{village_id:qb.getId(),unit_type:"heavy_cavalry",amount:hcavailable4});var F=b("common","heavy_cavalry"),G=Date.now(),H=[{x:qb.getX(),y:qb.getY(),name:qb.getName(),id:qb.getId()},F,hcavailable4,G];m.trigger("RecruitQueue/jobStarted",H),y.unshift(H),o.set("recruiter-log",y)}}function u(){F>0&&F<3?i():F>=3&&F<5?(i(),setTimeout(function(){j()},2e3)):F>=5&&F<9?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3)):F>=9&&F<11?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){l()},6e3)):F>=11&&F<13?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){l()},6e3),setTimeout(function(){n()},3e3)):F>=13&&F<15?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){l()},6e3),setTimeout(function(){n()},3e3),setTimeout(function(){q()},5e3)):F>=15&&F<17?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){l()},6e3),setTimeout(function(){n()},3e3),setTimeout(function(){q()},5e3),setTimeout(function(){r()},7e3)):F>=17&&F<21?(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){l()},6e3),setTimeout(function(){n()},3e3),setTimeout(function(){q()},5e3),setTimeout(function(){r()},7e3),setTimeout(function(){s()},8e3)):F>=21&&(i(),setTimeout(function(){j()},2e3),setTimeout(function(){k()},4e3),setTimeout(function(){l()},6e3),setTimeout(function(){n()},3e3),setTimeout(function(){q()},5e3),setTimeout(function(){r()},7e3),setTimeout(function(){s()},8e3),setTimeout(function(){t()},1e3))}var v=qb.unitInfo.units.spear.own+qb.unitInfo.units.spear.recruiting,w=qb.unitInfo.units.sword.own+qb.unitInfo.units.sword.recruiting,x=qb.unitInfo.units.axe.own+qb.unitInfo.units.axe.recruiting,z=qb.unitInfo.units.archer.own+qb.unitInfo.units.archer.recruiting,A=qb.unitInfo.units.light_cavalry.own+qb.unitInfo.units.light_cavalry.recruiting,B=qb.unitInfo.units.mounted_archer.own+qb.unitInfo.units.mounted_archer.recruiting,C=qb.unitInfo.units.ram.own+qb.unitInfo.units.ram.recruiting,D=qb.unitInfo.units.catapult.own+qb.unitInfo.units.catapult.recruiting,E=qb.unitInfo.units.heavy_cavalry.own+qb.unitInfo.units.heavy_cavalry.recruiting,F=qb.buildingData.data.barracks.level,G=(qb.buildingData.data.academy.level,qb.buildingData.data.preceptory.level,qb.buildingData.data.statue.level,qb.buildingQueue.data.queue),H=qb.getRecruitingQueues(),I=H.barracks.jobs,J=H.preceptory.jobs,K=H.academy.jobs,L=H.statue.jobs;I.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,ya.push(recruitingTimeToFinish)}),J.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,Ha.push(recruitingTimeToFinish)}),K.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,Ba.push(recruitingTimeToFinish)}),L.forEach(function(a){recruitingTime=a.clientRecruitingTime,totalRecruitingTime=1e3*(a.data.time_completed-a.data.start_time),recruitingTimeToFinish=totalRecruitingTime-recruitingTime,Fa.push(recruitingTimeToFinish)}),function(){Ya=p>0?G.length>=2?1:1==G.length?.5:.25:0,a()}()},6e4)})},sb*Ab)})}var c=e.getGroupList(),d=D[0].dataset.value,h=c.getGroupVillageIds(d),j=E[0].dataset.value,k=c.getGroupVillageIds(j),l=F[0].dataset.value,n=c.getGroupVillageIds(l),p=G[0].dataset.value,q=c.getGroupVillageIds(p),r=document.getElementById("preset1").value,s=document.getElementById("preset2").value,t=document.getElementById("preset3").value,u=document.getElementById("preset4").value,v=document.getElementById("preset5").value,w=document.getElementById("preset6").value,x=document.getElementById("preset7").value,z=document.getElementById("preset8").value,A=0,B=0,C=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,$=0,_=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0,ra=0,sa=0,ta=0,ua=0,va=0,wa=0,xa=0,ya=0,za=0,Aa=0,Ba=0,Ca=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=0,Ia=0,Ja=0,Ka=0,La=0,Ma=0,Na=0,Oa=0,Pa=0,Qa=0,Ra=0,Sa=0,Ta=0,Ua=0,Va=0,Wa=0,Xa=0,Ya=0,Za=0,$a=0,_a=0,ab=0,bb=0,cb=0,db=0,eb=0,fb=0,gb=0,hb=0,ib=0,jb=0,kb=0,lb=0,mb=0,nb=0,ob=0,pb=0,qb=0,rb=0,sb=0,tb=0,ub=0,vb=0,wb=0,xb=0,yb=0,zb=0,Ab=5e3,Bb=e.getSelectedCharacter(),Cb=Bb.getVillageList();!function(){f.emit(g.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name==r&&(B=a.presets[i].units.axe,A=a.presets[i].units.archer,C=a.presets[i].units.catapult,H=a.presets[i].units.doppelsoldner,I=a.presets[i].units.heavy_cavalry,J=a.presets[i].units.knight,K=a.presets[i].units.light_cavalry,L=a.presets[i].units.mounted_archer,M=a.presets[i].units.ram,Q=a.presets[i].units.trebuchet,P=a.presets[i].units.sword,O=a.presets[i].units.spear,N=a.presets[i].units.snob)}),f.emit(g.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name==v&&(S=a.presets[i].units.axe,R=a.presets[i].units.archer,T=a.presets[i].units.catapult,U=a.presets[i].units.doppelsoldner,V=a.presets[i].units.heavy_cavalry,W=a.presets[i].units.knight,X=a.presets[i].units.light_cavalry,Y=a.presets[i].units.mounted_archer,Z=a.presets[i].units.ram,ba=a.presets[i].units.trebuchet,aa=a.presets[i].units.sword,_=a.presets[i].units.spear,$=a.presets[i].units.snob)}),f.emit(g.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name==s&&(da=a.presets[i].units.axe,ca=a.presets[i].units.archer,ea=a.presets[i].units.catapult,fa=a.presets[i].units.doppelsoldner,ga=a.presets[i].units.heavy_cavalry,ha=a.presets[i].units.knight,ia=a.presets[i].units.light_cavalry,ja=a.presets[i].units.mounted_archer,ka=a.presets[i].units.ram,oa=a.presets[i].units.trebuchet,na=a.presets[i].units.sword,ma=a.presets[i].units.spear,la=a.presets[i].units.snob)}),f.emit(g.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name==w&&(qa=a.presets[i].units.axe,pa=a.presets[i].units.archer,ra=a.presets[i].units.catapult,sa=a.presets[i].units.doppelsoldner,ta=a.presets[i].units.heavy_cavalry,ua=a.presets[i].units.knight,va=a.presets[i].units.light_cavalry,wa=a.presets[i].units.mounted_archer,xa=a.presets[i].units.ram,Ba=a.presets[i].units.trebuchet,Aa=a.presets[i].units.sword,za=a.presets[i].units.spear,ya=a.presets[i].units.snob)}),f.emit(g.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name==t&&(Da=a.presets[i].units.axe,Ca=a.presets[i].units.archer,Ea=a.presets[i].units.catapult,Fa=a.presets[i].units.doppelsoldner,Ga=a.presets[i].units.heavy_cavalry,Ha=a.presets[i].units.knight,Ia=a.presets[i].units.light_cavalry,Ja=a.presets[i].units.mounted_archer,Ka=a.presets[i].units.ram,Oa=a.presets[i].units.trebuchet,Na=a.presets[i].units.sword,Ma=a.presets[i].units.spear,La=a.presets[i].units.snob)}),f.emit(g.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name==x&&(Qa=a.presets[i].units.axe,Pa=a.presets[i].units.archer,Ra=a.presets[i].units.catapult,Sa=a.presets[i].units.doppelsoldner,Ta=a.presets[i].units.heavy_cavalry,Ua=a.presets[i].units.knight,Va=a.presets[i].units.light_cavalry,Wa=a.presets[i].units.mounted_archer,Xa=a.presets[i].units.ram,_a=a.presets[i].units.trebuchet,$a=a.presets[i].units.sword,Za=a.presets[i].units.spear,Ya=a.presets[i].units.snob)}),f.emit(g.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name==u&&(bb=a.presets[i].units.axe,ab=a.presets[i].units.archer,cb=a.presets[i].units.catapult,db=a.presets[i].units.doppelsoldner,eb=a.presets[i].units.heavy_cavalry,fb=a.presets[i].units.knight,gb=a.presets[i].units.light_cavalry,hb=a.presets[i].units.mounted_archer,ib=a.presets[i].units.ram,mb=a.presets[i].units.trebuchet,lb=a.presets[i].units.sword,kb=a.presets[i].units.spear,jb=a.presets[i].units.snob)}),f.emit(g.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name==z&&(ob=a.presets[i].units.axe,nb=a.presets[i].units.archer,pb=a.presets[i].units.catapult,qb=a.presets[i].units.doppelsoldner,rb=a.presets[i].units.heavy_cavalry,sb=a.presets[i].units.knight,tb=a.presets[i].units.light_cavalry,ub=a.presets[i].units.mounted_archer,vb=a.presets[i].units.ram,zb=a.presets[i].units.trebuchet,yb=a.presets[i].units.sword,xb=a.presets[i].units.spear,wb=a.presets[i].units.snob)}),a()}()},bb=function(){A.on("click",function(a){hb()}),t.on("click",function(b){a.isRunning()?(a.stop(),a.stop2()):(a.start(),ab())}),u.on("click",function(b){a.isRunning()?(a.stop(),a.stop2()):(a.start2(),recruitChoosedUnit())}),v.on("click",function(a){D[0].dataset.name=B,D[0].dataset.value="",E[0].dataset.name=B,E[0].dataset.value="",F[0].dataset.name=B,F[0].dataset.value="",G[0].dataset.name=B,G[0].dataset.value="",document.getElementById("preset1").value="",document.getElementById("preset2").value="",document.getElementById("preset3").value="",document.getElementById("preset4").value="",document.getElementById("preset5").value="",document.getElementById("preset6").value="",document.getElementById("preset7").value="",document.getElementById("preset8").value=""}),w.on("click",function(a){H[0].dataset.name=B,H[0].dataset.value="",I[0].dataset.name=B,I[0].dataset.value="",J[0].dataset.name=B,J[0].dataset.value="",K[0].dataset.name=B,K[0].dataset.value="",L[0].dataset.name=B,L[0].dataset.value="",M[0].dataset.name=B,M[0].dataset.value="",N[0].dataset.name=B,N[0].dataset.value="",O[0].dataset.name=B,O[0].dataset.value="",P[0].dataset.name=B,P[0].dataset.value="",Q[0].dataset.name=B,Q[0].dataset.value="",R[0].dataset.name=B,R[0].dataset.value="",S[0].dataset.name=B,S[0].dataset.value="",T[0].dataset.name=B,T[0].dataset.value="",U[0].dataset.name=B,U[0].dataset.value="",V[0].dataset.name=B,V[0].dataset.value="",W[0].dataset.name=B,W[0].dataset.value="",X[0].dataset.name=B,X[0].dataset.value="",Y[0].dataset.name=B,Y[0].dataset.value="",Z[0].dataset.name=B,Z[0].dataset.value="",_[0].dataset.name=B,_[0].dataset.value="",ia[0].dataset.name=C,ja[0].dataset.name=C,ka[0].dataset.name=C,la[0].dataset.name=C,ma[0].dataset.name=C,na[0].dataset.name=C,oa[0].dataset.name=C,pa[0].dataset.name=C,qa[0].dataset.name=C,ra[0].dataset.name=C,sa[0].dataset.name=C,ta[0].dataset.name=C,ua[0].dataset.name=C,va[0].dataset.name=C,wa[0].dataset.name=C,xa[0].dataset.name=C,ya[0].dataset.name=C,za[0].dataset.name=C,Aa[0].dataset.name=C,Ba[0].dataset.name=C,ia[0].dataset.value="none",ja[0].dataset.value="none",ka[0].dataset.value="none",la[0].dataset.value="none",ma[0].dataset.value="none",na[0].dataset.value="none",oa[0].dataset.value="none",pa[0].dataset.value="none",qa[0].dataset.value="none",ra[0].dataset.value="none",sa[0].dataset.value="none",ta[0].dataset.value="none",ua[0].dataset.value="none",va[0].dataset.value="none",wa[0].dataset.value="none",xa[0].dataset.value="none",ya[0].dataset.value="none",za[0].dataset.value="none",Aa[0].dataset.value="none",Ba[0].dataset.value="none",document.getElementById("amount1").value="",document.getElementById("amount2").value="",document.getElementById("amount3").value="",document.getElementById("amount4").value="",document.getElementById("amount5").value="",document.getElementById("amount6").value="",document.getElementById("amount7").value="",document.getElementById("amount8").value="",document.getElementById("amount9").value="",document.getElementById("amount10").value="",document.getElementById("amount11").value="",document.getElementById("amount12").value="",document.getElementById("amount13").value="",document.getElementById("amount14").value="",document.getElementById("amount15").value="",document.getElementById("amount16").value="",document.getElementById("amount17").value="",document.getElementById("amount18").value="",document.getElementById("amount19").value="",document.getElementById("amount20").value=""}),m.bind("RecruitQueue/start",function(){t.html(b("common","stop")),t.removeClass("btn-green").addClass("btn-red"),q.$elem.removeClass("btn-green").addClass("btn-red"),l.emitNotif("success",b("recruiter","general.started"))}),m.bind("RecruitQueue/stop",function(){t.html(b("common","start")),t.removeClass("btn-red").addClass("btn-green"),q.$elem.removeClass("btn-red").addClass("btn-green"),l.emitNotif("success",b("recruiter","general.stopped"))}),m.bind("RecruitQueue/start2",function(){u.html(b("common","stop")),u.removeClass("btn-green").addClass("btn-red"),q.$elem.removeClass("btn-green").addClass("btn-red"),l.emitNotif("success",b("recruiter","general.started"))}),m.bind("RecruitQueue/stop2",function(){u.html(b("common","start")),u.removeClass("btn-red").addClass("btn-green"),q.$elem.removeClass("btn-red").addClass("btn-green"),l.emitNotif("success",b("recruiter","general.stopped"))}),m.bind("RecruitQueue/jobStarted",db),m.bind("RecruitQueue/clearLogs",eb),D.on("selectSelected",function(){selectedGroup1=D[0].dataset.value}),E.on("selectSelected",function(){selectedGroup2=E[0].dataset.value}),F.on("selectSelected",function(){selectedGroup3=F[0].dataset.value}),G.on("selectSelected",function(){selectedGroup4=G[0].dataset.value}),H.on("selectSelected",function(){selectedGroup5=H[0].dataset.value}),I.on("selectSelected",function(){selectedGroup6=I[0].dataset.value}),J.on("selectSelected",function(){selectedGroup7=J[0].dataset.value}),K.on("selectSelected",function(){selectedGroup8=K[0].dataset.value}),L.on("selectSelected",function(){selectedGroup9=L[0].dataset.value}),M.on("selectSelected",function(){selectedGroup10=M[0].dataset.value}),N.on("selectSelected",function(){selectedGroup11=N[0].dataset.value}),O.on("selectSelected",function(){selectedGroup12=O[0].dataset.value}),P.on("selectSelected",function(){selectedGroup13=P[0].dataset.value}),Q.on("selectSelected",function(){selectedGroup14=Q[0].dataset.value}),R.on("selectSelected",function(){selectedGroup15=R[0].dataset.value}),S.on("selectSelected",function(){selectedGroup16=S[0].dataset.value}),T.on("selectSelected",function(){selectedGroup17=T[0].dataset.value}),U.on("selectSelected",function(){selectedGroup18=U[0].dataset.value}),V.on("selectSelected",function(){selectedGroup19=V[0].dataset.value}),W.on("selectSelected",function(){selectedGroup20=W[0].dataset.value}),X.on("selectSelected",function(){selectedGroup21=X[0].dataset.value}),Y.on("selectSelected",function(){selectedGroup22=Y[0].dataset.value}),Z.on("selectSelected",function(){selectedGroup23=Z[0].dataset.value}),_.on("selectSelected",function(){selectedGroup24=_[0].dataset.value}),ia.on("selectSelected",function(){selectedUnit1=ia[0].dataset.value}),ja.on("selectSelected",function(){selectedUnit2=ja[0].dataset.value}),ka.on("selectSelected",function(){selectedUnit3=ka[0].dataset.value}),la.on("selectSelected",function(){selectedUnit4=la[0].dataset.value}),ma.on("selectSelected",function(){selectedUnit5=ma[0].dataset.value}),na.on("selectSelected",function(){selectedUnit6=na[0].dataset.value}),oa.on("selectSelected",function(){selectedUnit7=oa[0].dataset.value}),pa.on("selectSelected",function(){selectedUnit8=pa[0].dataset.value}),qa.on("selectSelected",function(){selectedUnit9=qa[0].dataset.value}),ra.on("selectSelected",function(){selectedUnit10=ra[0].dataset.value}),sa.on("selectSelected",function(){selectedUnit11=sa[0].dataset.value}),ta.on("selectSelected",function(){selectedUnit12=ta[0].dataset.value}),ua.on("selectSelected",function(){selectedUnit13=ua[0].dataset.value}),va.on("selectSelected",function(){selectedUnit14=va[0].dataset.value}),wa.on("selectSelected",function(){selectedUnit15=wa[0].dataset.value}),xa.on("selectSelected",function(){selectedUnit16=xa[0].dataset.value}),ya.on("selectSelected",function(){selectedUnit17=ya[0].dataset.value}),za.on("selectSelected",function(){selectedUnit18=za[0].dataset.value}),Aa.on("selectSelected",function(){selectedUnit19=Aa[0].dataset.value}),Ba.on("selectSelected",function(){selectedUnit20=Ba[0].dataset.value}),c.$on(h.GROUPS_UPDATED,function(){Ea(),Fa(),Ga(),Ha(),Ia(),Ja(),Ka(),La(),Ma(),Na(),Oa(),Pa(),Qa(),Ra(),Sa(),Ta(),Ua(),Va(),Wa(),Xa(),Ya(),Za(),$a(),_a()})},cb=function(){return r=e.getGroupList().getGroups(),B=b("recruiter","general.disabled"),C=b("recruiter","none"),y=o.get("recruiter-log",[],!0),p=new d("RecruitQueue",{activeTab:"presets",
template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("recruiter", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-three-col"><div class="tab" tab="presets"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("recruiter", "presets") #></a></div></div></div><div class="tab" tab="own"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("recruiter", "own") #></a></div></div></div><div class="tab" tab="logs"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("recruiter", "logs") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-presets"><h5 class="twx-section"><#= locale("recruiter", "recruit.presets") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="32%"><col><col></colgroup><thead><tr><th><#= locale("recruiter", "group") #></th><th><#= locale("recruiter", "preset") #></th><th><#= locale("recruiter", "presetfinal") #></th></tr></thead><tbody><tr><td><select data-setting="group1" class="group1"></select></td><td class="item-input"><input type="text" class="textfield-border" id="preset1" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/preset") #>"></td><td class="item-input"><input type="text" class="textfield-border" id="preset5" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/preset") #>"></td></tr><tr><td><select data-setting="group2" class="group2"></select></td><td class="item-input"><input type="text" class="textfield-border" id="preset2" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/preset") #>"></td><td class="item-input"><input type="text" class="textfield-border" id="preset6" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/preset") #>"></td></tr><tr><td><select data-setting="group3" class="group3"></select></td><td class="item-input"><input type="text" class="textfield-border" id="preset3" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/preset") #>"></td><td class="item-input"><input type="text" class="textfield-border" id="preset7" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/preset") #>"></td></tr><tr><td><select data-setting="group4" class="group4"></select></td><td class="item-input"><input type="text" class="textfield-border" id="preset4" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/preset") #>"></td><td class="item-input"><input type="text" class="textfield-border" id="preset8" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/preset") #>"></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-own"><h5 class="twx-section"><#= locale("recruiter", "recruit.own") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="35%"><col width="40%"><col></colgroup><thead><tr><th><#= locale("recruiter", "group") #></th><th><#= locale("recruiter", "unit") #></th><th><#= locale("recruiter", "amount") #></th></tr></thead><tbody><tr><td><select data-setting="group5" class="group5"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit1" class="dataUnit1" id="unit1"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount1" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group6" class="group6"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit2" class="dataUnit2" id="unit2"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount2" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group7" class="group7"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit3" class="dataUnit3" id="unit3"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount3" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group8" class="group8"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit4" class="dataUnit4" id="unit4"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount4" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group9" class="group9"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit5" class="dataUnit5" id="unit5"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount5" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group10" class="group10"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit6" class="dataUnit6" id="unit6"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount6" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group11" class="group11"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit7" class="dataUnit7" id="unit7"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount7" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group12" class="group12"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit8" class="dataUnit8" id="unit8"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount8" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group13" class="group13"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit9" class="dataUnit9" id="unit9"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount9" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group14" class="group14"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit10" class="dataUnit10" id="unit10"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount10" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group15" class="group15"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit11" class="dataUnit11" id="unit11"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount11" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group16" class="group16"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit12" class="dataUnit12" id="unit12"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount12" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group17" class="group17"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit13" class="dataUnit13" id="unit13"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount13" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group18" class="group18"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit14" class="dataUnit14" id="unit14"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount14" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group19" class="group19"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit15" class="dataUnit15" id="unit15"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount15" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group20" class="group20"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit16" class="dataUnit16" id="unit16"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount16" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group21" class="group21"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit17" class="dataUnit17" id="unit17"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount17" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group22" class="group22"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit18" class="dataUnit18" id="unit18"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount18" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group23" class="group23"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit19" class="dataUnit19" id="unit19"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount19" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr><tr><td><select data-setting="group24" class="group24"></select></td><td><span class="ff-cell-fix"><select data-setting="dataUnit20" class="dataUnit20" id="unit20"><option value="none" selected="selected"><#= locale("recruiter", "none") #></option><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("recruiter", "light_cavalry") #></option><option value="mounted_archer"><#= locale("recruiter", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("recruiter", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="amount20" value="" autocomplete="off" placeholder="<#= locale("recruiter", "entry/amount") #>"></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-logs"><table class="tbl-border-light tbl-striped header-center"><colgroup><col width="40%"><col width="30%"><col width="5%"><col width="25%"><col></colgroup><thead><tr><th><#= locale("common", "village") #></th><th><#= locale("recruiter", "unit") #></th><th><#= locale("recruiter", "amount") #></th><th><#= locale("common", "started") #></th></tr></thead><tbody class="recruitLog"><tr class="noRecruits"><td colspan="4"><#= locale("recruiter", "logs.noRecruits") #></td></tr></tbody></table></div></div><footer class="win-foot"><ul class="list-btn list-center buttons"><li class="twOverflow-button-presets"><a class="btn-orange btn-border clear"><#= locale("recruiter", "clear") #></a><a class="btn-green btn-border switch"><#= locale("recruiter", "start") #></a></li><li class="twOverflow-button-own"><a class="btn-orange btn-border clear2"><#= locale("recruiter", "clear") #></a><a class="btn-green btn-border switch2"><#= locale("recruiter", "start") #></a></li><li class="twOverflow-button-logs"><a class="btn-orange btn-border clearLogs"><#= locale("recruiter", "logs.clear") #></a></li></ul></footer></div>',
css:'#RecruitQueue input[type="text"],#RecruitQueue input[type="number"],#RecruitQueue select{color:#000;min-width:70%}#RecruitQueue .settings .helper{font-weight:bold;vertical-align:-1px;font-family:helvetica;color:rgba(0,0,0,0.3)}#RecruitQueue .settings .helper:hover{color:#000}#RecruitQueue .settings .custom-select{width:200px}#RecruitQueue .settings td{text-align:center}#RecruitQueue .recruitLog td{text-align:center}#RecruitQueue .recruitLog .village:hover{color:#fff;text-shadow:0 1px 0 #000}#RecruitQueue table.header-center th{text-align:center}#RecruitQueue .noRecruits td{height:26px;text-align:center}#RecruitQueue .force-26to20{transform:scale(.8);width:20px;height:20px}#RecruitQueue .dataUnit1{width:120px}#RecruitQueue .dataUnit1 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit2{width:120px}#RecruitQueue .dataUnit2 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit3{width:120px}#RecruitQueue .dataUnit3 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit4{width:120px}#RecruitQueue .dataUnit4 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit5{width:120px}#RecruitQueue .dataUnit5 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit6{width:120px}#RecruitQueue .dataUnit6 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit7{width:120px}#RecruitQueue .dataUnit7 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit8{width:120px}#RecruitQueue .dataUnit8 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit9{width:120px}#RecruitQueue .dataUnit9 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit10{width:120px}#RecruitQueue .dataUnit10 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit11{width:120px}#RecruitQueue .dataUnit11 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit12{width:120px}#RecruitQueue .dataUnit12 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit13{width:120px}#RecruitQueue .dataUnit13 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit14{width:120px}#RecruitQueue .dataUnit14 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit15{width:120px}#RecruitQueue .dataUnit15 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit16{width:120px}#RecruitQueue .dataUnit16 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit17{width:120px}#RecruitQueue .dataUnit17 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit18{width:120px}#RecruitQueue .dataUnit18 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit19{width:120px}#RecruitQueue .dataUnit19 .custom-select-handler{text-align:center}#RecruitQueue .dataUnit20{width:120px}#RecruitQueue .dataUnit20 .custom-select-handler{text-align:center}#RecruitQueue .custom-select{width:240px}#RecruitQueue .preset1{width:175px}#RecruitQueue .preset2{width:175px}#RecruitQueue .preset3{width:175px}#RecruitQueue .preset4{width:175px}#RecruitQueue .group1{width:175px}#RecruitQueue .group2{width:175px}#RecruitQueue .group3{width:175px}#RecruitQueue .group4{width:175px}#RecruitQueue .group5{width:175px}#RecruitQueue .group6{width:175px}#RecruitQueue .group7{width:175px}#RecruitQueue .group8{width:175px}#RecruitQueue .group9{width:175px}#RecruitQueue .group10{width:175px}#RecruitQueue .group11{width:175px}#RecruitQueue .group12{width:175px}#RecruitQueue .group13{width:175px}#RecruitQueue .group14{width:175px}#RecruitQueue .group15{width:175px}#RecruitQueue .group16{width:175px}#RecruitQueue .group17{width:175px}#RecruitQueue .group18{width:175px}#RecruitQueue .group19{width:175px}#RecruitQueue .group20{width:175px}#RecruitQueue .group21{width:175px}#RecruitQueue .group22{width:175px}#RecruitQueue .group23{width:175px}#RecruitQueue .group24{width:175px}',replaces:{locale:b,version:a.version}}),q=new k(b("recruiter","title"),{classHover:!1,classBlur:!1,onClick:function(){p.openWindow()}}),s=$(p.$window),t=s.find(".switch"),u=s.find(".switch2"),v=s.find(".clear"),w=s.find(".clear2"),x=s.find(".recruitLog"),z=s.find(".noRecruits"),A=s.find(".clearLogs"),D=s.find(".group1"),E=s.find(".group2"),F=s.find(".group3"),G=s.find(".group4"),H=s.find(".group5"),I=s.find(".group6"),J=s.find(".group7"),K=s.find(".group8"),L=s.find(".group9"),M=s.find(".group10"),N=s.find(".group11"),O=s.find(".group12"),P=s.find(".group13"),Q=s.find(".group14"),R=s.find(".group15"),S=s.find(".group16"),T=s.find(".group17"),U=s.find(".group18"),V=s.find(".group19"),W=s.find(".group20"),X=s.find(".group21"),Y=s.find(".group22"),Z=s.find(".group23"),_=s.find(".group24"),ia=s.find(".dataUnit1"),ja=s.find(".dataUnit2"),ka=s.find(".dataUnit3"),la=s.find(".dataUnit4"),ma=s.find(".dataUnit5"),na=s.find(".dataUnit6"),oa=s.find(".dataUnit7"),pa=s.find(".dataUnit8"),qa=s.find(".dataUnit9"),ra=s.find(".dataUnit10"),sa=s.find(".dataUnit11"),ta=s.find(".dataUnit12"),ua=s.find(".dataUnit13"),va=s.find(".dataUnit14"),wa=s.find(".dataUnit15"),xa=s.find(".dataUnit16"),ya=s.find(".dataUnit17"),za=s.find(".dataUnit18"),Aa=s.find(".dataUnit19"),Ba=s.find(".dataUnit20"),aa=s.find(".preset1"),ba=s.find(".preset2"),ca=s.find(".preset3"),da=s.find(".preset4"),ea=s.find(".preset5"),fa=s.find(".preset6"),ga=s.find(".preset7"),ha=s.find(".preset8"),Ea(),Fa(),Ga(),Ha(),Ia(),Ja(),Ka(),La(),Ma(),Na(),Oa(),Pa(),Qa(),Ra(),Sa(),Ta(),Ua(),Va(),Wa(),Xa(),Ya(),Za(),$a(),_a(),fb(),bb(),p},db=function(a,c,d,e){z.hide();var f=document.createElement("tr");f.innerHTML=n.render('<td class="village"><#= village #></td><td><span class="unit-icon icon-20x20-unit-<#= unit #>"></span> <#= locale("common", unit) #></td><td><#= amount #></td><td><#= started #></td>',{locale:b,village:l.genVillageLabel(a),unit:c,amount:d,started:l.formatDate(e)}),f.querySelector(".village").addEventListener("click",function(){j.openVillageInfo(a.id)}),x.prepend(f),p.recalcScrollbar()},eb=function(){x.find("tr:not(.noRecruits)").remove(),z.css("display","")},fb=function(){gb().forEach(function(a){db.apply(this,a)})},gb=function(){return y},hb=function(){y=[],o.set("recruiter-log",y),m.trigger("RecruitQueue/clearLogs")};a.interface=function(){a.interface=cb()}})}(this);
//# sourceMappingURL=tw2overflow.map