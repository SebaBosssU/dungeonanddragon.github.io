/*!
 * tw2overflow v2.0.0
 * Wed, 09 Sep 2020 19:43:32 GMT
 * Developed by Relaxeaza <twoverflow@outlook.com>
 *
 * This work is free. You can redistribute it and/or modify it under the
 * terms of the Do What The Fuck You Want To Public License, Version 2,
 * as published by Sam Hocevar. See the LICENCE file for more details.
 */
!function(e,t){const a=injector.get('$rootScope'),n=injector.get('transferredSharedDataService'),i=injector.get('modelDataService'),o=injector.get('socketService'),l=injector.get('routeProvider'),s=injector.get('eventTypeProvider'),r=injector.get('windowDisplayService'),c=injector.get('windowManagerService'),d=(injector.get('hotkeys'),injector.get('armyService')),u=injector.get('villageService'),p=injector.get('mapService'),g=injector.get('$filter'),m=(injector.get('$timeout'),injector.get('storageService')),_=injector.get('reportService'),h=function(){},b=Object.prototype.hasOwnProperty;define('two/EventScope',['queues/EventQueue'],(function(e){const t=function(e,t){if(void 0===e)throw new Error('EventScope: no windowId');this.windowId=e,this.onDestroy=t||h,this.listeners=[];const n=a.$on(s.WINDOW_CLOSED,(e,t)=>{t==='!'+this.windowId&&(this.destroy(),n())})};return t.prototype.register=function(t,n,i){i?this.listeners.push(a.$on(t,n)):(e.register(t,n),this.listeners.push((function(){
e.unregister(t,n)})))},t.prototype.destroy=function(){this.listeners.forEach(e=>{e()}),this.onDestroy()},t})),define('two/utils',['helper/time','helper/math'],(function(e,t){let n={randomSeconds:function(e){if(!e)return 0;const t=(e=parseInt(e,10))+e/2,a=e-e/2;return Math.round(Math.random()*(t-a)+a)},time2seconds:function(e){return(e=e.split(':'))[0]=60*parseInt(e[0],10)*60,e[1]=60*parseInt(e[1],10),e[2]=parseInt(e[2],10),e.reduce((function(e,t){return e+t}))},notif:function(e,t){a.$broadcast(s.NOTIFICATION_DISABLE),a.$broadcast(s.NOTIFICATION_ENABLE);const n='success'===e?s.MESSAGE_SUCCESS:s.MESSAGE_ERROR;a.$broadcast(n,{message:t})},genVillageLabel:function(e){return e.name+' ('+e.x+'|'+e.y+')'},isValidCoords:function(e){return/\s*\d{2,3}\|\d{2,3}\s*/.test(e)},isValidDateTime:function(e){return/^\s*([01][0-9]|2[0-3]):[0-5]\d:[0-5]\d(:\d{1,3})? (0[1-9]|[12][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/\d{4}\s*$/.test(e)},fixDate:function(e){const t=e.trim().split(' '),a=t[0],n=t[1].split('/')
;return a+' '+n[1]+'/'+n[0]+'/'+n[2]},guid:function(){return Math.floor(16777216*Math.random()).toString(16)},getTimeFromString:function(e,t){const a=n.fixDate(e).split(' '),i=a[0].split(':'),o=a[1].split('/'),l=i[0],s=i[1],r=i[2],c=i[3]||null,d=parseInt(o[0],10)-1,u=o[1],p=o[2];return new Date(p,d,u,l,s,r,c).getTime()+(t||0)},formatDate:function(e,t){return g('readableDateFilter')(e,null,a.GAME_TIMEZONE,a.GAME_TIME_OFFSET,t||'HH:mm:ss dd/MM/yyyy')},getTimeOffset:function(){return 1e3*e.gameDate().getTimezoneOffset()*60+a.GAME_TIME_OFFSET},xhrGet:function(e,t="text"){return new Promise((function(a,n){if(!e)return n();let i=new XMLHttpRequest;i.open('GET',e,!0),i.responseType=t,i.addEventListener('load',(function(){a(i)}),!1),i.send()}))},obj2selectOptions:function(e,t){let a=[];for(let n in e){let i={name:e[n].name,value:e[n].id};t&&(i.leftIcon=e[n].icon),a.push(i)}return a},getTravelTime:function(e,a,n,o,l,s){
const r=!a.character_id,c=a.character_id&&a.tribe_id&&a.tribe_id===i.getSelectedCharacter().getTribeId();!1!==s&&('attack'===o?('supporter'in l&&delete l.supporter,r&&(s=!0)):'support'===o&&(c&&(s=!0),'supporter'in l&&(s=!0)));const u={units:n,officers:angular.copy(l)},p=d.calculateTravelTime(u,{barbarian:r,ownTribe:c,officers:l,effects:s},o),g=t.actualDistance(e,a);return 1e3*d.getTravelTimeForDistance(u,p,g,o)},each:function(e,t){if('function'!=typeof t&&(t=h),Array.isArray(e)){for(let a=0,n=e.length;a<n;a++)if(!1===t(e[a],a))return!1}else if(angular.isObject(e))for(let a in e)if(b.call(e,a)&&!1===t(e[a],a))return!1;return!0}};return n})),define('two/ready',['conf/gameStates','two/mapData'],(function(e,t){let r={};const c=function(d,u){'string'==typeof(u=u||['map'])&&(u=[u]);const p=function(e){(u=u.filter((function(t){return t!==e}))).length||d()},g={map:function(){if(n.getSharedData('MapController').isInitialized)return p('map');a.$on(s.MAP_INITIALIZED,(function(){p('map')}))},
tribe_relations:function(){const e=i.getSelectedCharacter();if(e){const t=e.getTribeRelations();if(!e.getTribeId()||t)return p('tribe_relations')}const t=a.$on(s.TRIBE_RELATION_LIST,(function(){t(),p('tribe_relations')}))},initial_village:function(){if(i.getGameState().getGameState(e.INITIAL_VILLAGE_READY))return p('initial_village');a.$on(s.GAME_STATE_INITIAL_VILLAGE_READY,(function(){p('initial_village')}))},all_villages_ready:function(){if(i.getGameState().getGameState(e.ALL_VILLAGES_READY))return p('all_villages_ready');a.$on(s.GAME_STATE_ALL_VILLAGES_READY,(function(){p('all_villages_ready')}))},minimap_data:function(){if(t.isLoaded())return p('minimap_data');t.load((function(){p('minimap_data')}))},presets:function(){if(i.getPresetList().isLoaded())return p('presets');r.presets=r.presets||new Promise((function(e){o.emit(l.GET_PRESETS,{},e)})),r.presets.then((function(){p('presets')}))},world_config:function(){if(i.getWorldConfig&&i.getWorldConfig())return p('world_config')
;setTimeout(g.world_config,100)}};if(!n.getSharedData('MapController'))return setTimeout((function(){c(d,u)}),100);u.forEach((function(e){g[e]()}))};return c})),require(['two/ready','Lockr'],(function(e,t){e((function(){let e=i.getSelectedCharacter();t.prefix=e.getId()+'_twOverflow_'+e.getWorldId()+'-'}))})),define('two/language',['helper/i18n'],(function(e){let t=!1;const n={en_us:{about:{contact:"Kontakt",email:"Email",links:"Linki projektów",source_code:"Kod źródłowy",issues_suggestions:"Błędy/sugestie",translations:"Tłumaczenia"},alert_sender:{title:"Wartownik",description:"Automatycznie wysyła informacje o nadchodzacych atakach do pw z 'Attacks' w nazwie.",activated:"Wartownik aktywowany",deactivated:"Wartownik skończył działanie"},attack_view:{title:"Strażnik",filter_types:"Rodzaj",filter_show_attacks_tooltip:"Pokaż ataki",filter_show_supports_tooltip:"Pokaż wsparcia",filter_show_relocations_tooltip:"Pokaż przeniesienia",filter_incoming_units:"Nadchodzące jednostki",
commands_copy_arrival_tooltip:"Kopiuj czas dotarcia.",commands_copy_backtime_tooltip:"Kopiuj czas powrotu.",commands_set_remove_tooltip:"Wstaw rozkaz wycofania wojsk przed dotarciem ataku do Kolejki rozkazów.",command_type_tooltip:"Rodzaj",slowest_unit_tooltip:"Najwolniejsza jednostka",command_type:"Rodzaj",slowest_unit:"Co?",actions:"Dostępne akcje",no_incoming:"Brak nadchodzących wojsk.",copy:"Kopiuj",current_only_tooltip:"Tylko aktywna wioska",arrive:"Dotrze",arrivetime:"Czas dotarcia skopiowany!",backtime:"Czas powrotu skopiowany!",spyorigin:"Szpiedzy wysłani do %{name}!","commands.tooltip.kill":"Wstaw rozkaz klinowania do Kolejki rozkazów. MAŁY KLIN.","commands.tooltip.killBig":"Wstaw rozkaz klinowania do Kolejki rozkazów. DUŻY KLIN.","commands.tooltip.bunker":"Zabunkruj wioske z wojsk znajdujących się na najbliższych twoich wioskach które zdążą przed atakiem. Uwaga! robisz to na własną odpowiedzialność.","commands.tooltip.spy":"Szpieguj wioske źródłową.",
"commands.tooltip.withdraw":"Wycofaj wszystkie wsparcia sekundę przed wejsciem tego ataku."},auto_collector:{title:"Kolekcjoner",description:"Automatyczny kolekcjoner depozytu/drugiej wioski.",activated:"Kolekcjoner aktywowany",deactivated:"Kolekcjoner deaktywowany"},auto_healer:{title:"Medyk",description:"Automatycznie przywraca uzdrowione jednostki ze szpitala.",activated:"Medyk aktywowany",deactivated:"Medyk skończył działanie"},battle_calculator:{title:"Strateg","checkT.tip":"Liczy koszty produkcji jednostek","check.tip":"Liczy punkty bojowe dla wybranych jednostek","check.btn":"Policz","simulate.tip":"Symuluje bitwe na podstawie wskazanych danych","simulate.btn":"Symuluj",calculated:"Obliczono wynik bitwy!",inserted:"Obliczono wynik bitwy!",name:"Pełna nazwa szablonu",id:"Wioska",wood:"Drewno",iron:"Żelazo",clay:"Glina",food:"Prowiant",attack:"Siła ataku",load:"Ładowność",buildtime:"Czas rekrutacji",defarc:"Obrona przeciw łucznikom",definf:"obrona przeciw piechocie",
defcav:"Obrona przeciw kawaleri",attackarc:"Siła ataku łuczników",attackinf:"Siła ataku piechoty",attackcav:"Siła ataku kawaleri",discipline:"Dyscyplina",speed:"Prędkość",battle:"Bitwa","battle.predamage":"Uszkodzenia wstępne","battle.header":"Kalkulator bitewny","battle.killrateA":"Procent strat","battle.attackBashpoint":"Ofensywne punkty bojowe","battle.strentghAttack":"Siła bojowa off","battle.killrateD":"Procent strat","battle.defenceBashpoint":"Defensywne punkty bojowe","battle.strentghDefend":"Siła bojowa deff","battle.attackModifier":"Modyfikator ataku","battle.defenceModifier":"Modyfikator obrony","battle.provisions":"Całkowity prowiant","battle.killedprovisions":"Prowiant stracony","battle.doublestrength":"Szał berków?","battle.strongesttype":"Najwięcej wojsk typu","battle.beds":"Liczba łóżek - uratowanych jednostek","battle.survivedprovisions":"Prowiant ocalały","battle.attacker":"Atakujący","battle.unit":"Jednostka","battle.amount":"Ilość","battle.loses":"Straty",
"battle.revived":"Uleczone","battle.survivors":"Ocalałe","battle.survivorsA":"Ocalałe(z uratowanymi)","battle.survivorsD":"Ocalałe(bez uratowanych)","battle.defender":"Obrońca","battle.damage":"Uszkodzenia taranów","battle.damageCatapult":"Uszkodzenia katapult","battle.downgrade":"Mur uszkodzony z poziomu ","battle.downgradeCatapult":" uszkodzony/a z poziomu ","battle.to":" do ","battle.insert":"Wstaw ocalałe jednostki","battle.insertvillage":"Wstaw z wioski","battle.insertpreset":"Wstaw z szablonu","battle.insertV":"Wstaw jednostki z wioski - atakujący","battle.insertP":"Wstaw jednostki z szablonu - atakujący","battle.insertVD":"Wstaw jednostki z wioski - broniący","battle.insertPD":"Wstaw jednostki z szablonu - broniący","battle.faith":"Wiara","battle.morale":"Morale","battle.luck":"Szczęście","battle.wall":"Mury","battle.nightbonus":"Bonus nocny","battle.leader":"Wielki mistrz","battle.medic":"Medyk","battle.doctor":"Doktor","battle.attack-bonus":"Mistrzostwo broni",
"battle.iron-walls":"Żelazny mur","battle.clinique":"Klinika","battle.hospital":"Szpital","battle.equip":"Przedmioty rycerza","battle.halberd":"Halabarda Guan Yu","battle.longsword":"Długi miecz Paracelsusa","battle.battleaxe":"Bojowy topór Thorgarda","battle.longbow":"Łuk Nimroda","battle.lance":"Lanca Mieszka","battle.compositebow":"Kompozytowy łuk Nimroda","battle.banner":"Chorągiew Baptystów","battle.star":"Gwiazda poranna Karola","battle.bonfire":"Pochodnia Alethei","battle.scepter":"Berło Vasca","battle.target":"Cel katapult",bunker:"Bunkier","bunker.header":"Kalkulator optymalnego offa na bunkier",troops:"Koszt jednostek","troops.header":"Kalkulator kosztów produkcji jednostek","troops.th":"Koszty produkcji","troops.units":"Jednostki","troops.building":"Budynek","troops.barracks":"Koszary","troops.preceptory":"Komturia","troops.effects":"Efekty","troops.domination":"Dominacja","troops.training":"Intensywny trening","troops.templars":"Zakon Templariuszy",
"troops.teutonic":"Zakon Krzyżacki","troops.none":"Brak",bashpoints:"Punkty Bojowe","bashpoints.header":"Kalkulator punktów bojowych","bashpoints.th":"Punkty bojowe","bashpoints.attacker":"Jako atakujący","bashpoints.defender":"Jako obrońca","bashpoints.killed":"Zniszczone jednostki"},builder_queue:{title:"Budowniczy",started:"Budowniczy Uruchomiony",stopped:"Budowniczy Zatrzymany",settings:"Ustawienia",settings_village_groups:"Buduj w wioskach z grupy",settings_building_sequence:"Szablon kolejki budowy",settings_building_sequence_final:"Finalne poziomy budynków",settings_priorize_farm:"Priorytet farmy, jeżeli brakuje prowiantu",settings_saved:"Ustawienia zapisane!",logs_no_builds:"Nie rozpoczęto żadnej rozbudowy",logs_clear:"Wyczyść logi",sequences:"Szablony",sequences_move_up:"Przesuń w górę",sequences_move_down:"Przesuń w dół",sequences_add_building:"Dodaj budynek",sequences_select_edit:"Wybierz szablon do edytowania",sequences_edit_sequence:"Edytuj szablon",
select_group:"Wybierz grupę",add_building_success:"%d dodany na pozycji %d",add_building_limit_exceeded:"%d osiągnął/eła maksymalny poziom (%d)",position:"Pozycja",remove_building:"Usuń budynek z listy",clone:"Klonuj",remove_sequence:"Usuń szablon",name_sequence_min_lenght:"Minimalna długość nazwy szablonu",sequence_created:"Nowy szablon %d utworzony.",sequence_updated:"Szablon %d zaktualizowany.",sequence_removed:"Szablon %d usunięty.",error_sequence_exists:"Ten szablon już istnieje.",error_sequence_no_exists:"Ta sekwencja nie istnieje.",error_sequence_invalid:"Niektóre z wartości szablonu są niepoprawne.",logs_cleared:"Logi wyczyszczone.",create_sequence:"Utwórz szablon",settings_preserve_resources:"Zarezerwowane surowce wioski",settings_preserve_wood:"Zabezpiecz drewno",settings_preserve_clay:"Zabezpiecz glinę",settings_preserve_iron:"Zabezpiecz żelazo",discard_changes_title:"Odrzuć zmianę tytułu",discard_changes_text:"Odrzuć zmianę tekstu",clone_warn_changed_sequence_title:"",
clone_warn_changed_sequence_text:"",clone_sequence:"Klonuj szablon",amount:"Ilość",empty_sequence:"Pusty szablon",duration:"Czas","info.header":"Tytuł","info.content":"Zawartość"},builder_queue_add_building_modal:{title:"Dodaj nowy budynek"},builder_queue_name_sequence_modal:{title:"Nazwa szablonu"},builder_queue_remove_sequence_modal:{title:"Usuń szablon",text:"Jesteś pewny, że chcesz usunąć ten szablon? Jeśli ten szablon jest teraz aktywny, inny szablon zostanie wybrany i Budowniczy zatrzyma się."},command_queue:{title:"Generał",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",sent:"wysłany/e",activated:"włączony",deactivated:"wyłączony",expired:"przedawniony/e",removed:"usunięty/e",added:"dodany/e",general_clear:"Wyczyść logi",general_next_command:"Następny rozkaz",add_basics:"Podstawowe informacje",add_origin:"Źródło",add_selected:"Aktywna wioska",add_target:"Cel",add_map_selected:"Wybrana wioska na mapie",date_type_arrive:"Czas dotarcia na cel",
date_type_out:"Czas wyjścia z  twojej wioski",add_current_date:"Obecny czas",add_current_date_plus:"Zwiększ czas o 100 milisekund.",add_current_date_minus:"Zmniejsz czas o 100 milisekund.",add_travel_times:"Czas podróży jednostek",add_date:"Czas/Data",add_no_village:"Wybierz wioskę...",add_village_search:"Znajdź wioskę...",add_clear:"Wyczyść pola",add_insert_preset:"Wybierz szablon",queue_waiting:"Rozkazy",queue_none_added:"Brak dodanych rozkazów.",queue_sent:"Rozkazy wysłane",queue_none_sent:"Brak wysłanych rozkazów.",queue_expired:"Przedawnione rozkazy",queue_none_expired:"Brak przedawnionych rozkazów.",queue_remove:"Usuń rozkaz z listy",queue_filters:"Filtruj rozkazy",filters_selected_village:"Pokaż tylko rozkazy z aktywnej wioski",filters_barbarian_target:"Pokaż tylko rozkazy na wioski barbarzyńskie",filters_attack:"Pokaż ataki",filters_support:"Pokaż wsparcia",filters_relocate:"Pokaż przeniesienia",filters_text_match:"Filtruj za pomocą tekstu...",command_out:"Czas wyjścia",
command_time_left:"Pozostały czas",command_arrive:"Czas dotarcia",error_no_units_enough:"Brak wystarczającej liczby jednostek do wysłania rozkazu!",error_not_own_village:"Wioska źródłowa nie należy do ciebie!",error_origin:"Nieprawidłowa wioska źródłowa!",error_target:"Nieprawidłowa wioska cel!",error_no_units:"Nie wybrano jednostek!",error_invalid_date:"Nieprawidłowy Czas",error_already_sent_attack:"Atak %{type} powinien zostać wysłany %{date}",error_already_sent_support:"Wsparcie %{type} powinno zostać wysłane %{date}",error_already_sent_relocate:"Przeniesienie %{type} powinno zostać wysłane %{date}",error_relocate_disabled:"Przeniesienie wojsk wyłączone",error_no_map_selected_village:"Nie zaznaczono wioski na mapie.",error_remove_error:"Błąd usuwania rozkazu.",tab_add:"Dodaj rozkaz",tab_waiting:"Oczekujące",tab_logs:"Logi"},faith_checker:{title:"Kapelan",description:"Automatycznie sprawdza kościół/kaplice w prowincjach.",resources:"W wiosce brak surowców do rozpoczęcia budowy",
full:"W wiosce znajdują się wierni",chapel:"W wiosce zostanie zbudowana kaplica",church:"W wiosce zostanie zbudowany kościół",activated:"Kapelan aktywowany",deactivated:"Kapelan skończył działanie"},farm_overflow:{title:"Farmer",open_report:"Otwórz raport",no_report:"Nie ma raportu",reports:"Raporty",date:"Data",status_time_limit:"Cel jest zbyt daleko",status_command_limit:"Limit poleceń",status_full_storage:"Magazyn jest pełny",status_no_units:"Brak dostępnych jednostek",status_abandoned_conquered:"Porzucone podbicie",status_protected_village:"Cel jest chroniony",status_busy_target:"Cel jest atakowany",status_no_targets:"Brak dostępnych celów",status_target_cycle_end:"Cykl wysyłania zakończony",status_not_allowed_points:"Punkty celu niedozwolone",status_unknown:"Nieznany status",status_attacking:"Atakuje",status_waiting_cycle:"Oczekuje",status_user_stop:"",status_expired_step:"",not_loaded:"Nie załadowany.",ignored_targets:"Ignorowane cele",no_ignored_targets:"Brak ignorowanych",
included_targets:"Dodatkowe cele",no_included_targets:"Brak dodatkowych",farmer_villages:"Wioski farmiące",no_farmer_villages:"Brak wiosek farm",last_status:"Status",attacking:"Atakuje.",paused:"Zatrzymany.",command_limit:"Limit 50 ataków osiągnięty, oczekiwanie na powrót wojsk.",last_attack:"Ostatni atak",village_switch:"Przejście do wioski %{village}",no_preset:"Brak dostępnych szablonów.",no_selected_village:"Brak dostępnych wiosek.",no_units:"Brak dostępnych jednostek w wiosce, oczekiwanie na powrót wojsk.",no_units_no_commands:"Brak jednostek w wioskach lub powracających wojsk.",no_villages:"Brak dostępnych wiosek, oczekiwanie na powrót wojsk.",preset_first:"Wybierz najpierw szablon!",selected_village:"Wybrana wioska",loading_targets:"Ładowanie celów...",checking_targets:"Sprawdzanie celów...",restarting_commands:"Restartowanie poleceń...",ignored_village:"Cel %{target} dodany do listy pominiętych.(straty)",included_village:"Cel %{target} dodany do listy zawartych",
ignored_village_removed:"usunięty z listy ignorowanych",included_village_removed:"usunięty z listy zawartych",priority_target:"dodany do priorytetowych.",analyse_targets:"Analizowanie celów.",step_cycle_restart:"Restartowanie cyklu poleceń...",step_cycle_end:"Lista wiosek zakończona, oczekiwanie na następny cykl.",step_cycle_end_no_villages:"Brak wiosek do rozpoczęcia cyklu.",step_cycle_next:"Lista wiosek się skończyła, następny cykl: %d.",step_cycle_next_no_villages:"Brak wioski do rozpoczęcia cyklu, następny cykl: %d.",full_storage:"Magazyn w wiosce jest pełny",farm_stopped:"Farmer zatrzymany.",farm_started:"Farmer uruchomiony",groups_presets:"Grupy i szablony",presets:"Szablony",group_ignored:"Pomijaj wioski z grupy",group_include:"Dodaj wioski z grupy",group_only:"Atakuj tylko wioski z grup",attack_interval:"Przerwa między atakami (sekundy)",preserve_command_slots:"Rezerwuj sloty poleceń",target_single_attack:"Zezwól celom na jeden atak per wioska",
target_multiple_farmers:"Zezwól celom otrzymywać ataki z kilku wiosek",farmer_cycle_interval:"Przerwa pomiędzy cyklami farmienia (minut)",ignore_on_loss:"Pomijaj cele jeśli straty",ignore_full_storage:"Pomijaj wioski jeśli magazyn pełny",step_cycle_header:"Cykl Farmienia",step_cycle:"Włącz Cykl farmienia",step_cycle_notifs:"Powiadomienia",target_filters:"Filtry celów",min_distance:"Minimalna odległość",max_distance:"Maksymalna odległość",min_points:"Minimalna liczba punktów",max_points:"Maksymalna liczba punktów",max_travel_time:"Maksymalny czas podróży (minuty)",logs_limit:"Maksymalna ilość logów",event_attack:"Logi ataków",event_village_change:"Logi zmiany wiosek",event_priority_add:"Logi celów priorytetowych",event_ignored_village:"Logi pominiętych wiosek",settings_saved:"Ustawienia zapisane!",misc:"Różne",attack:"atakuje",no_logs:"Brak zarejestrowanych logów",clear_logs:"Wyczyść logi",reseted_logs:"Zarejestrowane logi zostały wyczyszczone.",date_added:"Data dodania",
multiple_attacks_interval:"Przerwa między atakami (sekundy)",next_cycle_in:"Następny cykl za",target_limit_per_village:"Limit celów na wioskę","settings.hotkeySwitch":"Skrót Start/Pauza","settings.hotkeyWindow":"Skrót okna Farmera","settings.remote":"Sterowanie Zdalne za pomocą wiadomości PW","settingError.minDistance":"Odległość celu musi być większa niż %{min}.","settingError.maxDistance":"Odległość celu nie może przekraczać %{max}.","settingError.maxTravelTime":"Maksymalny czas podróży hh:mm:ss.","settingError.randomBase":"Domyślny odstęp musi być pomiędzy %{min} and %{max}.","settingError.minPoints":"Minimalna liczba punktów celu to %{min}.","settingError.maxPoints":"Maksymalna liczba punktów celu to %{max}.","settingError.eventsLimit":"Liczba zdarzeń musi być wartością między %{min} i %{max}.",langName:"Polski","events.nothingYet":"Odpoczywam...","events.sendCommand":"%{origin} atakuje %{target}","events.priorityTargetAdded":"%{target} dodany do priorytetowych.",
"general.disabled":"— Wyłączony —","settings.docs":"Miłego farmienia!","settings.settings":"Ustawienia","settings.priorityTargets":"Priorytyzuj cele"},minimap:{title:"Minimapa",minimap:"Kartograf",highlights:"Podświetlenie",add:"Dodaj podświetlenie",remove:"Usuń podświetlenie",very_small:"Bardzo mała",small:"Mała",big:"Duża",very_big:"Bardzo duża",placeholder_search:"Szukaj gracz/plemię",highlight_add_success:"Podświetlenie dodane",highlight_add_error:"Najpierw sprecyzuj podświetlenie",highlight_update_success:"Podświetlenie zaktualizowane",highlight_remove_success:"Podświetlenie usunięte",highlight_villages:"Wioski",highlight_players:"Gracze",highlight_tribes:"Plemiona",highlight_add_error_exists:"Podświetlenie już istnieje!",highlight_add_error_no_entry:"Najpierw wybierz gracza/plemię!",highlight_add_error_invalid_color:"Nieprawidłowy kolor!",village:"Wioska",player:"Gracz",tribe:"Plemię",color:"Kolor (Hex)",tooltip_pick_color:"Wybierz kolor",misc:"Pozostałe ustawienia",
colors_misc:"Różne kolory",colors_diplomacy:"Dyplomacja - kolory",settings_saved:"Ustawienia zapisane!",settings_map_size:"Rozmiar mapy",settings_right_click_action:"PPM aby wykonać działanie na wiosce",highlight_village:"Podświetl wioskę",highlight_player:"Podświetl gracza",highlight_tribe:"Podświetl plemie",settings_show_floating_minimap:"Pokaż ruchomą mapę",settings_show_view_reference:"Pokaż wskaźnik obecnej pozycji",settings_show_continent_demarcations:"Pokaż granice królestw",settings_show_province_demarcations:"Pokaż granice prowincji",settings_show_barbarians:"Pokaż wioski barbarzyńskie",settings_show_ghost_villages:"Pokaż niezaładowane wioski",settings_show_only_custom_highlights:"Pokaż tylko własne podświetlenia",settings_highlight_own:"Podświetl własne wioski",settings_highlight_selected:"Podświetl wybraną wioskę",settings_highlight_diplomacy:"Automatycznie podświetl plemienną dyplomację",settings_colors_background:"Tło minimapy",settings_colors_province:"Granica prowincji",
settings_colors_continent:"Granica królestwa",settings_colors_quick_highlight:"Szybkie podświetlenie",settings_colors_tribe:"Własne plemie",settings_colors_player:"Własne wioski",settings_colors_selected:"Wybrana wioska",settings_colors_ghost:"Niezaładowana wioska",settings_colors_ally:"Sojusznik",settings_colors_pna:"PON",settings_colors_enemy:"Wróg",settings_colors_other:"Pozostałe wioski graczy",settings_colors_barbarian:"Wioski barbarzyńskie",settings_colors_view_reference:"Wskaźnik obecnej pozycji",settings_reset:"Ustawienia zresetowane",tooltip_village:"Wioska",tooltip_village_points:"Punkty wioski",tooltip_player:"Nazwa gracza",tooltip_player_points:"Punkty gracza",tooltip_tribe:"Plemię",tooltip_tribe_points:"Punkty plemienia",tooltip_province:"Prowincja",no_highlights:"Brak utworzonych podświetleń",reset_confirm_title:"Resetuj ustawienia",reset_confirm_text:"Wszystkie ustawienia zostaną przywrócone do domyślnych.",
reset_confirm_highlights_text:"Jak również wszystkie podświetlenia zostaną usunięte.",default_village_colors_info:"Informacje o domyślnych kolorach wiosek","entry/id":"Wioska/gracz/plemie","tooltip.village-id":"Id wioski","tooltip.player-id":"Id gracza","tooltip.tribe-id":"Id plemienia"},mint_helper:{title:"Mincerz",description:"Automatycznie wybija monety gdy włączony.",activated:"Mincerz aktywowany",deactivated:"Mincerz deaktywowany"},preset_creator:{title:"Kwatermistrz",description:"Automatycznie tworzy szablony do rekrutacji, fejków i farmy.",activated:"Kwatermistrz aktywowany",done:"Kwatermistrz utworzył szablony",deactivated:"Kwatermistrz skończył działanie"},report_sender:{title:"Goniec",description:"Automatycznie wysyła raporty z misji szpiegowskich, ataków oraz wsparć tworząc odpowiednie wiadomości.",activated:"Goniec aktywowany",deactivated:"Goniec skończył działanie"},common:{start:"Start",started:"Uruchomiony",pause:"Pauza",paused:"Wstrzymany",stop:"Zatrzymany",
stopped:"Zatrzymany",status:"Status",none:"Żaden",info:"Informacje",settings:"Ustawienia",others:"Inne",village:"Wioska",villages:"Wioski",building:"Budynek",buildings:"Budynki",level:"Poziom",registers:"Rejestry",filters:"Filtry",add:"Dodaj",waiting:"Oczekujące",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",activate:"Aktywuj",deactivate:"Wyłącz",units:"Jednostki",officers:"Oficerowie",origin:"Źródło",target:["Cel","Cele"],save:"Zapisz",logs:"Logi","no-results":"Brak wyników...",selected:"Wybrana",now:"Teraz",costs:"Koszty",duration:"Czas",points:"Punkty",player:"Gracz",players:"Gracze",next_features:"Następne funkcje",misc:"Różne",colors:"Kolory",reset:"Resetuj",here:"tutaj",disabled:"— Wyłączony —",cancel:"Anuluj",actions:"Akcje",remove:"Usuń",started_at:"Uruchomiony",arrive:"Dotarcie",settings_saved:"Ustawienia zapisane",discard:"Odrzuć",new_version:"Nowa wersja",check_changes:"Sprawdź zmiany",headquarter:"Ratusz",barracks:"Koszary",tavern:"Tawerna",hospital:"Szpital",
preceptory:"Komturia",chapel:"Kaplica",church:"Kościół",academy:"Akademia",rally_point:"Plac",statue:"Piedestał",market:"Rynek",timber_camp:"Tartak",clay_pit:"Kopalnia gliny",iron_mine:"Huta żelaza",farm:"Farma",warehouse:"Magazyn",wall:"Mur",spear:"Pikinier",sword:"Miecznik",axe:"Topornik",archer:"Łucznik",light_cavalry:"Lekki kawalerzysta",mounted_archer:"Łucznik konny",heavy_cavalry:"Ciężki kawalerzysta",ram:"Taran",catapult:"Katapulta",doppelsoldner:"Berserker",trebuchet:"Trebusz",snob:"Szlachcic",knight:"Rycerz",firefox_shill:""}},pl_pl:{about:{contact:"Kontakt",email:"Email",links:"Linki projektów",source_code:"Kod źródłowy",issues_suggestions:"Błędy/sugestie",translations:"Tłumaczenia"},alert_sender:{title:"Wartownik",description:"Automatycznie wysyła informacje o nadchodzacych atakach do pw z 'Attacks' w nazwie.",activated:"Wartownik aktywowany",deactivated:"Wartownik skończył działanie"},attack_view:{title:"Strażnik",filter_types:"Rodzaj",
filter_show_attacks_tooltip:"Pokaż ataki",filter_show_supports_tooltip:"Pokaż wsparcia",filter_show_relocations_tooltip:"Pokaż przeniesienia",filter_incoming_units:"Nadchodzące jednostki",commands_copy_arrival_tooltip:"Kopiuj czas dotarcia.",commands_copy_backtime_tooltip:"Kopiuj czas powrotu.",commands_set_remove_tooltip:"Wstaw rozkaz wycofania wojsk przed dotarciem ataku do Kolejki rozkazów.",command_type_tooltip:"Rodzaj",slowest_unit_tooltip:"Najwolniejsza jednostka",command_type:"Rodzaj",slowest_unit:"Co?",actions:"Dostępne akcje",no_incoming:"Brak nadchodzących wojsk.",copy:"Kopiuj",current_only_tooltip:"Tylko aktywna wioska",arrive:"Dotrze",arrivetime:"Czas dotarcia skopiowany!",backtime:"Czas powrotu skopiowany!",spyorigin:"Szpiedzy wysłani do %{name}!","commands.tooltip.kill":"Wstaw rozkaz klinowania do Kolejki rozkazów. MAŁY KLIN.","commands.tooltip.killBig":"Wstaw rozkaz klinowania do Kolejki rozkazów. DUŻY KLIN.",
"commands.tooltip.bunker":"Zabunkruj wioske z wojsk znajdujących się na najbliższych twoich wioskach które zdążą przed atakiem. Uwaga! robisz to na własną odpowiedzialność.","commands.tooltip.spy":"Szpieguj wioske źródłową.","commands.tooltip.withdraw":"Wycofaj wszystkie wsparcia sekundę przed wejsciem tego ataku."},auto_collector:{title:"Kolekcjoner",description:"Automatyczny kolekcjoner depozytu/drugiej wioski.",activated:"Kolekcjoner aktywowany",deactivated:"Kolekcjoner deaktywowany"},auto_healer:{title:"Medyk",description:"Automatycznie przywraca uzdrowione jednostki ze szpitala.",activated:"Medyk aktywowany",deactivated:"Medyk skończył działanie"},battle_calculator:{title:"Strateg","checkT.tip":"Liczy koszty produkcji jednostek","check.tip":"Liczy punkty bojowe dla wybranych jednostek","check.btn":"Policz","simulate.tip":"Symuluje bitwe na podstawie wskazanych danych","simulate.btn":"Symuluj",calculated:"Obliczono wynik bitwy!",inserted:"Obliczono wynik bitwy!",
name:"Pełna nazwa szablonu",id:"Wioska",wood:"Drewno",iron:"Żelazo",clay:"Glina",food:"Prowiant",attack:"Siła ataku",load:"Ładowność",buildtime:"Czas rekrutacji",defarc:"Obrona przeciw łucznikom",definf:"obrona przeciw piechocie",defcav:"Obrona przeciw kawaleri",attackarc:"Siła ataku łuczników",attackinf:"Siła ataku piechoty",attackcav:"Siła ataku kawaleri",discipline:"Dyscyplina",speed:"Prędkość",battle:"Bitwa","battle.predamage":"Uszkodzenia wstępne","battle.header":"Kalkulator bitewny","battle.killrateA":"Procent strat","battle.attackBashpoint":"Ofensywne punkty bojowe","battle.strentghAttack":"Siła bojowa off","battle.killrateD":"Procent strat","battle.defenceBashpoint":"Defensywne punkty bojowe","battle.strentghDefend":"Siła bojowa deff","battle.attackModifier":"Modyfikator ataku","battle.defenceModifier":"Modyfikator obrony","battle.provisions":"Całkowity prowiant","battle.killedprovisions":"Prowiant stracony","battle.doublestrength":"Szał berków?",
"battle.strongesttype":"Najwięcej wojsk typu","battle.beds":"Liczba łóżek - uratowanych jednostek","battle.survivedprovisions":"Prowiant ocalały","battle.attacker":"Atakujący","battle.unit":"Jednostka","battle.amount":"Ilość","battle.loses":"Straty","battle.revived":"Uleczone","battle.survivors":"Ocalałe","battle.survivorsA":"Ocalałe(z uratowanymi)","battle.survivorsD":"Ocalałe(bez uratowanych)","battle.defender":"Obrońca","battle.damage":"Uszkodzenia taranów","battle.damageCatapult":"Uszkodzenia katapult","battle.downgrade":"Mur uszkodzony z poziomu ","battle.downgradeCatapult":" uszkodzony/a z poziomu ","battle.to":" do ","battle.insert":"Wstaw ocalałe jednostki","battle.insertvillage":"Wstaw z wioski","battle.insertpreset":"Wstaw z szablonu","battle.insertV":"Wstaw jednostki z wioski - atakujący","battle.insertP":"Wstaw jednostki z szablonu - atakujący","battle.insertVD":"Wstaw jednostki z wioski - broniący","battle.insertPD":"Wstaw jednostki z szablonu - broniący",
"battle.faith":"Wiara","battle.morale":"Morale","battle.luck":"Szczęście","battle.wall":"Mury","battle.nightbonus":"Bonus nocny","battle.leader":"Wielki mistrz","battle.medic":"Medyk","battle.doctor":"Doktor","battle.attack-bonus":"Mistrzostwo broni","battle.iron-walls":"Żelazny mur","battle.clinique":"Klinika","battle.hospital":"Szpital","battle.equip":"Przedmioty rycerza","battle.halberd":"Halabarda Guan Yu","battle.longsword":"Długi miecz Paracelsusa","battle.battleaxe":"Bojowy topór Thorgarda","battle.longbow":"Łuk Nimroda","battle.lance":"Lanca Mieszka","battle.compositebow":"Kompozytowy łuk Nimroda","battle.banner":"Chorągiew Baptystów","battle.star":"Gwiazda poranna Karola","battle.bonfire":"Pochodnia Alethei","battle.scepter":"Berło Vasca","battle.target":"Cel katapult",bunker:"Bunkier","bunker.header":"Kalkulator optymalnego offa na bunkier",troops:"Koszt jednostek","troops.header":"Kalkulator kosztów produkcji jednostek","troops.th":"Koszty produkcji",
"troops.units":"Jednostki","troops.building":"Budynek","troops.barracks":"Koszary","troops.preceptory":"Komturia","troops.effects":"Efekty","troops.domination":"Dominacja","troops.training":"Intensywny trening","troops.templars":"Zakon Templariuszy","troops.teutonic":"Zakon Krzyżacki","troops.none":"Brak",bashpoints:"Punkty Bojowe","bashpoints.header":"Kalkulator punktów bojowych","bashpoints.th":"Punkty bojowe","bashpoints.attacker":"Jako atakujący","bashpoints.defender":"Jako obrońca","bashpoints.killed":"Zniszczone jednostki"},builder_queue:{title:"Budowniczy",started:"Budowniczy Uruchomiony",stopped:"Budowniczy Zatrzymany",settings:"Ustawienia",settings_village_groups:"Buduj w wioskach z grupy",settings_building_sequence:"Szablon kolejki budowy",settings_building_sequence_final:"Finalne poziomy budynków",settings_priorize_farm:"Priorytet farmy, jeżeli brakuje prowiantu",settings_saved:"Ustawienia zapisane!",logs_no_builds:"Nie rozpoczęto żadnej rozbudowy",logs_clear:"Wyczyść logi",
sequences:"Szablony",sequences_move_up:"Przesuń w górę",sequences_move_down:"Przesuń w dół",sequences_add_building:"Dodaj budynek",sequences_select_edit:"Wybierz szablon do edytowania",sequences_edit_sequence:"Edytuj szablon",select_group:"Wybierz grupę",add_building_success:"%d dodany na pozycji %d",add_building_limit_exceeded:"%d osiągnął/eła maksymalny poziom (%d)",position:"Pozycja",remove_building:"Usuń budynek z listy",clone:"Klonuj",remove_sequence:"Usuń szablon",name_sequence_min_lenght:"Minimalna długość nazwy szablonu",sequence_created:"Nowy szablon %d utworzony.",sequence_updated:"Szablon %d zaktualizowany.",sequence_removed:"Szablon %d usunięty.",error_sequence_exists:"Ten szablon już istnieje.",error_sequence_no_exists:"Ta sekwencja nie istnieje.",error_sequence_invalid:"Niektóre z wartości szablonu są niepoprawne.",logs_cleared:"Logi wyczyszczone.",create_sequence:"Utwórz szablon",settings_preserve_resources:"Zarezerwowane surowce wioski",
settings_preserve_wood:"Zabezpiecz drewno",settings_preserve_clay:"Zabezpiecz glinę",settings_preserve_iron:"Zabezpiecz żelazo",discard_changes_title:"Odrzuć zmianę tytułu",discard_changes_text:"Odrzuć zmianę tekstu",clone_warn_changed_sequence_title:"",clone_warn_changed_sequence_text:"",clone_sequence:"Klonuj szablon",amount:"Ilość",empty_sequence:"Pusty szablon",duration:"Czas","info.header":"Tytuł","info.content":"Zawartość"},builder_queue_add_building_modal:{title:"Dodaj nowy budynek"},builder_queue_name_sequence_modal:{title:"Nazwa szablonu"},builder_queue_remove_sequence_modal:{title:"Usuń szablon",text:"Jesteś pewny, że chcesz usunąć ten szablon? Jeśli ten szablon jest teraz aktywny, inny szablon zostanie wybrany i Budowniczy zatrzyma się."},command_queue:{title:"Generał",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",sent:"wysłany/e",activated:"włączony",deactivated:"wyłączony",expired:"przedawniony/e",removed:"usunięty/e",added:"dodany/e",
general_clear:"Wyczyść logi",general_next_command:"Następny rozkaz",add_basics:"Podstawowe informacje",add_origin:"Źródło",add_selected:"Aktywna wioska",add_target:"Cel",add_map_selected:"Wybrana wioska na mapie",date_type_arrive:"Czas dotarcia na cel",date_type_out:"Czas wyjścia z  twojej wioski",add_current_date:"Obecny czas",add_current_date_plus:"Zwiększ czas o 100 milisekund.",add_current_date_minus:"Zmniejsz czas o 100 milisekund.",add_travel_times:"Czas podróży jednostek",add_date:"Czas/Data",add_no_village:"Wybierz wioskę...",add_village_search:"Znajdź wioskę...",add_clear:"Wyczyść pola",add_insert_preset:"Wybierz szablon",queue_waiting:"Rozkazy",queue_none_added:"Brak dodanych rozkazów.",queue_sent:"Rozkazy wysłane",queue_none_sent:"Brak wysłanych rozkazów.",queue_expired:"Przedawnione rozkazy",queue_none_expired:"Brak przedawnionych rozkazów.",queue_remove:"Usuń rozkaz z listy",queue_filters:"Filtruj rozkazy",filters_selected_village:"Pokaż tylko rozkazy z aktywnej wioski",
filters_barbarian_target:"Pokaż tylko rozkazy na wioski barbarzyńskie",filters_attack:"Pokaż ataki",filters_support:"Pokaż wsparcia",filters_relocate:"Pokaż przeniesienia",filters_text_match:"Filtruj za pomocą tekstu...",command_out:"Czas wyjścia",command_time_left:"Pozostały czas",command_arrive:"Czas dotarcia",error_no_units_enough:"Brak wystarczającej liczby jednostek do wysłania rozkazu!",error_not_own_village:"Wioska źródłowa nie należy do ciebie!",error_origin:"Nieprawidłowa wioska źródłowa!",error_target:"Nieprawidłowa wioska cel!",error_no_units:"Nie wybrano jednostek!",error_invalid_date:"Nieprawidłowy Czas",error_already_sent_attack:"Atak %{type} powinien zostać wysłany %{date}",error_already_sent_support:"Wsparcie %{type} powinno zostać wysłane %{date}",error_already_sent_relocate:"Przeniesienie %{type} powinno zostać wysłane %{date}",error_relocate_disabled:"Przeniesienie wojsk wyłączone",error_no_map_selected_village:"Nie zaznaczono wioski na mapie.",
error_remove_error:"Błąd usuwania rozkazu.",tab_add:"Dodaj rozkaz",tab_waiting:"Oczekujące",tab_logs:"Logi"},faith_checker:{title:"Kapelan",description:"Automatycznie sprawdza kościół/kaplice w prowincjach.",resources:"W wiosce brak surowców do rozpoczęcia budowy",full:"W wiosce znajdują się wierni",chapel:"W wiosce zostanie zbudowana kaplica",church:"W wiosce zostanie zbudowany kościół",activated:"Kapelan aktywowany",deactivated:"Kapelan skończył działanie"},farm_overflow:{title:"Farmer",open_report:"Otwórz raport",no_report:"Nie ma raportu",reports:"Raporty",date:"Data",status_time_limit:"Cel jest zbyt daleko",status_command_limit:"Limit poleceń",status_full_storage:"Magazyn jest pełny",status_no_units:"Brak dostępnych jednostek",status_abandoned_conquered:"Porzucone podbicie",status_protected_village:"Cel jest chroniony",status_busy_target:"Cel jest atakowany",status_no_targets:"Brak dostępnych celów",status_target_cycle_end:"Cykl wysyłania zakończony",
status_not_allowed_points:"Punkty celu niedozwolone",status_unknown:"Nieznany status",status_attacking:"Atakuje",status_waiting_cycle:"Oczekuje",status_user_stop:"",status_expired_step:"",not_loaded:"Nie załadowany.",ignored_targets:"Ignorowane cele",no_ignored_targets:"Brak ignorowanych",included_targets:"Dodatkowe cele",no_included_targets:"Brak dodatkowych",farmer_villages:"Wioski farmiące",no_farmer_villages:"Brak wiosek farm",last_status:"Status",attacking:"Atakuje.",paused:"Zatrzymany.",command_limit:"Limit 50 ataków osiągnięty, oczekiwanie na powrót wojsk.",last_attack:"Ostatni atak",village_switch:"Przejście do wioski %{village}",no_preset:"Brak dostępnych szablonów.",no_selected_village:"Brak dostępnych wiosek.",no_units:"Brak dostępnych jednostek w wiosce, oczekiwanie na powrót wojsk.",no_units_no_commands:"Brak jednostek w wioskach lub powracających wojsk.",no_villages:"Brak dostępnych wiosek, oczekiwanie na powrót wojsk.",preset_first:"Wybierz najpierw szablon!",
selected_village:"Wybrana wioska",loading_targets:"Ładowanie celów...",checking_targets:"Sprawdzanie celów...",restarting_commands:"Restartowanie poleceń...",ignored_village:"Cel %{target} dodany do listy pominiętych.(straty)",included_village:"Cel %{target} dodany do listy zawartych",ignored_village_removed:"usunięty z listy ignorowanych",included_village_removed:"usunięty z listy zawartych",priority_target:"dodany do priorytetowych.",analyse_targets:"Analizowanie celów.",step_cycle_restart:"Restartowanie cyklu poleceń...",step_cycle_end:"Lista wiosek zakończona, oczekiwanie na następny cykl.",step_cycle_end_no_villages:"Brak wiosek do rozpoczęcia cyklu.",step_cycle_next:"Lista wiosek się skończyła, następny cykl: %d.",step_cycle_next_no_villages:"Brak wioski do rozpoczęcia cyklu, następny cykl: %d.",full_storage:"Magazyn w wiosce jest pełny",farm_stopped:"Farmer zatrzymany.",farm_started:"Farmer uruchomiony",groups_presets:"Grupy i szablony",presets:"Szablony",
group_ignored:"Pomijaj wioski z grupy",group_include:"Dodaj wioski z grupy",group_only:"Atakuj tylko wioski z grup",attack_interval:"Przerwa między atakami (sekundy)",preserve_command_slots:"Rezerwuj sloty poleceń",target_single_attack:"Zezwól celom na jeden atak per wioska",target_multiple_farmers:"Zezwól celom otrzymywać ataki z kilku wiosek",farmer_cycle_interval:"Przerwa pomiędzy cyklami farmienia (minut)",ignore_on_loss:"Pomijaj cele jeśli straty",ignore_full_storage:"Pomijaj wioski jeśli magazyn pełny",step_cycle_header:"Cykl Farmienia",step_cycle:"Włącz Cykl farmienia",step_cycle_notifs:"Powiadomienia",target_filters:"Filtry celów",min_distance:"Minimalna odległość",max_distance:"Maksymalna odległość",min_points:"Minimalna liczba punktów",max_points:"Maksymalna liczba punktów",max_travel_time:"Maksymalny czas podróży (minuty)",logs_limit:"Maksymalna ilość logów",event_attack:"Logi ataków",event_village_change:"Logi zmiany wiosek",event_priority_add:"Logi celów priorytetowych",
event_ignored_village:"Logi pominiętych wiosek",settings_saved:"Ustawienia zapisane!",misc:"Różne",attack:"atakuje",no_logs:"Brak zarejestrowanych logów",clear_logs:"Wyczyść logi",reseted_logs:"Zarejestrowane logi zostały wyczyszczone.",date_added:"Data dodania",multiple_attacks_interval:"Przerwa między atakami (sekundy)",next_cycle_in:"Następny cykl za",target_limit_per_village:"Limit celów na wioskę","settings.hotkeySwitch":"Skrót Start/Pauza","settings.hotkeyWindow":"Skrót okna Farmera","settings.remote":"Sterowanie Zdalne za pomocą wiadomości PW","settingError.minDistance":"Odległość celu musi być większa niż %{min}.","settingError.maxDistance":"Odległość celu nie może przekraczać %{max}.","settingError.maxTravelTime":"Maksymalny czas podróży hh:mm:ss.","settingError.randomBase":"Domyślny odstęp musi być pomiędzy %{min} and %{max}.","settingError.minPoints":"Minimalna liczba punktów celu to %{min}.","settingError.maxPoints":"Maksymalna liczba punktów celu to %{max}.",
"settingError.eventsLimit":"Liczba zdarzeń musi być wartością między %{min} i %{max}.",langName:"Polski","events.nothingYet":"Odpoczywam...","events.sendCommand":"%{origin} atakuje %{target}","events.priorityTargetAdded":"%{target} dodany do priorytetowych.","general.disabled":"— Wyłączony —","settings.docs":"Miłego farmienia!","settings.settings":"Ustawienia","settings.priorityTargets":"Priorytyzuj cele"},minimap:{title:"Minimapa",minimap:"Kartograf",highlights:"Podświetlenie",add:"Dodaj podświetlenie",remove:"Usuń podświetlenie",very_small:"Bardzo mała",small:"Mała",big:"Duża",very_big:"Bardzo duża",placeholder_search:"Szukaj gracz/plemię",highlight_add_success:"Podświetlenie dodane",highlight_add_error:"Najpierw sprecyzuj podświetlenie",highlight_update_success:"Podświetlenie zaktualizowane",highlight_remove_success:"Podświetlenie usunięte",highlight_villages:"Wioski",highlight_players:"Gracze",highlight_tribes:"Plemiona",highlight_add_error_exists:"Podświetlenie już istnieje!",
highlight_add_error_no_entry:"Najpierw wybierz gracza/plemię!",highlight_add_error_invalid_color:"Nieprawidłowy kolor!",village:"Wioska",player:"Gracz",tribe:"Plemię",color:"Kolor (Hex)",tooltip_pick_color:"Wybierz kolor",misc:"Pozostałe ustawienia",colors_misc:"Różne kolory",colors_diplomacy:"Dyplomacja - kolory",settings_saved:"Ustawienia zapisane!",settings_map_size:"Rozmiar mapy",settings_right_click_action:"PPM aby wykonać działanie na wiosce",highlight_village:"Podświetl wioskę",highlight_player:"Podświetl gracza",highlight_tribe:"Podświetl plemie",settings_show_floating_minimap:"Pokaż ruchomą mapę",settings_show_view_reference:"Pokaż wskaźnik obecnej pozycji",settings_show_continent_demarcations:"Pokaż granice królestw",settings_show_province_demarcations:"Pokaż granice prowincji",settings_show_barbarians:"Pokaż wioski barbarzyńskie",settings_show_ghost_villages:"Pokaż niezaładowane wioski",settings_show_only_custom_highlights:"Pokaż tylko własne podświetlenia",
settings_highlight_own:"Podświetl własne wioski",settings_highlight_selected:"Podświetl wybraną wioskę",settings_highlight_diplomacy:"Automatycznie podświetl plemienną dyplomację",settings_colors_background:"Tło minimapy",settings_colors_province:"Granica prowincji",settings_colors_continent:"Granica królestwa",settings_colors_quick_highlight:"Szybkie podświetlenie",settings_colors_tribe:"Własne plemie",settings_colors_player:"Własne wioski",settings_colors_selected:"Wybrana wioska",settings_colors_ghost:"Niezaładowana wioska",settings_colors_ally:"Sojusznik",settings_colors_pna:"PON",settings_colors_enemy:"Wróg",settings_colors_other:"Pozostałe wioski graczy",settings_colors_barbarian:"Wioski barbarzyńskie",settings_colors_view_reference:"Wskaźnik obecnej pozycji",settings_reset:"Ustawienia zresetowane",tooltip_village:"Wioska",tooltip_village_points:"Punkty wioski",tooltip_player:"Nazwa gracza",tooltip_player_points:"Punkty gracza",tooltip_tribe:"Plemię",
tooltip_tribe_points:"Punkty plemienia",tooltip_province:"Prowincja",no_highlights:"Brak utworzonych podświetleń",reset_confirm_title:"Resetuj ustawienia",reset_confirm_text:"Wszystkie ustawienia zostaną przywrócone do domyślnych.",reset_confirm_highlights_text:"Jak również wszystkie podświetlenia zostaną usunięte.",default_village_colors_info:"Informacje o domyślnych kolorach wiosek","entry/id":"Wioska/gracz/plemie","tooltip.village-id":"Id wioski","tooltip.player-id":"Id gracza","tooltip.tribe-id":"Id plemienia"},mint_helper:{title:"Mincerz",description:"Automatycznie wybija monety gdy włączony.",activated:"Mincerz aktywowany",deactivated:"Mincerz deaktywowany"},preset_creator:{title:"Kwatermistrz",description:"Automatycznie tworzy szablony do rekrutacji, fejków i farmy.",activated:"Kwatermistrz aktywowany",done:"Kwatermistrz utworzył szablony",deactivated:"Kwatermistrz skończył działanie"},report_sender:{title:"Goniec",
description:"Automatycznie wysyła raporty z misji szpiegowskich, ataków oaz wsparć.",activated:"Goniec aktywowany",deactivated:"Goniec skończył działanie"},common:{start:"Start",started:"Uruchomiony",pause:"Pauza",paused:"Wstrzymany",stop:"Zatrzymany",stopped:"Zatrzymany",status:"Status",none:"Żaden",info:"Informacje",settings:"Ustawienia",others:"Inne",village:"Wioska",villages:"Wioski",building:"Budynek",buildings:"Budynki",level:"Poziom",registers:"Rejestry",filters:"Filtry",add:"Dodaj",waiting:"Oczekujące",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",activate:"Aktywuj",deactivate:"Wyłącz",units:"Jednostki",officers:"Oficerowie",origin:"Źródło",target:["Cel","Cele"],save:"Zapisz",logs:"Logi","no-results":"Brak wyników...",selected:"Wybrana",now:"Teraz",costs:"Koszty",duration:"Czas",points:"Punkty",player:"Gracz",players:"Gracze",next_features:"Następne funkcje",misc:"Różne",colors:"Kolory",reset:"Resetuj",here:"tutaj",disabled:"— Wyłączony —",cancel:"Anuluj",
actions:"Akcje",remove:"Usuń",started_at:"Uruchomiony",arrive:"Dotarcie",settings_saved:"Ustawienia zapisane",discard:"Odrzuć",new_version:"Nowa wersja",check_changes:"Sprawdź zmiany",headquarter:"Ratusz",barracks:"Koszary",tavern:"Tawerna",hospital:"Szpital",preceptory:"Komturia",chapel:"Kaplica",church:"Kościół",academy:"Akademia",rally_point:"Plac",statue:"Piedestał",market:"Rynek",timber_camp:"Tartak",clay_pit:"Kopalnia gliny",iron_mine:"Huta żelaza",farm:"Farma",warehouse:"Magazyn",wall:"Mur",spear:"Pikinier",sword:"Miecznik",axe:"Topornik",archer:"Łucznik",light_cavalry:"Lekki kawalerzysta",mounted_archer:"Łucznik konny",heavy_cavalry:"Ciężki kawalerzysta",ram:"Taran",catapult:"Katapulta",doppelsoldner:"Berserker",trebuchet:"Trebusz",snob:"Szlachcic",knight:"Rycerz",firefox_shill:""}}},i='en_us',o={en_dk:'en_us',pt_pt:'pt_br'};function l(t){t=b.call(o,t)?o[t]:t,e.setJSON(n[t]||n[i])}let s={init:function(){if(t)return!1;t=!0,l(a.loc.ale),a.$watch('loc.ale',(function(e,t){
e!==t&&l(a.loc.ale)}))}};return s})),define('two/Settings',['two/utils','Lockr'],(function(e,n){const o=function(e,t){let a={};for(let n in e)b.call(t,n)?angular.equals(e[n],t[n])||(a[n]=t[n]):a[n]=e[n];return!angular.equals({},a)&&a},l=function(){return{name:g('i18n')('disabled',a.loc.ale,'common'),value:!1}},s=function(e,t){let a={};for(let n in t)(e[n].updates||[]).forEach((function(e){a[e]=!0}));return!angular.equals(a,{})&&a};let r=function(e){this.settingsMap=e.settingsMap,this.storageKey=e.storageKey,this.defaults=function(e){let t={};for(let a in e)t[a]=e[a].default;return t}(this.settingsMap),this.settings=angular.merge({},this.defaults,n.get(this.storageKey,{})),this.events={settingsChange:e.onChange||h},this.injected=!1};return r.prototype.get=function(e){return angular.copy(this.settings[e])},r.prototype.getAll=function(){return angular.copy(this.settings)},r.prototype.getDefault=function(e){return b.call(this.defaults,e)?this.defaults[e]:t},r.prototype.store=function(){
n.set(this.storageKey,this.settings)},r.prototype.set=function(e,t,a){if(!b.call(this.settingsMap,e))return!1;const n=this.settingsMap[e];'number'===n.inputType&&(t=parseInt(t,10),b.call(n,'min')&&(t=Math.max(n.min,t)),b.call(n,'max')&&(t=Math.min(n.max,t)));const i=angular.copy(this.settings);this.settings[e]=t;const l=angular.copy(this.settings),r=o(i,l);if(!r)return!1;const c=s(this.settingsMap,r);return this.store(),this.updateScope(),this.events.settingsChange.call(this,r,c,a||{}),!0},r.prototype.setAll=function(e,t){const a=angular.copy(this.settings);for(let t in e)if(b.call(this.settingsMap,t)){const a=this.settingsMap[t];let n=e[t];'number'===a.inputType&&(n=parseInt(n,10),b.call(a,'min')&&(n=Math.max(a.min,n)),b.call(a,'max')&&(n=Math.min(a.max,n))),this.settings[t]=n}const n=angular.copy(this.settings),i=o(a,n);if(!i)return!1;const l=s(this.settingsMap,i);return this.store(),this.updateScope(),this.events.settingsChange.call(this,i,l,t||{}),!0},
r.prototype.reset=function(e,t){return this.set(e,this.defaults[e],t),!0},r.prototype.resetAll=function(e){return this.setAll(angular.copy(this.defaults),e),!0},r.prototype.each=function(e){for(let t in this.settings){if(!b.call(this.settingsMap,t))continue;let a=this.settingsMap[t];'checkbox'===a.inputType?e.call(this,t,!!this.settings[t],a):e.call(this,t,this.settings[t],a)}},r.prototype.onChange=function(e){'function'==typeof e&&(this.events.settingsChange=e)},r.prototype.injectScope=function(t,a){this.injected={$scope:t,opt:a},t.settings=this.encode(a),e.each(this.settingsMap,(function(e,a){'select'===e.inputType&&t.$watch((function(){return t.settings[a]}),(function(n){e.multiSelect?n.length||(t.settings[a]=[l()]):n||(t.settings[a]=l())}),!0)}))},r.prototype.updateScope=function(){if(!this.injected)return!1;this.injected.$scope.settings=this.encode(this.injected.opt)},r.prototype.encode=function(e){let t={};const n=i.getPresetList().getPresets(),o=i.getGroupList().getGroups()
;return e=e||{},this.each((function(i,s,r){if('select'===r.inputType){if(!s&&r.disabledOption)return void(t[i]=r.multiSelect?[l()]:l());switch(r.type){case'presets':if(r.multiSelect){let e=[];s.forEach((function(t){n[t]&&e.push({name:n[t].name,value:t})})),t[i]=e.length?e:[l()]}else{if(!n[s]&&r.disabledOption)return void(t[i]=l());t[i]={name:n[s].name,value:s}}break;case'groups':if(r.multiSelect){let e=[];s.forEach((function(t){o[t]&&e.push({name:o[t].name,value:t,leftIcon:o[t].icon})})),t[i]=e.length?e:[l()]}else{if(!o[s]&&r.disabledOption)return void(t[i]=l());t[i]={name:o[s].name,value:s}}break;default:t[i]={name:e.textObject?g('i18n')(s,a.loc.ale,e.textObject):s,value:s},e.multiSelect&&(t[i]=[t[i]])}}else t[i]=s})),t},r.prototype.decode=function(e){let t={};for(let a in e){let n=this.settingsMap[a];if('select'===n.inputType)if(n.multiSelect)if(1===e[a].length&&!1===e[a][0].value)t[a]=[];else{let n=[];e[a].forEach((function(e){n.push(e.value)})),t[a]=n
}else t[a]=e[a].value;else t[a]=e[a]}return t},r.encodeList=function(e,t){let n=[];switch((t=t||{}).disabled&&n.push(l()),t.type){case'keys':for(let t in e)n.push({name:t,value:t});break;case'groups':for(let t in e){let a=e[t];n.push({name:a.name,value:a.id,leftIcon:a.icon})}break;case'presets':for(let t in e){let a=e[t];n.push({name:a.name,value:a.id})}break;case'values':default:for(let i in e){let o=e[i];n.push({name:t.textObject?g('i18n')(o,a.loc.ale,t.textObject):o,value:o})}}return n},r.disabledOption=l,r})),define('two/mapData',['conf/conf'],(function(e){let t=[],n=[],i=!1,r=!1,c=[];angular.extend(s,{MAP_DATA_LOADED:'map_data_loaded'});let d={load:function(e=h,d){if(d)r=!1;else{if(i)return c.push(e);if(r)return e(t)}c.push(e),i=!0;let u=[];for(let e=0;e<n.length;e++)for(let t=0;t<n[e].length;t++)u.push(n[e][t]);let p=[];return u.forEach((function(e){let a=new Promise((function(a,n){o.emit(l.MAP_GET_MINIMAP_VILLAGES,e,(function(e){if(e.message)return n(e.message)
;e.villages.length&&(t=t.concat(e.villages)),a()}))}));p.push(a)})),Promise.all(p).then((function(){i=!1,r=!0,a.$broadcast(s.MAP_DATA_LOADED),c.forEach((function(e){e(t)})),c=[]})).catch((function(e){console.error(e.message)}))},getVillages:function(){return t},isLoaded:function(){return r}};return function(){const t=Math.ceil(e.MAP_SIZE/306),a=Math.ceil(e.MAP_SIZE/306);for(let i=0;i<t;i++){n.push([]);let t=306*i,o=306..bound(0,t+306).bound(0,e.MAP_SIZE-t);t=t.bound(0,e.MAP_SIZE);for(let l=0;l<a;l++){let a=306*l,s=306..bound(0,a+306).bound(0,e.MAP_SIZE-a);a=a.bound(0,e.MAP_SIZE),n[i].push({x:t,y:a,width:o,height:s})}}}(),d})),define('two/ui',['conf/conf','conf/cdn','two/ready'],(function(e,t,n){let i,o={},l={},r=!1,c=document.querySelector('head'),d=injector.get('httpService'),u=injector.get('templateManagerService'),p=injector.get('$templateCache');return u.load=function(n,i,o){let s;const r=function(e,t,n,o){p.put(s.substr(1),e),angular.isFunction(i)&&i(e,t,n,o),a.$$phase||a.$apply()
},c=function(e,t,a,n){angular.isFunction(o)&&o(e,t,a,n)};s=0!==n.indexOf('!')?e.TEMPLATE_PATH_EXT.join(n):n.substr(1),p.get(s.substr(1))?r(p.get(s.substr(1)),304):t.versionMap[s]?d.get(s,r,c):r(l[s],304)},o.init=function(){if(r)return!1;let e=document.querySelector('#wrapper'),t=document.createElement('div'),a=document.createElement('div');t.className='two-menu-container',e.appendChild(t),a.className='two-main-button',a.style.display='none',t.appendChild(a),i=document.createElement('div'),i.className='two-menu',t.appendChild(i),r=!0,
o.addStyle('.two-window a.select-handler{-webkit-box-shadow:none;box-shadow:none}.two-window .small-select a.select-handler{height:22px;line-height:22px}.two-window .small-select a.select-button{height:22px}.two-window input::placeholder{color:rgba(255,243,208,0.7)}.two-window .green{color:#07770b}.two-window .red{color:#770707}.two-window .blue{color:#074677}#toolbar-left{height:calc(100% - 273px) !important;top:165px !important}.two-menu-container{position:absolute;top:84px;left:0;width:90px;z-index:10}.two-menu-container:hover .two-main-button{background-position:0 -75px}.two-menu-container:hover .two-menu{opacity:1;visibility:visible;transition:opacity .1s ease-in-out}.two-main-button{left:0;width:75px;height:75px;background-image:url("data:image/png;base64,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");background-position:0 0;z-index:10}.two-menu{position:absolute;top:8px;left:85px;width:120px;display:flex;flex-flow:wrap;visibility:hidden;opacity:0;z-index:10}.two-menu .button{height:24px;width:150px;padding:0 15px;line-height:22px;margin-bottom:8px}.two-menu .divisor{height:3px;margin-bottom:5px;background:linear-gradient(90deg, #4e2e1a, transparent);border-radius:10px;width:100%}#wrapper.window-open .two-menu-container{left:713px}#wrapper.window-open.window-fullsize .two-menu-container{display:none !important}input:not([type]){border:none;outline:none}a.link{font-weight:bold;color:#3f2615}a.link:hover{text-shadow:0 1px 0 #000;color:#fff}'),
n((function(){a.style.display='block'}),['map'])},o.addTemplate=function(e,t){l[e]=t},o.addStyle=function(e){let t=document.createElement('style');t.type='text/css',t.appendChild(document.createTextNode(e)),c.appendChild(t)},o.addMenuButton=function(e,t,n){let o=document.createElement('div');return o.className='btn-border btn-orange button',o.innerHTML=e,o.style.order=t,i.appendChild(o),'string'==typeof n&&(o.addEventListener('mouseenter',(function(e){a.$broadcast(s.TOOLTIP_SHOW,'twoverflow-tooltip',n,!0,e)})),o.addEventListener('mouseleave',(function(){a.$broadcast(s.TOOLTIP_HIDE,'twoverflow-tooltip')}))),i.appendChild(o)},o.addDivisor=function(e){let t=document.createElement('div');t.className='divisor',t.style.order=e,i.appendChild(t)},o.isInitialized=function(){return r},o})),require(['two/ui'],(function(e){if(e.isInitialized())return!1;e.init()})),require(['two/language','two/ready','Lockr'],(function(e,t,n){t((function(){e.init(),function(){
const e=n.get('twoverflow_version','1.0.0');if("2.0.0".endsWith('dev'))return!1;const t=function(e){if(/\d+\.\d+\.\d+/.test(e))return parseInt(e.split('.').reduce((e,t)=>e+t),10)};if(t("2.0.0")>t(e)){const e='https://gitlab.com/relaxeaza/twoverflow/blob/master/CHANGELOG.md',t=g('i18n')('check_changes',a.loc.ale,'common'),i=g('i18n')('firefox_shill',a.loc.ale,'common'),o=g('i18n')('new_version',a.loc.ale,'common',"2.0.0");a.$broadcast(s.NOTIFICATION_NEW,{message:`[b]${o}[/b]\n[url=${e}]${t}[/url]\n\n${i}`}),n.set('twoverflow_version',"2.0.0")}}()}))})),define('Lockr',(function(e,t){'use strict';return t.prefix='',t._getPrefixedKey=function(e,t){return(t=t||{}).noPrefix?e:this.prefix+e},t.set=function(e,t,a){const n=this._getPrefixedKey(e,a);try{localStorage.setItem(n,JSON.stringify({data:t}))}catch(e){}},t.get=function(e,t,a){const n=this._getPrefixedKey(e,a);let i;try{i=JSON.parse(localStorage.getItem(n))}catch(e){i=localStorage[n]?{data:localStorage.getItem(n)}:null}
return null===i?t:'object'==typeof i&&void 0!==i.data?i.data:t},t})),define('two/about',[],(function(){let e=!1,t={isInitialized:function(){return e},init:function(){e=!0}};return t})),define('two/about/ui',['two/ui'],(function(e){let t;const n=function(e){t.selectedTab=e},i=function(){t=a.$new(),t.selectTab=n,c.getModal('!twoverflow_about_window',t)};return function(){e.addDivisor(189),e.addMenuButton('O mnie',190).addEventListener('click',(function(){i()})),
e.addTemplate('twoverflow_about_window',"<div id=\"two-about\" class=\"win-content\"><header class=\"win-head\"><h3>tw2overflow v2.0.0</h3><ul class=\"list-btn sprite\"><li><a href=\"#\" class=\"btn-red icon-26x26-close\" ng-click=\"closeWindow()\"></a></ul></header><div class=\"win-main\" scrollbar=\"\"><div class=\"box-paper footer\"><div class=\"scroll-wrap\"><div class=\"logo\"><img src=\"https://i.imgur.com/iNcVMvw.png\"></div><table class=\"tbl-border-light tbl-content tbl-medium-height\"><tr><th colspan=\"2\">{{ 'contact' | i18n:loc.ale:'about' }}<tr><td>{{ 'email' | i18n:loc.ale:'about' }}<td>twoverflow@outlook.com<tr><td colspan=\"2\" class=\"text-center\">If you are willing to pay $, I'm willing to make personal scripts for you.</table><table class=\"tbl-border-light tbl-content tbl-medium-height\"><tr><th colspan=\"2\">{{ 'links' | i18n:loc.ale:'about' }}<tr><td>{{ 'source_code' | i18n:loc.ale:'about' }}<td><a href=\"https://gitlab.com/relaxeaza/twoverflow/\" target=\"_blank\">https://gitlab.com/relaxeaza/twoverflow/</a><tr><td>{{ 'issues_suggestions' | i18n:loc.ale:'about' }}<td><a href=\"https://gitlab.com/relaxeaza/twoverflow/issues\" target=\"_blank\">https://gitlab.com/relaxeaza/twoverflow/issues</a><tr><td>{{ 'translations' | i18n:loc.ale:'about' }}<td><a href=\"https://crowdin.com/project/twoverflow\" target=\"_blank\">https://crowdin.com/project/twoverflow</a></table></div></div></div><footer class=\"win-foot\"><ul class=\"list-btn list-center\"><li><a href=\"#\" class=\"btn-border btn-red\" ng-click=\"closeWindow()\">{{ 'cancel' | i18n:loc.ale:'common' }}</a></ul></footer></div>"),
e.addStyle('#two-about{padding:42px 0 0px 0;position:relative;height:100%}#two-about .box-paper a{font-weight:bold;color:#3f2615;text-decoration:none}#two-about .box-paper a:hover{text-shadow:0 1px 0 #000;color:#fff}#two-about .logo{text-align:center;margin-bottom:8px}#two-about table td{padding:0 10px}#two-about table td:first-child{text-align:right;width:20%}')}})),require(['two/ready','two/about','two/about/ui'],(function(e,t,a){if(t.isInitialized())return!1;e((function(){t.init(),a()}),['map'])})),define('two/alertSender',['queues/EventQueue','two/commandQueue','models/CommandModel','conf/unitTypes'],(function(e,t,a,n){let r;var c=injector.get('overviewService'),d=!1,u=!1,p=i.getSelectedCharacter().getGlobalInfo(),g={reverse:!1,column:'command_progress'},m=i.getSelectedCharacter(),_=m.tribeById[0],h=m.getVillageList(),b=[],f=m.data.character_id,v=m.data.character_name,E=[],w=[],T=[n.LIGHT_CAVALRY,n.HEAVY_CAVALRY,n.AXE,n.SWORD,n.RAM,n.SNOB,n.TREBUCHET];var A=function(){
o.emit(l.TRIBE_GET_MEMBERLIST,{tribe:_},(function(e){for(var t=e.members,a=0;a<t.length;a++)w.push(t[a].id)})),h.forEach((function(e){b.push(e.getId())}));var e=p.getCommandListModel().getIncomingCommands().length,t=e>25?e:25;o.emit(l.OVERVIEW_GET_INCOMING,{count:t,offset:0,sorting:g.column,reverse:g.reverse?1:0,groups:[],command_types:['attack'],villages:b},y),setTimeout(A,6e4)},y=function(e){for(var t,a=[],n=e.commands,i=0;i<n.length;i++)if(c.formatCommand(n[i]),w.includes(n[i].origin_character_id))console.log('Nadchodzące ruchy wojsk pochodzą od współplemieńca '+n[i].origin_character_id+' Rodzaj '+n[i].command_type);else if('attack'==n[i].command_type)if(E.includes(n[i].command_id))console.log('Już wysłano powiadomienie');else{E.push(n[i].command_id),n[i].slowestUnit=S(n[i]);var s=n[i].time_completed,d=(t=void 0,t=new Date(1e3*s),r=t.toLocaleString(),r),u='',p='';'sword'==n[i].slowestUnit?(p=' [color=03709d]MIECZNIK[/color]',
u='sword'):'axe'==n[i].slowestUnit?(p=' [color=e21f1f]TOPORNIK[/color]',u='axe'):'ram'==n[i].slowestUnit?(p=' [color=730202]TARAN[/color]',u='ram'):'snob'==n[i].slowestUnit?(p=' [color=ffee00]SZLACHCIC[/color]',u='snob'):'trebuchet'==n[i].slowestUnit?(p=' [color=494500]TREBUSZ[/color]',u='trebuchet'):'light_cavalry'==n[i].slowestUnit?(p=' [color=d96a19]LEKKA KAWALERIA[/color]',u='light_cavalry'):'heavy_cavalry'==n[i].slowestUnit&&(p=' [color=0111af]CIĘŻKA KAWALERIA[/color]',u='heavy_cavalry'),
a.push('[size=large][b]Nadchodzący atak [/b]--- [/size][unit]'+u+'[/unit] [size=large][b]'+p+'[/b][/size][br][b][size=XL] Czas dotarcia: '+d+'[/size][/b][br][size=medium][b] Wioska cel: [/b][village='+n[i].target_village_id+']'+n[i].target_village_name+'[/village][b] Gracz cel: [/b][player='+f+']'+v+'[/player][b] [br]Wioska pochodzenia: [/b][village='+n[i].origin_village_id+']'+n[i].origin_village_name+'[/village][b] Gracz atakujący: [/b][player='+n[i].origin_character_id+']'+n[i].origin_character_name+'[/player][/size]');var g=a.join();'snob'==u||'trebuchet'==u?('Hajduk Split'==v||'halfsack'==v||'Black Rider'==v?o.emit(l.MESSAGE_REPLY,{message_id:14378,message:g}):o.emit(l.MESSAGE_REPLY,{message_id:4646,message:g}),a=[]):('Hajduk Split'==v||'halfsack'==v||'Black Rider'==v?o.emit(l.MESSAGE_REPLY,{message_id:14379,message:g}):o.emit(l.MESSAGE_REPLY,{message_id:4648,message:g}),a=[])}},S=function(e){var a=e.model.duration,n={},i={x:e.origin_x,y:e.origin_y},o={x:e.target_x,y:e.target_y
},l=[];return T.forEach((function(a){n[a]=1,l.push({unit:a,duration:t.getTravelTime(i,o,n,e.command_type,{})})})),(l=l.map((function(e){return e.duration=Math.abs(e.duration-a),e})).sort((function(e,t){return e.duration-t.duration})))[0].unit},I={init:function(){d=!0},start:function(){e.trigger(s.ALERT_SENDER_STARTED),u=!0,A()},stop:function(){e.trigger(s.ALERT_SENDER_STOPPED),u=!1},isRunning:function(){return u},isInitialized:function(){return d}};return I})),define('two/alertSender/events',[],(function(){angular.extend(s,{ALERT_SENDER_STARTED:'alert_sender_started',ALERT_SENDER_STOPPED:'alert_sender_stopped'})})),define('two/alertSender/ui',['two/ui','two/alertSender','two/utils','queues/EventQueue'],(function(e,t,n,i){let o;return function(){return o=e.addMenuButton('Wartownik',100,g('i18n')('description',a.loc.ale,'alert_sender')),o.addEventListener('click',(function(){t.isRunning()?(t.stop(),n.notif('success',g('i18n')('deactivated',a.loc.ale,'alert_sender'))):(t.start(),
n.notif('success',g('i18n')('activated',a.loc.ale,'alert_sender')))})),i.register(s.ALERT_SENDER_STARTED,(function(){o.classList.remove('btn-orange'),o.classList.add('btn-red')})),i.register(s.ALERT_SENDER_STOPPED,(function(){o.classList.remove('btn-red'),o.classList.add('btn-orange')})),t.isRunning()&&i.trigger(s.ALERT_SENDER_STARTED),opener}})),require(['two/ready','two/alertSender','two/alertSender/ui','Lockr','queues/EventQueue','two/alertSender/events'],(function(e,t,a,n,i){const o='alert_sender_active';if(t.isInitialized())return!1;e((function(){t.init(),a(),e((function(){n.get(o,!1,!0)&&t.start(),i.register(s.ALERT_SENDER_STARTED,(function(){n.set(o,!0)})),i.register(s.ALERT_SENDER_STOPPED,(function(){n.set(o,!1)}))}),['initial_village'])}))})),
define('two/attackView',['two/ready','two/utils','two/attackView/types/columns','two/attackView/types/commands','two/attackView/types/filters','two/attackView/unitSpeedOrder','conf/unitTypes','conf/buildingTypes','Lockr','helper/math','helper/mapconvert','struct/MapData','queues/EventQueue'],(function(e,t,n,r,c,d,u,p,g,m,_,h,b){let f,v,E=!1,w=injector.get('overviewService'),T=[],A=!1,y={},S={},I={reverse:!1,column:n.TIME_COMPLETED};const k='attack_view_filters',x={},R={},M=function(){const e=[c.COMMAND_TYPES],t=i.getSelectedVillage().getId();let a={};for(let t=0;t<e.length;t++)for(let n in y[e[t]])if(a[e[t]]||(a[e[t]]=[]),y[e[t]][n])switch(e[t]){case c.COMMAND_TYPES:n===r.ATTACK?a[e[t]].push(r.ATTACK):n===r.SUPPORT?a[e[t]].push(r.SUPPORT):n===r.RELOCATE&&a[e[t]].push(r.RELOCATE)}S=a,S.village=y[c.VILLAGE]?[t]:[]},L=function(){U.loadCommands()},O=function(e,t){b.trigger(s.ATTACK_VIEW_COMMAND_CANCELLED,[t.id||t.command_id])},N=function(e,t){
for(let e=0;e<T.length;e++)T[e].command_id===t.command_id&&T.splice(e,1);b.trigger(s.ATTACK_VIEW_COMMAND_IGNORED,[t.command_id])},C=function(e,t){for(let e=0;e<T.length;e++)T[e].target_village_id===t.village_id?(T[e].target_village_name=t.name,T[e].targetVillage.name=t.name):T[e].origin_village_id===t.village_id&&(T[e].origin_village_name=t.name,T[e].originVillage.name=t.name);b.trigger(s.ATTACK_VIEW_VILLAGE_RENAMED,[t])},D=function(e,t){S[c.VILLAGE].length&&(S[c.VILLAGE]=[t],U.loadCommands())},P=function(e){const a={x:e.origin_x,y:e.origin_y},n={x:e.target_x,y:e.target_y};return d.map((function(i){const o=t.getTravelTime(a,n,{[i]:1},e.command_type,{},!1);return{unit:i,diff:Math.abs(o-e.model.duration)}})).sort((function(e,t){return e.diff-t.diff}))[0].unit},z=function(e,t){return e.sort((function(e,a){return m.actualDistance(t,e)-m.actualDistance(t,a)}))},G=function(e,t){let a=0;if(h.hasTownDataInChunk(e.x,e.y)){
const a=h.loadTownData(e.x,e.y,25,25,25),n=i.getSelectedCharacter().getTribeId(),o=i.getSelectedCharacter().getId();let l,s=[];a.forEach((function(e){for(let t in e.data)for(let a in e.data[t])s.push(e.data[t][a])}));const r=s.filter((function(e){return null===e.character_id&&e.id>0})),c=s.filter((function(t){return t.character_id===o&&e.id!==t.id}));if(r.length)l=z(r,e);else if(c.length)l=z(c,e);else{if(!n)return t(!1);{const a=s.filter((function(e){return e.tribe_id===n}));if(!a.length)return t(!1);l=z(a,e)}}return t(l[0])}const n=_.scaledGridCoordinates(e.x,e.y,25,25,25);h.loadTownDataAsync(e.x,e.y,25,25,(function(){++a===n.length&&G(e,t)}))},B=function(e){T=e.commands;for(let e=0;e<T.length;e++)w.formatCommand(T[e]),T[e].slowestUnit=P(T[e]);T=T.filter((function(e){return y[c.INCOMING_UNITS][e.slowestUnit]})),b.trigger(s.ATTACK_VIEW_COMMANDS_LOADED,[T])};let U={loadCommands:function(){const e=f.getCommandListModel().getIncomingCommands().length,t=e>25?e:25
;o.emit(l.OVERVIEW_GET_INCOMING,{count:t,offset:0,sorting:I.column,reverse:I.reverse?1:0,groups:[],command_types:S[c.COMMAND_TYPES],villages:S[c.VILLAGE]},B)},getCommands:function(){return T},getFilters:function(){return y},getSortings:function(){return I},toggleFilter:function(e,t){t?y[e][t]=!y[e][t]:y[e]=!y[e],M(),g.set(k,y),U.loadCommands()},toggleSorting:function(e){e===I.column?I.reverse=!I.reverse:(I.column=e,I.reverse=!1),U.loadCommands()},setCommander:function(e,a){G(e.targetVillage,(function(n){const i=e.targetVillage,o=n,l=o.character_id?r.SUPPORT:r.ATTACK;let s={};t.each(u,(function(e){s[e]='*'})),A.addCommand(i,o,a,v.OUT,s,{},l,p.WALL),A.isRunning()||A.start()}))},commandQueueEnabled:function(){return!!A},isInitialized:function(){return E},init:function(){for(let e=0;e<d.length;e++)x[d[e]]=!0;for(let e in r)R[r[e]]=!0;try{A=require('two/commandQueue'),v=require('two/commandQueue/types/dates')}catch(e){}const t={[c.COMMAND_TYPES]:angular.copy(R),
[c.INCOMING_UNITS]:angular.copy(x),[c.VILLAGE]:!1};E=!0,f=i.getSelectedCharacter().getGlobalInfo(),y=g.get(k,t,!0),e((function(){M(),a.$on(s.COMMAND_INCOMING,L),a.$on(s.COMMAND_CANCELLED,O),a.$on(s.MAP_SELECTED_VILLAGE,D),a.$on(s.VILLAGE_NAME_CHANGED,C),a.$on(s.COMMAND_IGNORED,N),U.loadCommands()}),['initial_village'])}};return U})),define('two/attackView/events',[],(function(){angular.extend(s,{ATTACK_VIEW_FILTERS_CHANGED:'attack_view_filters_changed',ATTACK_VIEW_SORTING_CHANGED:'attack_view_sorting_changed',ATTACK_VIEW_COMMAND_CANCELLED:'attack_view_command_cancelled',ATTACK_VIEW_COMMAND_IGNORED:'attack_view_command_ignored',ATTACK_VIEW_VILLAGE_RENAMED:'attack_view_village_renamed',ATTACK_VIEW_COMMANDS_LOADED:'attack_view_commands_loaded'})})),
define('two/attackView/ui',['two/ui','two/attackView','two/EventScope','two/utils','two/attackView/types/columns','two/attackView/types/commands','two/attackView/types/filters','two/attackView/unitSpeedOrder','conf/unitTypes','queues/EventQueue','helper/time','battlecat'],(function(e,t,n,o,l,d,u,_,h,b,f,v){let E,w;const T=function(){return Date.now()/1e3},A=function(e){let t=a.$new();t.text=g('readableDateFilter')(1e3*e,a.loc.ale,a.GAME_TIMEZONE,a.GAME_TIME_OFFSET,'H:mm:ss:sss dd/MM/yyyy'),t.title=g('i18n')('copy',a.loc.ale,'attack_view'),c.getModal('!twoverflow_attack_view_show_text_modal',t)},y=function(e){const n=g('readableDateFilter')(1e3*(e.time_completed-10),a.loc.ale,a.GAME_TIMEZONE,a.GAME_TIME_OFFSET,'H:mm:ss:sss dd/MM/yyyy');t.setCommander(e,n)},S=function(){let e=v('#two-attack-view').parent(),t=v('#wrapper');e.toggleClass('fullsize'),t.toggleClass('window-fullsize')},I=function(){const e=E.pagination.offset,t=E.pagination.limit;E.visibleCommands=E.commands.slice(e,e+t),
E.pagination.count=E.commands.length},k=function(){const e=Date.now();for(let t=0;t<E.commands.length;t++)100===E.commands[t].model.percent(e)&&E.commands.splice(t,1);I()},x=function(e,a){t.toggleFilter(e,a),E.filters=t.getFilters()},R=function(e){t.toggleSorting(e),E.sorting=t.getSortings()},M=function(){E.commands=t.getCommands()},L=function(){E.selectedVillageId=i.getSelectedVillage().getId()},O=function(){E=a.$new(),E.commandQueueEnabled=t.commandQueueEnabled(),E.commands=t.getCommands(),E.selectedVillageId=i.getSelectedVillage().getId(),E.filters=t.getFilters(),E.sorting=t.getSortings(),E.UNIT_TYPES=h,E.FILTER_TYPES=u,E.COMMAND_TYPES=d,E.UNIT_SPEED_ORDER=_,E.COLUMN_TYPES=l,E.pagination={count:E.commands.length,offset:0,loader:I,limit:m.getPaginationLimit()},E.openCharacterProfile=r.openCharacterProfile,E.openVillageInfo=r.openVillageInfo,E.jumpToVillage=p.jumpToVillage,E.now=T,E.copyTimeModal=A,E.removeTroops=y,E.switchWindowSize=S,E.toggleFilter=x,E.toggleSorting=R,I()
;let e=new n('twoverflow_queue_window',(function(){f.timer.remove(k)}));e.register(s.MAP_SELECTED_VILLAGE,L,!0),e.register(s.ATTACK_VIEW_COMMANDS_LOADED,M),e.register(s.ATTACK_VIEW_COMMAND_CANCELLED,M),e.register(s.ATTACK_VIEW_COMMAND_IGNORED,M),e.register(s.ATTACK_VIEW_VILLAGE_RENAMED,M),c.getScreenWithInjectedScope('!twoverflow_attack_view_main',E),f.timer.add(k)};return function(){w=e.addMenuButton('Strażnik',40),w.addEventListener('click',O),
e.addTemplate('twoverflow_attack_view_main',"<div id=\"two-attack-view\" class=\"win-content two-window\"><header class=\"win-head\"><h2>Strażnik</h2><ul class=\"list-btn\"><li><a href=\"#\" class=\"size-34x34 btn-orange icon-26x26-double-arrow\" ng-click=\"switchWindowSize()\"></a><li><a href=\"#\" class=\"size-34x34 btn-red icon-26x26-close\" ng-click=\"closeWindow()\"></a></ul></header><div class=\"win-main\" scrollbar=\"\"><div class=\"box-paper\"><div class=\"scroll-wrap rich-text\"><div class=\"filters\"><table class=\"tbl-border-light\"><tr><th>{{ 'village' | i18n:loc.ale:'common' }}<tr><td><div class=\"box-border-dark icon\" ng-class=\"{'active': filters[FILTER_TYPES.VILLAGE]}\" ng-click=\"toggleFilter(FILTER_TYPES.VILLAGE)\" tooltip=\"\" tooltip-content=\"{{ 'current_only_tooltip' | i18n:loc.ale:'attack_view' }}\"><span class=\"icon-34x34-village-info icon-bg-black\"></span></div></table><table class=\"tbl-border-light\"><tr><th>{{ 'filter_types' | i18n:loc.ale:'attack_view' }}<tr><td><div class=\"box-border-dark icon\" ng-class=\"{'active': filters[FILTER_TYPES.COMMAND_TYPES][COMMAND_TYPES.ATTACK]}\" ng-click=\"toggleFilter(FILTER_TYPES.COMMAND_TYPES, COMMAND_TYPES.ATTACK)\" tooltip=\"\" tooltip-content=\"{{ 'filter_show_attacks_tooltip' | i18n:loc.ale:'attack_view' }}\"><span class=\"icon-34x34-attack icon-bg-black\"></span></div><div class=\"box-border-dark icon\" ng-class=\"{'active': filters[FILTER_TYPES.COMMAND_TYPES][COMMAND_TYPES.SUPPORT]}\" ng-click=\"toggleFilter(FILTER_TYPES.COMMAND_TYPES, COMMAND_TYPES.SUPPORT)\" tooltip=\"\" tooltip-content=\"{{ 'filter_show_supports_tooltip' | i18n:loc.ale:'attack_view' }}\"><span class=\"icon-34x34-support icon-bg-black\"></span></div><div class=\"box-border-dark icon\" ng-class=\"{'active': filters[FILTER_TYPES.COMMAND_TYPES][COMMAND_TYPES.RELOCATE]}\" ng-click=\"toggleFilter(FILTER_TYPES.COMMAND_TYPES, COMMAND_TYPES.RELOCATE)\" tooltip=\"\" tooltip-content=\"{{ 'filter_show_relocations_tooltip' | i18n:loc.ale:'attack_view' }}\"><span class=\"icon-34x34-relocate icon-bg-black\"></span></div></table><table class=\"tbl-border-light\"><tr><th>{{ 'filter_incoming_units' | i18n:loc.ale:'attack_view' }}<tr><td><div ng-repeat=\"unit in ::UNIT_SPEED_ORDER\" class=\"box-border-dark icon\" ng-class=\"{'active': filters[FILTER_TYPES.INCOMING_UNITS][unit]}\" ng-click=\"toggleFilter(FILTER_TYPES.INCOMING_UNITS, unit)\" tooltip=\"\" tooltip-content=\"{{ unit | i18n:loc.ale:'unit_names' }}\"><span class=\"icon-34x34-unit-{{ unit }} icon-bg-black\"></span></div></table></div><div class=\"page-wrap\" pagination=\"pagination\"></div><p class=\"text-center\" ng-show=\"!visibleCommands.length\">{{ 'no_incoming' | i18n:loc.ale:'attack_view' }}<table class=\"tbl-border-light commands-table\" ng-show=\"visibleCommands.length\"><col width=\"8%\"><col width=\"14%\"><col><col><col width=\"4%\"><col width=\"15%\"><col width=\"11%\"><thead class=\"sorting\"><tr><th ng-click=\"toggleSorting(COLUMN_TYPES.COMMAND_TYPE)\" tooltip=\"\" tooltip-content=\"{{ 'command_type_tooltip' | i18n:loc.ale:'attack_view' }}\">{{ 'command_type' | i18n:loc.ale:'attack_view' }} <span class=\"arrow\" ng-show=\"sorting.column == COLUMN_TYPES.COMMAND_TYPE\" ng-class=\"{'icon-26x26-normal-arrow-down': sorting.reverse, 'icon-26x26-normal-arrow-up': !sorting.reverse}\"></span><th ng-click=\"toggleSorting(COLUMN_TYPES.ORIGIN_CHARACTER)\">{{ 'player' | i18n:loc.ale:'common' }} <span class=\"arrow\" ng-show=\"sorting.column == COLUMN_TYPES.ORIGIN_CHARACTER\" ng-class=\"{'icon-26x26-normal-arrow-down': sorting.reverse, 'icon-26x26-normal-arrow-up': !sorting.reverse}\"></span><th ng-click=\"toggleSorting(COLUMN_TYPES.ORIGIN_VILLAGE)\">{{ 'origin' | i18n:loc.ale:'common' }} <span class=\"arrow\" ng-show=\"sorting.column == COLUMN_TYPES.ORIGIN_VILLAGE\" ng-class=\"{'icon-26x26-normal-arrow-down': sorting.reverse, 'icon-26x26-normal-arrow-up': !sorting.reverse}\"></span><th ng-click=\"toggleSorting(COLUMN_TYPES.TARGET_VILLAGE)\">{{ 'target' | i18n:loc.ale:'common' }} <span class=\"arrow\" ng-show=\"sorting.column == COLUMN_TYPES.TARGET_VILLAGE\" ng-class=\"{'icon-26x26-normal-arrow-down': sorting.reverse, 'icon-26x26-normal-arrow-up': !sorting.reverse}\"></span><th tooltip=\"\" tooltip-content=\"{{ 'slowest_unit_tooltip' | i18n:loc.ale:'attack_view' }}\">{{ 'slowest_unit' | i18n:loc.ale:'attack_view' }}<th ng-click=\"toggleSorting(COLUMN_TYPES.TIME_COMPLETED)\">{{ 'arrive' | i18n:loc.ale:'common' }} <span class=\"arrow\" ng-show=\"sorting.column == COLUMN_TYPES.TIME_COMPLETED\" ng-class=\"{'icon-26x26-normal-arrow-down': sorting.reverse, 'icon-26x26-normal-arrow-up': !sorting.reverse}\"></span><th>{{ 'actions' | i18n:loc.ale:'attack_view' }}<tbody><tr ng-repeat=\"command in visibleCommands\" class=\"{{ command.command_type }}\" ng-class=\"{'snob': command.slowestUnit === UNIT_TYPES.SNOB}\"><td><span class=\"icon-20x20-{{ command.command_type }}\"></span><td ng-click=\"openCharacterProfile(command.originCharacter.id)\" class=\"character\"><span class=\"name\">{{ command.originCharacter.name }}</span><td ng-class=\"{'selected': command.originVillage.id === selectedVillageId}\" class=\"village\"><span class=\"name\" ng-click=\"openVillageInfo(command.originVillage.id)\">{{ command.originVillage.name }}</span> <span class=\"coords\" ng-click=\"jumpToVillage(command.originVillage.x, command.originVillage.y)\">({{ command.originVillage.x }}|{{ command.originVillage.y }})</span><td ng-class=\"{'selected': command.targetVillage.id === selectedVillageId}\" class=\"village\"><span class=\"name\" ng-click=\"openVillageInfo(command.targetVillage.id)\">{{ command.targetVillage.name }}</span> <span class=\"coords\" ng-click=\"jumpToVillage(command.targetVillage.x, command.targetVillage.y)\">({{ command.targetVillage.x }}|{{ command.targetVillage.y }})</span><td><span class=\"icon-20x20-unit-{{ command.slowestUnit }}\"></span><td><div class=\"progress-wrapper\" tooltip=\"\" tooltip-content=\"{{ command.model.arrivalTime() | readableDateFilter:loc.ale:GAME_TIMEZONE:GAME_TIME_OFFSET }}\"><div class=\"progress-bar\" ng-style=\"{width: command.model.percent() + '%'}\"></div><div class=\"progress-text\"><span>{{ command.model.countdown() }}</span></div></div><td><a ng-click=\"copyTimeModal(command.time_completed)\" class=\"btn btn-orange size-20x20 icon-20x20-arrivetime\" tooltip=\"\" tooltip-content=\"{{ 'commands_copy_arrival_tooltip' | i18n:loc.ale:'attack_view' }}\"></a> <a ng-click=\"copyTimeModal(command.time_completed + (command.time_completed - command.time_start))\" class=\"btn btn-red size-20x20 icon-20x20-backtime\" tooltip=\"\" tooltip-content=\"{{ 'commands_copy_backtime_tooltip' | i18n:loc.ale:'attack_view' }}\"></a> <a ng-if=\"commandQueueEnabled\" ng-click=\"removeTroops(command)\" class=\"btn btn-orange size-20x20 icon-20x20-units-outgoing\" tooltip=\"\" tooltip-content=\"{{ 'commands_set_remove_tooltip' | i18n:loc.ale:'attack_view' }}\"></a></table><div class=\"page-wrap\" pagination=\"pagination\"></div></div></div></div></div>"),
e.addTemplate('twoverflow_attack_view_show_text_modal',"<div id=\"show-text-modal\" class=\"win-content\"><header class=\"win-head\"><h3>{{ title }}</h3><ul class=\"list-btn sprite\"><li><a href=\"#\" class=\"btn-red icon-26x26-close\" ng-click=\"closeWindow()\"></a></ul></header><div class=\"win-main\" scrollbar=\"\"><div class=\"box-paper\"><div class=\"scroll-wrap\"><form ng-submit=\"closeWindow()\"><input class=\"input-border text-center\" ng-model=\"text\"></form></div></div></div><footer class=\"win-foot sprite-fill\"><ul class=\"list-btn list-center\"><li><a href=\"#\" class=\"btn-green btn-border\" ng-click=\"closeWindow()\">OK</a></ul></footer></div>"),
e.addStyle('#two-attack-view table.commands-table{table-layout:fixed;font-size:13px;margin-bottom:10px}#two-attack-view table.commands-table th{text-align:center;padding:0px}#two-attack-view table.commands-table td{padding:1px 0;min-height:initial;border:none;text-align:center}#two-attack-view table.commands-table tr.attack.snob td{background:#bb8658}#two-attack-view table.commands-table tr.support td,#two-attack-view table.commands-table tr.relocate td{background:#9c9368}#two-attack-view table.commands-table .empty td{height:32px}#two-attack-view table.commands-table .sorting .arrow{margin-top:-4px}#two-attack-view .village .coords{font-size:11px;color:#71471a}#two-attack-view .village .coords:hover{color:#ffde00;text-shadow:0 1px 0 #000}#two-attack-view .village .name:hover{color:#fff;text-shadow:0 1px 0 #000}#two-attack-view .village.selected .name{font-weight:bold}#two-attack-view .character .name:hover{color:#fff;text-shadow:1px 1px 0 #000}#two-attack-view .progress-wrapper{height:20px;margin-bottom:0}#two-attack-view .progress-wrapper .progress-text{position:absolute;width:100%;height:100%;text-align:center;z-index:10;padding:0 5px;line-height:20px;color:#f0ffc9;overflow:hidden}#two-attack-view .filters{height:95px;margin-bottom:10px}#two-attack-view .filters table{width:auto;float:left;margin:5px}#two-attack-view .filters .icon{width:38px;float:left;margin:0 6px}#two-attack-view .filters .icon.active:before{box-shadow:0 0 0 1px #000,-1px -1px 0 2px #ac9c44,0 0 0 3px #ac9c44,0 0 0 4px #000;border-radius:1px;content:"";position:absolute;width:38px;height:38px;left:-1px;top:-1px}#two-attack-view .filters td{padding:6px}#two-attack-view .icon-20x20-backtime{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAEMklEQVQ4y42US2xUdRTGf3funZn/PHqnnVdpKZZ2RCWBVESgoZogSAKKEEAlGhVNLMGg0QiJKxYudIdoTEyDj8SFGo2seDUGhEQqRHk/UimDpdAptHMr8+jM3Dv35QJbi9KEszzJ+eU753z5JKYuOQGBUpAa2SLiuPgBPBKGrZAPlSlmoQLYk4ekqUCmEHHL0pslRb7fsNwWF8L/DIz5Fanftey0oogBr65rk8HS3WC6jyY8ckfZdNtfWdX++tzGIDMabAJmArte4my/l/c//vaLoFc6jmP3iCqD41B5Mi0BId1Hk+V6ljfEQlvWL2xZoY/lKOTLGCY01tZhVLMkRJEtqzoeyUvSnN70SNZRXC1iUylDVZmszhQiDmbH9Lrgpta4mKPlCjy95D6Wrn8GAKFEEfEmdG2Qowd+4I0XFrUC7+w7eL5sCu8hdL3imaQuYFl6c9l021vjYk7Y72Xjq4/z1IaNCCVKMRckq+moiQDJ2bN48uV3GbnSx9b1ra1l0223LL05AYF/Vw4S80jyonnN6paq5YTe3LyU2rpaYrFpJGfPItlcTzI1H8R8cC38NTFiaojhSzeJJ8KNJ/4YOmP43GsTCmWLiGG5LTUBb2LuzGm3e3Ij3321m5Hey6A0AVAcPjmhQcSbuDyU5sF6e5phuS2yRWQC6Lj4x62h1vjJ3BwjlUoiYn52ffolmUtnuXj4ADu2b7/DFoN9RVQ1gAthx8U/+Sk4LiGAQtFAHzXIajpr16yiu/tX98euzyWAzrc6Abj8+1G0TIZ8uYx/xJpgjANlWfEKqjaZbIlixQQgdDHDyuULWLFisZTVdBJxQTIVA2uQ+qZ6KoU0nhqV09f+QoIxj4ThAWRVJWLZToNXUaarYR8Hdm+iZBic7N5LbmgI0xclERcAFLIVAHRtkFOHjwBwNHNryK9I/bZCXlFVIk6ZuSbukidmR1Z+/cliAHzRBjKjBTq37bz9gEAAgA+2vQjAjb4j9F6pUCga/Hzm5v6A5KRDFkXF1UnWRcRj256d/vam9zrJXT0GwGc7V+ONRwAwtTwAa9bs4ND+PTy8MMW5az7+vJ7lXKZ4IeiVjsuIgaylVxTHxf/S84+u3bh5Mbmrx/D6Y1hjGtaYBjduH9g0RonNSmH4o/T1j9JzeoBixSRbsi9ktNIuRXJ6vFVbA2ypVoiZNuay+qj62r6u1R0ee4i65Iw7rDEOnLegC4CSqwxf18b23C0cFMenF5wKJzLZfLDtuW/4pWt1Ry6XY8/ug8jRB6gN3GI0k6VtXcq9csvqtm2rTyjS+YDkpGXEgLdq/z++EhA2hYjbmMtMx7P8+4/Wbdj64U89/cP5Xlli2HGcUsAnjziulMGxbrheRu4lYH21QjSarvXQoraZbQC/nUoflzwMyx6hVz26MRVkysROQNhQ8XmqQr1XwH/rb2Du69Eebp25AAAAAElFTkSuQmCC")}#two-attack-view .icon-20x20-arrivetime{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAEW0lEQVQ4y4WUWWxUZRiGn7PMnNPOVtvODHQBSlulAUFBoQiEaBHBhCsSFaIhIe6JSyAkRkO8NpErY2KoYuINISkkRFAjEUyAUCQsBSu1BVpKZ2DmTNuZzsyZMz3L70Vbgkjqe/Ul//89//K9eSX+KyUKFcVKQopDxBNoALJE2VXJBUzyBpQA9xG9SA+DbF2vdRxrvqQqLWVHNAkITm8saKo0KBz3hqrqt32WlXkUWHoQZvlpQFbWmLZo//zj7W8ua7JRUoKSz+DOXYVrSZMfjnV/W+mTuvHcs/okIw9DFYAoBCw/DY6QX9yycemer9/p6KiQE7ilIj4vwNXBFIO3M1iFLKta4suNvLUwZzpZTxWZiEvJhMkHgYpf1+cKSazfsnHpnve2rVqYTg2xdvMrPL76JWKNNSxesYB1LyyDiQQ9fWkCmhxzkRuLZTcpVC1lOU4eEDNPDUzitJVc6eUDn6zuSAwl2PDGLqrnx9ECPob6kkxaPiLBEK1LniIaFVz/c4SAJsf6U2ZaEfZwxMOYuaVCJTWypKz68LXV7y6sigWf7thMdfMKkMOgryA2r5pYYwWBaA3FzBhFM8uiRXFOnumn/jGt0SjYl8t+MWzbFABkxSFSdkTTE3F3zkDyBnptw/2J5VMXpwq1gfT1AQ4eOIyi1AHw5II5hCp80bIjmhSHyEyP7Ak0AcFwuIKR/vy/PLVv7156T/1M4u8e9n/1HXqNRnNzjMS9AuGQBlMfF5zxKoA6U2hph5xp0nv+ErX1KVqfXctbH+yk65tOAOa1tolNm56TjIyFNVpmIl8GwBMEHnSzKkuUJUHh8vAYcihMIFQi3hAHZ4T65hq27dyKkbGI1uqS7a/mXO8F+gZGuDZ0j4nClFsU1adj2wrgyq5KTlOlwTOJ8STApVO/Y2VGAJgwSgBEa3VsfzXZZJKLvxyjWC7z8+G3CQf9+FS13nG9ueEwEUBRqmywEfrAvWLF4rqq5fmiwCvcIjuqYCTu8v5nnXQd7+bgoZ/48dduXF8F4ZpaNj0/j60bgly+YLTeNMyUYosxPUhONaBUpeq3K7G7T/Ym2pfWh5ZU1MzBX/0XV/64iVYe4+jR3QD4aqeGaWdylPNjABw9upv9X3R+9GVXwsjmrZQCiJDjOI4scjnTyZZc0ZhKJmM9PcNYlsu4CLJjez3jt65ij45jpZPYhVG8SRNFrcQc7eeZ9evIl9xI96Xh4yqAAaXoJCOW3zuRGjfNwbRob6wNbkkYxTizaDx9B0+pY93rnWdTYxPf+xQ9p0yvCRPciEtJqFpKEfZwyXaupArOYLbM+JK2lS3HDhyRbgwanO6eoPvEaWLxOixLY+WOrrP5onUI4Z2TdMeQZgtYySaGrM6VJVFfmnRjsiwHXEG8KR5p2/fpxjWv7jpyyCd7JxR8v03nY0Fidt2H+z1dcz1LFx7xlctb2gHO9wz1+CS1L2tZSabD4f+Asx7g+a0JbYJJg6lgAPgHUh4QWRIJr4EAAAAASUVORK5CYII=")}')
}})),define('two/attackView/types/columns',[],(function(){return{ORIGIN_VILLAGE:'origin_village_name',COMMAND_TYPE:'command_type',TARGET_VILLAGE:'target_village_name',TIME_COMPLETED:'time_completed',ORIGIN_CHARACTER:'origin_character_name'}})),define('two/attackView/types/commands',[],(function(){return{ATTACK:'attack',SUPPORT:'support',RELOCATE:'relocate'}})),define('two/attackView/types/filters',[],(function(){return{COMMAND_TYPES:'command_types',VILLAGE:'village',INCOMING_UNITS:'incoming_units'}})),define('two/attackView/unitSpeedOrder',['conf/unitTypes'],(function(e){return[e.LIGHT_CAVALRY,e.HEAVY_CAVALRY,e.AXE,e.SWORD,e.RAM,e.SNOB,e.TREBUCHET]})),require(['two/ready','two/attackView','two/attackView/ui','two/attackView/events'],(function(e,t,a){if(t.isInitialized())return!1;e((function(){t.init(),a()}))})),define('two/autoCollector',['queues/EventQueue'],(function(e){let t=!1,n=!1,r=!0,c=0;const d=function(){o.emit(l.RESOURCE_DEPOSIT_GET_INFO,{})},u=function(){if(!n)return!1
;let e=i.getSelectedCharacter().getResourceDeposit();if(!e)return!1;if(e.getCurrentJob())return!1;let t=e.getCollectibleJobs();if(t)return a=t.shift(),void o.emit(l.RESOURCE_DEPOSIT_COLLECT,{job_id:a.id,village_id:i.getSelectedVillage().getId()});var a;let s=e.getReadyJobs();return s?function(e){o.emit(l.RESOURCE_DEPOSIT_START_JOB,{job_id:e.id})}(p(s)):void 0},p=function(e){return e.sort((function(e,t){return e.duration-t.duration}))[0]};let g={};return g.init=function(){t=!0,a.$on(s.RESOURCE_DEPOSIT_JOB_COLLECTIBLE,(function(){if(!r||!n)return!1;r=!1,setTimeout((function(){r=!0,u()}),1500)})),a.$on(s.RESOURCE_DEPOSIT_JOBS_REROLLED,u),a.$on(s.RESOURCE_DEPOSIT_JOB_COLLECTED,u),a.$on(s.RESOURCE_DEPOSIT_INFO,(function(e,t){u(),function(e){const t=1e3*e.time_next_reset-Date.now()+1e3;clearTimeout(c),c=setTimeout(d,t)}(t)}))},g.start=function(){e.trigger(s.AUTO_COLLECTOR_STARTED),n=!0,u()},g.stop=function(){e.trigger(s.AUTO_COLLECTOR_STOPPED),n=!1},g.isRunning=function(){return n},
g.isInitialized=function(){return t},g})),define('two/autoCollector/events',[],(function(){angular.extend(s,{AUTO_COLLECTOR_STARTED:'auto_collector_started',AUTO_COLLECTOR_STOPPED:'auto_collector_stopped',AUTO_COLLECTOR_SECONDVILLAGE_STARTED:'auto_collector_secondvillage_started',AUTO_COLLECTOR_SECONDVILLAGE_STOPPED:'auto_collector_secondvillage_stopped'})})),define('two/autoCollector/ui',['two/ui','two/autoCollector','two/utils','queues/EventQueue'],(function(e,t,n,i){let o;return function(){return o=e.addMenuButton('Kolekcjoner',50,g('i18n')('description',a.loc.ale,'auto_collector')),o.addEventListener('click',(function(){t.isRunning()?(t.stop(),t.secondVillage.stop(),n.notif('success',g('i18n')('deactivated',a.loc.ale,'auto_collector'))):(t.start(),t.secondVillage.start(),n.notif('success',g('i18n')('activated',a.loc.ale,'auto_collector')))})),i.register(s.AUTO_COLLECTOR_STARTED,(function(){o.classList.remove('btn-orange'),o.classList.add('btn-red')})),
i.register(s.AUTO_COLLECTOR_STOPPED,(function(){o.classList.remove('btn-red'),o.classList.add('btn-orange')})),t.isRunning()&&i.trigger(s.AUTO_COLLECTOR_STARTED),opener}})),define('two/autoCollector/secondVillage',['two/autoCollector','two/utils','queues/EventQueue','helper/time','models/SecondVillageModel'],(function(e,t,n,r,c){let d=!1,u=!1,p=!1,g=injector.get('secondVillageService');const m=function(){var e;e=_,o.emit(l.SECOND_VILLAGE_GET_INFO,{},(function(t){if(g.hasFinishedLastJob(t.jobs))p=!0,o.emit(l.SECOND_VILLAGE_FINISH_VILLAGE),h.stop();else{let a=new c(t);i.getSelectedCharacter().setSecondVillage(a),e()}}))},_=function(){let e=i.getSelectedCharacter().getSecondVillage();if(!u||!e||!e.isAvailable())return!1;const a=function(e){const t=Date.now();for(let a in e)if(e[a].time_started&&e[a].time_completed&&t<r.server2ClientTime(e[a].time_completed))return e[a];return!1}(e.data.jobs);if(a){const e=r.server2ClientTime(a.time_completed)-Date.now()+1e3;return setTimeout(m,e),!1}
const n=function(e){const t=Date.now();for(let a in e)if(e[a].time_started&&e[a].time_completed&&t>=r.server2ClientTime(e[a].time_completed)&&!e[a].collected)return a;return!1}(e.data.jobs);if(n)return s=n,void o.emit(l.SECOND_VILLAGE_COLLECT_JOB_REWARD,{village_id:i.getSelectedVillage().getId(),job_id:s});var s;const c=g.getCurrentDayJobs(e.data.jobs,e.data.day),d=g.getCollectedJobs(e.data.jobs),p=i.getSelectedVillage().getResources().getResources(),_=g.getAvailableJobs(c,d,p,[]);if(_){const e=function(e){let a=!1;return t.each(e,(function(e){return a=e,!1})),a}(_);!function(e,t){o.emit(l.SECOND_VILLAGE_START_JOB,{village_id:i.getSelectedVillage().getId(),job_id:e.id},t)}(e,(function(){const t=_[e];t?setTimeout(m,1e3*t.duration+1e3):setTimeout(m,6e4)}))}};let h={start:function(){if(!d||p)return!1;n.trigger(s.AUTO_COLLECTOR_SECONDVILLAGE_STARTED),u=!0,m()},stop:function(){if(!d)return!1;n.trigger(s.AUTO_COLLECTOR_SECONDVILLAGE_STOPPED),u=!1},isRunning:function(){return u},
isInitialized:function(){return d},init:function(){if(!g.isFeatureActive())return!1;d=!0,o.emit(l.SECOND_VILLAGE_GET_INFO,{},(function(e){g.hasFinishedLastJob(e.jobs)?(p=!0,o.emit(l.SECOND_VILLAGE_FINISH_VILLAGE)):(a.$on(s.SECOND_VILLAGE_VILLAGE_CREATED,m),a.$on(s.SECOND_VILLAGE_JOB_COLLECTED,m))}))}};e.secondVillage=h})),require(['two/ready','two/autoCollector','two/autoCollector/ui','Lockr','queues/EventQueue','two/autoCollector/secondVillage','two/autoCollector/events'],(function(e,t,a,n,i){const o='auto_collector_active';if(t.isInitialized())return!1;e((function(){t.init(),t.secondVillage.init(),a(),e((function(){n.get(o,!1,!0)&&(t.start(),t.secondVillage.start()),i.register(s.AUTO_COLLECTOR_STARTED,(function(){n.set(o,!0)})),i.register(s.AUTO_COLLECTOR_STOPPED,(function(){n.set(o,!1)}))}),['initial_village'])}))})),define('two/autoHealer',['two/utils','queues/EventQueue'],(function(e,t){let n=!1,r=!1;let c={init:function(){n=!0}};return c.start=function(){
t.trigger(s.AUTO_HEALER_STARTED),r=!0,function(){if(!r)return!1;console.log('Medyk uruchomiony'),i.getSelectedCharacter().getVillageList().forEach((function(e,t){let a=e.hospital.patients.healed;0==a.length?console.log('W wiosce '+e.getName()+' brak jednostek do wyleczenia.'):setTimeout((function(){a.forEach((function(t,a){setTimeout((function(){o.emit(l.HOSPITAL_RELEASE_PATIENT,{village_id:e.getId(),patient_id:t.id})}),1e3*a),console.log('W wiosce: '+e.getName()+' wyleczono: '+t.id)}))}),3e3*t)})),e.notif('success',g('i18n')('deactivated',a.loc.ale,'auto_healer')),console.log('Medyk zatrzymany'),c.stop()}()},c.stop=function(){t.trigger(s.AUTO_HEALER_STOPPED),r=!1},c.isRunning=function(){return r},c.isInitialized=function(){return n},c})),define('two/autoHealer/events',[],(function(){angular.extend(s,{AUTO_HEALER_STARTED:'auto_healer_started',AUTO_HEALER_STOPPED:'auto_healer_stopped'})})),
define('two/autoHealer/ui',['two/ui','two/autoHealer','two/utils','queues/EventQueue'],(function(e,t,n,i){let o;return function(){return o=e.addMenuButton('Medyk',70,g('i18n')('description',a.loc.ale,'auto_healer')),o.addEventListener('click',(function(){t.isRunning()?(t.stop(),n.notif('success',g('i18n')('deactivated',a.loc.ale,'auto_healer'))):(t.start(),n.notif('success',g('i18n')('activated',a.loc.ale,'auto_healer')))})),i.register(s.AUTO_HEALER_STARTED,(function(){o.classList.remove('btn-orange'),o.classList.add('btn-red')})),i.register(s.AUTO_HEALER_STOPPED,(function(){o.classList.remove('btn-red'),o.classList.add('btn-orange')})),t.isRunning()&&i.trigger(s.AUTO_HEALER_STARTED),opener}})),require(['two/ready','two/autoHealer','two/autoHealer/ui','Lockr','queues/EventQueue','two/autoHealer/events'],(function(e,t,a,n,i){const o='auto_healer_active';if(t.isInitialized())return!1;e((function(){t.init(),a(),e((function(){n.get(o,!1,!0)&&t.start(),
i.register(s.AUTO_HEALER_STARTED,(function(){n.set(o,!0)})),i.register(s.AUTO_HEALER_STOPPED,(function(){n.set(o,!1)}))}),['initial_village'])}))})),define('two/battleCalculator',['two/ready'],(function(e){let t={init:function(){t.initialized=!0},run:function(){e((function(){}),['initial_village'])}};return t})),define('two/battleCalculator/ui',['two/ui','two/EventScope','two/battleCalculator','queues/EventQueue','struct/MapData','two/utils'],(function(e,t,n,o,l,r){let d,u,p=!1;const m={BATTLE:'battle',TROOPS:'troops',BASHPOINTS:'bashpoints'}
;var _,h,b,f,v,E,w,T,A,y,S,I,k,x,R,M,L,O,N,C,D,P,z,G,B,U,V,q,W,F,j,Y,H,Q,K,Z,X,J,$,ee,te,ae,ne,ie,oe,le,se,re,ce,de,ue,pe,ge,me,_e,he,be,fe,ve,Ee,we,Te,Ae,ye,Se,Ie,ke,xe,Re,Me,Le,Oe,Ne,Ce,De,Pe,ze,Ge,Be,Ue,Ve,qe,We,Fe,je,Ye,He,Qe,Ke,Ze,Xe,Je,$e,et,tt,at,nt,it,ot,lt,st,rt,ct,dt,ut,pt,gt,mt,_t,ht,bt,ft,vt,Et,wt,Tt,At,yt,St,It,kt,xt,Rt,Mt,Lt,Ot,Nt,Ct,Dt,Pt,zt,Gt,Bt,Ut,Vt,qt,Wt,Ft,jt,Yt,Ht,Qt,Kt,Zt,Xt,Jt,$t,ea,ta,aa,na,ia,oa,la,sa,ra,ca,da,ua,pa,ga,ma,_a,ha,ba,fa,va,Ea,wa,Ta,Aa,ya,Sa,Ia,ka,xa,Ra,Ma,La,Oa,Na,Ca,Da,Pa,za,Ga,Ba,Ua,Va,qa,Wa,Fa,ja,Ya={},Ha=function(){(void 0).on('click',(function(){
var e=[1,2,4,2,13,12,15,8,10,20,200,0,25],t=[4,5,1,5,5,6,23,4,12,40,200,25,10],a=[25,55,10,10,30,40,200,20,100,250,100,200,100],n=[45,5,5,30,40,30,160,50,50,400,50,250,100],i=[10,30,10,60,30,50,180,20,100,150,100,200,50],o=parseInt(document.getElementById('archerA').value),l=parseInt(document.getElementById('archerD').value),s=[10,25,45,25,130,150,150,2,100,150,30,30,300],r=parseInt(document.getElementById('axeA').value),c=parseInt(document.getElementById('axeD').value),d=parseInt(document.getElementById('berserkerA').value),u=parseInt(document.getElementById('berserkerD').value),p=parseInt(document.getElementById('catapultA').value),g=parseInt(document.getElementById('catapultD').value),m=parseInt(document.getElementById('buildingLevel').value),kt=[1,1,1,1,4,5,6,5,8,1,100,10,6],xt=parseInt(document.getElementById('hcA').value),Rt=parseInt(document.getElementById('hcD').value),Mt=parseInt(document.getElementById('knightA').value),Lt=parseInt(document.getElementById('knightD').value),Ot=parseInt(document.getElementById('lcA').value),Nt=parseInt(document.getElementById('lcD').value),Ct=parseInt(document.getElementById('luck').value),Dt=parseInt(document.getElementById('maA').value),Pt=parseInt(document.getElementById('maD').value),zt=parseInt(document.getElementById('morale').value),Gt=parseInt(document.getElementById('ramA').value),Bt=parseInt(document.getElementById('ramD').value),Ut=parseInt(document.getElementById('snobA').value),Vt=parseInt(document.getElementById('snobD').value),qt=parseInt(document.getElementById('spearA').value),Wt=parseInt(document.getElementById('spearD').value),Ft=parseInt(document.getElementById('swordA').value),_a=parseInt(document.getElementById('swordD').value),ha=parseInt(document.getElementById('trebuchetA').value),ba=parseInt(document.getElementById('trebuchetD').value),fa=parseInt(document.getElementById('wall').value),va=0,Ea=0,wa=0,Ta=0,Aa=0,ya=0,Sa=0,Ia=0,ka=0,xa=0,Ra=0,Ma=0,La=0,Oa=0,Na=0,Ca=0,Da=0,Pa=0,za=0,Ga=0,Ba=0,Ua=0,Va=0,qa=0,Wa=0,Fa=0,ja=0,Ya=0,Ha=0,Qa=0,Ka=0,Za=0,Xa=0,Ja=0,$a=0,en=0,tn=0,an=0,nn=0,on=0,ln=0,sn=0,rn=0,cn=0,dn=0,un=0,pn=0,gn=0,mn=0,_n=0,hn=0,bn=0,fn=0,vn=0,En=0,wn=0,Tn=0,An=0,yn=0,Sn=0,In=0,kn=0,xn=0,Rn=0,Mn=0,Ln=0,On=0,Nn=0,Cn=0,Dn=0,Pn=0,zn=0,Gn=0,Bn=0,Un=0,Vn=0,qn=0,Wn=0,Fn=0,jn=0,Yn=0,Hn=0,Qn=0,Kn=0,Zn=0,Xn=0,Jn=0,$n=0,ei=0,ti=0,ai=0,ni=0,ii=0,oi=0,li=0,si=0,ri=0,ci=0,di=0,ui=0,pi=0,gi=0,mi=0,_i=0,hi=0,bi=0,fi=[1,1],vi=[1,1],Ei=[1,1],wi=[1,1],Ti=[1,1],Ai=[1,1],yi=[1,1],Si=[1,1],Ii=[1,1],ki=[1,1],xi=[1,1],Ri=[1,1],Mi=[1,1],Li=[1,1],Oi=[1,1],Ni=[1,1],Ci=[1,1],Di=[1,1],Pi=[1,1],zi=[1,1],Gi=[1,1],Bi=[1,1],Ui=[1,1],Vi=[1,1],qi=[1,1],Wi=[1,1],Fi=[1,1],ji=[1,1],Yi=[1,1],Hi=[1,1],Qi=[1,1],Ki=[1,1],Zi=[1,1],Xi=[1,1],Ji=[1,1],$i=[1,1],eo=0,to=0,ao=0,no=0,io=0,oo=0,lo=0,so=0,ro=0,co=0,uo=0,po=0,go=0,mo=0,_o=0,ho=0,bo=0,fo=0,vo=0,Eo=0,wo=0,To=0,Ao=0,yo=0,So=0,Io=0,ko=0,xo=0,Ro=0,Mo=0,Lo=0,Oo=0,No=0,Co=0,Do=0,Po=0,zo=[1,1],Go=0,Bo=0,Uo=0,Vo=0,qo=0,Wo=0,Fo=0,jo=0,Yo=0,Ho=0,Qo=0,Ko=0,Zo=0,Xo=0,Jo=0,$o=0,el=0,tl=0,al=0,nl=0,il=0,ol=0,ll=0,sl=0,rl=0,cl=0,dl=0,ul=0,pl=0,gl=0,ml=0,_l=0,hl=0,bl=0,fl=0,vl=0,El=0,wl=0,Tl=0,Al=0,yl=0,Sl=0,Il=0,kl=[1,1],xl=[1,1],Rl=[1,1],Ml=[1,1],Ll=[1,1],Ol=[1,1],Nl=[1,1],Cl=[1,1],Dl=[1,1],Pl=0,zl=0,Gl=0,Bl=0,Ul=0,Vl=0,ql=0,Wl=0,Fl=0,jl=0,Yl=0,Hl=0,Ql=0,Kl=0,Zl=0,Xl=0,Jl=0,$l=0,es=0,ts=0,as=0,ns=0,is=0,os=0,ls=0,ss=0,rs=0,cs=0,ds=0,us=0,ps=0,gs=0,ms=0,_s=0,hs=0,bs=0,fs=0,vs=0,Es=0,ws=0,Ts=0,As=0,ys=0,Ss=0,Is=0,ks=0,xs=0,Rs=0,Ms=0,Ls=0,Os=0,Ns=0,Cs=0,Ds=0,Ps=0,zs=0,Gs=0,Bs=0,Us=0,Vs=0,qs=0,Ws=0,Fs=0,js=0,Ys=0,Hs=0,Qs=0,Ks=0,Zs=0,Xs=0,Js=0,$s=0,er=0,tr=0,ar=0,nr=0,ir=0,or=0,lr=0,sr=0,rr=0,cr=0,dr=0,ur=0,pr=0,gr=0,mr=0,_r=0,hr=0,br=0,fr=1,vr=0,Er=0,wr=0,Tr=0,Ar=0,yr=0,Sr=0,Ir=0,kr=0,xr=0,Rr=0,Mr=0,Lr=0,Or=0,Nr=0,Cr=0,Dr=0,Pr=0,zr=0,Gr=0,Br=0,Ur=0,Vr=0,qr=0,Wr=0,Fr=0,jr=0,Yr=0,Hr=0,Qr=0,Kr=0,Zr=0,Xr=0,Jr=0,$r=0,ec=0,tc=0,ac=0,nc=0,ic=0,oc=0,lc=0,sc=0,rc=0,cc=0,dc=0,uc=0,pc=0,gc=0,mc=0,_c=0,hc=0,bc=0,fc=0,vc=0,Ec=0,wc=0,Tc=0,Ac=0,yc=0,Sc=0,Ic=0,kc=0,xc=0,Rc=0,Mc=0,Lc=0,Oc=0,Nc=0,Cc=0,Dc=0,Pc=0,zc=0,Gc=0,Bc=0,Uc=0,Vc=0,qc=0,Wc=0,Fc=0,jc=0,Yc=0,Hc=0,Qc=0,Kc=0,Zc=0,Xc=0,Jc=0,$c=0,ed=0,td=0,ad=0,nd=0,id=0,od=0,ld=0,sd=0,rd=0,cd=0,dd=0,ud=0,pd=0,gd=0,md=0,_d=0,hd=0,bd=0,fd=0,vd=0,Ed=0,wd=0,Td=0,Ad=0,yd=0,Sd=0,Id=0,kd=0,xd=0,Rd=0,Md=0,Ld=0,Od=0,Nd=0,Cd=0,Dd=0,Pd=0,zd=0,Gd=0,Bd=0,Ud=0,Vd=0,qd=0,Wd=0,Fd=0,jd=0,Yd=0,Hd=0,Qd=0,Kd=0,Zd=0,Xd=0,Jd=0,$d=0,eu=0,tu=0,au=0,nu=0,iu=0,ou=0,lu=0,su=0,ru=0,cu=0,du=0,uu=0,pu=0,gu=0,mu=0,_u=0,hu=0,bu=0,fu=0,vu=0,Eu=0,wu=0,Tu=0,Au=0,yu=0,Su=0,Iu=0,ku=0,xu=0,Ru=0,Mu=0,Lu=0,Ou=0,Nu=0,Cu=0,Du=0,Pu=0,zu=0,Gu=0,Bu=0,Uu=0,Vu=0,qu=0,Wu=0,Fu=0,ju=0,Yu=0,Hu=0,Qu=0,Ku=0,Zu=0,Xu=0,Ju=0,$u=0,ep=0,tp=0,ap=0,np=0,ip=0,op=0,lp=0,sp=0,rp=0,cp=0,dp=0,up=0,pp=0,gp=0,mp=0,_p=0,hp=0,bp=0,fp=0,vp=0,Ep=0,wp=0,Tp=0,Ap=0,yp=0,Sp=0,Ip=0,kp=0,xp=0,Rp=0,Mp=0,Lp=0,Op=0,Np=0,Cp=0,Dp=0,Pp=0,zp=0,Gp=0,Bp=0,Up=0,Vp=0,qp=0,Wp=0,Fp=0,jp=0,Yp=0,Hp=0
;to=parseInt(jt[0].dataset.value),ao=parseInt(Yt[0].dataset.value),fr=document.getElementById('settings-nightBonus').checked?2:1,ys=document.getElementById('settings-officerLeader').checked?.1:0,hr=document.getElementById('settings-officerMedic').checked?.1:0,Mc=document.getElementById('settings-skillMedic').checked?.1:0,xc=parseInt(Ht[0].dataset.value),Lc=parseInt(Qt[0].dataset.value),Rc=parseInt(Kt[0].dataset.value),Oo=parseInt(Zt[0].dataset.value),_i=Xt[0].dataset.value,Ip=Xt[0].dataset.name,No=Jt[0].dataset.value,Co=$t[0].dataset.value,Do=ea[0].dataset.value,Po=ta[0].dataset.value,Ss=parseInt(aa[0].dataset.value),Is=parseInt(na[0].dataset.value),ks=parseInt(ia[0].dataset.value),xs=parseInt(oa[0].dataset.value),Ai='axe'==No&1==Ss?[1.05,1.1]:'axe'==No&2==Ss?[1.1,1.2]:'axe'==No&3==Ss?[1.2,1.3]:[1,1],Bi='ma'==No&1==Ss?[1.05,1.1]:'ma'==No&2==Ss?[1.1,1.2]:'ma'==No&3==Ss?[1.2,1.3]:[1,1],Hi='spear'==No&1==Ss?[1.1,1.05]:'spear'==No&2==Ss?[1.2,1.1]:'spear'==No&3==Ss?[1.3,1.2]:[1,1],
Xi='sword'==No&1==Ss?[1.1,1.05]:'sword'==No&2==Ss?[1.2,1.1]:'sword'==No&3==Ss?[1.3,1.2]:[1,1],vi='archer'==No&1==Ss?[1.1,1.05]:'archer'==No&2==Ss?[1.2,1.1]:'archer'==No&3==Ss?[1.3,1.2]:[1,1],Li='hc'==No&1==Ss?[1.1,1.1]:'hc'==No&2==Ss?[1.2,1.2]:'hc'==No&3==Ss?[1.3,1.3]:[1,1],Wi='ram'==No&1==Ss?[1.05,1.25]:'ram'==No&2==Ss?[1.1,1.5]:'ram'==No&3==Ss?[1.2,2]:[1,1],ki='catapult'==No&1==Ss?[1.05,1.25]:'catapult'==No&2==Ss?[1.1,1.5]:'catapult'==No&3==Ss?[1.2,2]:[1,1],yi='axe'==Co&1==Is?[1.05,1.1]:'axe'==Co&2==Is?[1.1,1.2]:'axe'==Co&3==Is?[1.2,1.3]:[1,1],Ui='ma'==Co&1==Is?[1.05,1.1]:'ma'==Co&2==Is?[1.1,1.2]:'ma'==Co&3==Is?[1.2,1.3]:[1,1],Qi='spear'==Co&1==Is?[1.1,1.05]:'spear'==Co&2==Is?[1.2,1.1]:'spear'==Co&3==Is?[1.3,1.2]:[1,1],Ji='sword'==Co&1==Is?[1.1,1.05]:'sword'==Co&2==Is?[1.2,1.1]:'sword'==Co&3==Is?[1.3,1.2]:[1,1],Ei='archer'==Co&1==Is?[1.1,1.05]:'archer'==Co&2==Is?[1.2,1.1]:'archer'==Co&3==Is?[1.3,1.2]:[1,1],
Oi='hc'==Co&1==Is?[1.1,1.1]:'hc'==Co&2==Is?[1.2,1.2]:'hc'==Co&3==Is?[1.3,1.3]:[1,1],Fi='ram'==Co&1==Is?[1.05,1.25]:'ram'==Co&2==Is?[1.1,1.5]:'ram'==Co&3==Is?[1.2,2]:[1,1],xi='catapult'==Co&1==Is?[1.05,1.25]:'catapult'==Co&2==Is?[1.1,1.5]:'catapult'==Co&3==Is?[1.2,2]:[1,1],zi='lc'==Do&1==ks?[1.05,1.1]:'lc'==Do&2==ks?[1.1,1.2]:'lc'==Do&3==ks?[1.2,1.3]:[1,1],Si='axe'==Do&1==ks?[1.05,1.1]:'axe'==Do&2==ks?[1.1,1.2]:'axe'==Do&3==ks?[1.2,1.3]:[1,1],Vi='ma'==Do&1==ks?[1.05,1.1]:'ma'==Do&2==ks?[1.1,1.2]:'ma'==Do&3==ks?[1.2,1.3]:[1,1],Ki='spear'==Do&1==ks?[1.1,1.05]:'spear'==Do&2==ks?[1.2,1.1]:'spear'==Do&3==ks?[1.3,1.2]:[1,1],$i='sword'==Do&1==ks?[1.1,1.05]:'sword'==Do&2==ks?[1.2,1.1]:'sword'==Do&3==ks?[1.3,1.2]:[1,1],wi='archer'==Do&1==ks?[1.1,1.05]:'archer'==Do&2==ks?[1.2,1.1]:'archer'==Do&3==ks?[1.3,1.2]:[1,1],Ni='hc'==Do&1==ks?[1.1,1.1]:'hc'==Do&2==ks?[1.2,1.2]:'hc'==Do&3==ks?[1.3,1.3]:[1,1],ji='ram'==Do&1==ks?[1.05,1.25]:'ram'==Do&2==ks?[1.1,1.5]:'ram'==Do&3==ks?[1.2,2]:[1,1],
Ri='catapult'==Do&1==ks?[1.05,1.25]:'catapult'==Do&2==ks?[1.1,1.5]:'catapult'==Do&3==ks?[1.2,2]:[1,1],Ci=(Di='lc'==No&1==Ss?[1.05,1.1]:'lc'==No&2==Ss?[1.1,1.2]:'lc'==No&3==Ss?[1.2,1.3]:[1,1])[0]>=(Pi='lc'==Co&1==Is?[1.05,1.1]:'lc'==Co&2==Is?[1.1,1.2]:'lc'==Co&3==Is?[1.2,1.3]:[1,1])[0]&&Di[0]>=zi[0]?Di:Pi[0]>=Di[0]&&Pi[0]>=zi[0]?Pi:zi[0]>=Di[0]&&zi[0]>=Pi[0]?zi:[1,1],Ti=Ai[0]>=yi[0]&&Ai[0]>=Si[0]?Ai:yi[0]>=Ai[0]&&yi[0]>=Si[0]?yi:Si[0]>=Ai[0]&&Si[0]>=yi[0]?Si:[1,1],Gi=Bi[0]>=Ui[0]&&Bi[0]>=Vi[0]?Bi:Ui[0]>=Bi[0]&&Ui[0]>=Vi[0]?Ui:Vi[0]>=Bi[0]&&Vi[0]>=Ui[0]?Vi:[1,1],Mi=Li[0]>=Oi[0]&&Li[0]>=Ni[0]?Li:Oi[0]>=Li[0]&&Oi[0]>=Ni[0]?Oi:Ni[0]>=Li[0]&&Ni[0]>=Oi[0]?Ni:[1,1],qi=Wi[0]>=Fi[0]&&Wi[0]>=ji[0]?Wi:Fi[0]>=Wi[0]&&Fi[0]>=ji[0]?Fi:ji[0]>=Wi[0]&&ji[0]>=Fi[0]?ji:[1,1],Ii=ki[0]>=xi[0]&&ki[0]>=Ri[0]?ki:xi[0]>=ki[0]&&xi[0]>=Ri[0]?xi:Ri[0]>=ki[0]&&Ri[0]>=xi[0]?Ri:[1,1],Yi=Hi[0]>=Qi[0]&&Hi[0]>=Ki[0]?Hi:Qi[0]>=Hi[0]&&Qi[0]>=Ki[0]?Qi:Ki[0]>=Hi[0]&&Ki[0]>=Qi[0]?Ki:[1,1],
Zi=Xi[0]>=Ji[0]&&Xi[0]>=$i[0]?Xi:Ji[0]>=Xi[0]&&Ji[0]>=$i[0]?Ji:$i[0]>=Xi[0]&&$i[0]>=Ji[0]?$i:[1,1],fi=vi[0]>=Ei[0]&&vi[0]>=wi[0]?vi:Ei[0]>=vi[0]&&Ei[0]>=wi[0]?Ei:wi[0]>=vi[0]&&wi[0]>=Ei[0]?wi:[1,1],Ll='lc'==Po&1==xs?[1.05,1.1]:'lc'==Po&2==xs?[1.1,1.2]:'lc'==Po&3==xs?[1.2,1.3]:[1,1],xl='axe'==Po&1==xs?[1.05,1.1]:'axe'==Po&2==xs?[1.1,1.2]:'axe'==Po&3==xs?[1.2,1.3]:[1,1],Ol='ma'==Po&1==xs?[1.05,1.1]:'ma'==Po&2==xs?[1.1,1.2]:'ma'==Po&3==xs?[1.2,1.3]:[1,1],Cl='spear'==Po&1==xs?[1.1,1.05]:'spear'==Po&2==xs?[1.2,1.1]:'spear'==Po&3==xs?[1.3,1.2]:[1,1],Dl='sword'==Po&1==xs?[1.1,1.05]:'sword'==Po&2==xs?[1.2,1.1]:'sword'==Po&3==xs?[1.3,1.2]:[1,1],kl='archer'==Po&1==xs?[1.1,1.05]:'archer'==Po&2==xs?[1.2,1.1]:'archer'==Po&3==xs?[1.3,1.2]:[1,1],Ml='hc'==Po&1==xs?[1.1,1.1]:'hc'==Po&2==xs?[1.2,1.2]:'hc'==Po&3==xs?[1.3,1.3]:[1,1],Nl='ram'==Po&1==xs?[1.05,1.25]:'ram'==Po&2==xs?[1.1,1.5]:'ram'==Po&3==xs?[1.2,2]:[1,1],
Rl='catapult'==Po&1==xs?[1.05,1.25]:'catapult'==Po&2==xs?[1.1,1.5]:'catapult'==Po&3==xs?[1.2,2]:[1,1],ja=qt*kt[0]+Ft*kt[1]+r*kt[2]+o*kt[3]+Ot*kt[4]+Dt*kt[5]+xt*kt[6]+Gt*kt[7]+p*kt[8]+Mt*kt[9]+Ut*kt[10]+ha*kt[11]+d*kt[12],hi=Wt*kt[0]+_a*kt[1]+c*kt[2]+l*kt[3]+Nt*kt[4]+Pt*kt[5]+Rt*kt[6]+Bt*kt[7]+g*kt[8]+Lt*kt[9]+Vt*kt[10]+ba*kt[11]+u*kt[12],eo=2*ja<=hi?2:1,vr=ja-5*Gt,Tr=0==fa?0:Math.round(20*Math.pow(1.2515,fa-1)),bi=hi+(Tr+100*Vt),Hr=0==vr||0==bi?0:vr/bi>1?1:vr/bi,br=zt/100,Ys=Ct/100,wr=Math.round(1e3*(to/100*br*(1+Ys)+xc/100+ys))/1e3,bp=p/(hp=Gt+p),fp=Gt/hp,Qu=Math.round(ba*bp),up=Math.round(ba*fp),vc=(wc=Gt-(0==Gt?0:Gt<up?Gt:up))*Hr*wr*(zo='ram'==Po?1==xs?[1.05,1.25]:2==xs?[1.1,1.5]:3==xs?[1.2,2]:[1,1]:[1,1])[1],Mo=20==fa?18:19==fa?17:18==fa?15:17==fa?14:16==fa?13:15==fa?11:14==fa?10:13==fa||12==fa?9:11==fa?8:10==fa?7:9==fa||8==fa?6:7==fa||6==fa?5:5==fa||4==fa||3==fa?4:2==fa||1==fa?3:0,mp=0==fa?0:2*Mo,pp=0==fa?0:vc/mp,_p=fa<=Lc?fa:fa-Lc<pp?fa<Lc?fa:Lc:fa-pp,fn=Math.round(_p),
bn=Math.round(.05*fn*1e3)/1e3,Er=Math.round(ao/100*(1+bn)*fr*1e3)/1e3,mi=p-(0==p?0:p<Qu?p:Qu),hn=0==(gp=Math.round(_p))?0:Math.round(20*Math.pow(1.2515,gp-1)),es=qt+Ft+r+d>Ot+xt&&qt+Ft+r+d>o+Dt?'inf':Ot+xt>qt+Ft+r+d&&Ot+xt>o+Dt?'cav':'arc',Or=qt*kt[0]+Ft*kt[1]+r*kt[2]+o*kt[3]+Ot*kt[4]+Dt*kt[5]+xt*kt[6]+wc*kt[7]+mi*kt[8]+Mt*kt[9]+Ut*kt[10]+ha*kt[11]+d*kt[12],Fr=Wt*kt[0]+_a*kt[1]+c*kt[2]+l*kt[3]+Nt*kt[4]+Pt*kt[5]+Rt*kt[6]+Bt*kt[7]+g*kt[8]+Lt*kt[9]+Vt*kt[10]+ba*kt[11]+u*kt[12],console.log('provisionDefenderRound1Total'+Fr),Ac=wc*kt[7]+mi*kt[8]+ha*kt[11]+Mt*kt[9]+Ut*kt[10],'cav'==es?(Ir=Ot*kt[4]+xt*kt[6]+Ac,Rr=qt*kt[0]+Ft*kt[1]+r*kt[2]+d*kt[12],Ar=o*kt[3]+Dt*kt[5]):'inf'==es?(Rr=qt*kt[0]+Ft*kt[1]+r*kt[2]+d*kt[12]+Ac,Ir=Ot*kt[4]+xt*kt[6],Ar=o*kt[3]+Dt*kt[5]):'arc'==es?(Rr=qt*kt[0]+Ft*kt[1]+r*kt[2]+d*kt[12],Ir=Ot*kt[4]+xt*kt[6],Ar=o*kt[3]+Dt*kt[5]+Ac):(Rr=qt*kt[0]+Ft*kt[1]+r*kt[2]+d*kt[12],Ir=Ot*kt[4]+xt*kt[6],Ar=o*kt[3]+Dt*kt[5]),zs=0==Rr?0:Math.round(Rr/Or*1e4)/1e4,
Ps=0==Ir?0:Math.round(Ir/Or*1e4)/1e4,0==Ar?(Ds=0,console.log('lossesPercentRound1Arc'+Ds)):(Ds=Math.round(Ar/Or*1e4)/1e4,console.log('lossesPercentRound1Arc'+Ds)),_d=Math.round(Wt*zs),md=Math.round(Wt*Ps),gd=Wt-md-_d,Ou=Math.round(_a*zs),Lu=Math.round(_a*Ps),Mu=_a-Lu-Ou,sn=Math.round(c*zs),ln=Math.round(c*Ps),on=c-ln-sn,Da=Math.round(l*zs),Ca=Math.round(l*Ps),Na=l-Ca-Da,_s=Math.round(Nt*zs),ms=Math.round(Nt*Ps),gs=Nt-ms-_s,sr=Math.round(Pt*zs),lr=Math.round(Pt*Ps),or=Pt-lr-sr,Eo=Math.round(Rt*zs),vo=Math.round(Rt*Ps),fo=Rt-vo-Eo,rc=Math.round(Bt*zs),sc=Math.round(Bt*Ps),lc=Bt-sc-rc,ai=Math.round(g*zs),ti=Math.round(g*Ps),ei=g-ti-ai,Yc=Math.round(Vt*zs),jc=Math.round(Vt*Ps),Fc=Vt-jc-Yc,ap=Math.round(ba*zs),tp=Math.round(ba*Ps),ep=ba-tp-ap,Nn=Math.round(u*zs),On=Math.round(u*Ps),Ln=u-On-Nn,fl=Math.round(Lt*zs),bl=Math.round(Lt*Ps),hl=Lt-bl-fl,Vr=_d*kt[0]+Ou*kt[1]+sn*kt[2]+Nn*kt[12]+Yc*kt[10]+_s*kt[4]+Eo*kt[6]+Da*kt[3]+sr*kt[5]+rc*kt[7]+ai*kt[8]+ap*kt[11]+fl*kt[9],
console.log('provisionDefenderInfRound1'+Vr),Gr=md*kt[0]+Lu*kt[1]+ln*kt[2]+On*kt[12]+jc*kt[10]+ms*kt[4]+vo*kt[6]+Ca*kt[3]+lr*kt[5]+sc*kt[7]+ti*kt[8]+tp*kt[11]+bl*kt[9],console.log('provisionDefenderCavRound1'+Gr),Dr=gd*kt[0]+Mu*kt[1]+on*kt[2]+Ln*kt[12]+Fc*kt[10]+gs*kt[4]+fo*kt[6]+Na*kt[3]+or*kt[5]+lc*kt[7]+ei*kt[8]+ep*kt[11]+hl*kt[9],console.log('provisionDefenderArcRound1'+Dr),Xd=_d*a[0]*Yi[0]+Ou*a[1]*Zi[0]+sn*a[2]*Ti[0]+Nn*a[12]+Yc*a[10]+_s*a[4]*Ci[0]+Eo*a[6]*Mi[0]+Da*a[3]*fi[0]+sr*a[5]*Gi[0]+rc*a[7]*qi[0]+ai*a[8]*Ii[0]+ap*a[11]+fl*a[9],Qd=md*n[0]*Yi[0]+Lu*n[1]*Zi[0]+ln*n[2]*Ti[0]+On*n[12]+jc*n[10]+ms*n[4]*Ci[0]+vo*n[6]*Mi[0]+Ca*n[3]*fi[0]+lr*n[5]*Gi[0]+sc*n[7]*qi[0]+ti*n[8]*Ii[0]+tp*n[11]+bl*n[9],jd=gd*i[0]*Yi[0]+Mu*i[1]*Zi[0]+on*i[2]*Ti[0]+Ln*i[12]+Fc*i[10]+gs*i[4]*Ci[0]+fo*i[6]*Mi[0]+Na*i[3]*fi[0]+or*i[5]*Gi[0]+lc*i[7]*qi[0]+ei*i[8]*Ii[0]+ep*i[11]+hl*i[9],Ic=wc*s[7]*Nl[1]+mi*s[8]*Rl[1]+ha*s[11]+Mt*s[9]+Ut*s[10],'cav'==es?(Bd=Ot*s[4]*Ll[1]+xt*s[6]*Ml[1]+Ic,
qd=qt*s[0]*Cl[1]+Ft*s[1]*Dl[1]+r*s[2]*xl[1]+d*s[12]*eo,Pd=o*s[3]*kl[1]+Dt*s[5]*Ol[1]):'inf'==es?(qd=qt*s[0]*Cl[1]+Ft*s[1]*Dl[1]+r*s[2]*xl[1]+d*s[12]*eo+Ic,Bd=Ot*s[4]*Ll[1]+xt*s[6]*Ml[1],Pd=o*s[3]*kl[1]+Dt*s[5]*Ol[1]):'arc'==es?(qd=qt*s[0]*Cl[1]+Ft*s[1]*Dl[1]+r*s[2]*xl[1]+d*s[12]*eo,Bd=Ot*s[4]*Ll[1]+xt*s[6]*Ml[1],Pd=o*s[3]*kl[1]+Dt*s[5]*Ol[1]+Ic):(qd=qt*s[0]*Cl[1]+Ft*s[1]*Dl[1]+r*s[2]*xl[1]+d*s[12]*eo,Bd=Ot*s[4]*Ll[1]+xt*s[6]*Ml[1],Pd=o*s[3]*kl[1]+Dt*s[5]*Ol[1]),Nd=(Md=qd*wr)+(kd=Bd*wr)+(yd=Pd*wr),cu=(lu=Xd*Er+hn)+(nu=Qd*Er+hn)+(eu=jd*Er+hn),$l=0==Md||0==lu?0:lu<=Md?1:Math.pow(Md/lu,.5)/(lu/Md),Jl=0==kd||0==nu?0:nu<=kd?1:Math.pow(kd/nu,.5)/(nu/kd),Xl=0==yd||0==eu?0:eu<=yd?1:Math.pow(yd/eu,.5)/(eu/yd),Zl=0==Md||0==lu?0:Md<=lu?1:Math.pow(lu/Md,.5)/(Md/lu),Kl=0==kd||0==nu?0:kd<=nu?1:Math.pow(nu/kd,.5)/(kd/nu),Ql=0==yd||0==eu?0:yd<=eu?1:Math.pow(eu/yd,.5)/(yd/eu),Uo=Math.round(1e6*Zl)/1e6,Bo=Math.round(1e6*Kl)/1e6,Go=Math.round(1e6*Ql)/1e6,Wo=Math.round(1e6*$l)/1e6,
qo=Math.round(1e6*Jl)/1e6,Vo=Math.round(1e6*Xl)/1e6,cd=Math.round(-_d*Wo+1e-6)+Math.round(-md*qo+1e-6)+Math.round(-gd*Vo+1e-6),Iu=Math.round(-Ou*Wo+1e-6)+Math.round(-Lu*qo+1e-6)+Math.round(-Mu*Vo+1e-6),en=Math.round(-sn*Wo+1e-6)+Math.round(-ln*qo+1e-6)+Math.round(-on*Vo+1e-6),Ra=Math.round(-Da*Wo+1e-6)+Math.round(-Ca*qo+1e-6)+Math.round(-Na*Vo+1e-6),cs=Math.round(-_s*Wo+1e-6)+Math.round(-ms*qo+1e-6)+Math.round(-gs*Vo+1e-6),tr=Math.round(-sr*Wo+1e-6)+Math.round(-lr*qo+1e-6)+Math.round(-or*Vo+1e-6),mo=Math.round(-Eo*Wo+1e-6)+Math.round(-vo*qo+1e-6)+Math.round(-fo*Vo+1e-6),ac=Math.round(-rc*Wo+1e-6)+Math.round(-sc*qo+1e-6)+Math.round(-lc*Vo+1e-6),Zn=Math.round(-ai*Wo+1e-6)+Math.round(-ti*qo+1e-6)+Math.round(-ei*Vo+1e-6),Zu=Math.round(-ap*Wo+1e-6)+Math.round(-tp*qo+1e-6)+Math.round(-ep*Vo+1e-6),kn=Math.round(-Nn*Wo+1e-6)+Math.round(-On*qo+1e-6)+Math.round(-Ln*Vo+1e-6),pl=Math.round(-fl*Wo+1e-6)+Math.round(-bl*qo+1e-6)+Math.round(-hl*Vo+1e-6),
Uc=Math.round(-Yc*Wo+1e-6)+Math.round(-jc*qo+1e-6)+Math.round(-Fc*Vo+1e-6),ad=Math.round(-qt*Uo+1e-6),vu=Math.round(-Ft*Uo+1e-6),Ha=Math.round(-r*Uo+1e-6),En=Math.round(-d*Uo+1e-6),Ta=Math.round(-o*Go+1e-6),Qs=Math.round(-Dt*Go+1e-6),as=Math.round(-Ot*Bo+1e-6),lo=Math.round(-xt*Bo+1e-6),'cav'==es?(Kr=Math.round(-wc*Bo+1e-6),Wn=Math.round(-mi*Bo+1e-6),qu=Math.round(-ha*Bo+1e-6),ol=Math.round(-Mt*Bo+1e-6),Nc=Math.round(-Ut*Bo+1e-6)):'inf'==es?(Kr=Math.round(-wc*Uo+1e-6),Wn=Math.round(-mi*Uo+1e-6),qu=Math.round(-ha*Uo+1e-6),ol=Math.round(-Mt*Uo+1e-6),Nc=Math.round(-Ut*Uo+1e-6)):'arc'==es&&(Kr=Math.round(-wc*Go+1e-6),Wn=Math.round(-mi*Go+1e-6),qu=Math.round(-ha*Go+1e-6),ol=Math.round(-Mt*Go+1e-6),Nc=Math.round(-Ut*Go+1e-6)),od=qt+ad,Tu=Ft+vu,Za=r+Ha,Sa=o+Ta,os=Ot+as,Xs=Dt+Qs,co=xt+lo,Jr=wc+Kr,Yn=mi+Wn,ju=ha+qu,An=d+En,Pc=Ut+Nc,rl=Mt+ol,pd=Wt+cd,Ru=_a+Iu,nn=c+en,Oa=l+Ra,ps=Nt+cs,ir=Pt+tr,bo=Rt+mo,oc=Bt+ac,$n=g+Zn,$u=ba+Zu,Mn=u+kn,Wc=Vt+Uc,_l=Lt+pl,
Rs=ad*kt[0]+vu*kt[1]+Ha*kt[2]+Ta*kt[3]+as*kt[4]+Qs*kt[5]+lo*kt[6]+Kr*kt[7]+Wn*kt[8]+ol*kt[9]+Nc*kt[10]+qu*kt[11]+En*kt[12],console.log('lossesAttackerRound1Total'+Rs),Os=cd*kt[0]+Iu*kt[1]+en*kt[2]+Ra*kt[3]+cs*kt[4]+tr*kt[5]+mo*kt[6]+ac*kt[7]+Zn*kt[8]+pl*kt[9]+Uc*kt[10]+Zu*kt[11]+kn*kt[12],console.log('lossesDefenderRound1Total'+Os),pu=od*kt[0]+Tu*kt[1]+Za*kt[2]+Sa*kt[3]+os*kt[4]+Xs*kt[5]+co*kt[6]+Jr*kt[7]+Yn*kt[8]+ju*kt[11]+An*kt[12]+Pc*kt[10]+rl*kt[9],console.log('survivorsAttackerRound1Total'+pu),_u=pd*kt[0]+Ru*kt[1]+nn*kt[2]+Oa*kt[3]+ps*kt[4]+ir*kt[5]+bo*kt[6]+oc*kt[7]+$n*kt[8]+$u*kt[11]+Mn*kt[12]+Wc*kt[10]+_l*kt[9],console.log('survivorsDefenderRound1Total'+_u),0==Nd||0==cu?(Fa=0,console.log('armyLossesPercentEachRound'+Fa)):cu<=Nd?(Fa=1,console.log('armyLossesPercentEachRound'+Fa)):(Fa=Math.pow(Nd/cu,.5/(cu/Nd)),console.log('armyLossesPercentEachRound'+Fa)),Nr=od*kt[0]+Tu*kt[1]+Za*kt[2]+Sa*kt[3]+os*kt[4]+Xs*kt[5]+co*kt[6]+Jr*kt[7]+Yn*kt[8]+rl*kt[9]+Pc*kt[10]+ju*kt[11]+An*kt[12],
jr=pd*kt[0]+Ru*kt[1]+nn*kt[2]+Oa*kt[3]+ps*kt[4]+ir*kt[5]+bo*kt[6]+oc*kt[7]+$n*kt[8]+_l*kt[9]+Wc*kt[10]+$u*kt[11]+Mn*kt[12],console.log('provisionDefenderRound2Total'+jr),yc=Jr*kt[7]+Yn*kt[8]+ju*kt[11]+rl*kt[9],'cav'==es?(kr=os*kt[4]+co*kt[6]+yc,Mr=od*kt[0]+Tu*kt[1]+Za*kt[2]+An*kt[12]+Pc*kt[10],yr=Sa*kt[3]+Xs*kt[5]):'inf'==es?(Mr=od*kt[0]+Tu*kt[1]+Za*kt[2]+An*kt[12]+Pc*kt[10]+yc,kr=os*kt[4]+co*kt[6],yr=Sa*kt[3]+Xs*kt[5]):'arc'==es?(Mr=od*kt[0]+Tu*kt[1]+Za*kt[2]+An*kt[12]+Pc*kt[10],kr=os*kt[4]+co*kt[6],yr=Sa*kt[3]+Xs*kt[5]+yc):(Mr=od*kt[0]+Tu*kt[1]+Za*kt[2]+An*kt[12]+Pc*kt[10],kr=os*kt[4]+co*kt[6],yr=Sa*kt[3]+Xs*kt[5]),Us=0==Mr?0:Math.round(Mr/Nr*1e4)/1e4,Bs=0==kr?0:Math.round(kr/Nr*1e4)/1e4,0==yr?(Gs=0,console.log('lossesPercentRound2Arc'+Gs)):(Gs=Math.round(yr/Nr*1e4)/1e4,console.log('lossesPercentRound2Arc'+Gs)),vd=Math.round(pd*Us),fd=Math.round(pd*Bs),bd=pd-fd-vd,Pu=Math.round(Ru*Us),Du=Math.round(Ru*Bs),Cu=Ru-Du-Pu,un=Math.round(nn*Us),dn=Math.round(nn*Bs),cn=nn-dn-un,
Ba=Math.round(Oa*Us),Ga=Math.round(Oa*Bs),za=Oa-Ga-Ba,vs=Math.round(ps*Us),fs=Math.round(ps*Bs),bs=ps-fs-vs,ur=Math.round(ir*Us),dr=Math.round(ir*Bs),cr=ir-dr-ur,yo=Math.round(bo*Us),Ao=Math.round(bo*Bs),To=bo-Ao-yo,pc=Math.round(oc*Us),uc=Math.round(oc*Bs),dc=oc-uc-pc,li=Math.round($n*Us),oi=Math.round($n*Bs),ii=$n-oi-li,Zc=Math.round(Wc*Us),Kc=Math.round(Wc*Bs),Qc=Wc-Kc-Zc,lp=Math.round($u*Us),op=Math.round($u*Bs),ip=$u-op-lp,zn=Math.round(Mn*Us),Pn=Math.round(Mn*Bs),Dn=Mn-Pn-zn,Tl=Math.round(_l*Us),wl=Math.round(_l*Bs),El=_l-wl-Tl,qr=vd*kt[0]+Pu*kt[1]+un*kt[2]+zn*kt[12]+Zc*kt[10]+vs*kt[4]+yo*kt[6]+Ba*kt[3]+ur*kt[5]+pc*kt[7]+li*kt[8]+lp*kt[11]+Tl*kt[9],console.log('provisionDefenderInfRound2'+qr),Br=fd*kt[0]+Du*kt[1]+dn*kt[2]+Pn*kt[12]+Kc*kt[10]+fs*kt[4]+Ao*kt[6]+Ga*kt[3]+dr*kt[5]+uc*kt[7]+oi*kt[8]+op*kt[11]+wl*kt[9],console.log('provisionDefenderCavRound2'+Br),Pr=bd*kt[0]+Cu*kt[1]+cn*kt[2]+Dn*kt[12]+Qc*kt[10]+bs*kt[4]+To*kt[6]+za*kt[3]+cr*kt[5]+dc*kt[7]+ii*kt[8]+ip*kt[11]+El*kt[9],
console.log('provisionDefenderArcRound2'+Pr),Jd=vd*a[0]*Yi[0]+Pu*a[1]*Zi[0]+un*a[2]*Ti[0]+zn*a[12]+Zc*a[10]+vs*a[4]*Ci[0]+yo*a[6]*Mi[0]+Ba*a[3]*fi[0]+ur*a[5]*Gi[0]+pc*a[7]*qi[0]+li*a[8]*Ii[0]+lp*a[11]+Tl*a[9],Kd=fd*n[0]*Yi[0]+Du*n[1]*Zi[0]+dn*n[2]*Ti[0]+Pn*n[12]+Kc*n[10]+fs*n[4]*Ci[0]+Ao*n[6]*Mi[0]+Ga*n[3]*fi[0]+dr*n[5]*Gi[0]+uc*n[7]*qi[0]+oi*n[8]*Ii[0]+op*n[11]+wl*n[9],Yd=bd*i[0]*Yi[0]+Cu*i[1]*Zi[0]+cn*i[2]*Ti[0]+Dn*i[12]+Qc*i[10]+bs*i[4]*Ci[0]+To*i[6]*Mi[0]+za*i[3]*fi[0]+cr*i[5]*Gi[0]+dc*i[7]*qi[0]+ii*i[8]*Ii[0]+ip*i[11]+El*i[9],kc=Jr*s[7]*Nl[1]+Yn*s[8]*Rl[1]+ju*s[11]+rl*s[9],'cav'==es?(Ud=os*s[4]*Ll[1]+co*s[6]*Ml[1]+kc,Wd=od*s[0]*Cl[1]+Tu*s[1]*Dl[1]+Za*s[2]*xl[1]+An*s[12]*eo+Pc*s[10],zd=Sa*s[3]*kl[1]+Xs*s[5]*Ol[1]):'inf'==es?(Wd=od*s[0]*Cl[1]+Tu*s[1]*Dl[1]+Za*s[2]*xl[1]+An*s[12]*eo+Pc*s[10]+kc,Ud=os*s[4]*Ll[1]+co*s[6]*Ml[1],zd=Sa*s[3]*kl[1]+Xs*s[5]*Ol[1]):'arc'==es?(Wd=od*s[0]*Cl[1]+Tu*s[1]*Dl[1]+Za*s[2]*xl[1]+An*s[12]*eo+Pc*s[10],Ud=os*s[4]*Ll[1]+co*s[6]*Ml[1],
zd=Sa*s[3]*kl[1]+Xs*s[5]*Ol[1]+kc):(Wd=od*s[0]*Cl[1]+Tu*s[1]*Dl[1]+Za*s[2]*xl[1]+An*s[12]*eo+Pc*s[10],Ud=os*s[4]*Ll[1]+co*s[6]*Ml[1],zd=Sa*s[3]*kl[1]+Xs*s[5]*Ol[1]),su=Jd*Er,iu=Kd*Er,tu=Yd*Er,Cd=(Ld=Wd*wr)+(xd=Ud*wr)+(Sd=zd*wr),console.log('strengthAttackerRound2'+Cd),du=su+iu+tu,console.log('strengthDefenderRound2'+du),Vl=0==Ld||0==su?0:su<=Ld?1:Math.pow(Ld/su,.5)/(su/Ld),Ul=0==xd||0==iu?0:iu<=xd?1:Math.pow(xd/iu,.5)/(iu/xd),Bl=0==Sd||0==tu?0:tu<=Sd?1:Math.pow(Sd/tu,.5)/(tu/Sd),Gl=0==Ld||0==su?0:Ld<=su?1:Math.pow(su/Ld,.5)/(Ld/su),zl=0==xd||0==iu?0:xd<=iu?1:Math.pow(iu/xd,.5)/(xd/iu),Pl=0==Sd||0==tu?0:Sd<=tu?1:Math.pow(tu/Sd,.5)/(Sd/tu),Yo=Math.round(1e6*Gl)/1e6,jo=Math.round(1e6*zl)/1e6,Fo=Math.round(1e6*Pl)/1e6,Ko=Math.round(1e6*Vl)/1e6,Qo=Math.round(1e6*Ul)/1e6,Ho=Math.round(1e6*Bl)/1e6,dd=Math.round(-vd*Ko+1e-6)+Math.round(-fd*Qo+1e-6)+Math.round(-bd*Ho+1e-6),ku=Math.round(-Pu*Ko+1e-6)+Math.round(-Du*Qo+1e-6)+Math.round(-Cu*Ho+1e-6),
tn=Math.round(-un*Ko+1e-6)+Math.round(-dn*Qo+1e-6)+Math.round(-cn*Ho+1e-6),Ma=Math.round(-Ba*Ko+1e-6)+Math.round(-Ga*Qo+1e-6)+Math.round(-za*Ho+1e-6),ds=Math.round(-vs*Ko+1e-6)+Math.round(-fs*Qo+1e-6)+Math.round(-bs*Ho+1e-6),ar=Math.round(-ur*Ko+1e-6)+Math.round(-dr*Qo+1e-6)+Math.round(-cr*Ho+1e-6),_o=Math.round(-yo*Ko+1e-6)+Math.round(-Ao*Qo+1e-6)+Math.round(-To*Ho+1e-6),nc=Math.round(-pc*Ko+1e-6)+Math.round(-uc*Qo+1e-6)+Math.round(-dc*Ho+1e-6),Xn=Math.round(-li*Ko+1e-6)+Math.round(-oi*Qo+1e-6)+Math.round(-ii*Ho+1e-6),Xu=Math.round(-lp*Ko+1e-6)+Math.round(-op*Qo+1e-6)+Math.round(-ip*Ho+1e-6),xn=Math.round(-zn*Ko+1e-6)+Math.round(-Pn*Qo+1e-6)+Math.round(-Dn*Ho+1e-6),gl=Math.round(-Tl*Ko+1e-6)+Math.round(-wl*Qo+1e-6)+Math.round(-El*Ho+1e-6),Vc=Math.round(-Zc*Ko+1e-6)+Math.round(-Kc*Qo+1e-6)+Math.round(-Qc*Ho+1e-6),nd=Math.round(-od*Yo+1e-6),Eu=Math.round(-Tu*Yo+1e-6),Qa=Math.round(-Za*Yo+1e-6),wn=Math.round(-An*Yo+1e-6),Aa=Math.round(-Sa*Fo+1e-6),Ks=Math.round(-Xs*Fo+1e-6),
ns=Math.round(-os*jo+1e-6),so=Math.round(-co*jo+1e-6),'cav'==es?(Zr=Math.round(-Jr*jo+1e-6),Fn=Math.round(-Yn*jo+1e-6),Wu=Math.round(-ju*jo+1e-6),ll=Math.round(-rl*jo+1e-6)):'inf'==es?(Zr=Math.round(-Jr*Yo+1e-6),Fn=Math.round(-Yn*Yo+1e-6),Wu=Math.round(-ju*Yo+1e-6),ll=Math.round(-rl*Yo+1e-6)):'arc'==es&&(Zr=Math.round(-Jr*Fo+1e-6),Fn=Math.round(-Yn*Fo+1e-6),Wu=Math.round(-ju*Fo+1e-6),ll=Math.round(-rl*Fo+1e-6)),Cc=100*Pc==Mr?0:Math.round(-Pc*Yo+1e-6),ld=od+nd,Au=Tu+Eu,Xa=Za+Qa,Ia=Sa+Aa,ls=os+ns,Js=Xs+Ks,uo=co+so,$r=Jr+Zr,Hn=Yn+Fn,Yu=ju+Wu,yn=An+wn,zc=Pc+Cc,cl=rl+ll,hd=pd+dd,Nu=Ru+ku,rn=nn+tn,Pa=Oa+Ma,hs=ps+ds,rr=ir+ar,wo=bo+_o,cc=oc+nc,ni=$n+Xn,np=$u+Xu,Cn=Mn+xn,Hc=Wc+Vc,vl=_l+gl,Ms=nd*kt[0]+Eu*kt[1]+Qa*kt[2]+Aa*kt[3]+ns*kt[4]+Ks*kt[5]+so*kt[6]+Zr*kt[7]+Fn*kt[8]+ll*kt[9]+Cc*kt[10]+Wu*kt[11]+wn*kt[12],console.log('lossesAttackerRound2Total'+Ms),Ns=dd*kt[0]+ku*kt[1]+tn*kt[2]+Ma*kt[3]+ds*kt[4]+ar*kt[5]+_o*kt[6]+nc*kt[7]+Xn*kt[8]+gl*kt[9]+Vc*kt[10]+Xu*kt[11]+xn*kt[12],
console.log('lossesDefenderRound2Total'+Ns),gu=ld*kt[0]+Au*kt[1]+Xa*kt[2]+Ia*kt[3]+ls*kt[4]+Js*kt[5]+uo*kt[6]+$r*kt[7]+Hn*kt[8]+Yu*kt[11]+yn*kt[12]+zc*kt[10]+cl*kt[9],console.log('survivorsAttackerRound2Total'+gu),hu=hd*kt[0]+Nu*kt[1]+rn*kt[2]+Pa*kt[3]+hs*kt[4]+rr*kt[5]+wo*kt[6]+cc*kt[7]+ni*kt[8]+np*kt[11]+Cn*kt[12]+Hc*kt[10]+vl*kt[9],console.log('survivorsDefenderRound2Total'+hu),Cr=ld*kt[0]+Au*kt[1]+Xa*kt[2]+Ia*kt[3]+ls*kt[4]+Js*kt[5]+uo*kt[6]+$r*kt[7]+Hn*kt[8]+cl*kt[9]+zc*kt[10]+Yu*kt[11]+yn*kt[12],Yr=hd*kt[0]+Nu*kt[1]+rn*kt[2]+Pa*kt[3]+hs*kt[4]+rr*kt[5]+wo*kt[6]+cc*kt[7]+ni*kt[8]+vl*kt[9]+Hc*kt[10]+np*kt[11]+Cn*kt[12],console.log('provisionDefenderRound3Total'+Yr),Tc=$r*kt[7]+Hn*kt[8]+Yu*kt[11]+cl*kt[9],'cav'==es?(xr=ls*kt[4]+uo*kt[6]+Tc,Lr=ld*kt[0]+Au*kt[1]+Xa*kt[2]+yn*kt[12]+zc*kt[10],Sr=Ia*kt[3]+Js*kt[5]):'inf'==es?(Lr=ld*kt[0]+Au*kt[1]+Xa*kt[2]+yn*kt[12]+zc*kt[10]+Tc,xr=ls*kt[4]+uo*kt[6],Sr=Ia*kt[3]+Js*kt[5]):'arc'==es?(Lr=ld*kt[0]+Au*kt[1]+Xa*kt[2]+yn*kt[12]+zc*kt[10],
xr=ls*kt[4]+uo*kt[6],Sr=Ia*kt[3]+Js*kt[5]+Tc):(Lr=ld*kt[0]+Au*kt[1]+Xa*kt[2]+yn*kt[12]+zc*kt[10],xr=ls*kt[4]+uo*kt[6],Sr=Ia*kt[3]+Js*kt[5]),Ws=0==Lr?0:Math.round(Lr/Cr*1e4)/1e4,qs=0==xr?0:Math.round(xr/Cr*1e4)/1e4,0==Sr?(Vs=0,console.log('lossesPercentRound3Arc'+Vs)):(Vs=Math.round(Sr/Cr*1e4)/1e4,console.log('lossesPercentRound3Arc'+Vs)),Ad=Math.round(hd*Ws),Td=Math.round(hd*qs),wd=hd-Td-Ad,Uu=Math.round(Nu*Ws),Bu=Math.round(Nu*qs),Gu=Nu-Bu-Uu,_n=Math.round(rn*Ws),mn=Math.round(rn*qs),gn=rn-mn-_n,Wa=Math.round(Pa*Ws),qa=Math.round(Pa*qs),Va=Pa-qa-Wa,As=Math.round(hs*Ws),Ts=Math.round(hs*qs),ws=hs-Ts-As,_r=Math.round(rr*Ws),mr=Math.round(rr*qs),gr=rr-mr-_r,xo=Math.round(wo*Ws),ko=Math.round(wo*qs),Io=wo-ko-xo,hc=Math.round(cc*Ws),_c=Math.round(cc*qs),mc=cc-_c-hc,di=Math.round(ni*Ws),ci=Math.round(ni*qs),ri=ni-ci-di,ed=Math.round(Hc*Ws),$c=Math.round(Hc*qs),Jc=Hc-$c-ed,dp=Math.round(np*Ws),cp=Math.round(np*qs),rp=np-cp-dp,Vn=Math.round(Cn*Ws),Un=Math.round(Cn*qs),Bn=Cn-Un-Vn,
Il=Math.round(vl*Ws),Sl=Math.round(vl*qs),yl=vl-Sl-Il,Wr=Ad*kt[0]+Uu*kt[1]+_n*kt[2]+Vn*kt[12]+ed*kt[10]+As*kt[4]+xo*kt[6]+Wa*kt[3]+_r*kt[5]+hc*kt[7]+di*kt[8]+dp*kt[11]+Il*kt[9],console.log('provisionDefenderInfRound3'+Wr),Ur=Td*kt[0]+Bu*kt[1]+mn*kt[2]+Un*kt[12]+$c*kt[10]+Ts*kt[4]+ko*kt[6]+qa*kt[3]+mr*kt[5]+_c*kt[7]+ci*kt[8]+cp*kt[11]+Sl*kt[9],console.log('provisionDefenderCavRound3'+Ur),zr=wd*kt[0]+Gu*kt[1]+gn*kt[2]+Bn*kt[12]+Jc*kt[10]+ws*kt[4]+Io*kt[6]+Va*kt[3]+gr*kt[5]+mc*kt[7]+ri*kt[8]+rp*kt[11]+yl*kt[9],console.log('provisionDefenderArcRound3'+zr),$d=Ad*a[0]*Yi[0]+Uu*a[1]*Zi[0]+_n*a[2]*Ti[0]+Vn*a[12]+ed*a[10]+As*a[4]*Ci[0]+xo*a[6]*Mi[0]+Wa*a[3]*fi[0]+_r*a[5]*Gi[0]+hc*a[7]*qi[0]+di*a[8]*Ii[0]+dp*a[11]+Il*a[9],Zd=Td*n[0]*Yi[0]+Bu*n[1]*Zi[0]+mn*n[2]*Ti[0]+Un*n[12]+$c*n[10]+Ts*n[4]*Ci[0]+ko*n[6]*Mi[0]+qa*n[3]*fi[0]+mr*n[5]*Gi[0]+_c*n[7]*qi[0]+ci*n[8]*Ii[0]+cp*n[11]+Sl*n[9],
Hd=wd*i[0]*Yi[0]+Gu*i[1]*Zi[0]+gn*i[2]*Ti[0]+Bn*i[12]+Jc*i[10]+ws*i[4]*Ci[0]+Io*i[6]*Mi[0]+Va*i[3]*fi[0]+gr*i[5]*Gi[0]+mc*i[7]*qi[0]+ri*i[8]*Ii[0]+rp*i[11]+yl*i[9],Sc=$r*s[7]*Nl[1]+Hn*s[8]*Rl[1]+Yu*s[11]+cl*s[9],'cav'==es?(Vd=ls*s[4]*Ll[1]+uo*s[6]*Ml[1]+Sc,Fd=ld*s[0]*Cl[1]+Au*s[1]*Dl[1]+Xa*s[2]*xl[1]+yn*s[12]*eo+zc*s[10],Gd=Ia*s[3]*kl[1]+Js*s[5]*Ol[1]):'inf'==es?(Fd=ld*s[0]*Cl[1]+Au*s[1]*Dl[1]+Xa*s[2]*xl[1]+yn*s[12]*eo+zc*s[10]+Sc,Vd=ls*s[4]*Ll[1]+uo*s[6]*Ml[1],Gd=Ia*s[3]*kl[1]+Js*s[5]*Ol[1]):'arc'==es?(Fd=ld*s[0]*Cl[1]+Au*s[1]*Dl[1]+Xa*s[2]*xl[1]+yn*s[12]*eo+zc*s[10],Vd=ls*s[4]*Ll[1]+uo*s[6]*Ml[1],Gd=Ia*s[3]*kl[1]+Js*s[5]*Ol[1]+Sc):(Fd=ld*s[0]*Cl[1]+Au*s[1]*Dl[1]+Xa*s[2]*xl[1]+yn*s[12]*eo+zc*s[10],Vd=ls*s[4]*Ll[1]+uo*s[6]*Ml[1],Gd=Ia*s[3]*kl[1]+Js*s[5]*Ol[1]),ru=$d*Er,ou=Zd*Er,au=Hd*Er,Dd=(Od=Fd*wr)+(Rd=Vd*wr)+(Id=Gd*wr),console.log('strengthAttackerRound3'+Dd),uu=ru+ou+au,console.log('strengthDefenderRound3'+uu),Hl=0==Od||0==ru?0:ru<=Od?1:Math.pow(Od/ru,.5)/(ru/Od),
Yl=0==Rd||0==ou?0:ou<=Rd?1:Math.pow(Rd/ou,.5)/(ou/Rd),jl=0==Id||0==au?0:au<=Id?1:Math.pow(Id/au,.5)/(au/Id),Fl=0==Od||0==ru?0:Od<=ru?1:Math.pow(ru/Od,.5)/(Od/ru),Wl=0==Rd||0==ou?0:Rd<=ou?1:Math.pow(ou/Rd,.5)/(Rd/ou),ql=0==Id||0==au?0:Id<=au?1:Math.pow(au/Id,.5)/(Id/au),Jo=Math.round(1e6*Fl)/1e6,Xo=Math.round(1e6*Wl)/1e6,Zo=Math.round(1e6*ql)/1e6,tl=Math.round(1e6*Hl)/1e6,el=Math.round(1e6*Yl)/1e6,$o=Math.round(1e6*jl)/1e6,ud=Math.round(-Ad*tl+1e-6)+Math.round(-Td*el+1e-6)+Math.round(-wd*$o+1e-6),xu=Math.round(-Uu*tl+1e-6)+Math.round(-Bu*el+1e-6)+Math.round(-Gu*$o+1e-6),an=Math.round(-_n*tl+1e-6)+Math.round(-mn*el+1e-6)+Math.round(-gn*$o+1e-6),La=Math.round(-Wa*tl+1e-6)+Math.round(-qa*el+1e-6)+Math.round(-Va*$o+1e-6),us=Math.round(-As*tl+1e-6)+Math.round(-Ts*el+1e-6)+Math.round(-ws*$o+1e-6),nr=Math.round(-_r*tl+1e-6)+Math.round(-mr*el+1e-6)+Math.round(-gr*$o+1e-6),ho=Math.round(-xo*tl+1e-6)+Math.round(-ko*el+1e-6)+Math.round(-Io*$o+1e-6),
ic=Math.round(-hc*tl+1e-6)+Math.round(-_c*el+1e-6)+Math.round(-mc*$o+1e-6),Jn=Math.round(-di*tl+1e-6)+Math.round(-ci*el+1e-6)+Math.round(-ri*$o+1e-6),Ju=Math.round(-dp*tl+1e-6)+Math.round(-cp*el+1e-6)+Math.round(-rp*$o+1e-6),Rn=Math.round(-Vn*tl+1e-6)+Math.round(-Un*el+1e-6)+Math.round(-Bn*$o+1e-6),ml=Math.round(-Il*tl+1e-6)+Math.round(-Sl*el+1e-6)+Math.round(-yl*$o+1e-6),qc=Math.round(-ed*tl+1e-6)+Math.round(-$c*el+1e-6)+Math.round(-Jc*$o+1e-6),id=Math.round(-ld*Jo+1e-6),wu=Math.round(-Au*Jo+1e-6),Ka=Math.round(-Xa*Jo+1e-6),Tn=Math.round(-yn*Jo+1e-6),ya=Math.round(-Ia*Zo+1e-6),Zs=Math.round(-Js*Zo+1e-6),is=Math.round(-ls*Xo+1e-6),ro=Math.round(-uo*Xo+1e-6),'cav'==es?(Xr=Math.round(-$r*Xo+1e-6),jn=Math.round(-Hn*Xo+1e-6),Fu=Math.round(-Yu*Xo+1e-6),sl=Math.round(-cl*Xo+1e-6)):'inf'==es?(Xr=Math.round(-$r*Jo+1e-6),jn=Math.round(-Hn*Jo+1e-6),Fu=Math.round(-Yu*Jo+1e-6),sl=Math.round(-cl*Jo+1e-6)):'arc'==es&&(Xr=Math.round(-$r*Zo+1e-6),jn=Math.round(-Hn*Zo+1e-6),Fu=Math.round(-Yu*Zo+1e-6),
sl=Math.round(-cl*Zo+1e-6)),Dc=100*zc==Lr?0:Math.round(-zc*Jo+1e-6),sd=ld+id,yu=Au+wu,Ja=Xa+Ka,ka=Ia+ya,ss=ls+is,$s=Js+Zs,po=uo+ro,ec=$r+Xr,Qn=Hn+jn,Hu=Yu+Fu,Sn=yn+Tn,Gc=zc+Dc,dl=cl+sl,Ed=hd+ud,zu=Nu+xu,pn=rn+an,Ua=Pa+La,Es=hs+us,pr=rr+nr,So=wo+ho,gc=cc+ic,si=ni+Jn,sp=np+Ju,Gn=Cn+Rn,Xc=Hc+qc,Al=vl+ml,Ls=id*kt[0]+wu*kt[1]+Ka*kt[2]+ya*kt[3]+is*kt[4]+Zs*kt[5]+ro*kt[6]+Xr*kt[7]+jn*kt[8]+sl*kt[9]+Dc*kt[10]+Fu*kt[11]+Tn*kt[12],console.log('lossesAttackerRound3Total'+Ls),Cs=ud*kt[0]+xu*kt[1]+an*kt[2]+La*kt[3]+us*kt[4]+nr*kt[5]+ho*kt[6]+ic*kt[7]+Jn*kt[8]+ml*kt[9]+qc*kt[10]+Ju*kt[11]+Rn*kt[12],console.log('lossesDefenderRound3Total'+Cs),mu=sd*kt[0]+yu*kt[1]+Ja*kt[2]+ka*kt[3]+ss*kt[4]+$s*kt[5]+po*kt[6]+ec*kt[7]+Qn*kt[8]+Hu*kt[11]+Sn*kt[12]+Gc*kt[10]+dl*kt[9],console.log('survivorsAttackerRound3Total'+mu),bu=Ed*kt[0]+zu*kt[1]+pn*kt[2]+Ua*kt[3]+Es*kt[4]+pr*kt[5]+So*kt[6]+gc*kt[7]+si*kt[8]+sp*kt[11]+Gn*kt[12]+Xc*kt[10]+Al*kt[9],console.log('survivorsDefenderRound3Total'+bu),td=-qt+sd,fu=-Ft+yu,
Ya=-r+Ja,wa=-o+ka,ts=-Ot+ss,Hs=-Dt+$s,oo=-xt+po,Qr=-Gt+ec,qn=-p+Qn,Vu=-ha+Hu,vn=-d+Sn,Oc=-Ut+Gc,il=-Mt+dl,rd=-Wt+Ed,Su=-_a+zu,$a=-c+pn,xa=-l+Ua,rs=-Nt+Es,er=-Pt+pr,go=-Rt+So,tc=-Bt+gc,Kn=-g+si,Ku=-ba+sp,In=-u+Gn,Bc=-Vt+Xc,ul=-Lt+Al,Ec=0==ec?0:ec*wr*zo[1],Lo=20==gp?18:19==gp?17:18==gp?15:17==gp?14:16==gp?13:15==gp?11:14==gp?10:13==gp||12==gp?9:11==gp?8:10==gp?7:9==gp||8==gp?6:7==gp||6==gp?5:5==gp||4==gp||3==gp?4:2==gp||1==gp?3:0,bc=0==bn?0:2*Lo,fc=0==Ec||0==bc?0:-Ec/bc,io=gp<=Lc?gp:gp-Lc<-fc?gp<Lc?gp:Lc:gp+fc,Ea=Math.round(io),m='wall'==_i?Ea:parseInt(document.getElementById('buildingLevel').value),gi=0==Qn||0==m?0:Qn*wr*Rl[1],
Ro='headquarter'==_i?30==m?72:29==m?65:28==m?59:27==m?54:26==m?50:25==m?45:24==m?41:23==m?36:22==m?33:21==m?30:20==m?27:19==m?26:18==m?23:17==m?14:16==m?13:15==m?11:14==m?10:13==m||12==m?9:11==m?8:10==m?7:9==m||8==m?6:7==m||6==m?5:5==m||4==m||3==m?4:2==m||1==m?3:0:'wall'==_i?20==Ea?18:19==Ea?17:18==Ea?15:17==Ea?14:16==Ea?13:15==Ea?11:14==Ea?10:13==Ea||12==Ea?9:11==Ea?8:10==Ea?7:9==Ea||8==Ea?6:7==Ea||6==Ea?5:5==Ea||4==Ea||3==Ea?4:2==Ea||1==Ea?3:0:'tavern'==_i?15==m?11:14==m?10:13==m||12==m?9:11==m?8:10==m?7:9==m||8==m?6:7==m||6==m?5:5==m||4==m||3==m?4:2==m||1==m?3:0:'hospital'==_i?10==m?7:9==m||8==m?6:7==m||6==m?5:5==m||4==m||3==m?4:2==m||1==m?3:0:'satue'==_i?5==m||4==m||3==m?4:2==m||1==m?3:0:'rally_point'==_i?5==m||4==m||3==m?4:2==m||1==m?3:0:'church'==_i?3==m||2==m||1==m?800:0:'academy'==_i?1==m?500:0:'preceptory'==_i?10==m?71:9==m?43:8==m?39:7==m?35:6==m?32:5==m?29:4==m?27:3==m?24:2==m?22:1==m?20:0:'barracks'==_i?25==m?30:24==m?27:23==m?24:22==m?22:21==m?20:20==m?18:19==m?17:18==m?15:17==m?14:16==m?13:15==m?11:14==m?10:13==m||12==m?9:11==m?8:10==m?7:9==m||8==m?6:7==m||6==m?5:5==m||4==m||3==m?4:2==m||1==m?3:0:'market'==_i?25==m?30:24==m?27:23==m?24:22==m?22:21==m?20:20==m?18:19==m?17:18==m?15:17==m?14:16==m?13:15==m?11:14==m?10:13==m||12==m?9:11==m?8:10==m?7:9==m||8==m?6:7==m||6==m?5:5==m||4==m||3==m?4:2==m||1==m?3:0:'warehouse'==_i?30==m?48:29==m?43:28==m?39:27==m?36:26==m?33:25==m?30:24==m?27:23==m?24:22==m?22:21==m?20:20==m?18:19==m?17:18==m?15:17==m?14:16==m?13:15==m?11:14==m?10:13==m||12==m?9:11==m?8:10==m?7:9==m||8==m?6:7==m||6==m?5:5==m||4==m||3==m?4:2==m||1==m?3:0:'timber_camp'==_i?30==m?48:29==m?43:28==m?39:27==m?36:26==m?33:25==m?30:24==m?27:23==m?24:22==m?22:21==m?20:20==m?18:19==m?17:18==m?15:17==m?14:16==m?13:15==m?11:14==m?10:13==m||12==m?9:11==m?8:10==m?7:9==m||8==m?6:7==m||6==m?5:5==m||4==m||3==m?4:2==m||1==m?3:0:'clay_pit'==_i?30==m?48:29==m?43:28==m?39:27==m?36:26==m?33:25==m?30:24==m?27:23==m?24:22==m?22:21==m?20:20==m?18:19==m?17:18==m?15:17==m?14:16==m?13:15==m?11:14==m?10:13==m||12==m?9:11==m?8:10==m?7:9==m||8==m?6:7==m||6==m?5:5==m||4==m||3==m?4:2==m||1==m?3:0:'iron_mine'==_i?30==m?48:29==m?43:28==m?39:27==m?36:26==m?33:25==m?30:24==m?27:23==m?24:22==m?22:21==m?20:20==m?18:19==m?17:18==m?15:17==m?14:16==m?13:15==m?11:14==m?10:13==m||12==m?9:11==m?8:10==m?7:9==m||8==m?6:7==m||6==m?5:5==m||4==m||3==m?4:2==m||1==m?3:0:'farm'==_i?30==m?79:29==m?72:28==m?66:27==m?60:26==m?54:25==m?49:24==m?45:23==m?41:22==m?37:21==m?34:20==m?31:19==m?28:18==m?25:17==m?23:16==m?21:15==m?19:14==m?17:13==m?16:12==m?14:11==m?13:10==m?12:9==m?11:8==m?10:7==m?9:6==m?8:5==m||4==m?7:2==m||3==m?6:1==m?5:0:0,
ui=0==m?0:Ro*Er,pi=0==gi||0==ui?0:-gi/ui,no='wall'==_i?io<=Lc?io:io-Lc<-pi?io<Lc?io:Lc:io+pi:pi+m<=0?0:pi+m,va=Math.round(no),Fs=td*kt[0]+fu*kt[1]+Ya*kt[2]+wa*kt[3]+ts*kt[4]+Hs*kt[5]+oo*kt[6]+Qr*kt[7]+qn*kt[8]+il*kt[9]+Oc*kt[10]+Vu*kt[11]+vn*kt[12],js=rd*kt[0]+Su*kt[1]+$a*kt[2]+xa*kt[3]+rs*kt[4]+er*kt[5]+go*kt[6]+tc*kt[7]+Kn*kt[8]+ul*kt[9]+Bc*kt[10]+Ku*kt[11]+In*kt[12],vp=rd*t[0]+Su*t[1]+$a*t[2]+xa*t[3]+rs*t[4]+er*t[5]+go*t[6]+tc*t[7]+Kn*t[8]+ul*t[9]+Bc*t[10]+Ku*t[11]+In*t[12],Ep=td*e[0]+fu*e[1]+Ya*e[2]+wa*e[3]+ts*e[4]+Hs*e[5]+oo*e[6]+Qr*e[7]+qn*e[8]+il*e[9]+Oc*e[10]+Vu*e[11]+vn*e[12],al=0==ja||0==Fs?0:Math.round(-Fs/ja*1e3)/1e3,yp='inf'==es?'piechota':'cav'==es?'kawaleria':'łucznicy',Sp='inf'==(wp=Wt+_a+c+u>Nt+Rt&&Wt+_a+c+u>l+Pt?'inf':Nt+Rt>Wt+_a+c+u&&Nt+Rt>l+Pt?'cav':'arc')?'piechota':'cav'==wp?'kawaleria':'łucznicy',nl=0==hi||0==js?0:Math.round(-js/hi*1e3)/1e3,Cp=Math.round(td*(hr+Mc)),Dp=Math.round(fu*(hr+Mc)),Pp=Math.round(Ya*(hr+Mc)),zp=Math.round(wa*(hr+Mc)),
Gp=Math.round(ts*(hr+Mc)),Bp=Math.round(Hs*(hr+Mc)),Up=Math.round(oo*(hr+Mc)),Vp=Math.round(Qr*(hr+Mc)),qp=Math.round(qn*(hr+Mc)),Wp=Math.round(Oc*(hr+Mc)),Fp=Math.round(il*(hr+Mc)),jp=Math.round(Vu*(hr+Mc)),Yp=Math.round(vn*(hr+Mc)),Hp=Oo+Rc,0==Oo?(kp=0,xp=0,Rp=0,Mp=0,Lp=0,Op=0,Np=0):Oo<1e3?Hp<=(xa+rd+Su+$a)/2?(kp=Math.round(rd/2),xp=Math.round(Su/2),Rp=Math.round($a/2),Mp=Math.round(xa/2),Lp=0,Op=0,Np=0):(kp=Math.round(rd*Hp/(xa+rd+Su+$a)),xp=Math.round(Su*Hp/(xa+rd+Su+$a)),Rp=Math.round($a*Hp/(xa+rd+Su+$a)),Mp=Math.round(xa*Hp/(xa+rd+Su+$a)),Lp=0,Op=0,Np=0):Hp<=(xa+rd+Su+$a+4*rs+5*er+6*go)/2?(kp=Math.round(rd/2),xp=Math.round(Su/2),Rp=Math.round($a/2),Mp=Math.round(xa/2),Lp=Math.round(rs/2),Op=Math.round(er/2),Np=Math.round(go/2)):(kp=Math.round(rd*Hp/(xa+rd+Su+$a+4*rs+5*er+6*go)),xp=Math.round(Su*Hp/(xa+rd+Su+$a+4*rs+5*er+6*go)),Rp=Math.round($a*Hp/(xa+rd+Su+$a+4*rs+5*er+6*go)),Mp=Math.round(xa*Hp/(xa+rd+Su+$a+4*rs+5*er+6*go)),Lp=Math.round(rs*Hp/(xa+rd+Su+$a+4*rs+5*er+6*go)),
Op=Math.round(er*Hp/(xa+rd+Su+$a+4*rs+5*er+6*go)),Np=Math.round(go*Hp/(xa+rd+Su+$a+4*rs+5*er+6*go))),Tp=ja+Fs,Ap=hi+js,L.html(qt),O.html(-td),N.html(-Cp),C.html(sd),D.html(Ft),P.html(-fu),z.html(-Dp),G.html(yu),B.html(r),U.html(-Ya),V.html(-Pp),q.html(Ja),W.html(o),F.html(-wa),j.html(-zp),Y.html(ka),H.html(Ot),Q.html(-ts),K.html(-Gp),Z.html(ss),X.html(Dt),J.html(-Hs),$.html(-Bp),ee.html($s),te.html(xt),ae.html(-oo),ne.html(-Up),ie.html(po),oe.html(Gt),le.html(-Qr),se.html(-Vp),re.html(ec),ce.html(p),de.html(-qn),ue.html(-qp),pe.html(Qn),ge.html(Ut),me.html(-Oc),_e.html(-Wp),he.html(Gc),be.html(Mt),fe.html(-il),ve.html(-Fp),Ee.html(dl),we.html(ha),Te.html(-Vu),Ae.html(-jp),ye.html(Hu),Se.html(d),Ie.html(-vn),ke.html(-Yp),xe.html(Sn),Re.html(Wt),Me.html(-rd),Le.html(kp),Oe.html(Ed),Ne.html(_a),Ce.html(-Su),De.html(xp),Pe.html(zu),ze.html(c),Ge.html(-$a),Be.html(Rp),Ue.html(pn),Ve.html(l),qe.html(-xa),We.html(Mp),Fe.html(Ua),je.html(Nt),Ye.html(-rs),He.html(Lp),Qe.html(Es),Ke.html(Pt),
Ze.html(-er),Xe.html(Op),Je.html(pr),$e.html(Rt),et.html(-go),tt.html(Np),at.html(So),nt.html(Bt),it.html(-tc),ot.html(0),lt.html(gc),st.html(g),rt.html(-Kn),ct.html(0),dt.html(si),ut.html(Vt),pt.html(-Bc),gt.html(0),mt.html(Xc),_t.html(Lt),ht.html(-ul),bt.html(0),ft.html(Al),vt.html(ba),Et.html(-Ku),wt.html(0),Tt.html(sp),At.html(u),yt.html(-In),St.html(0),It.html(Gn),_.html(100*wr),h.html(ja),sa.html(-Fs),ra.html(Tp),ca.html(-js),da.html(Ap),ua.html(eo),pa.html(Hp),ga.html(yp),ma.html(Sp),b.html(-vp),f.html(100*al),v.html(Nd),E.html(100*Er),w.html(hi),T.html(-Ep),A.html(100*nl),y.html(cu),S.html(fa),I.html(gp),k.html(gp),x.html(Ea),la.html(Ip),R.html(m),M.html(va)})),(void 0).on('click',(function(){document.getElementById('spearA').value=parseInt(document.getElementById('spearA-survived').innerHTML),document.getElementById('swordA').value=parseInt(document.getElementById('swordA-survived').innerHTML),
document.getElementById('axeA').value=parseInt(document.getElementById('axeA-survived').innerHTML),document.getElementById('archerA').value=parseInt(document.getElementById('archerA-survived').innerHTML),document.getElementById('lcA').value=parseInt(document.getElementById('lcA-survived').innerHTML),document.getElementById('maA').value=parseInt(document.getElementById('maA-survived').innerHTML),document.getElementById('hcA').value=parseInt(document.getElementById('hcA-survived').innerHTML),document.getElementById('ramA').value=parseInt(document.getElementById('ramA-survived').innerHTML),document.getElementById('catapultA').value=parseInt(document.getElementById('catapultA-survived').innerHTML),document.getElementById('snobA').value=parseInt(document.getElementById('snobA-survived').innerHTML),document.getElementById('knightA').value=parseInt(document.getElementById('knightA-survived').innerHTML),
document.getElementById('trebuchetA').value=parseInt(document.getElementById('trebuchetA-survived').innerHTML),document.getElementById('berserkerA').value=parseInt(document.getElementById('berserkerA-survived').innerHTML),document.getElementById('spearD').value=parseInt(document.getElementById('spearD-survived').innerHTML),document.getElementById('swordD').value=parseInt(document.getElementById('swordD-survived').innerHTML),document.getElementById('axeD').value=parseInt(document.getElementById('axeD-survived').innerHTML),document.getElementById('archerD').value=parseInt(document.getElementById('archerD-survived').innerHTML),document.getElementById('lcD').value=parseInt(document.getElementById('lcD-survived').innerHTML),document.getElementById('maD').value=parseInt(document.getElementById('maD-survived').innerHTML),document.getElementById('hcD').value=parseInt(document.getElementById('hcD-survived').innerHTML),
document.getElementById('ramD').value=parseInt(document.getElementById('ramD-survived').innerHTML),document.getElementById('catapultD').value=parseInt(document.getElementById('catapultD-survived').innerHTML),document.getElementById('snobD').value=parseInt(document.getElementById('snobD-survived').innerHTML),document.getElementById('knightD').value=parseInt(document.getElementById('knightD-survived').innerHTML),document.getElementById('trebuchetD').value=parseInt(document.getElementById('trebuchetD-survived').innerHTML),document.getElementById('berserkerD').value=parseInt(document.getElementById('berserkerD-survived').innerHTML),r.notif('success',g('i18n')('inserted',a.loc.ale,'battle_calculator'))})),(void 0).on('click',(function(){var e=injector.get('socketService'),t=injector.get('routeProvider'),a=Ya.id,n=0,i=0,o=0,l=0,s=0,r=0,c=0,d=0,u=0,p=0,g=0,m=0,_=0;function h(){document.getElementById('spearA').value=g,document.getElementById('swordA').value=m,
document.getElementById('axeA').value=i,document.getElementById('archerA').value=n,document.getElementById('lcA').value=c,document.getElementById('maA').value=d,document.getElementById('hcA').value=s,document.getElementById('ramA').value=u,document.getElementById('catapultA').value=o,document.getElementById('snobA').value=p,document.getElementById('knightA').value=r,document.getElementById('trebuchetA').value=_,document.getElementById('berserkerA').value=l}e.emit(t.VILLAGE_UNIT_INFO,{village_id:a},(function(e){i=e.available_units.axe.total,n=e.available_units.archer.total,o=e.available_units.catapult.total,l=e.available_units.doppelsoldner.total,s=e.available_units.heavy_cavalry.total,r=e.available_units.knight.total,c=e.available_units.light_cavalry.total,d=e.available_units.mounted_archer.total,u=e.available_units.ram.total,p=e.available_units.snob.total,g=e.available_units.spear.total,m=e.available_units.sword.total,_=e.available_units.trebuchet.total})),setTimeout(h,500)})),
(void 0).on('click',(function(){var e=injector.get('socketService'),t=injector.get('routeProvider'),a=Ya.id,n=0,i=0,o=0,l=0,s=0,r=0,c=0,d=0,u=0,p=0,g=0,m=0,_=0;function h(){document.getElementById('spearD').value=g,document.getElementById('swordD').value=m,document.getElementById('axeD').value=i,document.getElementById('archerD').value=n,document.getElementById('lcD').value=c,document.getElementById('maD').value=d,document.getElementById('hcD').value=s,document.getElementById('ramD').value=u,document.getElementById('catapultD').value=o,document.getElementById('snobD').value=p,document.getElementById('knightD').value=r,document.getElementById('trebuchetD').value=_,document.getElementById('berserkerD').value=l}e.emit(t.VILLAGE_UNIT_INFO,{village_id:a},(function(e){i=e.available_units.axe.total,n=e.available_units.archer.total,o=e.available_units.catapult.total,l=e.available_units.doppelsoldner.total,s=e.available_units.heavy_cavalry.total,r=e.available_units.knight.total,
c=e.available_units.light_cavalry.total,d=e.available_units.mounted_archer.total,u=e.available_units.ram.total,p=e.available_units.snob.total,g=e.available_units.spear.total,m=e.available_units.sword.total,_=e.available_units.trebuchet.total})),setTimeout(h,500)})),(void 0).on('click',(function(){var e=injector.get('socketService'),t=injector.get('routeProvider'),a=document.getElementById('preset').value,n=[],i=[],o=[],l=[],s=[],r=[],c=[],d=[],u=[],p=[],g=[],m=[],_=[];function h(){document.getElementById('spearA').value=g[0],document.getElementById('swordA').value=m[0],document.getElementById('axeA').value=i[0],document.getElementById('archerA').value=n[0],document.getElementById('lcA').value=c[0],document.getElementById('maA').value=d[0],document.getElementById('hcA').value=s[0],document.getElementById('ramA').value=u[0],document.getElementById('catapultA').value=o[0],document.getElementById('snobA').value=p[0],document.getElementById('knightA').value=r[0],
document.getElementById('trebuchetA').value=_[0],document.getElementById('berserkerA').value=l[0]}e.emit(t.GET_PRESETS,{},(function(e){var t;for(t=0;t<e.presets.length;t++)e.presets[t].name==a&&(i.push(e.presets[t].units.axe),n.push(e.presets[t].units.archer),o.push(e.presets[t].units.catapult),l.push(e.presets[t].units.doppelsoldner),s.push(e.presets[t].units.heavy_cavalry),r.push(e.presets[t].units.knight),c.push(e.presets[t].units.light_cavalry),d.push(e.presets[t].units.mounted_archer),u.push(e.presets[t].units.ram),_.push(e.presets[t].units.trebuchet),m.push(e.presets[t].units.sword),g.push(e.presets[t].units.spear),p.push(e.presets[t].units.snob))})),setTimeout(h,500)})),(void 0).on('click',(function(){var e=injector.get('socketService'),t=injector.get('routeProvider'),a=document.getElementById('preset').value,n=[],i=[],o=[],l=[],s=[],r=[],c=[],d=[],u=[],p=[],g=[],m=[],_=[];function h(){document.getElementById('spearD').value=g[0],document.getElementById('swordD').value=m[0],
document.getElementById('axeD').value=i[0],document.getElementById('archerD').value=n[0],document.getElementById('lcD').value=c[0],document.getElementById('maD').value=d[0],document.getElementById('hcD').value=s[0],document.getElementById('ramD').value=u[0],document.getElementById('catapultD').value=o[0],document.getElementById('snobD').value=p[0],document.getElementById('knightD').value=r[0],document.getElementById('trebuchetD').value=_[0],document.getElementById('berserkerD').value=l[0]}e.emit(t.GET_PRESETS,{},(function(e){var t;for(t=0;t<e.presets.length;t++)e.presets[t].name==a&&(i.push(e.presets[t].units.axe),n.push(e.presets[t].units.archer),o.push(e.presets[t].units.catapult),l.push(e.presets[t].units.doppelsoldner),s.push(e.presets[t].units.heavy_cavalry),r.push(e.presets[t].units.knight),c.push(e.presets[t].units.light_cavalry),d.push(e.presets[t].units.mounted_archer),u.push(e.presets[t].units.ram),_.push(e.presets[t].units.trebuchet),m.push(e.presets[t].units.sword),
g.push(e.presets[t].units.spear),p.push(e.presets[t].units.snob))})),setTimeout(h,500)})),(void 0).on('click',(function(){
var e,t,a,n,i=document.getElementById('spearCost').value,o=document.getElementById('swordCost').value,l=document.getElementById('axeCost').value,s=document.getElementById('archerCost').value,r=document.getElementById('lcCost').value,c=document.getElementById('maCost').value,d=document.getElementById('hcCost').value,u=document.getElementById('ramCost').value,p=document.getElementById('catapultCost').value,g=document.getElementById('berserkerCost').value,m=document.getElementById('trebuchetCost').value,_=document.getElementById('snobCost').value,h=document.getElementById('knightCost').value,b=document.getElementById('barracks').value,f=document.getElementById('preceptory').value,v=[50,30,60,80,125,250,200,300,320,0,4e4,4e3,1200],E=[30,30,30,30,100,100,150,200,400,0,5e4,2e3,1200],w=[20,70,40,60,250,150,600,200,100,0,5e4,2e3,2400],T=[1,1,1,1,4,5,6,5,8,1,100,10,6],A=[90,120,150,180,360,450,600,480,450,21600,10800,1200,1200],y=[10,25,45,25,130,150,150,2,100,150,30,30,300],S=[25,55,10,10,30,40,200,20,100,250,100,200,100],I=[45,5,5,30,40,30,160,50,50,400,50,250,100],k=[10,30,10,60,30,50,180,20,100,150,100,200,50],x=[8,9,14,18,24,35,50,0],R=[25,15,10,10,80,50,50,0,0,100,0,0,10],M=[0,33,66,99],L=0,O=0,N=1,C=1,D=1,P=1,z=1,G=1,B=1,U=1,V=(void 0)[0].dataset.value
;C=b>=10&&b<20?1.05:b>=20&&b<25?1.15:b>=25?1.3:1,P=Ft[0].dataset.value,z=1==f?1.01:2==f?1.02:3==f?1.03:4==f?1.04:5==f?1.05:6==f?1.06:7==f?1.07:8==f?1.08:9==f?1.09:10==f?1.1:1,D=document.getElementById('settings-domination').checked?1.1:1,L=m>0?x[6]+' minut':_>0?x[5]+' minut':u>0||p>0?x[4]+' minuty':o>0?x[3]+' minut':i>0||l>0||s>0||g>0?x[2]+' minut':d>0?x[1]+' minut':r>0||c>0||h>0?x[0]+' minut':x[7]+' minut',O=b>=7&&b<14?M[1]:b>=14&&b<23?M[2]:b>=23?M[3]:M[0],B=(G=N/(D*P)/C)/z,U=N/z,_a='deff'==V?B*(i*A[0]+o*A[1]+s*A[3]+d*A[6])+U*(m*A[11])+G*(l*A[2]+r*A[4]+c*A[5]+u*A[7]+p*A[8])+g*A[12]+h*A[9]+_*A[10]:'off'==V?G*(i*A[0]+o*A[1]+s*A[3]+d*A[6])+m*A[11]+B*(l*A[2]+r*A[4]+c*A[5]+u*A[7]+p*A[8])+U*(g*A[12])+h*A[9]+_*A[10]:G*(i*A[0]+o*A[1]+s*A[3]+d*A[6])+m*A[11]+G*(l*A[2]+r*A[4]+c*A[5]+u*A[7]+p*A[8])+g*A[12]+h*A[9]+_*A[10],ha=i*v[0]+o*v[1]+l*v[2]+s*v[3]+r*v[4]+c*v[5]+d*v[6]+u*v[7]+p*v[8]+h*v[9]+_*v[10]+m*v[11]+g*v[12],
ba=i*E[0]+o*E[1]+l*E[2]+s*E[3]+r*E[4]+c*E[5]+d*E[6]+u*E[7]+p*E[8]+h*E[9]+_*E[10]+m*E[11]+g*E[12],fa=i*w[0]+o*w[1]+l*w[2]+s*w[3]+r*w[4]+c*w[5]+d*w[6]+u*w[7]+p*w[8]+h*w[9]+_*w[10]+m*w[11]+g*w[12],va=i*T[0]+o*T[1]+l*T[2]+s*T[3]+r*T[4]+c*T[5]+d*T[6]+u*T[7]+p*T[8]+h*T[9]+_*T[10]+m*T[11]+g*T[12],wa=i*y[0]+o*y[1]+l*y[2]+s*y[3]+r*y[4]+c*y[5]+d*y[6]+u*y[7]+p*y[8]+h*y[9]+_*y[10]+m*y[11]+g*y[12],Ta=i*S[0]+o*S[1]+l*S[2]+s*S[3]+r*S[4]+c*S[5]+d*S[6]+u*S[7]+p*S[8]+h*S[9]+_*S[10]+m*S[11]+g*S[12],Aa=i*I[0]+o*I[1]+l*I[2]+s*I[3]+r*I[4]+c*I[5]+d*I[6]+u*I[7]+p*I[8]+h*I[9]+_*I[10]+m*I[11]+g*I[12],ya=i*k[0]+o*k[1]+l*k[2]+s*k[3]+r*k[4]+c*k[5]+d*k[6]+u*k[7]+p*k[8]+h*k[9]+_*k[10]+m*k[11]+g*k[12],Ea=i*R[0]+o*R[1]+l*R[2]+s*R[3]+r*R[4]+c*R[5]+d*R[6]+u*R[7]+p*R[8]+h*R[9]+_*R[10]+m*R[11]+g*R[12],e=_a,t='',a=new Date(1e3*e).toISOString().substr(11,8),(n=Math.floor(e/86400))>1?t=n+' dni i ':n>0&&(t='1 dzień i '),Sa=t+=a,Ia=i*y[0]+o*y[1]+l*y[2]+u*y[7]+p*y[8]+m*y[11]+g*y[12],ka=r*y[4]+d*y[6]+h*y[9],xa=s*y[3]+c*y[5],
Rt.html(ha),Mt.html(ba),Lt.html(fa),Ot.html(va),Nt.html(wa),Ct.html(Ia),Dt.html(ka),Pt.html(xa),zt.html(Ta),Gt.html(Aa),Bt.html(ya),Ut.html(L),Vt.html(Ea),qt.html(O),Wt.html(Sa)})),(void 0).on('click',(function(){var e=document.getElementById('spearBash').value,t=document.getElementById('swordBash').value,a=document.getElementById('axeBash').value,n=document.getElementById('archerBash').value,i=document.getElementById('lcBash').value,o=document.getElementById('maBash').value,l=document.getElementById('hcBash').value,s=document.getElementById('ramBash').value,r=document.getElementById('catapultBash').value,c=document.getElementById('berserkerBash').value,d=document.getElementById('trebuchetBash').value,u=document.getElementById('snobBash').value,p=document.getElementById('knightBash').value,g=[1,2,4,2,13,12,15,8,10,20,200,0,25],m=[4,5,1,5,5,6,23,4,12,40,200,25,10],_=0,h=0;function b(){kt.html(h),xt.html(_)}
_=e*g[0]+t*g[1]+a*g[2]+n*g[3]+i*g[4]+o*g[5]+l*g[6]+s*g[7]+r*g[8]+p*g[9]+u*g[10]+d*g[11]+c*g[12],h=e*m[0]+t*m[1]+a*m[2]+n*m[3]+i*m[4]+o*m[5]+l*m[6]+s*m[7]+r*m[8]+p*m[9]+u*m[10]+d*m[11]+c*m[12],setTimeout(b,500)})),Ft.on('selectSelected',(function(){Ra=Ft[0].dataset.value,console.log('intenseTraining'+Ra)})),(void 0).on('selectSelected',(function(){Ma=(void 0)[0].dataset.value,console.log('order'+Ma)})),Yt.on('selectSelected',(function(){La=Yt[0].dataset.value,console.log('faithDefender'+La)})),jt.on('selectSelected',(function(){Oa=jt[0].dataset.value,console.log('faithAttacker'+Oa)})),Ht.on('selectSelected',(function(){Na=Ht[0].dataset.value,console.log('skillAttack'+Na)})),Qt.on('selectSelected',(function(){Ca=Qt[0].dataset.value,console.log('skillWalls'+Ca)})),Kt.on('selectSelected',(function(){Da=Kt[0].dataset.value,console.log('skillClinique'+Da)})),Zt.on('selectSelected',(function(){Pa=Zt[0].dataset.value,console.log('hospitalBeds'+Pa)})),Xt.on('selectSelected',(function(){
za=Xt[0].dataset.value,console.log('catapultTarget'+za)})),Jt.on('selectSelected',(function(){Ga=Jt[0].dataset.value,console.log('itemDeff1'+Ga)})),$t.on('selectSelected',(function(){Ba=$t[0].dataset.value,console.log('itemDeff2'+Ba)})),ea.on('selectSelected',(function(){Ua=ea[0].dataset.value,console.log('itemDeff3'+Ua)})),ta.on('selectSelected',(function(){Va=ta[0].dataset.value,console.log('itemOff'+Va)})),aa.on('selectSelected',(function(){qa=aa[0].dataset.value,console.log('levelDeff1'+qa)})),na.on('selectSelected',(function(){Wa=na[0].dataset.value,console.log('levelDeff2'+Wa)})),ia.on('selectSelected',(function(){Fa=ia[0].dataset.value,console.log('levelDeff3'+Fa)})),oa.on('selectSelected',(function(){ja=oa[0].dataset.value,console.log('levelOff'+ja)}))};const Qa=function(e,t){p=t.data},Ka=function(){p=!1},Za=function(){if(!p)return r.notif('error',g('i18n')('error_no_map_selected_village',a.loc.ale,'battle_calculator'));l.loadTownDataAsync(p.x,p.y,1,1,(function(e){
(void 0).target=e}))},Xa=function(e){d.selectedTab=e},Ja=function(){const e=i.getSelectedVillage().data;(void 0).origin={id:e.villageId,x:e.x,y:e.y,name:e.name,character_id:(void 0).getId()}};const $a={autoCompleteSelected:function(){},onAutoCompleteOrigin:function(e){(void 0).origin={id:e.id,x:e.x,y:e.y,name:e.name}},onAutoCompleteTarget:function(e){(void 0).target={id:e.id,x:e.x,y:e.y,name:e.name}},start:function(){Ha(),r.notif('success',g('i18n')('calculated',a.loc.ale,'battle_calculator'))}},en=function(){d=a.$new(),d.selectedTab=m.BATTLE,d.TAB_TYPES=m,d.selectTab=Xa,d.addSelected=Ja,d.addMapSelected=Za,d.autoCompleteTarget={type:['village'],placeholder:g('i18n')('add_village_search',a.loc.ale,'battle_calculator'),onEnter:$a.onAutoCompleteTarget,tooltip:g('i18n')('add_target',a.loc.ale,'battle_calculator'),dropDown:!0},d.searchQuery={target:''},(void 0).register(s.SELECT_SELECTED,$a.autoCompleteSelected,!0),(void 0).register(s.BATTLE_CALCULATOR_START,$a.start),
(void 0).register(s.BATTLE_CALCULATOR_STOP,$a.stop),(void 0).register(s.COMMAND_QUEUE_START,$a.start),c.getScreenWithInjectedScope('!twoverflow_queue_window',d)};return function(){u=e.addMenuButton('Kalkulator',170),u.addEventListener('click',en),o.register(s.BATTLE_CALCULATOR_START,(function(){u.classList.remove('btn-orange'),u.classList.add('btn-red')})),o.register(s.BATTLE_CALCULATOR_STOP,(function(){u.classList.remove('btn-red'),u.classList.add('btn-orange')})),a.$on(s.SHOW_CONTEXT_MENU,Qa),a.$on(s.DESTROY_CONTEXT_MENU,Ka),
e.addTemplate('twoverflow_battle_calculator_window',"<div id=\"two-battle-calculator\" class=\"win-content two window\"><header class=\"win-head\"><h2>Strateg</h2><ul class=\"list-btn\"><li><a href=\"#\" class=\"size-34x34 btn-red icon-26x26-close\" ng-click=\"closeWindow()\"></a></ul></header><div class=\"win-main small-select\" scrollbar=\"\"><div class=\"tabs tabs-bg\"><div class=\"tabs-three-col\"><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.BATTLE)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.BATTLE}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.BATTLE}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.BATTLE}\">{{ TAB_TYPES.BATTLE | i18n:loc.ale:'battle' }}</a></div></div></div><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.TROOPS)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.TROOPS}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.TROOPS}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.TROOPS}\">{{ TAB_TYPES.TROOPS | i18n:loc.ale:'troops' }}</a></div></div></div><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.BASHPOINTS)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.BASHPOINTS}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.BASHPOINTS}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.BASHPOINTS}\">{{ TAB_TYPES.BASHPOINTS | i18n:loc.ale:'bashpoints' }}</a></div></div></div></div></div><div class=\"box-paper footer\"><div class=\"scroll-wrap\"><div class=\"settings\" ng-show=\"selectedTab === TAB_TYPES.BATTLE\"><h5 class=\"twx-section\">{{ 'battle.header' | i18n:loc.ale:'battle_calculator' }}</h5><table class=\"tbl-border-light tbl-striped\"><col><tr><td class=\"item-simulate\"><span class=\"btn btn-orange addSelected\" ng-click=\"simulateBattle\" tooltip=\"{{ 'simulate.tip' | i18n:loc.ale:'battle_calculator' }}\">{{ 'simulate.btn' | i18n:loc.ale:'battle_calculator' }}</span></table><table class=\"table table_vertical\" id=\"simulation_result\"><col><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><col width=\"34px\"><tr><th colspan=\"14\">{{ 'battle.attacker' | i18n:loc.ale:'battle_calculator' }}<tr><td style=\"padding-left:5px;\"><div style=\"height:34px;line-height:34px;\"><span class=\"unitname\">{{ 'battle.unit' | i18n:loc.ale:'battle_calculator' }}</span></div><div height=\"26px\"><span class=\"icon-20x20-report-amount\"></span><span class=\"unitname\"> {{ 'battle.amount' | i18n:loc.ale:'battle_calculator' }}</span></div><div height=\"26px\"><span class=\"icon-20x20-report-losses\"></span><span class=\"unitname\"> {{ 'battle.loses' | i18n:loc.ale:'battle_calculator' }}</span></div><div height=\"26px\"><span class=\"icon-20x20-report-revive\"></span><span class=\"unitname\"> {{ 'battle.revived' | i18n:loc.ale:'battle_calculator' }}</span></div><div height=\"26px\"><span class=\"unitname\" tooltip=\"{{ 'battle.survivorsA' | i18n:loc.ale:'battle_calculator' }}\">{{ 'battle.survivors' | i18n:loc.ale:'battle_calculator' }}</span></div><td><span class=\"icon-bg-black icon-34x34-unit-spear\"></span><div style=\"text-align:center;\"><span id=\"spearA-amount\" class=\"spearA-amount\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"spearA-losses\" class=\"spearA-losses\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"spearA-revived\" class=\"spearA-revived\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"spearA-survived\" class=\"spearA-survived\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-sword\"></span><div style=\"text-align:center;\"><span id=\"swordA-amount\" class=\"swordA-amount\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"swordA-losses\" class=\"swordA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"swordA-revived\" class=\"swordA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"swordA-survived\" class=\"swordA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-axe\"></span><div style=\"text-align:center;\"><span id=\"axeA-amount\" class=\"axeA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"axeA-losses\" class=\"axeA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"axeA-revived\" class=\"axeA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"axeA-survived\" class=\"axeA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-archer\"></span><div style=\"text-align:center;\"><span id=\"archerA-amount\" class=\"archerA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"archerA-losses\" class=\"archerA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"archerA-revived\" class=\"archerA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"archerA-survived\" class=\"archerA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-light_cavalry\"></span><div style=\"text-align:center;\"><span id=\"lcA-amount\" class=\"lcA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"lcA-losses\" class=\"lcA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"lcA-revived\" class=\"lcA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"lcA-survived\" class=\"lcA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-mounted_archer\"></span><div style=\"text-align:center;\"><span id=\"maA-amount\" class=\"maA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"maA-losses\" class=\"maA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"maA-revived\" class=\"maA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"maA-survived\" class=\"maA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-heavy_cavalry\"></span><div style=\"text-align:center;\"><span id=\"hcA-amount\" class=\"hcA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"hcA-losses\" class=\"hcA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"hcA-revived\" class=\"hcA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"hcA-survived\" class=\"hcA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-ram\"></span><div style=\"text-align:center;\"><span id=\"ramA-amount\" class=\"ramA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"ramA-losses\" class=\"ramA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"ramA-revived\" class=\"ramA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"ramA-survived\" class=\"ramA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-catapult\"></span><div style=\"text-align:center;\"><span id=\"catapultA-amount\" class=\"catapultA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"catapultA-losses\" class=\"catapultA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"catapultA-revived\" class=\"catapultA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"catapultA-survived\" class=\"catapultA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-doppelsoldner\"></span><div style=\"text-align:center;\"><span id=\"berserkerA-amount\" class=\"berserkerA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"berserkerA-losses\" class=\"berserkerA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"berserkerA-revived\" class=\"berserkerA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"berserkerA-survived\" class=\"berserkerA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-trebuchet\"></span><div style=\"text-align:center;\"><span id=\"trebuchetA-amount\" class=\"trebuchetA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"trebuchetA-losses\" class=\"trebuchetA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"trebuchetA-revived\" class=\"trebuchetA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"trebuchetA-survived\" class=\"trebuchetA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-snob\"></span><div style=\"text-align:center;\"><span id=\"snobA-amount\" class=\"snobA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"snobA-losses\" class=\"snobA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"snobA-revived\" class=\"snobA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"snobA-survived\" class=\"snobA-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-knight\"></span><div style=\"text-align:center;\"><span id=\"knightA-amount\" class=\"knightA-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"knightA-losses\" class=\"knightA-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"knightA-revived\" class=\"knightA-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"knightA-survived\" class=\"knightA-survived\" style=\"text-align:center;color:#000000\">0</span></div><tr><td colspan=\"2\"><span style=\"float:left\" class=\"icon-bg-red icon-34x34-attack\" tooltip=\"{{ 'battle.attackModifier' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"attackModifier\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-bg-black icon-34x34-resource-food\" tooltip=\"{{ 'battle.provisions' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"attackProvisions\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-bg-black icon-34x34-attack\" tooltip=\"{{ 'battle.strentghAttack' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"strentghAttack\"></span></div><tr><td colspan=\"2\"><span style=\"float:left\" class=\"icon-bg-black icon-34x34-bashpoints-offensive\" tooltip=\"{{ 'battle.attackBashpoint' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"attackBashpoint\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-bg-red icon-34x34-resource-food\" tooltip=\"{{ 'battle.killedprovisions' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"attackKilledProvisions\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-bg-black icon-34x34-favourite\" tooltip=\"{{ 'battle.strongesttype' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"strongestTypeOff\"></span></div><tr><td colspan=\"2\"><span style=\"float:left\" class=\"report-symbol icon-34x34-casualties bg-casualties\" tooltip=\"{{ 'battle.killrateA' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"killrateA\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-bg-blue icon-34x34-resource-food\" tooltip=\"{{ 'battle.survivedprovisions' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"attackSurvivedProvisions\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-34x34-skill-attack_bonus\" tooltip=\"{{ 'battle.doublestrength' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"doubleStrength\"></span></div><tr><th colspan=\"14\">{{ 'battle.defender' | i18n:loc.ale:'battle_calculator' }}<tr><td style=\"padding-left:5px;\"><div style=\"height:34px;line-height:34px;\"><span class=\"unitname\">{{ 'battle.unit' | i18n:loc.ale:'battle_calculator' }}</span></div><div height=\"26px\"><span class=\"icon-20x20-report-amount\"></span><span class=\"unitname\"> {{ 'battle.amount' | i18n:loc.ale:'battle_calculator' }}</span></div><div height=\"26px\"><span class=\"icon-20x20-report-losses\"></span><span class=\"unitname\"> {{ 'battle.loses' | i18n:loc.ale:'battle_calculator' }}</span></div><div height=\"26px\"><span class=\"icon-20x20-report-revive\"></span><span class=\"unitname\"> {{ 'battle.revived' | i18n:loc.ale:'battle_calculator' }}</span></div><div height=\"26px\"><span class=\"unitname\" tooltip=\"{{ 'battle.survivorsD' | i18n:loc.ale:'battle_calculator' }}\">{{ 'battle.survivors' | i18n:loc.ale:'battle_calculator' }}</span></div><td><span class=\"icon-bg-black icon-34x34-unit-spear\"></span><div style=\"text-align:center;\"><span id=\"spearD-amount\" class=\"spearD-amount\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"spearD-losses\" class=\"spearD-losses\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"spearD-revived\" class=\"spearD-revived\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"spearD-survived\" class=\"spearD-survived\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-sword\"></span><div style=\"text-align:center;\"><span id=\"swordD-amount\" class=\"swordD-amount\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"swordD-losses\" class=\"swordD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"swordD-revived\" class=\"swordD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"swordD-survived\" class=\"swordD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-axe\"></span><div style=\"text-align:center;\"><span id=\"axeD-amount\" class=\"axeD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"axeD-losses\" class=\"axeD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"axeD-revived\" class=\"axeD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"axeD-survived\" class=\"axeD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-archer\"></span><div style=\"text-align:center;\"><span id=\"archerD-amount\" class=\"archerD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"archerD-losses\" class=\"archerD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"archerD-revived\" class=\"archerD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"archerD-survived\" class=\"archerD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-light_cavalry\"></span><div style=\"text-align:center;\"><span id=\"lcD-amount\" class=\"lcD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"lcD-losses\" class=\"lcD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"lcD-revived\" class=\"lcD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"lcD-survived\" class=\"lcD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-mounted_archer\"></span><div style=\"text-align:center;\"><span id=\"maD-amount\" class=\"maD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"maD-losses\" class=\"maD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"maD-revived\" class=\"maD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"maD-survived\" class=\"maD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-heavy_cavalry\"></span><div style=\"text-align:center;\"><span id=\"hcD-amount\" class=\"hcD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"hcD-losses\" class=\"hcD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"hcD-revived\" class=\"hcD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"hcD-survived\" class=\"hcD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-ram\"></span><div style=\"text-align:center;\"><span id=\"ramD-amount\" class=\"ramD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"ramD-losses\" class=\"ramD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"ramD-revived\" class=\"ramD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"ramD-survived\" class=\"ramD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-catapult\"></span><div style=\"text-align:center;\"><span id=\"catapultD-amount\" class=\"catapultD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"catapultD-losses\" class=\"catapultD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"catapultD-revived\" class=\"catapultD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"catapultD-survived\" class=\"catapultD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-doppelsoldner\"></span><div style=\"text-align:center;\"><span id=\"berserkerD-amount\" class=\"berserkerD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"berserkerD-losses\" class=\"berserkerD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"berserkerD-revived\" class=\"berserkerD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"berserkerD-survived\" class=\"berserkerD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-trebuchet\"></span><div style=\"text-align:center;\"><span id=\"trebuchetD-amount\" class=\"trebuchetD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"trebuchetD-losses\" class=\"trebuchetD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"trebuchetD-revived\" class=\"trebuchetD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"trebuchetD-survived\" class=\"trebuchetD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-snob\"></span><div style=\"text-align:center;\"><span id=\"snobD-amount\" class=\"snobD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"snobD-losses\" class=\"snobD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"snobD-revived\" class=\"snobD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"snobD-survived\" class=\"snobD-survived\" style=\"text-align:center;color:#000000\">0</span></div><td><span class=\"icon-bg-black icon-34x34-unit-knight\"></span><div style=\"text-align:center;\"><span id=\"knightD-amount\" class=\"knightD-amount\" style=\"text-align:center;\">0</span></div><div style=\"text-align:center;color:#a1251f\"><span id=\"knightD-losses\" class=\"knightD-losses\" style=\"text-align:center;color:#a1251f\">0</span></div><div style=\"text-align:center;color:#009fff\"><span id=\"knightD-revived\" class=\"knightD-revived\" style=\"text-align:center;color:#009fff\">0</span></div><div style=\"text-align:center;color:#000000\"><span id=\"knightD-survived\" class=\"knightD-survived\" style=\"text-align:center;color:#000000\">0</span></div><tr><td colspan=\"2\"><span style=\"float:left\" class=\"icon-bg-blue icon-34x34-defense\" tooltip=\"{{ 'battle.defenceModifier' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"defenceModifier\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-bg-black icon-34x34-resource-food\" tooltip=\"{{ 'battle.provisions' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"defenceProvisions\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-bg-black icon-34x34-defense\" tooltip=\"{{ 'battle.strentghDefend' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"strentghDefend\"></span></div><tr><td colspan=\"2\"><span style=\"float:left\" class=\"icon-bg-black icon-34x34-bashpoints-defensive\" tooltip=\"{{ 'battle.defenceBashpoint' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"defenceBashpoint\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-bg-red icon-34x34-resource-food\" tooltip=\"{{ 'battle.killedprovisions' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"defenceKilledProvisions\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-bg-black icon-34x34-favourite\" tooltip=\"{{ 'battle.strongesttype' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"strongestTypeDef\"></span></div><tr><td colspan=\"2\"><span style=\"float:left\" class=\"report-symbol icon-34x34-casualties bg-casualties\" tooltip=\"{{ 'battle.killrateD' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"killrateD\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-bg-blue icon-34x34-resource-food\" tooltip=\"{{ 'battle.survivedprovisions' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"defenceSurvivedProvisions\"></span></div><td colspan=\"6\"><span style=\"float:left\" class=\"icon-34x34-skill-better_hospital\" tooltip=\"{{ 'battle.beds' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"availableBeds\"></span></div><tr id=\"predamage\"><th><span class=\"unitname\">{{ 'battle.predamage' | i18n:loc.ale:'battle_calculator' }}:</span><td colspan=\"13\">{{ 'battle.downgrade' | i18n:loc.ale:'battle_calculator' }}<b class=\"wallfrompre\" id=\"wallfrompre\">20</b>{{ 'battle.to' | i18n:loc.ale:'battle_calculator' }}<b class=\"walltopre\" id=\"walltopre\">20</b><tr id=\"ramdamage\"><th><span class=\"unitname\">{{ 'battle.damage' | i18n:loc.ale:'battle_calculator' }}:</span><td colspan=\"13\">{{ 'battle.downgrade' | i18n:loc.ale:'battle_calculator' }}<b class=\"wallfrom\" id=\"wallfrom\">20</b>{{ 'battle.to' | i18n:loc.ale:'battle_calculator' }}<b class=\"wallto\" id=\"wallto\">20</b><tr id=\"catapultdamage\"><th><span class=\"unitname\">{{ 'battle.damageCatapult' | i18n:loc.ale:'battle_calculator' }}:</span><td colspan=\"13\"><span class=\"target\"></span>{{ 'battle.downgradeCatapult' | i18n:loc.ale:'battle_calculator' }}<b class=\"buildingfrom\" id=\"buildingfrom\"> </b>{{ 'battle.to' | i18n:loc.ale:'battle_calculator' }}<b class=\"buildingto\" id=\"buildingto\"></b></table><table class=\"tbl-border-light tbl-striped\"><col><col width=\"33%\"><col width=\"33%\"><tr><td colspan=\"3\" class=\"item-insert\"><span class=\"btn btn-orange addSelected\">{{ 'battle.insert' | i18n:loc.ale:'battle_calculator' }}</span><tr><td class=\"item-input\"><input class=\"textfield-border\" id=\"village\" value=\"\" autocomplete=\"off\" placeholder=\"{{ 'battle.id' | i18n:loc.ale:'battle_calculator' }}\"><td class=\"item-insertV\"><span class=\"btn btn-orange addSelected\" tooltip=\"{{ 'battle.insertV' | i18n:loc.ale:'battle_calculator' }}\">{{ 'battle.insertvillage' | i18n:loc.ale:'battle_calculator' }}</span><td class=\"item-insertVD\"><span class=\"btn btn-orange addSelected\" tooltip=\"{{ 'battle.insertVD' | i18n:loc.ale:'battle_calculator' }}\">{{ 'battle.insertvillage' | i18n:loc.ale:'battle_calculator' }}</span><tr><td><span class=\"item-icon\"></span><td class=\"item-name\"><td class=\"item-id\"><tr><td class=\"item-input\"><input class=\"textfield-border\" id=\"preset\" value=\"\" autocomplete=\"off\" placeholder=\"{{ 'name' | i18n:loc.ale:'battle_calculator' }}\"><td class=\"item-insertP\"><span class=\"btn btn-orange addSelected\" tooltip=\"{{ 'battle.insertP' | i18n:loc.ale:'battle_calculator' }}\">{{ 'battle.insertpreset' | i18n:loc.ale:'battle_calculator' }}</span><td class=\"item-insertPD\"><span class=\"btn btn-orange addSelected\" tooltip=\"{{ 'battle.insertPD' | i18n:loc.ale:'battle_calculator' }}\">{{ 'battle.insertpreset' | i18n:loc.ale:'battle_calculator' }}</span></table><table class=\"table\" id=\"units\"><col><col width=\"33%\"><col width=\"33%\"><thead><tr><th><th>{{ 'battle.attacker' | i18n:loc.ale:'battle_calculator' }}<th>{{ 'battle.defender' | i18n:loc.ale:'battle_calculator' }}<tbody><tr><td><span class=\"icon-bg-black icon-34x34-unit-spear\"></span><span class=\"unitname\"> {{ 'spear' | i18n:loc.ale:'common' }}</span><td><input id=\"spearA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"8DC5EF4E-1D3F-452A-8571-42A2CAE5DC1C\"><td><input id=\"spearD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"32E792F5-4705-46B4-BA5A-9B1B410E8C11\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-sword\"></span><span class=\"unitname\"> {{ 'sword' | i18n:loc.ale:'common' }}</span><td><input id=\"swordA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"CF865D26-64C0-4BF2-8F08-21CE8656A334\"><td><input id=\"swordD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"835EFAEA-2D34-465B-8AC1-ACE363F605AB\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-axe\"></span><span class=\"unitname\"> {{ 'axe' | i18n:loc.ale:'common' }}</span><td><input id=\"axeA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"99147BD4-7928-4D76-8613-61088B81E1BF\"><td><input id=\"axeD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"5E82BCF4-A38E-42A6-887A-79B6A068D0ED\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-archer\"></span><span class=\"unitname\"> {{ 'archer' | i18n:loc.ale:'common' }}</span><td><input id=\"archerA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"F2CD8E79-5C3A-4308-95AA-C292DB75E017\"><td><input id=\"archerD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"5993D6D0-8A51-49CD-88A4-30797CB383EA\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-light_cavalry\"></span><span class=\"unitname\"> {{ 'light_cavalry' | i18n:loc.ale:'common' }}</span><td><input id=\"lcA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"5D82F230-641D-4D0F-8B52-EB848FB2A2A1\"><td><input id=\"lcD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"50349433-AA98-41FB-BF99-9BB0CFF3857C\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-mounted_archer\"></span><span class=\"unitname\"> {{ 'mounted_archer' | i18n:loc.ale:'common' }}</span><td><input id=\"maA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"66341B10-B615-43DF-824B-1D53D889EF6E\"><td><input id=\"maD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"9AD03030-6189-482A-9F41-C3C4E2FBB1AC\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-heavy_cavalry\"></span><span class=\"unitname\"> {{ 'heavy_cavalry' | i18n:loc.ale:'common' }}</span><td><input id=\"hcA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"00E6F59C-13F8-4368-82E0-7505936546C3\"><td><input id=\"hcD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"DC44138D-F849-4B6E-87E1-F7721CF3F787\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-ram\"></span><span class=\"unitname\"> {{ 'ram' | i18n:loc.ale:'common' }}</span><td><input id=\"ramA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"F87CF418-DB3A-4414-8F44-874535D682A7\"><td><input id=\"ramD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"139366C4-479C-49EA-9545-2F1B268A51C8\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-catapult\"></span><span class=\"unitname\"> {{ 'catapult' | i18n:loc.ale:'common' }}</span><td><input id=\"catapultA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"511D5503-6950-4FB8-8CD0-414C0D4726A5\"><td><input id=\"catapultD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"2E81787B-ABC2-420D-8A3C-CE73523AA333\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-doppelsoldner\"></span><span class=\"unitname\"> {{ 'doppelsoldner' | i18n:loc.ale:'common' }}</span><td><input id=\"berserkerA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"7E10139B-D00D-488E-8017-1A4BBDDA565B\"><td><input id=\"berserkerD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"D07902A3-E06C-4FE7-8729-BA330E1102A5\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-trebuchet\"></span><span class=\"unitname\"> {{ 'trebuchet' | i18n:loc.ale:'common' }}</span><td><input id=\"trebuchetA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"A9656A00-573F-4FD6-B714-35CBCA31EBB9\"><td><input id=\"trebuchetD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"0114F99E-A67A-4116-86A8-5A1DEA6DC9F9\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-snob\"></span><span class=\"unitname\"> {{ 'snob' | i18n:loc.ale:'common' }}</span><td><input id=\"snobA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"368791FA-0308-4D3D-9FFE-B083D16930DA\"><td><input id=\"snobD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"17B37D78-12C4-4420-8AF1-76F89F31756A\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-knight\"></span><span class=\"unitname\"> {{ 'knight' | i18n:loc.ale:'common' }}</span><td><input id=\"knightA\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"D9570F6D-9C0E-4EF7-8D5F-3C4D33C438C5\"><td><input id=\"knightD\" class=\"unit-input-simulator\" type=\"number\" value=\"0\" wtx-context=\"FAF6B41A-0256-49D6-B171-B40369AEA815\"><tr><td><span class=\"icon-bg-black icon-34x34-church\"></span> {{ 'battle.faith' | i18n:loc.ale:'battle_calculator' }}<td><span class=\"ff-cell-fix\"><select data-setting=\"beliefAttacker\" class=\"beliefAttacker\" id=\"beliefAttacker\"><option value=\"50\">0<option value=\"100\" selected=\"selected\">1<option value=\"105\">2<option value=\"110\">3</select></span><td><span class=\"ff-cell-fix\"><select data-setting=\"beliefDefender\" class=\"beliefDefender\" id=\"beliefDefender\"><option value=\"50\">0<option value=\"100\" selected=\"selected\">1<option value=\"105\">2<option value=\"110\">3</select></span><tr><td><span class=\"icon-bg-black icon-34x34-moral\"></span> {{ 'battle.morale' | i18n:loc.ale:'battle_calculator' }}<td><input class=\"unit-input-simulator\" type=\"number\" value=\"100\" id=\"morale\"> %<td><tr><td><span class=\"icon-bg-black icon-34x34-clover\"></span> {{ 'battle.luck' | i18n:loc.ale:'battle_calculator' }}<td><input class=\"unit-input-simulator\" type=\"number\" value=\"0\" id=\"luck\"> %<td><tr><td><span class=\"icon-bg-black icon-34x34-building-wall\"></span> {{ 'battle.wall' | i18n:loc.ale:'battle_calculator' }}<td><td><input class=\"unit-input-simulator\" type=\"number\" value=\"0\" id=\"wall\"><tr><td><span class=\"icon-bg-black icon-26x26-night-mode\"></span> {{ 'battle.nightbonus' | i18n:loc.ale:'battle_calculator' }}<td><td><label class=\"size-26x26 btn-orange icon-26x26-checkbox\" for=\"settings-nightBonus\"><input id=\"settings-nightBonus\" data-setting=\"nightBonus\" type=\"checkbox\"></label><tr><td><span class=\"icon-bg-black icon-44x44-premium_officer_leader\"></span> {{ 'battle.leader' | i18n:loc.ale:'battle_calculator' }}<td><label class=\"size-26x26 btn-orange icon-26x26-checkbox\" for=\"settings-officerLeader\"><input id=\"settings-officerLeader\" data-setting=\"officerLeader\" type=\"checkbox\"></label><td><tr><td><span class=\"icon-bg-black icon-44x44-premium_officer_medic\"></span> {{ 'battle.medic' | i18n:loc.ale:'battle_calculator' }}<td><label class=\"size-26x26 btn-orange icon-26x26-checkbox\" for=\"settings-officerMedic\"><input id=\"settings-officerMedic\" data-setting=\"officerMedic\" type=\"checkbox\"></label><td><tr><td><span class=\"icon-bg-black icon-120x120-skill-medic\"></span> {{ 'battle.doctor' | i18n:loc.ale:'battle_calculator' }}<td><label class=\"size-26x26 btn-orange icon-26x26-checkbox\" for=\"settings-skillMedic\"><input id=\"settings-skillMedic\" data-setting=\"skillMedic\" type=\"checkbox\"></label><td><tr><td><span class=\"icon-bg-black icon-120x120-skill-attack_bonus\"></span> {{ 'battle.attack-bonus' | i18n:loc.ale:'battle_calculator' }}<td><span class=\"ff-cell-fix\"><select data-setting=\"dataMaster\" class=\"dataMaster\" id=\"master\"><option value=\"0\" selected=\"selected\">0<option value=\"2\">1<option value=\"4\">2<option value=\"6\">3<option value=\"8\">4<option value=\"10\">5</select></span><td><tr><td><span class=\"icon-bg-black icon-120x120-skill-iron_walls\"></span> {{ 'battle.iron-walls' | i18n:loc.ale:'battle_calculator' }}<td><td><span class=\"ff-cell-fix\"><select data-setting=\"dataWalls\" class=\"dataWalls\" id=\"walls\"><option value=\"0\" selected=\"selected\">0<option value=\"1\">1<option value=\"2\">2<option value=\"3\">3<option value=\"4\">4<option value=\"5\">5</select></span><tr><td><span class=\"icon-bg-black icon-120x120-skill-better_hospital\"></span> {{ 'battle.clinique' | i18n:loc.ale:'battle_calculator' }}<td><td><span class=\"ff-cell-fix\"><select data-setting=\"dataClinique\" class=\"dataClinique\" id=\"clinique\"><option value=\"0\" selected=\"selected\">0<option value=\"100\">1<option value=\"200\">2<option value=\"300\">3<option value=\"400\">4<option value=\"500\">5<option value=\"600\">6<option value=\"700\">7<option value=\"800\">8<option value=\"900\">9<option value=\"1000\">10</select></span><tr><td><span class=\"icon-bg-black icon-34x34-building-hospital\"></span> {{ 'battle.hospital' | i18n:loc.ale:'battle_calculator' }}<td><td><span class=\"ff-cell-fix\"><select data-setting=\"dataHospital\" class=\"dataHospital\" id=\"hospital\"><option value=\"0\" selected=\"selected\">0<option value=\"100\">1<option value=\"129\">2<option value=\"167\">3<option value=\"215\">4<option value=\"278\">5<option value=\"359\">6<option value=\"464\">7<option value=\"599\">8<option value=\"774\">9<option value=\"1000\">10</select></span></table><table class=\"tbl-border-light tbl-striped\"><col width=\"33%\"><col width=\"34%\"><col><thead><tr><th colspan=\"3\"><span class=\"icon-bg-black icon-34x34-paladin\"></span> {{ 'battle.equip' | i18n:loc.ale:'battle_calculator' }}<tbody><tr><td colspan=\"3\">{{ 'battle.defender' | i18n:loc.ale:'battle_calculator' }}<tr><td><span class=\"ff-cell-fix\"><select data-setting=\"dataEquip1\" class=\"dataEquip1\" id=\"equip1\"><option value=\"none\" selected=\"selected\">brak<option value=\"spear\">{{ 'battle.halberd' | i18n:loc.ale:'battle_calculator' }}<option value=\"sword\">{{ 'battle.longsword' | i18n:loc.ale:'battle_calculator' }}<option value=\"axe\">{{ 'battle.battleaxe' | i18n:loc.ale:'battle_calculator' }}<option value=\"archer\">{{ 'battle.longbow' | i18n:loc.ale:'battle_calculator' }}<option value=\"light_cavalry\">{{ 'battle.lance' | i18n:loc.ale:'battle_calculator' }}<option value=\"mounted_archer\">{{ 'battle.compositebow' | i18n:loc.ale:'battle_calculator' }}<option value=\"heavy_cavalry\">{{ 'battle.banner' | i18n:loc.ale:'battle_calculator' }}<option value=\"ram\">{{ 'battle.star' | i18n:loc.ale:'battle_calculator' }}<option value=\"catapult\">{{ 'battle.bonfire' | i18n:loc.ale:'battle_calculator' }}<option value=\"snob\">{{ 'battle.scepter' | i18n:loc.ale:'battle_calculator' }}</select></span><td><span class=\"ff-cell-fix\"><select data-setting=\"dataEquip2\" class=\"dataEquip2\" id=\"equip2\"><option value=\"none\" selected=\"selected\">brak<option value=\"spear\">{{ 'battle.halberd' | i18n:loc.ale:'battle_calculator' }}<option value=\"sword\">{{ 'battle.longsword' | i18n:loc.ale:'battle_calculator' }}<option value=\"axe\">{{ 'battle.battleaxe' | i18n:loc.ale:'battle_calculator' }}<option value=\"archer\">{{ 'battle.longbow' | i18n:loc.ale:'battle_calculator' }}<option value=\"light_cavalry\">{{ 'battle.lance' | i18n:loc.ale:'battle_calculator' }}<option value=\"mounted_archer\">{{ 'battle.compositebow' | i18n:loc.ale:'battle_calculator' }}<option value=\"heavy_cavalry\">{{ 'battle.banner' | i18n:loc.ale:'battle_calculator' }}<option value=\"ram\">{{ 'battle.star' | i18n:loc.ale:'battle_calculator' }}<option value=\"catapult\">{{ 'battle.bonfire' | i18n:loc.ale:'battle_calculator' }}<option value=\"snob\">{{ 'battle.scepter' | i18n:loc.ale:'battle_calculator' }}</select></span><td><span class=\"ff-cell-fix\"><select data-setting=\"dataEquip3\" class=\"dataEquip3\" id=\"equip3\"><option value=\"none\" selected=\"selected\">brak<option value=\"spear\">{{ 'battle.halberd' | i18n:loc.ale:'battle_calculator' }}<option value=\"sword\">{{ 'battle.longsword' | i18n:loc.ale:'battle_calculator' }}<option value=\"axe\">{{ 'battle.battleaxe' | i18n:loc.ale:'battle_calculator' }}<option value=\"archer\">{{ 'battle.longbow' | i18n:loc.ale:'battle_calculator' }}<option value=\"light_cavalry\">{{ 'battle.lance' | i18n:loc.ale:'battle_calculator' }}<option value=\"mounted_archer\">{{ 'battle.compositebow' | i18n:loc.ale:'battle_calculator' }}<option value=\"heavy_cavalry\">{{ 'battle.banner' | i18n:loc.ale:'battle_calculator' }}<option value=\"ram\">{{ 'battle.star' | i18n:loc.ale:'battle_calculator' }}<option value=\"catapult\">{{ 'battle.bonfire' | i18n:loc.ale:'battle_calculator' }}<option value=\"snob\">{{ 'battle.scepter' | i18n:loc.ale:'battle_calculator' }}</select></span><tr><td><span class=\"ff-cell-fix\"><select data-setting=\"dataLevel1\" class=\"dataLevel1\" id=\"level1\"><option value=\"0\" selected=\"selected\">0<option value=\"1\">1<option value=\"2\">2<option value=\"3\">3</select></span><td><span class=\"ff-cell-fix\"><select data-setting=\"dataLevel2\" class=\"dataLevel2\" id=\"level2\"><option value=\"0\" selected=\"selected\">0<option value=\"1\">1<option value=\"2\">2<option value=\"3\">3</select></span><td><span class=\"ff-cell-fix\"><select data-setting=\"dataLevel3\" class=\"dataLevel3\" id=\"level3\"><option value=\"0\" selected=\"selected\">0<option value=\"1\">1<option value=\"2\">2<option value=\"3\">3</select></span><tr><td colspan=\"3\">{{ 'battle.attacker' | i18n:loc.ale:'battle_calculator' }}<tr><td colspan=\"3\"><span class=\"ff-cell-fix\"><select data-setting=\"dataEquip4\" class=\"dataEquip4\" id=\"equip4\"><option value=\"none\" selected=\"selected\">brak<option value=\"spear\">{{ 'battle.halberd' | i18n:loc.ale:'battle_calculator' }}<option value=\"sword\">{{ 'battle.longsword' | i18n:loc.ale:'battle_calculator' }}<option value=\"axe\">{{ 'battle.battleaxe' | i18n:loc.ale:'battle_calculator' }}<option value=\"archer\">{{ 'battle.longbow' | i18n:loc.ale:'battle_calculator' }}<option value=\"light_cavalry\">{{ 'battle.lance' | i18n:loc.ale:'battle_calculator' }}<option value=\"mounted_archer\">{{ 'battle.compositebow' | i18n:loc.ale:'battle_calculator' }}<option value=\"heavy_cavalry\">{{ 'battle.banner' | i18n:loc.ale:'battle_calculator' }}<option value=\"ram\">{{ 'battle.star' | i18n:loc.ale:'battle_calculator' }}<option value=\"catapult\">{{ 'battle.bonfire' | i18n:loc.ale:'battle_calculator' }}<option value=\"snob\">{{ 'battle.scepter' | i18n:loc.ale:'battle_calculator' }}</select></span><tr><td colspan=\"3\"><span class=\"ff-cell-fix\"><select data-setting=\"dataLevel4\" class=\"dataLevel4\" id=\"level4\"><option value=\"0\" selected=\"selected\">0<option value=\"1\">1<option value=\"2\">2<option value=\"3\">3</select></span></table><table class=\"tbl-border-light tbl-striped\"><col><thead><tr><th><span class=\"icon-34x34-unit-special-ability-catapult\"></span> {{ 'battle.target' | i18n:loc.ale:'battle_calculator' }}<tbody><tr><td><span class=\"ff-cell-fix\"><select data-setting=\"catapultTarget\" class=\"catapultTarget\" id=\"catapultTarget\"><option value=\"0\" selected=\"selected\">brak<option value=\"wall\">{{ 'wall' | i18n:loc.ale:'common' }}<option value=\"headquarter\">{{ 'headquarter' | i18n:loc.ale:'common' }}<option value=\"farm\">{{ 'farm' | i18n:loc.ale:'common' }}<option value=\"warehouse\">{{ 'warehouse' | i18n:loc.ale:'common' }}<option value=\"barracks\">{{ 'barracks' | i18n:loc.ale:'common' }}<option value=\"church\">{{ 'church' | i18n:loc.ale:'common' }}<option value=\"academy\">{{ 'academy' | i18n:loc.ale:'common' }}<option value=\"preceptory\">{{ 'preceptory' | i18n:loc.ale:'common' }}<option value=\"tavern\">{{ 'tavern' | i18n:loc.ale:'common' }}<option value=\"hospital\">{{ 'hospital' | i18n:loc.ale:'common' }}<option value=\"rally_point\">{{ 'rally_point' | i18n:loc.ale:'common' }}<option value=\"statue\">{{ 'statue' | i18n:loc.ale:'common' }}<option value=\"market\">{{ 'market' | i18n:loc.ale:'common' }}<option value=\"timber_camp\">{{ 'timber_camp' | i18n:loc.ale:'common' }}<option value=\"clay_pit\">{{ 'clay_pit' | i18n:loc.ale:'common' }}<option value=\"iron_mine\">{{ 'iron_mine' | i18n:loc.ale:'common' }}</select></span><tr><td><input width=\"60px\" class=\"buildingLevel\" type=\"number\" value=\"0\" id=\"buildingLevel\"></table></div><div class=\"troops\" ng-show=\"selectedTab === TAB_TYPES.TROOPS\"><h5 class=\"twx-section\">{{ 'troops.header' | i18n:loc.ale:'battle_calculator' }}</h5><table class=\"tbl-border-light tbl-striped\"><col><tr><td class=\"item-check-T\"><span class=\"btn btn-orange addSelected\" ng-click=\"checkTroops\" tooltip=\"{{ 'checkT.tip' | i18n:loc.ale:'battle_calculator' }}\">{{ 'check.btn' | i18n:loc.ale:'battle_calculator' }}</span></table><table class=\"table\"><col width=\"33%\"><col width=\"33%\"><col><thead><tr><th colspan=\"3\">{{ 'troops.th' | i18n:loc.ale:'battle_calculator' }}<tbody><tr><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-resource-wood\" tooltip=\"{{ 'wood' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"wood\"></span></div><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-time-per-tile\" tooltip=\"{{ 'speed' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"speed\"></span></div><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-attack\" tooltip=\"{{ 'attack' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"attack\"></span></div><tr><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-resource-clay\" tooltip=\"{{ 'clay' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"clay\"></span></div><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-units\" tooltip=\"{{ 'discipline' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"discipline\"></span></div><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-defense\" tooltip=\"{{ 'definf' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"definf\"></span></div><tr><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-resource-iron\" tooltip=\"{{ 'iron' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"iron\"></span></div><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-weight\" tooltip=\"{{ 'load' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"load\"></span></div><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-defense-cavalry\" tooltip=\"{{ 'defcav' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"defcav\"></span></div><tr><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-resource-food\" tooltip=\"{{ 'food' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"food\"></span></div><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-time\" tooltip=\"{{ 'buildtime' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"buildtime\"></span></div><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-defense-archer\" tooltip=\"{{ 'defarc' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"defarc\"></span></div><tr><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-attackinf\" tooltip=\"{{ 'attackinf' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"attackinf\"></span></div><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-attackcav\" tooltip=\"{{ 'attackcav' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"attackcav\"></span></div><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-attackarc\" tooltip=\"{{ 'attackarc' | i18n:loc.ale:'battle_calculator' }}\"></span><div class=\"center-34x\"><span class=\"attackarc\"></span></div></table><br><table class=\"table\" id=\"unitsCost\"><col width=\"50%\"><col width=\"50%\"><thead><tr><th colspan=\"2\">{{ 'troops.units' | i18n:loc.ale:'battle_calculator' }}<tbody><tr><td><span class=\"icon-bg-black icon-44x44-unit-spear\"></span> {{ 'spear' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"spearCost\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-sword\"></span> {{ 'sword' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"swordCost\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-axe\"></span> {{ 'axe' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"axeCost\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-archer\"></span> {{ 'archer' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"archerCost\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-light_cavalry\"></span> {{ 'light_cavalry' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"lcCost\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-mounted_archer\"></span> {{ 'mounted_archer' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"maCost\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-heavy_cavalry\"></span> {{ 'heavy_cavalry' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"hcCost\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-ram\"></span> {{ 'ram' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"ramCost\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-doppelsoldner\"></span> {{ 'doppelsoldner' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"berserkerCost\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-trebuchet\"></span> {{ 'trebuchet' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"trebuchetCost\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-snob\"></span> {{ 'snob' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"snobCost\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-knight\"></span> {{ 'knight' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"knightCost\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-catapult\"></span> {{ 'catapult' | i18n:loc.ale:'common' }}<input class=\"unit-cost\" id=\"catapultCost\" value=\"\"><td></table><br><table class=\"table\"><col width=\"50%\"><col width=\"50%\"><thead><tr><th colspan=\"2\">{{ 'troops.building' | i18n:loc.ale:'battle_calculator' }}<tbody><tr><td><span class=\"icon-bg-black icon-34x34-building-barracks\"></span> {{ 'troops.barracks' | i18n:loc.ale:'battle_calculator' }}<td><input class=\"unit-barracks\" value=\"25\" height=\"34px\" id=\"barracks\"><tr><td><span class=\"icon-bg-black icon-34x34-building-preceptory\"></span> {{ 'troops.preceptory' | i18n:loc.ale:'battle_calculator' }}<td><span class=\"ff-cell-fix\"><select data-setting=\"dataOrder\" class=\"dataOrder\" id=\"order\"><option value=\"none\" selected=\"selected\">{{ 'troops.none' | i18n:loc.ale:'battle_calculator' }}<option value=\"deff\">{{ 'troops.templars' | i18n:loc.ale:'battle_calculator' }}<option value=\"off\">{{ 'troops.teutonic' | i18n:loc.ale:'battle_calculator' }}</select> </span><input class=\"unit-preceptory\" value=\"0\" height=\"34px\" id=\"preceptory\"></table><table class=\"table\"><col width=\"50%\"><col width=\"50%\"><thead><tr><th colspan=\"2\">{{ 'troops.effects' | i18n:loc.ale:'battle_calculator' }}<tbody><tr><td><span class=\"icon-bg-black icon-120x120-domination\"></span> {{ 'troops.domination' | i18n:loc.ale:'battle_calculator' }}<td><label class=\"size-26x26 btn-orange icon-26x26-checkbox\" for=\"settings-domination\"><input id=\"settings-domination\" data-setting=\"dataDomination\" type=\"checkbox\"></label><tr><td><span class=\"icon-bg-black icon-120x120-skill-recruit_speed_bonus\"></span> {{ 'troops.training' | i18n:loc.ale:'battle_calculator' }}<td><span class=\"ff-cell-fix\"><select data-setting=\"dataTraining\" class=\"dataTraining\" id=\"training\"><option value=\"1.00\" selected=\"selected\">0<option value=\"1.04\">1<option value=\"1.08\">2<option value=\"1.12\">3<option value=\"1.16\">4<option value=\"1.20\">5</select></span></table></div><div class=\"bashpoints\" ng-show=\"selectedTab === TAB_TYPES.BASHPOINTS\"><h5 class=\"twx-section\">{{ 'check.header' | i18n:loc.ale:'battle_calculator' }}</h5><table class=\"tbl-border-light tbl-striped\"><col><tr><td class=\"item-check\"><span class=\"btn btn-orange addSelected\" ng-click=\"checkBashpoints\" tooltip=\"{{ 'check.tip' | i18n:loc.ale:'battle_calculator' }}\">{{ 'check.btn' | i18n:loc.ale:'battle_calculator' }}</span></table><table class=\"table\"><col width=\"50%\"><col width=\"50%\"><thead><tr><th colspan=\"2\">{{ 'bashpoints.th' | i18n:loc.ale:'battle_calculator' }}<tbody><tr><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-attack\"></span> {{ 'bashpoints.attacker' | i18n:loc.ale:'battle_calculator' }}<td class=\"points-att\"><tr><td><span style=\"float:left\" class=\"icon-bg-black icon-34x34-defense\"></span> {{ 'bashpoints.defender' | i18n:loc.ale:'battle_calculator' }}<td class=\"points-def\"></table><br><table class=\"table\" id=\"unitsBash\"><col width=\"50%\"><col width=\"50%\"><thead><tr><th colspan=\"2\">{{ 'bashpoints.killed' | i18n:loc.ale:'battle_calculator' }}<tbody><tr><td><span class=\"icon-bg-black icon-44x44-unit-spear\"></span> {{ 'spear' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"spearBash\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-sword\"></span> {{ 'sword' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"swordBash\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-axe\"></span> {{ 'axe' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"axeBash\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-archer\"></span> {{ 'archer' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"archerBash\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-light_cavalry\"></span> {{ 'light_cavalry' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"lcBash\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-mounted_archer\"></span> {{ 'mounted_archer' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"maBash\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-heavy_cavalry\"></span> {{ 'heavy_cavalry' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"hcBash\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-ram\"></span> {{ 'ram' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"ramBash\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-doppelsoldner\"></span> {{ 'doppelsoldner' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"berserkerBash\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-trebuchet\"></span> {{ 'trebuchet' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"trebuchetBash\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-snob\"></span> {{ 'snob' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"snobBash\" value=\"\"><td><span class=\"icon-bg-black icon-44x44-unit-knight\"></span> {{ 'knight' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"knightBash\" value=\"\"><tr><td><span class=\"icon-bg-black icon-44x44-unit-catapult\"></span> {{ 'catapult' | i18n:loc.ale:'common' }}<input class=\"unit-bash\" id=\"catapultBash\" value=\"\"><td></table></div></div></div></div></div>"),
e.addStyle('#two-battle-calculator select{color:#000}#two-battle-calculator .addForm1 td{text-align:center}#two-battle-calculator .addForm1 th{text-align:center;padding:0px}#two-battle-calculator .addForm1 span{height:26px;line-height:26px;padding:0 10px}#two-battle-calculator .addForm1 input{height:34px;line-height:26px;color:#000;font-size:14px;background:url(data:image/png;base64,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) top left #b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:213px}#two-battle-calculator .addForm .table{border-spacing:1px;border-collapse:separate;box-shadow:0 0 0 2px rgba(124,54,0,0.4);width:100%;background:url(data:image/png;base64,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) #d1ad86}#two-battle-calculator .addForm .table th{background:url(data:image/png;base64,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);text-align:left;min-height:26px;line-height:26px;color:#fff3d0;font-size:14px;font-weight:normal;padding-left:5px;border:1px solid rgba(124,54,0,0.3);padding:1px}#two-battle-calculator .addForm .table td{border:1px solid rgba(124,54,0,0.3);padding:1px}#two-battle-calculator .addForm .table tr nth-child(odd) td{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAl7SURBVHjatF3bcRtJDIRYigLhnGNRAnYcSsCORekgDd3HmazdWfQDQx6rVJKopbiDwaPRwIBv39/f8efXj4z5oyIiyfPo7+tr2XXuezmvmd6XfHx8ftUqu9vxiY/PryJvdPwe5I1T/D0OC4tm0ev7HgVx/Apz8QWEu/6vy3rv8kBy+fPrRx7/9vH5VW93De2kvbtzYAGrMNPU3G4TkfYhRUjz+Ysmr3K5/47k9fb75z+thh4uVsJcTUkttgzBMjMtIKAUG5LGxrbCZMq2yuyG/MHhwhRuQAk9m9+z0bjO5FO4iBBuZb0+m98ts3cfb2tQArvhap9rqlMXwqwhhIXE4H5P93kX5ioPprHv7oXgJpgZdotT2p7CxyGNLaCRDpqAroLJArjH/6L8x+dXHYV5uFgtLIBZ1YYbCKDRCGlkI2B232m4h8662mh/l9Uqs1un0oaWFoAgAQRbQ7Mu4O+CQCwltGq+l2FVFxR0/L762JsRkKY33gWgFILoNKPbjBIuxkElnYl3LuKkeR3m7H6+rWq7CLeAOQcwvyI3y8w5wSYkCXBhWAl73y4OUPDeaeTFh65SXl7kLt7JTlgmpCBREu0qAJNK+N4kSUehQI3c411ut+Mf0A4QcwyirUGuL+JCigi/M+0E0V8BeIRXE0X0uwWzaP/O1HcQFdfFFADjRYSosGMO09NdAgUKtZPNGuXffv/8B+arG0C8jEU5P09BfYSXSanUdMRdtGwTcsTDaL5qUhlQC+X2Cqa5llPGfUhczFJPCJsaQB/CjxXxdQ7wT1O7WNBJkkQkyYpSwDVq0uv3VUMfJg986NS8HBOeUHe7VKFL5RULZB+fX1ZMOQr37fv7+5INEIJEEcJpCnsiTCUgRcXtEC5t3HC4jtsdLnUpFjGXAiDcWTxyGbXhtx334frl7PjQo4l3rNP6/Sacbw0dPFtc5+MYS4TglZsETAialgY8Khsy8dVNQj602ZEJF8rM2SUyXgHTJhCtUIRnbP0lKJlVz3oC700wZgyE6N5Dme6Irm9VtI7u/PPrR55qSgZj72YXDsNfgovcRQKqZqWCo8WorS7yLuSLQE2TmmqvW6hTG+BG/0nJhZr/avYq0r8fVRiA2hr6qtxg6FU0TuN/VBPskliBw+AHo+1agSJpN+lnGWRtbmi6WuBOwS2Hmtheq6i7jvZ8N5mmXUIjBoJmOT2j26YcQ5oW0WomEvL9uvehMAOYVGz6Obferjo8WJROI8NqrcyFTUch3xiZGrz02pElaWqmYqQcd4NMPA1rSUGYnEh3ZcVtCaSj9A3qLAPXZmrAwjuMVQnSOYDmuVovg04HldbnIWz6q8bhMtomuJ6Sx4r4rf/hXmxmqSVHBA+YIv9V+b3K013TdEnoMghsVe96vAaVihmMuolaMyNGknCJzLzToN9S0IIVXj2JUYqsqJjIpFU33g2p8UFDp06/q82rlLPTvgJCD4I6UNBjGw/hXEe8d4nQqdEBUfwgcDhtNSqKqoqASgIm0XyanRWL6F07zkqS3FZ40Ki5AtIMDSCf5kAm9L9Ve7qqi4WxuckC0FqfP3bcXFrCQSuOXb8eECJhMFiv4k5dBovynU4J5G14CmRSF7L8lAmPXnFPE/pPUnfosIfDh06Oz0xw4rTJwWG7HCZ+q7rq9NvTTMnwY06Hcg59JYvwChKxQJYCLbRFRIQ1uwB+asUxsoFd4neivU5D1zNuZztDYia+BvJ3wYWqHF5pJcKLDo2mtB5tAGoJckshVsMYIkluaEcMhjqJvyqhParMrNxFCU0uAzapDmaoYAy7n1pxXlSc67RIIYBnCexnSJFS2ZQbkB5BiVD7zpEUtutpanYOUlCXZOkSkxL3c0q3UXrJAtMN9Y8vQp40KuSGKaLNy9B98IjEcTGwZL+6Ux/oOWXyYZi4W0ufNm+5Wdnu/51kUyGwepxST+RsD2Vkh1yYdrq9AtK4TQux8X718flFkU9H66lGh3hywY52s/dwnmPtiIoMiVfh1ruG3pDEFyfswKMaQhQ3rQzDMliwcRswLgcj2OmPzs+egtLK6y1ZkuqljNCFOpXCIkGtXwglKO0sApPooS/SMn+FTaosCqIpgiNuswJqlUmRCLidKUm4AHSiDmp9J1TUunRjjjbw4aogUKUETk2TPc8B096dRlYaiPzwqVFsLQsRIv7MNoELVTbT4UQkeDU9QWl1CDPO8LtWSihLxN8OZlVDWpVRlZFXgbiwhJkiO6fZ+bqKeZ+nU1gcNac5h2gfGiqimNtK6LBFJYLYpB9+B7YFybwubmTVzuOwBkR3XnJ5NasIaAej0ZDLKIH9MvYnQigiOgSLDw8lqH6n01nPhlV5toThzGuaENIT9zLtBJTA3irSPZnLT4hal+zdOa/0bG5Phd/5Tto5Quh9x19N60YJoq0TyYNAtimnoCBUa9JHk+9q886hhWdIEec69/BBvFjzXnas+/i7w9grTdwlInaZJqdS8Arqj7JNKCV9aCiQepCgssPOuHPv3OEALmMV8eToS0K+nx7vBrBnMKNIlhIig1JR350EpkyfrcMWsorup0FYIqVS0xdQcSs3TTFFMCxBzITx+qewbReMHsDe6MxltSXkBhBFloCa6wSdgjpkGusmBRW68zlW4XXA/nEKBI0hM3J2NoqSmXoA03dOkaCJt4i2Y+f0FaM1Mns6+26A4YrQZ6xCybCg4gUSMEVhBskU7ov2giIhP2pKx3ZG0NM0zVp2T3Q88yhSTXDmPdP7GowBPQelJvGfHHINYrbO+CHmU1nWpNwQ00y6RocDXQV/GYQ12Y1NAmL36PW0FYhNkmCVU2mRCNRfGh1MAmAnVXQFqg4vTBprkfuZnrkfPdoxQwNqTVFfrxiNMdWmqc9+irZbla+dfTek73Z39ZVBaceKQvGzJq15DkpdDg+ggnOY1aXgdoSvJt6qEURtZZNlgd0IUPXzTiuOOzboVf1KLs2222TmfgqEJEkuOBT5hanPGTJHyPeG8NnTsUQqKLbv3ckC9dzDMUOHHYjwZx9N6LGJZrMPAdiBWY4bG318BQT2DcBPkqOz1FMxRmh6uPJzkyqBO3ITkTKwDEKP1XSp5/JPXN/kks+Tj5vYLlMYvlIB/tO4S3TEe9XcE2NP8GiIgOQSE8/2hO4Q0k7O77ojGWNOHwxgfFgVm1SbBkk8WXCErop2AUVNI3d6Ri+HFhiVd6opGQNZJ0FhR+scBLELpSYYmX5ijcuJ/jsA5u4AhqNud/gAAAAASUVORK5CYII=) #d1ad86}#two-battle-calculator .addForm .table_vertical td:nth-child(odd){background:url(data:image/png;base64,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) #d1ad86}#two-battle-calculator .addForm .center-34x{text-align:center;line-height:34px}#two-battle-calculator .addForm span{text-align:right}#two-battle-calculator .unit-bash{height:44px;line-height:26px;color:#fff;font-size:18px;background:#b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px;float:right;border:none}#two-battle-calculator .unit-cost{height:44px;line-height:26px;color:#fff;font-size:18px;background:#b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px;float:right;border:none}#two-battle-calculator .unit-barracks{height:44px;line-height:26px;color:#fff;font-size:18px;background:#b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px;float:right;border:none}#two-battle-calculator .unit-preceptory{height:44px;line-height:26px;color:#fff;font-size:18px;background:#b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px;float:right;border:none}#two-battle-calculator .unit-input-simulator{height:44px;line-height:26px;color:#fff;font-size:18px;background:#b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px;float:right;border:none;float:none;width:100%;height:34px}#two-battle-calculator .dataTraining{width:60px}#two-battle-calculator .dataTraining .custom-select-handler{text-align:left}#two-battle-calculator .dataOrder{width:150px}#two-battle-calculator .dataOrder .custom-select-handler{text-align:left}#two-battle-calculator .dataDomination{width:60px}#two-battle-calculator .dataDomination .custom-select-handler{text-align:left}#two-battle-calculator .icon-120x120-skill-recruit_speed_bonus{zoom:.283333}#two-battle-calculator .icon-120x120-skill-recruit_speed_bonus:before{-moz-transform:scale(.283333)}#two-battle-calculator .icon-120x120-domination{zoom:.283333}#two-battle-calculator .icon-120x120-domination:before{-moz-transform:scale(.283333)}#two-battle-calculator .icon-26x26-night-mode{zoom:1.307692}#two-battle-calculator .icon-26x26-night-mode:before{-moz-transform:scale(1.307692)}#two-battle-calculator .icon-120x120-skill-medic{zoom:.283333}#two-battle-calculator .icon-120x120-skill-medic:before{-moz-transform:scale(.283333)}#two-battle-calculator .icon-120x120-skill-attack_bonus{zoom:.283333}#two-battle-calculator .icon-120x120-skill-attack_bonus:before{-moz-transform:scale(.283333)}#two-battle-calculator .icon-120x120-skill-iron_walls{zoom:.283333}#two-battle-calculator .icon-120x120-skill-iron_walls:before{-moz-transform:scale(.283333)}#two-battle-calculator .icon-120x120-skill-better_hospital{zoom:.283333}#two-battle-calculator .icon-120x120-skill-better_hospital:before{-moz-transform:scale(.283333)}#two-battle-calculator .icon-44x44-premium_officer_leader{zoom:.772727}#two-battle-calculator .icon-44x44-premium_officer_leader:before{-moz-transform:scale(.772727)}#two-battle-calculator .icon-44x44-premium_officer_medic{zoom:.772727}#two-battle-calculator .icon-44x44-premium_officer_medic:before{-moz-transform:scale(.772727)}#two-battle-calculator .dataMaster{width:60px}#two-battle-calculator .dataMaster .custom-select-handler{text-align:left}#two-battle-calculator .beliefDefender{width:60px}#two-battle-calculator .beliefDefender .custom-select-handler{text-align:left}#two-battle-calculator .beliefAttacker{width:60px}#two-battle-calculator .beliefAttacker .custom-select-handler{text-align:left}#two-battle-calculator .dataWalls{width:60px}#two-battle-calculator .dataWalls .custom-select-handler{text-align:left}#two-battle-calculator .dataClinique{width:60px}#two-battle-calculator .dataClinique .custom-select-handler{text-align:left}#two-battle-calculator .dataHospital{width:60px}#two-battle-calculator .dataHospital .custom-select-handler{text-align:left}#two-battle-calculator .dataEquip1{width:200px}#two-battle-calculator .dataEquip1 .custom-select-handler{text-align:left}#two-battle-calculator .dataEquip2{width:200px}#two-battle-calculator .dataEquip2 .custom-select-handler{text-align:left}#two-battle-calculator .dataEquip3{width:200px}#two-battle-calculator .dataEquip3 .custom-select-handler{text-align:left}#two-battle-calculator .dataEquip4{width:200px}#two-battle-calculator .dataEquip4 .custom-select-handler{text-align:left}#two-battle-calculator .dataLevel1{width:60px}#two-battle-calculator .dataLevel1 .custom-select-handler{text-align:left}#two-battle-calculator .dataLevel2{width:60px}#two-battle-calculator .dataLevel2 .custom-select-handler{text-align:left}#two-battle-calculator .dataLevel3{width:60px}#two-battle-calculator .dataLevel3 .custom-select-handler{text-align:left}#two-battle-calculator .dataLevel4{width:60px}#two-battle-calculator .dataLevel4 .custom-select-handler{text-align:left}#two-battle-calculator .catapultTarget{width:200px}#two-battle-calculator .catapultTarget .custom-select-handler{text-align:left}#two-battle-calculator .icon-90x90-item-spear{background-image:url(https://twxen.innogamescdn.com/img/icons/no-alpha_3bfedc2e90.jpg);background-position:-1710px -1892px;zoom:.288888}#two-battle-calculator .icon-90x90-item-spear:before{-moz-transform:scale(.288888)}#two-battle-calculator .icon-90x90-item-sword:before{background-image:url(https://twxen.innogamescdn.com/img/icons/no-alpha_3bfedc2e90.jpg);background-position:-1620px -1892px;transform:scale(.288888);width:26px;height:26px}#two-battle-calculator .icon-34x34-attackarc:before{background-image:url(https://i.imgur.com/qGoj36r.png);background-position:0px 0px}#two-battle-calculator .icon-34x34-attackcav:before{background-image:url(https://i.imgur.com/etSiYUW.png);background-position:0px 0px}#two-battle-calculator .icon-34x34-attackinf:before{background-image:url(https://i.imgur.com/z9hX6Au.png);background-position:0px 0px}#two-battle-calculator .icon-90x90-item-axe{zoom:.288888}#two-battle-calculator .icon-90x90-item-axe:before{-moz-transform:scale(.288888)}#two-battle-calculator .icon-90x90-item-archer{zoom:.288888}#two-battle-calculator .icon-90x90-item-archer:before{-moz-transform:scale(.288888)}#two-battle-calculator .icon-90x90-item-light_cavalry{zoom:.288888}#two-battle-calculator .icon-90x90-item-light_cavalry:before{-moz-transform:scale(.288888)}#two-battle-calculator .icon-90x90-item-mounted_archer{zoom:.288888}#two-battle-calculator .icon-90x90-item-mounted_archer:before{-moz-transform:scale(.288888)}#two-battle-calculator .icon-90x90-item-heavy_cavalry{zoom:.288888}#two-battle-calculator .icon-90x90-item-heavy_cavalry:before{-moz-transform:scale(.288888)}#two-battle-calculator .icon-90x90-item-ram{zoom:.288888}#two-battle-calculator .icon-90x90-item-ram:before{-moz-transform:scale(.288888)}#two-battle-calculator .icon-90x90-item-catapult{zoom:.288888}#two-battle-calculator .icon-90x90-item-catapult:before{-moz-transform:scale(.288888)}#two-battle-calculator .icon-90x90-item-snob{zoom:.288888}#two-battle-calculator .icon-90x90-item-snob:before{-moz-transform:scale(.288888)}#two-battle-calculator .icon-34x34-paladin{zoom:.73529412}#two-battle-calculator .icon-34x34-paladin:before{-moz-transform:scale(.73529412)}#two-battle-calculator .icon-34x34-unit-special-ability-catapult{zoom:.73529412}#two-battle-calculator .icon-34x34-unit-special-ability-catapult:before{-moz-transform:scale(.73529412)}')
}})),require(['two/ready','two/battleCalculator','two/battleCalculator/ui'],(function(e,t,a){if(t.initialized)return!1;e((function(){t.init(),a(),t.run()}),['map','world_config'])})),define('two/builderQueue',['two/ready','two/utils','two/Settings','two/builderQueue/settings','two/builderQueue/settings/map','two/builderQueue/settings/updates','two/builderQueue/sequenceStatus','conf/upgradeabilityStates','conf/buildingTypes','conf/locationTypes','queues/EventQueue','Lockr','helper/time'],(function(e,t,n,r,c,d,p,g,m,_,h,b,f){let v,E,w,T=injector.get('buildingService'),A=injector.get('premiumActionService'),y=injector.get('buildingQueueService'),S=!1,I=!1;const k={};let x,R,M,L,O,N=!0;const C='builder_queue_log',D='builder_queue_settings',P=function(){const e=G();if(!N)return j.stop(),!1;e.forEach((function(e){const t=R.getVillage(e),a=t.checkReadyState(),n=t.buildingQueue;return n.getAmountJobs()!==n.getUnlockedSlots()&&(!(!a.buildingQueue||!a.buildings)&&void B(t))}))},z=function(){
G().forEach((function(e){const t=R.getVillage(e),a=t.buildingQueue;if(a.getAmountJobs()){a.getQueue().forEach((function(a){y.canBeFinishedForFree(a,t)&&A.instantBuild(a,_.MASS_SCREEN,!0,e)}))}}))},G=function(){const e=O[r.GROUP_VILLAGES];let a=[];return e?(a=x.getGroupVillageIds(e),a=a.filter((function(e){return R.getVillage(e)}))):t.each(R.getVillages(),(function(e){a.push(e.getId())})),a},B=function(e){let t=angular.copy(e.buildingData.getBuildingLevels());const a=e.buildingQueue.getQueue();let n=angular.copy(k);const i=O[r.BUILDING_SEQUENCES][O[r.ACTIVE_SEQUENCE]];if(a.forEach((function(e){t[e.building]++})),W(t))return!1;i.some((function(a){if(++n[a]>t[a])return T.compute(e),U(e,a,(function(t,a){t&&a.job&&(h.trigger(s.BUILDER_QUEUE_JOB_STARTED,a.job),F(e.getId(),a.job))})),!0}))},U=function(e,t,a){const n=q(e,t);if(n===g.POSSIBLE)V(e,t,(function(e){a(!0,e)}));else if(n===g.NOT_ENOUGH_FOOD&&O[r.PRIORIZE_FARM]){const t=w[m.FARM]
;e.getBuildingData().getDataForBuilding(m.FARM).level<t&&V(e,m.FARM,(function(e){a(!0,e)}))}a(!1)},V=function(e,t,a){o.emit(l.VILLAGE_UPGRADE_BUILDING,{building:t,village_id:e.getId(),location:_.MASS_SCREEN,premium:!1},a)},q=function(e,t){const a=e.getBuildingData().getDataForBuilding(t);if(a.upgradeability===g.POSSIBLE){const t=a.nextLevelCosts,n=e.getResources().getComputed();if(n.clay.currentStock-O[r.PRESERVE_CLAY]<t.clay||n.iron.currentStock-O[r.PRESERVE_IRON]<t.iron||n.wood.currentStock-O[r.PRESERVE_WOOD]<t.wood)return g.NOT_ENOUGH_RESOURCES}return a.upgradeability},W=function(e){for(let t in e)if(e[t]<w[t])return!1;return!0},F=function(e,t){let a={time:f.gameTime(),villageId:e,building:t.building,level:t.level};return M.unshift(a),M.length>500&&M.splice(M.length-500,M.length),b.set(C,M),!0};let j={};return j.start=function(){if(!N)return h.trigger(s.BUILDER_QUEUE_NO_SEQUENCES),!1;I=!0,v=setInterval(P,6e4),E=setInterval(z,6e3),e((function(){G().forEach((function(e){
const t=R.getVillage(e);t.isInitialized()||u.initializeVillage(t)})),P(),z()}),['all_villages_ready']),h.trigger(s.BUILDER_QUEUE_START)},j.stop=function(){I=!1,clearInterval(v),clearInterval(E),h.trigger(s.BUILDER_QUEUE_STOP)},j.isRunning=function(){return I},j.isInitialized=function(){return S},j.getSettings=function(){return L},j.getLogs=function(){return M},j.clearLogs=function(){M=[],b.set(C,M),h.trigger(s.BUILDER_QUEUE_CLEAR_LOGS)},j.addBuildingSequence=function(e,t){let a=O[r.BUILDING_SEQUENCES];return e in a?p.SEQUENCE_EXISTS:Array.isArray(t)?(a[e]=t,L.set(r.BUILDING_SEQUENCES,a,{quiet:!0}),h.trigger(s.BUILDER_QUEUE_BUILDING_SEQUENCES_ADDED,e),p.SEQUENCE_SAVED):p.SEQUENCE_INVALID},j.updateBuildingSequence=function(e,t){let a=O[r.BUILDING_SEQUENCES];return e in a?Array.isArray(t)&&function(e){const t=i.getGameData().getBuildings();for(let a=0;a<e.length;a++){let n=e[a];if(++e[n]>t[n].max_level)return!1}return!0}(t)?(a[e]=t,L.set(r.BUILDING_SEQUENCES,a,{quiet:!0}),
h.trigger(s.BUILDER_QUEUE_BUILDING_SEQUENCES_UPDATED,e),p.SEQUENCE_SAVED):p.SEQUENCE_INVALID:p.SEQUENCE_NO_EXISTS},j.removeSequence=function(e){let t=O[r.BUILDING_SEQUENCES];if(!(e in t))return p.SEQUENCE_NO_EXISTS;delete t[e],L.set(r.BUILDING_SEQUENCES,t,{quiet:!0}),h.trigger(s.BUILDER_QUEUE_BUILDING_SEQUENCES_REMOVED,e)},j.init=function(){S=!0,M=b.get(C,[],!0),R=i.getSelectedCharacter(),x=i.getGroupList(),L=new n({settingsMap:c,storageKey:D}),L.onChange((function(e,t,a){O=L.getAll(),I&&t[d.ANALYSE]&&P(),a.quiet||h.trigger(s.BUILDER_QUEUE_SETTINGS_CHANGE)})),O=L.getAll();for(let e in m)k[m[e]]=0;N=Object.keys(O[r.BUILDING_SEQUENCES]).length,w=!!N&&function(e){const t=O[r.BUILDING_SEQUENCES][e];let a=angular.copy(k);return t.forEach((function(e){a[e]++})),a}(O[r.ACTIVE_SEQUENCE]),a.$on(s.BUILDING_LEVEL_CHANGED,(function(e,t){if(!I)return!1;setTimeout((function(){let e=R.getVillage(t.village_id);B(e)}),1e3)}))},j})),
define('two/builderQueue/defaultOrders',['conf/buildingTypes'],(function(e){let t={};const a=function(e){let t=[];for(let a=0;a<e.length;a++){let n=e[a];Array.isArray(n)?(n.sort(()=>Math.random()-.5),t=t.concat(n)):t.push(n)}return t}
;return t.Essential=[e.HEADQUARTER,e.FARM,e.WAREHOUSE,e.RALLY_POINT,e.BARRACKS,[e.TIMBER_CAMP,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.HEADQUARTER,e.RALLY_POINT],[e.FARM,e.WAREHOUSE,e.CLAY_PIT,e.IRON_MINE],[e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.WAREHOUSE,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE],[e.WAREHOUSE,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.FARM,e.WAREHOUSE,e.HEADQUARTER],[e.STATUE,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE],[e.BARRACKS,e.HOSPITAL,e.HEADQUARTER,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.FARM],[e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE],e.WAREHOUSE,e.HEADQUARTER,e.WALL,[e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.FARM],e.FARM,e.FARM,[e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE],[e.BARRACKS,e.WAREHOUSE,e.WAREHOUSE,e.FARM,e.WAREHOUSE,e.WAREHOUSE],[e.HEADQUARTER,e.MARKET,e.BARRACKS,e.WALL,e.WALL],[e.FARM,e.FARM,e.BARRACKS,e.WAREHOUSE,e.FARM],[e.BARRACKS,e.WAREHOUSE,e.FARM,e.BARRACKS,e.WAREHOUSE,e.FARM],[e.WALL,e.WALL,e.WALL,e.MARKET,e.MARKET,e.MARKET],[e.BARRACKS,e.BARRACKS,e.HEADQUARTER,e.HEADQUARTER],[e.TAVERN,e.TAVERN,e.TAVERN,e.RALLY_POINT],[e.BARRACKS,e.BARRACKS,e.WAREHOUSE,e.FARM],[e.WAREHOUSE,e.FARM,e.BARRACKS,e.BARRACKS],[e.STATUE,e.STATUE,e.WALL,e.WALL],[e.HEADQUARTER,e.HEADQUARTER,e.WAREHOUSE,e.FARM,e.FARM],[e.IRON_MINE,e.IRON_MINE,e.IRON_MINE,e.WAREHOUSE],[e.BARRACKS,e.BARRACKS,e.WAREHOUSE,e.FARM],[e.WALL,e.WALL,e.TAVERN,e.TAVERN,e.TAVERN],[e.MARKET,e.MARKET,e.MARKET,e.WAREHOUSE,e.FARM,e.WAREHOUSE,e.FARM,e.WAREHOUSE,e.FARM],[e.IRON_MINE,e.IRON_MINE,e.IRON_MINE,e.RALLY_POINT],[e.BARRACKS,e.BARRACKS,e.FARM,e.FARM,e.FARM,e.FARM],[e.WAREHOUSE,e.WAREHOUSE,e.HEADQUARTER,e.HEADQUARTER],[e.STATUE,e.STATUE,e.FARM,e.BARRACKS],[e.HEADQUARTER,e.HEADQUARTER,e.FARM,e.BARRACKS],[e.HEADQUARTER,e.HEADQUARTER,e.BARRACKS,e.HEADQUARTER,e.HEADQUARTER,e.HEADQUARTER,e.HEADQUARTER],[e.ACADEMY,e.FARM,e.WAREHOUSE,e.WAREHOUSE,e.WAREHOUSE],[e.MARKET,e.MARKET,e.MARKET,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE],[e.TIMBER_CAMP,e.CLAY_PIT,e.TIMBER_CAMP,e.CLAY_PIT,e.TIMBER_CAMP,e.TIMBER_CAMP],[e.WALL,e.WALL,e.MARKET,e.MARKET,e.MARKET],[e.TIMBER_CAMP,e.CLAY_PIT,e.TIMBER_CAMP,e.CLAY_PIT,e.TAVERN,e.TAVERN,e.TAVERN],[e.WALL,e.WALL,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE],[e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.BARRACKS,e.BARRACKS,e.BARRACKS],[e.FARM,e.WAREHOUSE,e.WAREHOUSE,e.TAVERN,e.TAVERN,e.TAVERN],[e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE],[e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.BARRACKS,e.BARRACKS],[e.FARM,e.WAREHOUSE,e.WAREHOUSE,e.WALL,e.WALL,e.WALL,e.WALL],[e.TAVERN,e.TAVERN,e.RALLY_POINT,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE],[e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE],[e.TIMBER_CAMP,e.CLAY_PIT,e.IRON_MINE,e.TIMBER_CAMP,e.CLAY_PIT,e.CLAY_PIT,e.IRON_MINE],[e.TIMBER_CAMP,e.CLAY_PIT,e.CLAY_PIT,e.IRON_MINE,e.WALL,e.WALL]],
t['Full Village']=[[e.HOSPITAL,e.HOSPITAL,e.HOSPITAL,e.HOSPITAL,e.MARKET,e.MARKET,e.MARKET,e.MARKET],[e.HEADQUARTER,e.HEADQUARTER,e.HEADQUARTER,e.HEADQUARTER,e.HEADQUARTER,e.PRECEPTORY,e.HOSPITAL,e.HOSPITAL,e.HOSPITAL,e.HOSPITAL,e.HOSPITAL],[e.MARKET,e.MARKET,e.MARKET,e.MARKET,e.PRECEPTORY,e.PRECEPTORY,e.MARKET,e.MARKET,e.MARKET,e.MARKET],[e.HEADQUARTER,e.HEADQUARTER,e.HEADQUARTER,e.HEADQUARTER,e.HEADQUARTER,e.PRECEPTORY,e.PRECEPTORY,e.PRECEPTORY,e.PRECEPTORY,e.PRECEPTORY,e.PRECEPTORY,e.PRECEPTORY]],Array.prototype.unshift.apply(t['Full Village'],t.Essential),t['Essential Without Wall']=t.Essential.filter((function(t){return t!==e.WALL})),t['Full Wall']=[e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL,e.WALL],
t['Full Farm']=[e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM,e.FARM],function(e){let t={};for(let n in e)b.call(e,n)&&(t[n]=a(e[n]));return t}(t)})),define('two/builderQueue/events',[],(function(){angular.extend(s,{BUILDER_QUEUE_JOB_STARTED:'builder_queue_job_started',BUILDER_QUEUE_START:'builder_queue_start',BUILDER_QUEUE_STOP:'builder_queue_stop',BUILDER_QUEUE_UNKNOWN_SETTING:'builder_queue_settings_unknown_setting',BUILDER_QUEUE_CLEAR_LOGS:'builder_queue_clear_logs',BUILDER_QUEUE_BUILDING_SEQUENCES_UPDATED:'builder_queue_building_orders_updated',BUILDER_QUEUE_BUILDING_SEQUENCES_ADDED:'builder_queue_building_orders_added',BUILDER_QUEUE_BUILDING_SEQUENCES_REMOVED:'builder_queue_building_orders_removed',BUILDER_QUEUE_SETTINGS_CHANGE:'builder_queue_settings_change',BUILDER_QUEUE_NO_SEQUENCES:'builder_queue_no_sequences',
COMMAND_QUEUE_ADD_INVALID_OFFICER:'command_queue_add_invalid_officer',COMMAND_QUEUE_ADD_RELOCATE_DISABLED:'command_queue_add_relocate_disabled'})})),define('two/builderQueue/ui',['two/ui','two/builderQueue','two/utils','two/ready','two/Settings','two/builderQueue/settings','two/builderQueue/settings/map','two/builderQueue/sequenceStatus','conf/buildingTypes','two/EventScope','queues/EventQueue','helper/time'],(function(e,n,d,u,p,_,h,f,v,E,w,T){let A,y,S,I,k=i.getGroupList(),x={},R=!1,M={sequencesAvail:!0,modal:{}},L={sequencesAvail:!0},O={};const N={SETTINGS:'settings',SEQUENCES:'sequences',LOGS:'logs'};let C,D={},P={},z=!1,G=!1;const B=function(e,t,a){return a?parseInt(Math.round(e*Math.pow(t,a-1)),10):0},U=function(e,a,n){if(n>=e.length){let a=n-e.length+1;for(;a--;)e.push(t)}e.splice(n,0,e.splice(a,1)[0])},V=function(e,t){switch(n.addBuildingSequence(e,t)){case f.SEQUENCE_SAVED:return!0;case f.SEQUENCE_EXISTS:
return d.notif('error',g('i18n')('error_sequence_exists',a.loc.ale,'builder_queue')),!1;case f.SEQUENCE_INVALID:return d.notif('error',g('i18n')('error_sequence_invalid',a.loc.ale,'builder_queue')),!1}};L.generateSequences=function(){const e=I.get(_.BUILDING_SEQUENCES),t=Object.keys(e).length;if(L.sequencesAvail=t,!t)return!1;L.generateBuildingSequence(),L.generateBuildingSequenceFinal(),L.updateVisibleBuildingSequence()},L.generateBuildingSequence=function(){const e=A.settings[_.ACTIVE_SEQUENCE].value,t=A.settings[_.BUILDING_SEQUENCES][e],a=i.getGameData().getBuildings();let n={};if(L.sequencesAvail=!!t,!L.sequencesAvail)return!1;for(let e in v)n[v[e]]=0;L.buildingSequence=t.map((function(e){let t=++n[e],o=a[e].individual_level_costs[t],l='not-reached';return!function(e,t){return i.getSelectedVillage().getBuildingData().getBuildingLevel(e)>=t}(e,t)?function(e,t){const a=i.getSelectedVillage().getBuildingQueue().getQueue();let n=!1;return a.some((function(a){
if(a.building===e&&a.level===t)return n=!0})),n}(e,t)&&(l='progress'):l='reached',{level:t,price:a[e].individual_level_costs[t],building:e,duration:T.readableSeconds(o.build_time),levelPoints:x[e][t-1],state:l}}))},L.generateBuildingSequenceFinal=function(e){const t=A.settings[_.ACTIVE_SEQUENCE].value,a=A.settings[_.BUILDING_SEQUENCES][e||t];let n={},i=[];for(let e in S)n[e]={level:0,order:S[e].order,resources:{wood:0,clay:0,iron:0,food:0},points:0,build_time:0};a.forEach((function(e){let t=++n[e].level,a=S[e].individual_level_costs[t];n[e].resources.wood+=parseInt(a.wood,10),n[e].resources.clay+=parseInt(a.clay,10),n[e].resources.iron+=parseInt(a.iron,10),n[e].resources.food+=parseInt(a.food,10),n[e].build_time+=parseInt(a.build_time,10),n[e].points+=x[e][t-1]}));for(let e in n)0!==n[e].level&&i.push({building:e,level:n[e].level,order:n[e].order,resources:n[e].resources,points:n[e].points,build_time:n[e].build_time});L.buildingSequenceFinal=i},
L.updateVisibleBuildingSequence=function(){const e=A.pagination.buildingSequence.offset,t=A.pagination.buildingSequence.limit;L.visibleBuildingSequence=L.buildingSequence.slice(e,e+t),A.pagination.buildingSequence.count=L.buildingSequence.length},L.generateBuildingsLevelPoints=function(){const e=i.getGameData();let t;for(let a in e.data.buildings){let n=e.getBuildingDataForBuilding(a);t=0,x[a]=[];for(let e=1;e<=n.max_level;e++){let i=B(n.points,n.points_factor,e)-t;t+=i,x[a].push(i)}}},M.moveUp=function(){let e=angular.copy(M.buildingSequence),t=!1;for(let a=0;a<e.length;a++){let n=e[a];n.checked&&(0!==a&&(e[a-1].checked||(e[a-1].building===n.building&&(e[a-1].level++,n.level--,t=!0),U(e,a,a-1))))}M.buildingSequence=e,M.updateVisibleBuildingSequence(),t&&(z=!0)},M.moveDown=function(){let e=angular.copy(M.buildingSequence),t=!1;for(let a=e.length-1;a>=0;a--){let n=e[a];n.checked&&(a!==e.length-1&&(e[a+1].checked||(e[a+1].building===n.building&&(e[a+1].level--,n.level++,t=!0),
U(e,a,a+1))))}M.buildingSequence=e,M.updateVisibleBuildingSequence(),t&&(z=!0)},M.addBuilding=function(e,t,a=1){const n=t-1;let i=M.buildingSequence.slice(),o={level:null,building:e,checked:!1};for(let e=0;e<a;e++)i.splice(n,0,o);return M.buildingSequence=M.updateLevels(i,e),M.updateVisibleBuildingSequence(),z=!0,!0},M.removeBuilding=function(e){const t=M.buildingSequence[e].building;M.buildingSequence.splice(e,1),M.buildingSequence=M.updateLevels(M.buildingSequence,t),M.updateVisibleBuildingSequence(),z=!0},M.updateLevels=function(e,t){let a=0,n=[];for(let i=0;i<e.length;i++){let o=e[i];o.building===t?a<S[t].max_level&&n.push({level:++a,building:t,checked:!1}):n.push(o)}return n},M.generateBuildingSequence=function(){const e=I.get(_.BUILDING_SEQUENCES),t=Object.keys(e).length;if(M.sequencesAvail=t,!t)return!1;const a=e[M.selectedSequence.value];let n={};for(let e in v)n[v[e]]=0;M.buildingSequence=a.map((function(e){return{level:++n[e],building:e,checked:!1}})),
M.updateVisibleBuildingSequence()},M.updateVisibleBuildingSequence=function(){const e=A.pagination.buildingSequenceEditor.offset,t=A.pagination.buildingSequenceEditor.limit;M.visibleBuildingSequence=M.buildingSequence.slice(e,e+t),A.pagination.buildingSequenceEditor.count=M.buildingSequence.length},M.updateBuildingSequence=function(){const e=M.selectedSequence.value,t=M.buildingSequence.map((function(e){return e.building}));switch(n.updateBuildingSequence(e,t)){case f.SEQUENCE_SAVED:z=!1;break;case f.SEQUENCE_NO_EXISTS:d.notif('error',g('i18n')('error_sequence_no_exits',a.loc.ale,'builder_queue'));break;case f.SEQUENCE_INVALID:d.notif('error',g('i18n')('error_sequence_invalid',a.loc.ale,'builder_queue'))}},M.modal.removeSequence=function(){let e=a.$new();e.title=g('i18n')('title',a.loc.ale,'builder_queue_remove_sequence_modal'),e.text=g('i18n')('text',a.loc.ale,'builder_queue_remove_sequence_modal'),e.submitText=g('i18n')('remove',a.loc.ale,'common'),
e.cancelText=g('i18n')('cancel',a.loc.ale,'common'),e.switchColors=!0,e.submit=function(){e.closeWindow(),n.removeSequence(M.selectedSequence.value),z=!1},e.cancel=function(){e.closeWindow()},c.getModal('modal_attention',e)},M.modal.addBuilding=function(){let e=a.$new();e.buildings=[],e.position=M.lastAddedIndex,e.indexLimit=M.buildingSequence.length+1,e.buildingsData=i.getGameData().getBuildings(),e.amount=1,e.selectedBuilding={name:g('i18n')(M.lastAddedBuilding,a.loc.ale,'building_names'),value:M.lastAddedBuilding};for(let t in S)e.buildings.push({name:g('i18n')(t,a.loc.ale,'building_names'),value:t});e.add=function(){const t=e.selectedBuilding.value,n=e.position,i=e.amount,o=g('i18n')(t,a.loc.ale,'building_names'),l=S[t].max_level;M.lastAddedBuilding=t,M.lastAddedIndex=n,M.addBuilding(t,n,i)?(e.closeWindow(),d.notif('success',g('i18n')('add_building_success',a.loc.ale,'builder_queue',o,n))):d.notif('error',g('i18n')('add_building_limit_exceeded',a.loc.ale,'builder_queue',o,l))},
c.getModal('!twoverflow_builder_queue_add_building_modal',e)},M.modal.nameSequence=function(){const e=function(){let e=a.$new();const t=M.selectedSequence.name,n=A.settings[_.BUILDING_SEQUENCES][t];e.name=t,e.submit=function(){if(e.name.length<3)return d.notif('error',g('i18n')('name_sequence_min_lenght',a.loc.ale,'builder_queue')),!1;V(e.name,n)&&e.closeWindow()},c.getModal('!twoverflow_builder_queue_name_sequence_modal',e)};if(z){let t=a.$new();t.title=g('i18n')('clone_warn_changed_sequence_title',a.loc.ale,'builder_queue'),t.text=g('i18n')('clone_warn_changed_sequence_text',a.loc.ale,'builder_queue'),t.submitText=g('i18n')('clone',a.loc.ale,'builder_queue'),t.cancelText=g('i18n')('cancel',a.loc.ale,'common'),t.submit=function(){t.closeWindow(),e()},t.cancel=function(){t.closeWindow()},c.getModal('modal_attention',t)}else e()},O.updateVisibleLogs=function(){const e=A.pagination.logs.offset,t=A.pagination.logs.limit;O.visibleLogs=O.logs.slice(e,e+t),
A.pagination.logs.count=O.logs.length,O.visibleLogs.forEach((function(e){e.villageId&&function(e){if(D[e])return D[e];D[e]=!0,P[e]='LOADING...',o.emit(l.MAP_GET_VILLAGE_DETAILS,{my_village_id:i.getSelectedVillage().getId(),village_id:e,num_reports:1},(function(t){D[e]={x:t.village_x,y:t.village_y,name:t.village_name,last_report:t.last_reports[0]},P[e]=`${t.village_name} (${t.village_x}|${t.village_y})`}))}(e.villageId)}))},O.clearLogs=function(){n.clearLogs()};const q=function(){let e=a.$new();const t=[v.HEADQUARTER];e.name='',e.submit=function(){if(e.name.length<3)return d.notif('error',g('i18n')('name_sequence_min_lenght',a.loc.ale,'builder_queue')),!1;V(e.name,t)&&(A.settings[_.ACTIVE_SEQUENCE]={name:e.name,value:e.name},A.settings[_.BUILDING_SEQUENCES][e.name]=t,F(),L.selectedSequence={name:e.name,value:e.name},M.selectedSequence={name:e.name,value:e.name},L.generateSequences(),M.generateBuildingSequence(),e.closeWindow(),W(N.SEQUENCES))},
c.getModal('!twoverflow_builder_queue_name_sequence_modal',e)},W=function(e){A.selectedTab=e},F=function(){I.setAll(I.decode(A.settings)),z=!1},j=function(){n.isRunning()?n.stop():n.start()},Y=function(e,t){let n=a.$new();n.title=g('i18n')('discard_changes_title',a.loc.ale,'builder_queue'),n.text=g('i18n')('discard_changes_text',a.loc.ale,'builder_queue'),n.submitText=g('i18n')('discard',a.loc.ale,'common'),n.cancelText=g('i18n')('cancel',a.loc.ale,'common'),n.switchColors=!0,n.submit=function(){n.closeWindow(),e&&e()},n.cancel=function(){n.closeWindow(),t&&t()},c.getModal('modal_attention',n)},H=function(){z?Y((function(){C()})):C()},Q={updateGroups:function(){A.groups=p.encodeList(k.getGroups(),{type:'groups',disabled:!0})},updateSequences:function(){const e=I.get(_.BUILDING_SEQUENCES);A.sequences=p.encodeList(e,{type:'keys',disabled:!1})},generateBuildingSequences:function(){L.generateSequences()},generateBuildingSequencesEditor:function(){M.generateBuildingSequence()},
updateLogs:function(){A.logs=n.getLogs(),O.updateVisibleLogs()},clearLogs:function(){d.notif('success',g('i18n')('logs_cleared',a.loc.ale,'builder_queue')),Q.updateLogs()},buildingSequenceUpdate:function(e,t){const n=I.get(_.BUILDING_SEQUENCES);A.settings[_.BUILDING_SEQUENCES][t]=n[t],A.settings[_.ACTIVE_SEQUENCE].value===t&&L.generateSequences(),d.notif('success',g('i18n')('sequence_updated',a.loc.ale,'builder_queue',t))},buildingSequenceAdd:function(e,t){const n=I.get(_.BUILDING_SEQUENCES);A.settings[_.BUILDING_SEQUENCES][t]=n[t],Q.updateSequences(),d.notif('success',g('i18n')('sequence_created',a.loc.ale,'builder_queue',t))},buildingSequenceRemoved:function(e,t){delete A.settings[_.BUILDING_SEQUENCES][t];const n=function(e){for(let t in e)if(b.call(e,t))return t;return!1}(A.settings[_.BUILDING_SEQUENCES]);M.selectedSequence={name:n,value:n},Q.updateSequences(),M.generateBuildingSequence(),I.get(_.ACTIVE_SEQUENCE)===t&&(I.set(_.ACTIVE_SEQUENCE,n,{quiet:!0}),L.generateSequences()),
d.notif('success',g('i18n')('sequence_removed',a.loc.ale,'builder_queue',t))},saveSettings:function(){d.notif('success',g('i18n')('settings_saved',a.loc.ale,'builder_queue'))},started:function(){A.running=!0},stopped:function(){A.running=!1}},K=function(){const e=I.get(_.ACTIVE_SEQUENCE);A=a.$new(),A.selectedTab=N.SETTINGS,A.TAB_TYPES=N,A.SETTINGS=_,A.running=R,A.pagination={},A.settingsMap=I.settingsMap,A.villagesLabel=P,A.villagesInfo=D,A.editorView=M,A.editorView.buildingSequence={},A.editorView.visibleBuildingSequence=[],A.editorView.selectedSequence={name:e,value:e},A.editorView.lastAddedBuilding=v.HEADQUARTER,A.editorView.lastAddedIndex=1,A.settingsView=L,A.settingsView.buildingSequence={},A.settingsView.buildingSequenceFinal={},A.logsView=O,A.logsView.logs=n.getLogs(),A.selectTab=W,A.switchBuilder=j,A.saveSettings=F,A.createSequence=q,A.openVillageInfo=r.openVillageInfo,I.injectScope(A),Q.updateGroups(),Q.updateSequences(),A.pagination.buildingSequence={
count:L.buildingSequence.length,offset:0,loader:L.updateVisibleBuildingSequence,limit:m.getPaginationLimit()},A.pagination.buildingSequenceEditor={count:M.buildingSequence.length,offset:0,loader:M.updateVisibleBuildingSequence,limit:m.getPaginationLimit()},A.pagination.logs={count:O.logs.length,offset:0,loader:O.updateVisibleLogs,limit:m.getPaginationLimit()},O.updateVisibleLogs(),L.generateSequences(),M.generateBuildingSequence();let t=new E('twoverflow_builder_queue_window');t.register(s.GROUPS_UPDATED,Q.updateGroups,!0),t.register(s.GROUPS_CREATED,Q.updateGroups,!0),t.register(s.GROUPS_DESTROYED,Q.updateGroups,!0),t.register(s.VILLAGE_SELECTED_CHANGED,Q.generateBuildingSequences,!0),t.register(s.BUILDING_UPGRADING,Q.generateBuildingSequences,!0),t.register(s.BUILDING_LEVEL_CHANGED,Q.generateBuildingSequences,!0),t.register(s.BUILDING_TEARING_DOWN,Q.generateBuildingSequences,!0),t.register(s.VILLAGE_BUILDING_QUEUE_CHANGED,Q.generateBuildingSequences,!0),
t.register(s.BUILDER_QUEUE_JOB_STARTED,Q.updateLogs),t.register(s.BUILDER_QUEUE_CLEAR_LOGS,Q.clearLogs),t.register(s.BUILDER_QUEUE_BUILDING_SEQUENCES_UPDATED,Q.buildingSequenceUpdate),t.register(s.BUILDER_QUEUE_BUILDING_SEQUENCES_ADDED,Q.buildingSequenceAdd),t.register(s.BUILDER_QUEUE_BUILDING_SEQUENCES_REMOVED,Q.buildingSequenceRemoved),t.register(s.BUILDER_QUEUE_SETTINGS_CHANGE,Q.saveSettings),t.register(s.BUILDER_QUEUE_START,Q.started),t.register(s.BUILDER_QUEUE_STOP,Q.stopped),c.getScreenWithInjectedScope('!twoverflow_builder_queue_window',A),C=A.closeWindow,A.closeWindow=H,A.$watch('settings[SETTINGS.ACTIVE_SEQUENCE].value',(function(e,t){e!==t&&Q.generateBuildingSequences()})),A.$watch('editorView.selectedSequence.value',(function(e,t){G?G=!1:e!==t&&(z?Y((function(){Q.generateBuildingSequencesEditor(),z=!1}),(function(){A.editorView.selectedSequence={name:t,value:t},G=!0})):Q.generateBuildingSequencesEditor())}))};return function(){S=i.getGameData().getBuildings(),
L.generateBuildingsLevelPoints(),I=n.getSettings(),y=e.addMenuButton('Budowniczy',30),y.addEventListener('click',K),w.register(s.BUILDER_QUEUE_START,(function(){R=!0,y.classList.remove('btn-orange'),y.classList.add('btn-red'),d.notif('success',g('i18n')('started',a.loc.ale,'builder_queue'))})),w.register(s.BUILDER_QUEUE_STOP,(function(){R=!1,y.classList.remove('btn-red'),y.classList.add('btn-orange'),d.notif('success',g('i18n')('stopped',a.loc.ale,'builder_queue'))})),
e.addTemplate('twoverflow_builder_queue_window',"<div id=\"two-builder-queue\" class=\"win-content two-window\"><header class=\"win-head\"><h2>Budowniczy</h2><ul class=\"list-btn\"><li><a href=\"#\" class=\"size-34x34 btn-red icon-26x26-close\" ng-click=\"closeWindow()\"></a></ul></header><div class=\"win-main small-select\" scrollbar=\"\"><div class=\"tabs tabs-bg\"><div class=\"tabs-three-col\"><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.SETTINGS)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.SETTINGS}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.SETTINGS}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.SETTINGS}\">{{ TAB_TYPES.SETTINGS | i18n:loc.ale:'common' }}</a></div></div></div><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.SEQUENCES)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.SEQUENCES}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.SEQUENCES}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.SEQUENCES}\">{{ TAB_TYPES.SEQUENCES | i18n:loc.ale:'builder_queue' }}</a></div></div></div><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.LOGS)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.LOGS}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.LOGS}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.LOGS}\">{{ TAB_TYPES.LOGS | i18n:loc.ale:'common' }}</a></div></div></div></div></div><div class=\"box-paper footer\"><div class=\"scroll-wrap\"><div ng-show=\"selectedTab === TAB_TYPES.SETTINGS\"><h5 class=\"twx-section\">{{ 'settings' | i18n:loc.ale:'builder_queue' }}</h5><table class=\"settings tbl-border-light tbl-striped\"><col width=\"40%\"><col><col width=\"60px\"><tr><td><span class=\"ff-cell-fix\">{{ 'settings_village_groups' | i18n:loc.ale:'builder_queue' }}</span><td colspan=\"2\" class=\"text-right\"><div select=\"\" list=\"groups\" selected=\"settings[SETTINGS.GROUP_VILLAGES]\" drop-down=\"true\"></div><tr ng-show=\"settingsView.sequencesAvail\"><td><span class=\"ff-cell-fix\">{{ 'settings_building_sequence' | i18n:loc.ale:'builder_queue' }}</span><td colspan=\"2\" class=\"text-right\"><div select=\"\" list=\"sequences\" selected=\"settings[SETTINGS.ACTIVE_SEQUENCE]\" drop-down=\"true\"></div><tr><td><span class=\"ff-cell-fix\">{{ 'settings_preserve_wood' | i18n:loc.ale:'builder_queue' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.PRESERVE_WOOD].min\" max=\"settingsMap[SETTINGS.PRESERVE_WOOD].max\" value=\"settings[SETTINGS.PRESERVE_WOOD]\" enabled=\"true\"></div><td><input type=\"number\" class=\"preserve-resource textfield-border text-center\" ng-model=\"settings[SETTINGS.PRESERVE_WOOD]\"><tr><td><span class=\"ff-cell-fix\">{{ 'settings_preserve_clay' | i18n:loc.ale:'builder_queue' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.PRESERVE_CLAY].min\" max=\"settingsMap[SETTINGS.PRESERVE_CLAY].max\" value=\"settings[SETTINGS.PRESERVE_CLAY]\" enabled=\"true\"></div><td><input type=\"number\" class=\"preserve-resource textfield-border text-center\" ng-model=\"settings[SETTINGS.PRESERVE_CLAY]\"><tr><td><span class=\"ff-cell-fix\">{{ 'settings_preserve_iron' | i18n:loc.ale:'builder_queue' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.PRESERVE_IRON].min\" max=\"settingsMap[SETTINGS.PRESERVE_IRON].max\" value=\"settings[SETTINGS.PRESERVE_IRON]\" enabled=\"true\"></div><td><input type=\"number\" class=\"preserve-resource textfield-border text-center\" ng-model=\"settings[SETTINGS.PRESERVE_IRON]\"><tr><td colspan=\"2\"><span class=\"ff-cell-fix\">{{ 'settings_priorize_farm' | i18n:loc.ale:'builder_queue' }}</span><td class=\"text-center\"><div switch-slider=\"\" enabled=\"true\" border=\"true\" value=\"settings[SETTINGS.PRIORIZE_FARM]\" vertical=\"false\" size=\"'56x28'\"></div></table><h5 class=\"twx-section\">{{ 'settings_building_sequence' | i18n:loc.ale:'builder_queue' }}</h5><p ng-show=\"!settingsView.sequencesAvail\" class=\"text-center\"><a href=\"#\" class=\"btn-orange btn-border create-sequence\" ng-click=\"createSequence()\">{{ 'create_sequence' | i18n:loc.ale:'builder_queue' }}</a><div ng-if=\"settingsView.sequencesAvail && settingsView.visibleBuildingSequence.length\"><div class=\"page-wrap\" pagination=\"pagination.buildingSequence\"></div><table class=\"tbl-border-light header-center building-sequence\"><col width=\"5%\"><col><col width=\"7%\"><col width=\"13%\"><col width=\"8%\"><col width=\"9%\"><col width=\"9%\"><col width=\"9%\"><col width=\"6%\"><tr><th tooltip=\"\" tooltip-content=\"{{ 'position' | i18n:loc.ale:'builder_queue' }}\">#<th>{{ 'building' | i18n:loc.ale:'common' }}<th>{{ 'level' | i18n:loc.ale:'common' }}<th>{{ 'duration' | i18n:loc.ale:'common' }}<th>{{ 'points' | i18n:loc.ale:'common' }}<th><span class=\"icon-26x26-resource-wood\"></span><th><span class=\"icon-26x26-resource-clay\"></span><th><span class=\"icon-26x26-resource-iron\"></span><th><span class=\"icon-26x26-resource-food\"></span><tr ng-repeat=\"item in settingsView.visibleBuildingSequence track by $index\" class=\"{{ item.state }}\"><td>{{ pagination.buildingSequence.offset + $index + 1 }}<td><span class=\"building-icon icon-20x20-building-{{ item.building }}\"></span> {{ item.building | i18n:loc.ale:'building_names' }}<td>{{ item.level }}<td>{{ item.duration }}<td class=\"green\">+{{ item.levelPoints | number }}<td>{{ item.price.wood | number }}<td>{{ item.price.clay | number }}<td>{{ item.price.iron | number }}<td>{{ item.price.food | number }}</table><div class=\"page-wrap\" pagination=\"pagination.buildingSequence\"></div></div><h5 ng-if=\"settingsView.sequencesAvail && settingsView.visibleBuildingSequence.length\" class=\"twx-section\">{{ 'settings_building_sequence_final' | i18n:loc.ale:'builder_queue' }}</h5><table ng-if=\"settingsView.sequencesAvail && settingsView.visibleBuildingSequence.length\" class=\"tbl-border-light tbl-striped header-center building-sequence-final\"><col><col width=\"5%\"><col width=\"12%\"><col width=\"8%\"><col width=\"11%\"><col width=\"11%\"><col width=\"11%\"><col width=\"7%\"><tr><th>{{ 'building' | i18n:loc.ale:'common' }}<th>{{ 'level' | i18n:loc.ale:'common' }}<th>{{ 'duration' | i18n:loc.ale:'common' }}<th>{{ 'points' | i18n:loc.ale:'common' }}<th><span class=\"icon-26x26-resource-wood\"></span><th><span class=\"icon-26x26-resource-clay\"></span><th><span class=\"icon-26x26-resource-iron\"></span><th><span class=\"icon-26x26-resource-food\"></span><tr ng-repeat=\"item in settingsView.buildingSequenceFinal | orderBy:'order'\"><td><span class=\"building-icon icon-20x20-building-{{ item.building }}\"></span> {{ item.building | i18n:loc.ale:'building_names' }}<td>{{ item.level }}<td>{{ item.build_time | readableSecondsFilter }}<td class=\"green\">+{{ item.points | number }}<td>{{ item.resources.wood | number }}<td>{{ item.resources.clay | number }}<td>{{ item.resources.iron | number }}<td>{{ item.resources.food | number }}</table><p ng-show=\"settingsView.sequencesAvail && !settingsView.visibleBuildingSequence.length\" class=\"text-center\">{{ 'empty_sequence' | i18n:loc.ale:'builder_queue' }}</div><div ng-show=\"selectedTab === TAB_TYPES.SEQUENCES\"><h5 class=\"twx-section\">{{ 'sequences_edit_sequence' | i18n:loc.ale:'builder_queue' }}</h5><p ng-show=\"!editorView.sequencesAvail\" class=\"text-center\"><a class=\"btn btn-orange create-sequence\" ng-click=\"createSequence()\">{{ 'create_sequence' | i18n:loc.ale:'builder_queue' }}</a><table ng-if=\"editorView.sequencesAvail\" class=\"tbl-border-light tbl-striped editor-select-sequence\"><tr><td colspan=\"2\"><span class=\"ff-cell-fix\">{{ 'sequences_select_edit' | i18n:loc.ale:'builder_queue' }}</span><td><div class=\"select-sequence-editor\" select=\"\" list=\"sequences\" selected=\"editorView.selectedSequence\" drop-down=\"true\"></div><tr><td class=\"text-center\"><a class=\"btn btn-orange create-sequence\" ng-click=\"createSequence()\">{{ 'create_sequence' | i18n:loc.ale:'builder_queue' }}</a><td class=\"text-center\"><a class=\"btn btn-orange clone-sequence\" ng-click=\"editorView.modal.nameSequence()\">{{ 'clone_sequence' | i18n:loc.ale:'builder_queue' }}</a><td class=\"text-center\"><a class=\"btn btn-red remove-sequence\" ng-click=\"editorView.modal.removeSequence()\">{{ 'remove_sequence' | i18n:loc.ale:'builder_queue' }}</a></table><div ng-if=\"editorView.sequencesAvail\"><div class=\"page-wrap\" pagination=\"pagination.buildingSequenceEditor\"></div><table ng-show=\"editorView.visibleBuildingSequence.length\" class=\"tbl-border-light tbl-striped header-center building-sequence-editor\"><col width=\"5%\"><col width=\"5%\"><col><col width=\"7%\"><col width=\"10%\"><tr><th><th tooltip=\"\" tooltip-content=\"{{ 'position' | i18n:loc.ale:'builder_queue' }}\">#<th>{{ 'building' | i18n:loc.ale:'common' }}<th>{{ 'level' | i18n:loc.ale:'common' }}<th>{{ 'actions' | i18n:loc.ale:'common' }}<tr ng-repeat=\"item in editorView.visibleBuildingSequence track by $index\" ng-class=\"{'selected': item.checked}\"><td><label class=\"size-26x26 btn-orange icon-26x26-checkbox\" ng-class=\"{'icon-26x26-checkbox-checked': item.checked}\"><input type=\"checkbox\" ng-model=\"item.checked\"></label><td>{{ pagination.buildingSequenceEditor.offset + $index + 1 }}<td><span class=\"building-icon icon-20x20-building-{{ item.building }}\"></span> {{ item.building | i18n:loc.ale:'building_names' }}<td>{{ item.level }}<td><a href=\"#\" class=\"size-20x20 btn-red icon-20x20-close\" ng-click=\"editorView.removeBuilding(pagination.buildingSequenceEditor.offset + $index)\" tooltip=\"\" tooltip-content=\"{{ 'remove_building' | i18n:loc.ale:'builder_queue' }}\"></a></table><div class=\"page-wrap\" pagination=\"pagination.buildingSequenceEditor\"></div><p ng-show=\"!editorView.visibleBuildingSequence.length\" class=\"text-center\"><a class=\"btn btn-border btn-orange\" ng-click=\"editorView.modal.addBuilding()\">{{ 'sequences_add_building' | i18n:loc.ale:'builder_queue' }}</a></div></div><div ng-show=\"selectedTab === TAB_TYPES.LOGS\" class=\"rich-text\"><div class=\"page-wrap\" pagination=\"pagination.logs\"></div><p class=\"text-center\" ng-show=\"!logsView.logs.length\">{{ 'logs_no_builds' | i18n:loc.ale:'builder_queue' }}<table class=\"tbl-border-light tbl-striped header-center logs\" ng-show=\"logsView.logs.length\"><col width=\"40%\"><col width=\"30%\"><col width=\"5%\"><col width=\"25%\"><col><thead><tr><th>{{ 'village' | i18n:loc.ale:'common' }}<th>{{ 'building' | i18n:loc.ale:'common' }}<th>{{ 'level' | i18n:loc.ale:'common' }}<th>{{ 'started_at' | i18n:loc.ale:'common' }}<tbody><tr ng-repeat=\"log in logsView.logs\"><td><a class=\"link\" ng-click=\"openVillageInfo(log.villageId)\"><span class=\"icon-20x20-village\"></span> {{ villagesLabel[log.villageId] }}</a><td><span class=\"building-icon icon-20x20-building-{{ log.building }}\"></span> {{ log.building | i18n:loc.ale:'building_names' }}<td>{{ log.level }}<td>{{ log.time | readableDateFilter:loc.ale:GAME_TIMEZONE:GAME_TIME_OFFSET }}</table><div class=\"page-wrap\" pagination=\"pagination.logs\"></div></div></div></div></div><footer class=\"win-foot\"><ul class=\"list-btn list-center\"><li ng-show=\"selectedTab === TAB_TYPES.SETTINGS && settingsView.sequencesAvail\"><a href=\"#\" class=\"btn-border btn-orange\" ng-click=\"saveSettings()\">{{ 'save' | i18n:loc.ale:'common' }}</a><li ng-show=\"selectedTab === TAB_TYPES.SETTINGS && settingsView.sequencesAvail\"><a href=\"#\" ng-class=\"{false:'btn-orange', true:'btn-red'}[running]\" class=\"btn-border\" ng-click=\"switchBuilder()\"><span ng-show=\"running\">{{ 'pause' | i18n:loc.ale:'common' }}</span> <span ng-show=\"!running\">{{ 'start' | i18n:loc.ale:'common' }}</span></a><li ng-show=\"selectedTab === TAB_TYPES.LOGS\"><a href=\"#\" class=\"btn-border btn-orange\" ng-click=\"logsView.clearLogs()\">{{ 'logs_clear' | i18n:loc.ale:'builder_queue' }}</a><li ng-show=\"selectedTab === TAB_TYPES.SEQUENCES && editorView.sequencesAvail\"><a href=\"#\" class=\"btn-border btn-orange\" ng-click=\"editorView.moveUp()\">{{ 'sequences_move_up' | i18n:loc.ale:'builder_queue' }}</a><li ng-show=\"selectedTab === TAB_TYPES.SEQUENCES && editorView.sequencesAvail\"><a href=\"#\" class=\"btn-border btn-orange\" ng-click=\"editorView.moveDown()\">{{ 'sequences_move_down' | i18n:loc.ale:'builder_queue' }}</a><li ng-show=\"selectedTab === TAB_TYPES.SEQUENCES && editorView.sequencesAvail\"><a href=\"#\" class=\"btn-border btn-orange\" ng-click=\"editorView.modal.addBuilding()\">{{ 'sequences_add_building' | i18n:loc.ale:'builder_queue' }}</a><li ng-show=\"selectedTab === TAB_TYPES.SEQUENCES && editorView.sequencesAvail\"><a href=\"#\" class=\"btn-border btn-red\" ng-click=\"editorView.updateBuildingSequence()\">{{ 'save' | i18n:loc.ale:'common' }}</a></ul></footer></div>"),
e.addTemplate('twoverflow_builder_queue_add_building_modal',"<div id=\"add-building-modal\" class=\"win-content\"><header class=\"win-head\"><h3>{{ 'title' | i18n:loc.ale:'builder_queue_add_building_modal' }}</h3><ul class=\"list-btn sprite\"><li><a href=\"#\" class=\"btn-red icon-26x26-close\" ng-click=\"closeWindow()\"></a></ul></header><div class=\"win-main\" scrollbar=\"\"><div class=\"box-paper\"><div class=\"scroll-wrap unit-operate-slider\"><table class=\"tbl-border-light tbl-striped header-center\"><col width=\"15%\"><col><col width=\"15%\"><tr><td>{{ 'building' | i18n:loc.ale:'common' }}<td colspan=\"2\"><div select=\"\" list=\"buildings\" selected=\"selectedBuilding\" drop-down=\"true\"></div><tr><td>{{ 'position' | i18n:loc.ale:'builder_queue' }}<td><div range-slider=\"\" min=\"1\" max=\"indexLimit\" value=\"position\" enabled=\"true\"></div><td><input type=\"number\" class=\"input-border text-center\" ng-model=\"position\"><tr><td>{{ 'amount' | i18n:loc.ale:'builder_queue' }}<td><div range-slider=\"\" min=\"1\" max=\"buildingsData[selectedBuilding.value].max_level\" value=\"amount\" enabled=\"true\"></div><td><input type=\"number\" class=\"input-border text-center\" ng-model=\"amount\"></table></div></div></div><footer class=\"win-foot sprite-fill\"><ul class=\"list-btn list-center\"><li><a href=\"#\" class=\"btn-red btn-border btn-premium\" ng-click=\"closeWindow()\">{{ 'cancel' | i18n:loc.ale:'common' }}</a><li><a href=\"#\" class=\"btn-orange btn-border\" ng-click=\"add()\">{{ 'add' | i18n:loc.ale:'common' }}</a></ul></footer></div>"),
e.addTemplate('twoverflow_builder_queue_name_sequence_modal',"<div id=\"name-sequence-modal\" class=\"win-content\"><header class=\"win-head\"><h3>{{ 'title' | i18n:loc.ale:'builder_queue_name_sequence_modal' }}</h3><ul class=\"list-btn sprite\"><li><a href=\"#\" class=\"btn-red icon-26x26-close\" ng-click=\"closeWindow()\"></a></ul></header><div class=\"win-main\" scrollbar=\"\"><div class=\"box-paper\"><div class=\"scroll-wrap\"><div class=\"box-border-light input-wrapper name_preset\"><form ng-submit=\"submit()\"><input focus=\"true\" ng-model=\"name\" minlength=\"3\"></form></div></div></div></div><footer class=\"win-foot sprite-fill\"><ul class=\"list-btn list-center\"><li><a href=\"#\" class=\"btn-red btn-border btn-premium\" ng-click=\"closeWindow()\">{{ 'cancel' | i18n:loc.ale:'common' }}</a><li><a href=\"#\" class=\"btn-orange btn-border\" ng-click=\"submit()\">{{ 'add' | i18n:loc.ale:'common' }}</a></ul></footer></div>"),
e.addStyle('#two-builder-queue tr.reached td{background-color:#b9af7e}#two-builder-queue tr.progress td{background-color:#af9d57}#two-builder-queue .building-sequence,#two-builder-queue .building-sequence-final,#two-builder-queue .building-sequence-editor,#two-builder-queue .logs{margin-bottom:10px}#two-builder-queue .building-sequence td,#two-builder-queue .building-sequence-final td,#two-builder-queue .building-sequence-editor td,#two-builder-queue .logs td,#two-builder-queue .building-sequence th,#two-builder-queue .building-sequence-final th,#two-builder-queue .building-sequence-editor th,#two-builder-queue .logs th{text-align:center;line-height:20px}#two-builder-queue .building-sequence-editor .selected td{background-color:#b9af7e}#two-builder-queue .editor-select-sequence{margin-bottom:13px}#two-builder-queue a.btn{height:28px;line-height:28px;padding:0 10px}#two-builder-queue .select-sequence-editor{text-align:center;margin-top:1px}#two-builder-queue .create-sequence{padding:8px 20px 8px 20px}#two-builder-queue table.settings td{padding:1px 5px}#two-builder-queue table.settings td.text-right{text-align:right}#two-builder-queue table.settings div[switch-slider]{display:inline-block;margin-top:2px}#two-builder-queue .small-select a.select-handler{height:28px;line-height:28px}#two-builder-queue .small-select a.select-button{height:28px}#two-builder-queue input.preserve-resource{width:70px;height:32px}#two-builder-queue .icon-26x26-resource-wood,#two-builder-queue .icon-26x26-resource-clay,#two-builder-queue .icon-26x26-resource-iron,#two-builder-queue .icon-26x26-resource-food{transform:scale(.8);top:-1px}#add-building-modal td{text-align:center}#add-building-modal .select-wrapper{width:250px}#add-building-modal input[type="text"]{width:60px}')
}})),define('two/builderQueue/settings',[],(function(){return{GROUP_VILLAGES:'group_villages',ACTIVE_SEQUENCE:'building_sequence',BUILDING_SEQUENCES:'building_orders',PRESERVE_WOOD:'preserve_wood',PRESERVE_CLAY:'preserve_clay',PRESERVE_IRON:'preserve_iron',PRIORIZE_FARM:'priorize_farm'}})),define('two/builderQueue/settings/updates',[],(function(){return{ANALYSE:'analyse'}})),define('two/builderQueue/settings/map',['two/builderQueue/defaultOrders','two/builderQueue/settings','two/builderQueue/settings/updates'],(function(e,t,a){return{[t.GROUP_VILLAGES]:{default:!1,inputType:'select',disabledOption:!0,type:'groups',updates:[a.ANALYSE]},[t.ACTIVE_SEQUENCE]:{default:'Essential',inputType:'select',updates:[a.ANALYSE]},[t.BUILDING_SEQUENCES]:{default:e,inputType:'buildingOrder',updates:[a.ANALYSE]},[t.PRESERVE_WOOD]:{default:0,updates:[a.ANALYSE],inputType:'number',min:0,max:6e5},[t.PRESERVE_CLAY]:{default:0,updates:[a.ANALYSE],inputType:'number',min:0,max:6e5},[t.PRESERVE_IRON]:{default:0,
updates:[a.ANALYSE],inputType:'number',min:0,max:6e5},[t.PRIORIZE_FARM]:{default:!0,inputType:'checkbox',updates:[a.ANALYSE]}}})),define('two/builderQueue/sequenceStatus',[],(function(){return{SEQUENCE_NO_EXISTS:'sequence_no_exists',SEQUENCE_EXISTS:'sequence_exists',SEQUENCE_INVALID:'sequence_invalid',SEQUENCE_SAVED:'sequence_saved'}})),require(['two/ready','two/builderQueue','two/builderQueue/ui','two/builderQueue/events'],(function(e,t,a){if(t.isInitialized())return!1;e((function(){t.init(),a()}))})),define('two/commandQueue',['two/utils','two/commandQueue/types/dates','two/commandQueue/types/events','two/commandQueue/types/filters','two/commandQueue/types/commands','two/commandQueue/storageKeys','two/commandQueue/errorCodes','queues/EventQueue','helper/time','helper/math','struct/MapData','Lockr','conf/buildingTypes','conf/officerTypes','conf/unitTypes'],(function(t,a,n,r,c,d,u,p,g,m,_,h,f,v,E){
const w=Object.values(c),T=Object.values(a),A=Object.values(E),y=Object.values(v),S=Object.values(f);let I,k=[],x={},R=[],M=[],L=!1;const O={[r.SELECTED_VILLAGE]:function(e){return e.origin.id===i.getSelectedVillage().getId()},[r.BARBARIAN_TARGET]:function(e){return!e.target.character_id},[r.ALLOWED_TYPES]:function(e,t){return t[r.ALLOWED_TYPES][e.type]},[r.ATTACK]:function(e){return e.type!==c.ATTACK},[r.SUPPORT]:function(e){return e.type!==c.SUPPORT},[r.RELOCATE]:function(e){return e.type!==c.RELOCATE},[r.TEXT_MATCH]:function(e,t){let a=!0;const n=t[r.TEXT_MATCH].toLowerCase().split(/\W/),i=[e.origin.name,e.origin.x+'|'+e.origin.y,e.origin.character_name||'',e.target.name,e.target.x+'|'+e.target.y,e.target.character_name||'',e.target.tribe_name||'',e.target.tribe_tag||''].join('').toLowerCase();return n.some((function(e){if(e.length&&!i.includes(e))return a=!1,!0})),a}},N=function(e){return e<g.gameTime()+I},C=function(e){k.push(e)},D=function(e){x[e.id]=e},P=function(){
h.set(d.QUEUE_COMMANDS,k)},z=function(e){return!isNaN(e)&&e>0&&e<1e3},G=function(e){return b.call(e,'x')&&b.call(e,'y')&&z(e.x)&&z(e.y)};let B={initialized:!1};return B.init=function(){I=t.getTimeOffset(),B.initialized=!0,R=h.get(d.QUEUE_SENT,[],!0),M=h.get(d.QUEUE_EXPIRED,[],!0),function(){const e=h.get(d.QUEUE_COMMANDS,[],!0);t.each(e,(function(e){g.gameTime()>e.sendTime?B.expireCommand(e,n.TIME_LIMIT):(C(e),D(e))}))}(),setInterval((function(){k.length&&k.some((function(e){if(!N(e.sendTime))return!0;L?B.sendCommand(e):B.expireCommand(e,n.TIME_LIMIT)}))}),100),e.addEventListener('beforeunload',(function(e){L&&k.length&&(e.returnValue=!0)}))},B.sendCommand=function(e){const a=function(e){const a=i.getVillages()[e.origin.id];if(!a)return n.NOT_OWN_VILLAGE;const o=a.unitInfo.units;let l={},s=!1;return t.each(e.units,(function(e,t){if('*'===e){if(0===(e=o[t].available))return}else if(e<0){if((e=o[t].available-Math.abs(e))<0)return s=n.NOT_ENOUGH_UNITS,!1
}else if(e>0&&e>o[t].available)return s=n.NOT_ENOUGH_UNITS,!1;l[t]=e})),angular.equals({},l)&&(s=n.NOT_ENOUGH_UNITS),s||l}(e);if('string'==typeof a)return B.expireCommand(e,a);e.units=a,o.emit(l.SEND_CUSTOM_ARMY,{start_village:e.origin.id,target_village:e.target.id,type:e.type,units:e.units,icon:0,officers:e.officers,catapult_target:e.catapultTarget}),function(e){R.push(e)}(e),h.set(d.QUEUE_SENT,R),B.removeCommand(e,n.COMMAND_SENT),p.trigger(s.COMMAND_QUEUE_SEND,e)},B.expireCommand=function(e,t){!function(e){M.push(e)}(e),h.set(d.QUEUE_EXPIRED,M),B.removeCommand(e,t)},B.addCommand=function(e,n,o,l,s,r,d,p){let m={},h={};return new Promise((function(b,I){if(!G(e))return I(u.INVALID_ORIGIN);if(!G(n))return I(u.INVALID_TARGET);if(!t.isValidDateTime(o))return I(u.INVALID_DATE);if(angular.isObject(s)){if(!t.each(s,(function(e,t){if(!A.includes(t))return!1;('*'===(e=isNaN(e)?e:parseInt(e,10))||'number'==typeof e&&0!==e)&&(m[t]=e)})))return I(u.INVALID_UNIT_TYPE)}
if(angular.equals(m,{}))return I(u.NO_UNITS);if(angular.isObject(r)){if(!t.each(r,(function(e,t){if(!y.includes(t))return!1;r[t]&&(h[t]=!0)})))return I(u.INVALID_OFFICER_TYPE)}return w.includes(d)?d!==c.RELOCATE||i.getWorldConfig().isRelocateUnitsEnabled()?(d===c.ATTACK&&h[v.SUPPORTER]&&delete h[v.SUPPORTER],'string'!=typeof p||S.includes(p)?(p=!(d!==c.ATTACK||!m[E.CATAPULT])&&(p||f.HEADQUARTER),T.includes(l)?void Promise.all([new Promise(t=>_.loadTownDataAsync(e.x,e.y,1,1,t)),new Promise(e=>_.loadTownDataAsync(n.x,n.y,1,1,e))]).then((function(i){if(e=i[0],n=i[1],!e)return I(u.INVALID_ORIGIN);if(!n)return I(u.INVALID_TARGET);const s=t.getTimeFromString(o),r=t.getTravelTime(e,n,m,d,h,!0),c=l===a.ARRIVE?s-r:s,_=l===a.ARRIVE?s:s+r;if(N(c))return I(u.ALREADY_SENT);const f={id:t.guid(),travelTime:r,arriveTime:_,sendTime:c,origin:e,target:n,date:o,dateType:l,units:m,officers:h,type:d,catapultTarget:p,countdown:c-g.gameTime()};C(f),D(f),k=k.sort((function(e,t){return e.sendTime-t.sendTime})),
P(),b(f)})):I(u.INVALID_DATE_TYPE)):I(u.INVALID_CATAPULT_TARGET)):I(u.RELOCATE_DISABLED):I(u.INVALID_COMMAND_TYPE)}))},B.removeCommand=function(e,t){delete x[e.id];const a=k.some((function(t,a){if(t.id==e.id)return k.splice(a,1),P(),!0}));if(a)switch(t){case n.TIME_LIMIT:p.trigger(s.COMMAND_QUEUE_SEND_TIME_LIMIT,e);break;case n.NOT_OWN_VILLAGE:p.trigger(s.COMMAND_QUEUE_SEND_NOT_OWN_VILLAGE,e);break;case n.NOT_ENOUGH_UNITS:p.trigger(s.COMMAND_QUEUE_SEND_NO_UNITS_ENOUGH,e);break;case n.COMMAND_REMOVED:p.trigger(s.COMMAND_QUEUE_REMOVE,e)}else p.trigger(s.COMMAND_QUEUE_REMOVE_ERROR,e);return a},B.clearRegisters=function(){h.set(d.QUEUE_EXPIRED,[]),h.set(d.QUEUE_SENT,[]),M=[],R=[]},B.start=function(e){L=!0,p.trigger(s.COMMAND_QUEUE_START,{disableNotif:!!e})},B.stop=function(){L=!1,p.trigger(s.COMMAND_QUEUE_STOP)},B.isRunning=function(){return L},B.getWaitingCommands=function(){return k},B.getWaitingCommandsObject=function(){return x},B.getSentCommands=function(){return R},
B.getExpiredCommands=function(){return M},B.filterCommands=function(e,t,a){const n=O[e];return(a||k).filter((function(e){return n(e,t)}))},B})),define('two/commandQueue/events',[],(function(){angular.extend(s,{COMMAND_QUEUE_SEND:'commandqueue_send',COMMAND_QUEUE_SEND_TIME_LIMIT:'commandqueue_send_time_limit',COMMAND_QUEUE_SEND_NOT_OWN_VILLAGE:'commandqueue_send_not_own_village',COMMAND_QUEUE_SEND_NO_UNITS_ENOUGH:'commandqueue_send_no_units_enough',COMMAND_QUEUE_ADD:'commandqueue_add',COMMAND_QUEUE_ADD_INVALID_ORIGIN:'commandqueue_add_invalid_origin',COMMAND_QUEUE_ADD_INVALID_TARGET:'commandqueue_add_invalid_target',COMMAND_QUEUE_ADD_INVALID_DATE:'commandqueue_add_invalid_date',COMMAND_QUEUE_ADD_NO_UNITS:'commandqueue_add_no_units',COMMAND_QUEUE_ADD_ALREADY_SENT:'commandqueue_add_already_sent',COMMAND_QUEUE_ADD_RELOCATE_DISABLED:'command_queue_add_relocate_disabled',COMMAND_QUEUE_REMOVE:'commandqueue_remove',COMMAND_QUEUE_REMOVE_ERROR:'commandqueue_remove_error',
COMMAND_QUEUE_START:'commandqueue_start',COMMAND_QUEUE_STOP:'commandqueue_stop'})})),define('two/commandQueue/ui',['two/ui','two/commandQueue','two/EventScope','two/utils','two/commandQueue/types/dates','two/commandQueue/types/events','two/commandQueue/types/filters','two/commandQueue/types/commands','two/commandQueue/storageKeys','two/commandQueue/errorCodes','queues/EventQueue','struct/MapData','helper/time','helper/util','Lockr'],(function(e,t,n,o,l,d,u,p,m,_,h,b,f,v,E){let w,T,A,y,S,I=i.getGameData(),k=I.getOrderedUnitNames(),x=I.getOrderedOfficerNames(),R=i.getPresetList(),M=!1;const L={ADD:'add',WAITING:'waiting',LOGS:'logs'},O=L.ADD;let N,C,D,P=[],z={},G={};const B={light_cavalry:{light_cavalry:1},heavy_cavalry:{heavy_cavalry:1},archer:{archer:1},sword:{sword:1},ram:{ram:1},snob:{snob:1},trebuchet:{trebuchet:1}},U=[u.SELECTED_VILLAGE,u.BARBARIAN_TARGET,u.ALLOWED_TYPES,u.TEXT_MATCH],V=function(e,t){M=t.data},q=function(){M=!1},W=function(e){
const t=new Date(e||f.gameTime()+o.getTimeOffset()),a=t.getMilliseconds(),n=f.zerofill(a-a%100,3),i=f.zerofill(t.getSeconds(),2),l=f.zerofill(t.getMinutes(),2);return f.zerofill(t.getHours(),2)+':'+l+':'+i+':'+n+' '+f.zerofill(t.getDate(),2)+'/'+f.zerofill(t.getMonth()+1,2)+'/'+t.getFullYear()},F=function(e,t){return o.isValidDateTime(e)?(e=o.getTimeFromString(e),W(e+=t)):''},j=function(){if(w.isValidDate=o.isValidDateTime(S.date),!S.origin||!S.target)return;const e=!!w.isValidDate&&o.getTimeFromString(S.date),t=w.selectedDateType.value===l.ARRIVE;o.each(p,(function(a){o.each(B,(function(n,i){const l=o.getTravelTime(S.origin,S.target,n,a,S.officers,!0);w.travelTimes[a][i].travelTime=g('readableMillisecondsFilter')(l),w.travelTimes[a][i].status=e?Y(t?e-l:e):'neutral'}))}))},Y=function(e){return e&&w.isValidDate?f.gameTime()+N<e?'valid':'invalid':'neutral'},H=function(){S.dateType=w.selectedDateType.value,E.set(m.LAST_DATE_TYPE,w.selectedDateType.value),j()},Q=function(){
S.catapultTarget=w.catapultTarget.value},K=function(){const e=w.selectedInsertPreset.value;if(!e)return!1;const t=i.getPresetList().getPresets()[e];w.selectedInsertPreset={name:g('i18n')('add_insert_preset',a.loc.ale,'command_queue'),value:null},S.units=angular.copy(t.units),S.officers=angular.copy(t.officers),t.catapult_target&&(S.catapultTarget=t.catapult_target,w.catapultTarget={name:g('i18n')(t.catapult_target,a.loc.ale,'building_names'),value:t.catapult_target},w.showCatapultSelect=!0)},Z=function(e){e.updateCountdown||(e.updateCountdown=function(){const t=f.serverTime()+a.GAME_TIME_OFFSET,n=e.sendTime-60*(new Date).getTimezoneOffset()*1e3;e.countdown=n-t}),f.timer.add(e.updateCountdown)},X=function(){w.waitingCommands=t.getWaitingCommands()},J=function(){w.sentCommands=t.getSentCommands()},$=function(){w.expiredCommands=t.getExpiredCommands()},ee=function(){let e=w.waitingCommands;U.forEach((function(a){w.activeFilters[a]&&(e=t.filterCommands(a,w.filtersData,e))})),
w.visibleWaitingCommands=e},te=function(e){0===S.units[e]&&(S.units[e]='')},ae=function(e){''===S.units[e]&&(S.units[e]=0)},ne=function(){w.showCatapultSelect=!!S.units.catapult},ie=function(e){w.selectedTab=e},oe=function(){const e=i.getSelectedVillage().data;S.origin={id:e.villageId,x:e.x,y:e.y,name:e.name,character_id:A.getId()}},le=function(){if(!M)return o.notif('error',g('i18n')('error_no_map_selected_village',a.loc.ale,'command_queue'));b.loadTownDataAsync(M.x,M.y,1,1,(function(e){S.target=e}))},se=function(){S.date=W()},re=function(){if(!S.date)return!1;S.date=F(S.date,100)},ce=function(){if(!S.date)return!1;S.date=F(S.date,-100)},de=function(){S.units=angular.copy(z),S.officers=angular.copy(G),S.catapultTarget="wall",w.catapultTarget={name:g('i18n')("wall",a.loc.ale,'building_names'),value:"wall"},w.showCatapultSelect=!1},ue=function(e){t.addCommand(S.origin,S.target,S.date,S.dateType,S.units,S.officers,e,S.catapultTarget).then((function(e){X(),ee(),Z(e),
o.notif('success',me(e.type,'added'))})).catch((function(t){switch(t){case _.INVALID_ORIGIN:o.notif('error',g('i18n')('error_origin',a.loc.ale,'command_queue'));break;case _.INVALID_TARGET:o.notif('error',g('i18n')('error_target',a.loc.ale,'command_queue'));break;case _.INVALID_DATE:o.notif('error',g('i18n')('error_invalid_date',a.loc.ale,'command_queue'));break;case _.NO_UNITS:o.notif('error',g('i18n')('error_no_units',a.loc.ale,'command_queue'));break;case _.RELOCATE_DISABLED:o.notif('error',g('i18n')('error_relocate_disabled',a.loc.ale,'command_queue'));break;case _.ALREADY_SENT:o.notif('error',g('i18n')('error_already_sent_'+e,a.loc.ale,'command_queue'))}}))},pe=function(){t.clearRegisters(),J(),$()},ge=function(){t.isRunning()?t.stop():t.start()},me=function(e,t,n){return n&&(e=n+'.'+e),g('i18n')(e,a.loc.ale,'command_queue')+' '+g('i18n')(t,a.loc.ale,'command_queue')},_e=function(e,t){w.activeFilters[e]=!w.activeFilters[e],
t&&(w.filtersData[u.ALLOWED_TYPES][e]=!w.filtersData[u.ALLOWED_TYPES][e]),ee()},he=function(){w.activeFilters[u.TEXT_MATCH]=w.filtersData[u.TEXT_MATCH].length>0,ee()},be={updatePresets:function(){w.presets=o.obj2selectOptions(R.getPresets())},autoCompleteSelected:function(e,t,a,n){if('commandqueue_village_search'!==t)return!1;S[n]={id:a.raw.id,x:a.raw.x,y:a.raw.y,name:a.raw.name},w.searchQuery[n]=''},removeCommand:function(e,t){f.timer.remove(t.updateCountdown)||o.notif('error','Error stopping command countdown. Command still removed.'),X(),ee(),a.$broadcast(s.TOOLTIP_HIDE,'twoverflow-tooltip'),o.notif('success',me(t.type,'removed'))},removeError:function(){o.notif('error',g('i18n')('error_remove_error',a.loc.ale,'command_queue'))},sendTimeLimit:function(e,t){J(),$(),X(),ee(),o.notif('error',me(t.type,'expired'))},sendNotOwnVillage:function(){J(),$(),X(),ee(),o.notif('error',g('i18n')('error_not_own_village',a.loc.ale,'command_queue'))},sendNoUnitsEnough:function(){J(),$(),X(),ee(),
o.notif('error',g('i18n')('error_no_units_enough',a.loc.ale,'command_queue'))},sendCommand:function(e,t){f.timer.remove(t.updateCountdown)||o.notif('error','Error stopping command countdown. Command still sent.'),J(),X(),ee(),o.notif('success',me(t.type,'sent'))},start:function(e,a){if(w.running=t.isRunning(),a.disableNotif)return!1;o.notif('success',me('title','activated'))},stop:function(){w.running=t.isRunning(),o.notif('success',me('title','deactivated'))},onAutoCompleteOrigin:function(e){S.origin={id:e.id,x:e.x,y:e.y,name:e.name}},onAutoCompleteTarget:function(e){S.target={id:e.id,x:e.x,y:e.y,name:e.name}},clearCountdownUpdates:function(){t.getWaitingCommands().forEach(e=>{f.timer.remove(e.updateCountdown)})}},fe=function(){const e=E.get(m.LAST_DATE_TYPE,l.OUT,!0);let _;w=a.$new(),w.selectedTab=O,w.inventory=i.getInventory(),w.presets=o.obj2selectOptions(R.getPresets()),w.travelTimes={},o.each(p,(function(e){w.travelTimes[e]={},o.each(B,(function(t,a){w.travelTimes[e][a]={
travelTime:0,status:'neutral'}}))})),w.unitOrder=y,w.officers=I.getOrderedOfficerNames(),w.searchQuery={origin:'',target:''},w.isValidDate=!1,w.dateTypes=v.toActionList(l,(function(e){return g('i18n')(e,a.loc.ale,'command_queue')})),w.selectedDateType={name:g('i18n')(e,a.loc.ale,'command_queue'),value:e},w.selectedInsertPreset={name:g('i18n')('add_insert_preset',a.loc.ale,'command_queue'),value:null},w.catapultTarget={name:g('i18n')("wall",a.loc.ale,'building_names'),value:"wall"},w.autoCompleteOrigin={type:['village'],placeholder:g('i18n')('add_village_search',a.loc.ale,'command_queue'),onEnter:be.onAutoCompleteOrigin,tooltip:g('i18n')('add_origin',a.loc.ale,'command_queue'),dropDown:!0},w.autoCompleteTarget={type:['village'],placeholder:g('i18n')('add_village_search',a.loc.ale,'command_queue'),onEnter:be.onAutoCompleteTarget,tooltip:g('i18n')('add_target',a.loc.ale,'command_queue'),dropDown:!0},w.showCatapultSelect=!!S.units.catapult,w.attackableBuildings=P,w.commandData=S,
w.activeFilters=C,w.filtersData=D,w.running=t.isRunning(),w.waitingCommands=t.getWaitingCommands(),w.visibleWaitingCommands=t.getWaitingCommands(),w.sentCommands=t.getSentCommands(),w.expiredCommands=t.getExpiredCommands(),w.EVENT_CODES=d,w.FILTER_TYPES=u,w.TAB_TYPES=L,w.COMMAND_TYPES=p,w.relocateEnabled=i.getWorldConfig().isRelocateUnitsEnabled(),w.onUnitInputFocus=te,w.onUnitInputBlur=ae,w.catapultTargetVisibility=ne,w.selectTab=ie,w.addSelected=oe,w.addMapSelected=le,w.addCurrentDate=se,w.incrementDate=re,w.reduceDate=ce,w.cleanUnitInputs=de,w.addCommand=ue,w.clearRegisters=pe,w.switchCommandQueue=ge,w.removeCommand=t.removeCommand,w.openVillageInfo=r.openVillageInfo,w.toggleFilter=_e,w.$watch('commandData.origin',j),w.$watch('commandData.target',j),w.$watch('commandData.date',j),w.$watch('commandData.officers',j),w.$watch('selectedDateType.value',H),w.$watch('selectedInsertPreset.value',K),w.$watch('catapultTarget.value',Q),w.$watch('filtersData[FILTER_TYPES.TEXT_MATCH]',he),
w.$watch('selectedTab',(function(){w.selectedTab===L.ADD?_=setInterval((function(){j()}),2500):clearInterval(_)})),w.waitingCommands.forEach(e=>{Z(e)});let h=new n('twoverflow_queue_window',(function(){clearInterval(_),be.clearCountdownUpdates()}));h.register(s.ARMY_PRESET_UPDATE,be.updatePresets,!0),h.register(s.ARMY_PRESET_DELETED,be.updatePresets,!0),h.register(s.SELECT_SELECTED,be.autoCompleteSelected,!0),h.register(s.COMMAND_QUEUE_REMOVE,be.removeCommand),h.register(s.COMMAND_QUEUE_REMOVE_ERROR,be.removeError),h.register(s.COMMAND_QUEUE_SEND_TIME_LIMIT,be.sendTimeLimit),h.register(s.COMMAND_QUEUE_SEND_NOT_OWN_VILLAGE,be.sendNotOwnVillage),h.register(s.COMMAND_QUEUE_SEND_NO_UNITS_ENOUGH,be.sendNoUnitsEnough),h.register(s.COMMAND_QUEUE_SEND,be.sendCommand),h.register(s.COMMAND_QUEUE_START,be.start),h.register(s.COMMAND_QUEUE_STOP,be.stop),c.getScreenWithInjectedScope('!twoverflow_queue_window',w)};return function(){A=i.getSelectedCharacter(),N=o.getTimeOffset()
;const t=I.getAttackableBuildings();for(let e in t)P.push({name:g('i18n')(e,a.loc.ale,'building_names'),value:e});y=angular.copy(k),y.splice(y.indexOf('catapult'),1),k.forEach((function(e){z[e]=0})),x.forEach((function(e){G[e]=!1})),S={origin:!1,target:!1,date:'',dateType:l.OUT,units:angular.copy(z),officers:angular.copy(G),catapultTarget:"wall",type:null},C={[u.SELECTED_VILLAGE]:!1,[u.BARBARIAN_TARGET]:!1,[u.ALLOWED_TYPES]:!0,[u.ATTACK]:!0,[u.SUPPORT]:!0,[u.RELOCATE]:!0,[u.TEXT_MATCH]:!1},D={[u.ALLOWED_TYPES]:{[u.ATTACK]:!0,[u.SUPPORT]:!0,[u.RELOCATE]:!0},[u.TEXT_MATCH]:''},T=e.addMenuButton('Generał',20),T.addEventListener('click',fe),h.register(s.COMMAND_QUEUE_START,(function(){T.classList.remove('btn-orange'),T.classList.add('btn-red')})),h.register(s.COMMAND_QUEUE_STOP,(function(){T.classList.remove('btn-red'),T.classList.add('btn-orange')})),a.$on(s.SHOW_CONTEXT_MENU,V),a.$on(s.DESTROY_CONTEXT_MENU,q),
e.addTemplate('twoverflow_queue_window',"<div id=\"two-command-queue\" class=\"win-content two-window\"><header class=\"win-head\"><h2>Generał</h2><ul class=\"list-btn\"><li><a href=\"#\" class=\"size-34x34 btn-red icon-26x26-close\" ng-click=\"closeWindow()\"></a></ul></header><div class=\"win-main\" scrollbar=\"\"><div class=\"tabs tabs-bg\"><div class=\"tabs-three-col\"><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.ADD)\" ng-class=\"{true:'tab-active', false:''}[selectedTab == TAB_TYPES.ADD]\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.ADD}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.ADD}\">{{ 'tab_add' | i18n:loc.ale:'command_queue' }}</a></div></div></div><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.WAITING)\" ng-class=\"{true:'tab-active', false:''}[selectedTab == TAB_TYPES.WAITING]\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.WAITING}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.WAITING}\">{{ 'tab_waiting' | i18n:loc.ale:'command_queue' }}</a></div></div></div><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.LOGS)\" ng-class=\"{true:'tab-active', false:''}[selectedTab == TAB_TYPES.LOGS]\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.LOGS}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.LOGS}\">{{ 'tab_logs' | i18n:loc.ale:'command_queue' }}</a></div></div></div></div></div><div class=\"box-paper footer\"><div class=\"scroll-wrap\"><div class=\"add\" ng-show=\"selectedTab === TAB_TYPES.ADD\"><form class=\"addForm\"><div><table class=\"tbl-border-light tbl-striped basic-config\"><col width=\"30%\"><col width=\"5%\"><col><col width=\"18%\"><tr><td><div auto-complete=\"autoCompleteOrigin\"></div><td class=\"text-center\"><span class=\"icon-26x26-rte-village\"></span><td ng-if=\"!commandData.origin\" class=\"command-village\">{{ 'add_no_village' | i18n:loc.ale:'command_queue' }}<td ng-if=\"commandData.origin\" class=\"command-village\">{{ commandData.origin.name }} ({{ commandData.origin.x }}|{{ commandData.origin.y }})<td class=\"actions\"><a class=\"btn btn-orange\" ng-click=\"addSelected()\" tooltip=\"\" tooltip-content=\"{{ 'add_selected' | i18n:loc.ale:'command_queue' }}\">{{ 'selected' | i18n:loc.ale:'common' }}</a><tr><td><div auto-complete=\"autoCompleteTarget\"></div><td class=\"text-center\"><span class=\"icon-26x26-rte-village\"></span><td ng-if=\"!commandData.target\" class=\"command-village\">{{ 'add_no_village' | i18n:loc.ale:'command_queue' }}<td ng-if=\"commandData.target\" class=\"command-village\">{{ commandData.target.name }} ({{ commandData.target.x }}|{{ commandData.target.y }})<td class=\"actions\"><a class=\"btn btn-orange\" ng-click=\"addMapSelected()\" tooltip=\"\" tooltip-content=\"{{ 'add_map_selected' | i18n:loc.ale:'command_queue' }}\">{{ 'selected' | i18n:loc.ale:'common' }}</a><tr><td><input ng-model=\"commandData.date\" class=\"textfield-border date\" pattern=\"\\s*\\d{1,2}:\\d{1,2}:\\d{1,2}(:\\d{1,3})? \\d{1,2}\\/\\d{1,2}\\/\\d{4}\\s*\" placeholder=\"{{ 'add_date' | i18n:loc.ale:'command_queue' }}\" tooltip=\"\" tooltip-content=\"hh:mm:ss:SSS dd/MM/yyyy\"><td class=\"text-center\"><span class=\"icon-26x26-time\"></span><td><div select=\"\" list=\"dateTypes\" selected=\"selectedDateType\" drop-down=\"true\"></div><td class=\"actions\"><a class=\"btn btn-orange\" ng-click=\"reduceDate()\" tooltip=\"\" tooltip-content=\"{{ 'add_current_date_minus' | i18n:loc.ale:'command_queue' }}\">-</a><a class=\"btn btn-orange\" ng-click=\"addCurrentDate()\" tooltip=\"\" tooltip-content=\"{{ 'add_current_date' | i18n:loc.ale:'command_queue' }}\">{{ 'now' | i18n:loc.ale:'common' }}</a><a class=\"btn btn-orange\" ng-click=\"incrementDate()\" tooltip=\"\" tooltip-content=\"{{ 'add_current_date_plus' | i18n:loc.ale:'command_queue' }}\">+</a></table><table ng-show=\"commandData.origin && commandData.target\" class=\"tbl-border-light tbl-units tbl-speed screen-village-info\"><thead><tr><th colspan=\"7\">{{ 'speed_title' | i18n:loc.ale:'screen_village_info' }}<tbody><tr><td class=\"odd\"><div class=\"unit-wrap\"><span class=\"icon icon-34x34-unit-knight\"></span> <span class=\"icon icon-34x34-unit-light_cavalry\"></span> <span class=\"icon icon-34x34-unit-mounted_archer\"></span></div><div><div class=\"box-time-sub-icon time-attack {{ travelTimes.attack.light_cavalry.status }}\"><div class=\"time-icon icon-20x20-attack-check\" tooltip=\"\" tooltip-content=\"{{ 'travel_time_attack' | i18n:loc.ale:'military_operations' }}\"></div>{{ travelTimes.attack.light_cavalry.travelTime }}</div><div class=\"box-time-sub-icon time-support {{ travelTimes.support.light_cavalry.status }}\"><div class=\"time-icon icon-20x20-support-check\" tooltip=\"\" tooltip-content=\"{{ 'travel_time_support' | i18n:loc.ale:'military_operations' }}\"></div>{{ travelTimes.support.light_cavalry.travelTime }}</div><div ng-if=\"relocateEnabled\" class=\"box-time-sub-icon time-relocate {{ travelTimes.relocate.light_cavalry.status }}\"><div class=\"time-icon icon-20x20-relocate\" tooltip=\"\" tooltip-content=\"{{ 'travel_time_relocate' | i18n:loc.ale:'military_operations' }}\"></div>{{ travelTimes.relocate.light_cavalry.travelTime }}</div></div><td><div class=\"unit-wrap\"><span class=\"icon icon-single icon-34x34-unit-heavy_cavalry\"></span></div><div><div class=\"box-time-sub time-attack {{ travelTimes.attack.heavy_cavalry.status }}\">{{ travelTimes.attack.heavy_cavalry.travelTime }}</div><div class=\"box-time-sub time-support {{ travelTimes.support.heavy_cavalry.status }}\">{{ travelTimes.support.heavy_cavalry.travelTime }}</div><div ng-if=\"relocateEnabled\" class=\"box-time-sub time-relocate {{ travelTimes.relocate.heavy_cavalry.status }}\">{{ travelTimes.relocate.heavy_cavalry.travelTime }}</div></div><td class=\"odd\"><div class=\"unit-wrap\"><span class=\"icon icon-34x34-unit-archer\"></span> <span class=\"icon icon-34x34-unit-spear\"></span> <span class=\"icon icon-34x34-unit-axe\"></span> <span class=\"icon icon-34x34-unit-doppelsoldner\"></span></div><div><div class=\"box-time-sub time-attack {{ travelTimes.attack.archer.status }}\">{{ travelTimes.attack.archer.travelTime }}</div><div class=\"box-time-sub time-support {{ travelTimes.support.archer.status }}\">{{ travelTimes.support.archer.travelTime }}</div><div ng-if=\"relocateEnabled\" class=\"box-time-sub time-relocate {{ travelTimes.relocate.archer.status }}\">{{ travelTimes.relocate.archer.travelTime }}</div></div><td><div class=\"unit-wrap\"><span class=\"icon icon-single icon-34x34-unit-sword\"></span></div><div><div class=\"box-time-sub time-attack {{ travelTimes.attack.sword.status }}\">{{ travelTimes.attack.sword.travelTime }}</div><div class=\"box-time-sub time-support {{ travelTimes.support.sword.status }}\">{{ travelTimes.support.sword.travelTime }}</div><div ng-if=\"relocateEnabled\" class=\"box-time-sub time-relocate {{ travelTimes.relocate.sword.status }}\">{{ travelTimes.relocate.sword.travelTime }}</div></div><td class=\"odd\"><div class=\"unit-wrap\"><span class=\"icon icon-34x34-unit-catapult\"></span> <span class=\"icon icon-34x34-unit-ram\"></span></div><div><div class=\"box-time-sub time-attack {{ travelTimes.attack.ram.status }}\">{{ travelTimes.attack.ram.travelTime }}</div><div class=\"box-time-sub time-support {{ travelTimes.support.ram.status }}\">{{ travelTimes.support.ram.travelTime }}</div><div ng-if=\"relocateEnabled\" class=\"box-time-sub time-relocate {{ travelTimes.relocate.ram.status }}\">{{ travelTimes.relocate.ram.travelTime }}</div></div><td><div class=\"unit-wrap\"><span class=\"icon icon-single icon-34x34-unit-snob\"></span></div><div><div class=\"box-time-sub time-attack {{ travelTimes.attack.snob.status }}\">{{ travelTimes.attack.snob.travelTime }}</div><div class=\"box-time-sub time-support {{ travelTimes.support.snob.status }}\">{{ travelTimes.support.snob.travelTime }}</div><div ng-if=\"relocateEnabled\" class=\"box-time-sub time-relocate {{ travelTimes.relocate.snob.status }}\">-</div></div><td class=\"odd\"><div class=\"unit-wrap\"><span class=\"icon icon-single icon-34x34-unit-trebuchet\"></span></div><div><div class=\"box-time-sub time-attack {{ travelTimes.attack.trebuchet.status }}\">{{ travelTimes.attack.trebuchet.travelTime }}</div><div class=\"box-time-sub time-support {{ travelTimes.support.trebuchet.status }}\">{{ travelTimes.support.trebuchet.travelTime }}</div><div ng-if=\"relocateEnabled\" class=\"box-time-sub time-relocate {{ travelTimes.relocate.trebuchet.status }}\">{{ travelTimes.relocate.trebuchet.travelTime }}</div></div></table></div><h5 class=\"twx-section\">{{ 'units' | i18n:loc.ale:'common' }}</h5><table class=\"tbl-border-light tbl-striped\"><col width=\"25%\"><col width=\"25%\"><col width=\"25%\"><col width=\"25%\"><tbody class=\"add-units\"><tr><td colspan=\"4\" class=\"actions\"><ul class=\"list-btn list-center\"><li><div select=\"\" list=\"presets\" selected=\"selectedInsertPreset\" drop-down=\"true\"></div><li><a class=\"clear-units btn btn-orange\" ng-click=\"cleanUnitInputs()\">{{ 'add_clear' | i18n:loc.ale:'command_queue' }}</a></ul><tr ng-repeat=\"i in [] | range:(unitOrder.length / 4);\"><td><span class=\"icon-bg-black\" ng-class=\"'icon-34x34-unit-' + unitOrder[i * 4]\" tooltip=\"\" tooltip-content=\"{{ unitOrder[i * 4] | i18n:loc.ale:'unit_names' }}\"></span> <input remove-zero=\"\" ng-model=\"commandData.units[unitOrder[i * 4]]\" maxlength=\"5\" placeholder=\"{{ commandData.units[unitOrder[i * 4]] }}\" ng-focus=\"onUnitInputFocus(unitOrder[i * 4])\" ng-blur=\"onUnitInputBlur(unitOrder[i * 4])\"><td><span class=\"icon-bg-black\" ng-class=\"'icon-34x34-unit-' + unitOrder[i * 4 + 1]\" tooltip=\"\" tooltip-content=\"{{ unitOrder[i * 4 + 1] | i18n:loc.ale:'unit_names' }}\"></span> <input remove-zero=\"\" ng-model=\"commandData.units[unitOrder[i * 4 + 1]]\" maxlength=\"5\" placeholder=\"{{ commandData.units[unitOrder[i * 4 + 1]] }}\" ng-focus=\"onUnitInputFocus(unitOrder[i * 4 + 1])\" ng-blur=\"onUnitInputBlur(unitOrder[i * 4 + 1])\"><td><span class=\"icon-bg-black\" ng-class=\"'icon-34x34-unit-' + unitOrder[i * 4 + 2]\" tooltip=\"\" tooltip-content=\"{{ unitOrder[i * 4 + 2] | i18n:loc.ale:'unit_names' }}\"></span> <input remove-zero=\"\" ng-model=\"commandData.units[unitOrder[i * 4 + 2]]\" maxlength=\"5\" placeholder=\"{{ commandData.units[unitOrder[i * 4 + 2]] }}\" ng-focus=\"onUnitInputFocus(unitOrder[i * 4 + 2])\" ng-blur=\"onUnitInputBlur(unitOrder[i * 4 + 2])\"><td><span class=\"icon-bg-black\" ng-class=\"'icon-34x34-unit-' + unitOrder[i * 4 + 3]\" tooltip=\"\" tooltip-content=\"{{ unitOrder[i * 4 + 3] | i18n:loc.ale:'unit_names' }}\"></span> <input remove-zero=\"\" ng-model=\"commandData.units[unitOrder[i * 4 + 3]]\" maxlength=\"5\" placeholder=\"{{ commandData.units[unitOrder[i * 4 + 3]] }}\" ng-focus=\"onUnitInputFocus(unitOrder[i * 4 + 3])\" ng-blur=\"onUnitInputBlur(unitOrder[i * 4 + 3])\"><tr><td><span class=\"icon-bg-black icon-34x34-unit-catapult\" tooltip=\"\" tooltip-content=\"{{ 'catapult' | i18n:loc.ale:'unit_names' }}\"></span> <input remove-zero=\"\" ng-model=\"commandData.units.catapult\" maxlength=\"5\" placeholder=\"{{ commandData.units.catapult }}\" ng-keyup=\"catapultTargetVisibility()\" ng-focus=\"onUnitInputFocus('catapult')\" ng-blur=\"onUnitInputBlur('catapult')\"><td colspan=\"3\"><div ng-visible=\"showCatapultSelect\"><div class=\"unit-border box-slider\"><div class=\"height-wrapper\"><div select=\"\" list=\"attackableBuildings\" selected=\"catapultTarget\"></div></div></div></div></table><h5 class=\"twx-section\">{{ 'officers' | i18n:loc.ale:'common' }}</h5><table class=\"add-officers margin-top tbl-border-light tbl-officers\"><tr><td class=\"cell-officers\" ng-repeat=\"officer in officers\"><table class=\"tbl-border-dark tbl-officer\"><tr><td class=\"cell-space\"><span class=\"icon-44x44-premium_officer_{{ officer }}\"></span><td class=\"cell-officer-switch\" rowspan=\"2\"><div switch-slider=\"\" enabled=\"true\" value=\"commandData.officers[officer]\" vertical=\"true\" size=\"'34x66'\"></div><tr><td tooltip=\"\" tooltip-content=\"{{ 'available_officers' | i18n:loc.ale:'modal_preset_edit' }}\"><div class=\"amount\">{{ inventory.getItemAmountByType('premium_officer_' + officer) | number }}</div></table></table></form></div><div class=\"waiting rich-text\" ng-show=\"selectedTab === TAB_TYPES.WAITING\"><div class=\"filters\"><table class=\"tbl-border-light\"><tr><td><div ng-class=\"{'active': activeFilters[FILTER_TYPES.SELECTED_VILLAGE]}\" ng-click=\"toggleFilter(FILTER_TYPES.SELECTED_VILLAGE)\" class=\"box-border-dark icon selectedVillage\" tooltip=\"\" tooltip-content=\"{{ 'filters_selected_village' | i18n:loc.ale:'command_queue' }}\"><span class=\"icon-34x34-village-info icon-bg-black\"></span></div><div ng-class=\"{'active': activeFilters[FILTER_TYPES.BARBARIAN_TARGET]}\" ng-click=\"toggleFilter(FILTER_TYPES.BARBARIAN_TARGET)\" class=\"box-border-dark icon barbarianTarget\" tooltip=\"\" tooltip-content=\"{{ 'filters_barbarian_target' | i18n:loc.ale:'command_queue' }}\"><span class=\"icon-34x34-barbarian-village icon-bg-black\"></span></div><div ng-class=\"{'active': activeFilters[FILTER_TYPES.ATTACK]}\" ng-click=\"toggleFilter(FILTER_TYPES.ATTACK, true)\" class=\"box-border-dark icon allowedTypes\" tooltip=\"\" tooltip-content=\"{{ 'filters_attack' | i18n:loc.ale:'command_queue' }}\"><span class=\"icon-34x34-attack icon-bg-black\"></span></div><div ng-class=\"{'active': activeFilters[FILTER_TYPES.SUPPORT]}\" ng-click=\"toggleFilter(FILTER_TYPES.SUPPORT, true)\" class=\"box-border-dark icon allowedTypes\" tooltip=\"\" tooltip-content=\"{{ 'filters_support' | i18n:loc.ale:'command_queue' }}\"><span class=\"icon-34x34-support icon-bg-black\"></span></div><div ng-if=\"relocateEnabled\" ng-class=\"{'active': activeFilters[FILTER_TYPES.RELOCATE]}\" ng-click=\"toggleFilter(FILTER_TYPES.RELOCATE, true)\" class=\"box-border-dark icon allowedTypes\" tooltip=\"\" tooltip-content=\"{{ 'filters_relocate' | i18n:loc.ale:'command_queue' }}\"><span class=\"icon-34x34-relocate icon-bg-black\"></span></div><div class=\"text\"><input ng-model=\"filtersData[FILTER_TYPES.TEXT_MATCH]\" class=\"box-border-dark\" placeholder=\"{{ 'filters_text_match' | i18n:loc.ale:'command_queue' }}\"></div></table></div><div class=\"queue\"><h5 class=\"twx-section\">{{ 'queue_waiting' | i18n:loc.ale:'command_queue' }}</h5><p class=\"text-center\" ng-show=\"!visibleWaitingCommands.length\">{{ 'queue_none_added' | i18n:loc.ale:'command_queue' }}<table class=\"tbl-border-light\" ng-repeat=\"command in visibleWaitingCommands\"><col width=\"100px\"><tr><th colspan=\"2\"><span ng-class=\"{true: 'icon-bg-red', false:'icon-bg-blue'}[command.type === COMMAND_TYPES.ATTACK]\" class=\"icon-26x26-{{ command.type }}\" tooltip=\"\" tooltip-content=\"{{ command.type | i18n:loc.ale:'common' }}\"></span> <span class=\"size-26x26 icon-bg-black icon-26x26-time-duration\" tooltip=\"\" tooltip-content=\"{{ 'command_time_left' | i18n:loc.ale:'command_queue' }}\"></span> <span class=\"time-left\">{{ command.countdown | readableMillisecondsFilter }}</span> <span class=\"size-26x26 icon-bg-black icon-20x20-units-outgoing\" tooltip=\"\" tooltip-content=\"{{ 'command_out' | i18n:loc.ale:'command_queue' }}\"></span> <span class=\"sent-time\">{{ command.sendTime | readableDateFilter:loc.ale }}</span> <span class=\"size-26x26 icon-bg-black icon-20x20-time-arrival\" tooltip=\"\" tooltip-content=\"{{ 'command_arrive' | i18n:loc.ale:'command_queue' }}\"></span> <span class=\"arrive-time\">{{ command.arriveTime | readableDateFilter:loc.ale }}</span> <a href=\"#\" class=\"remove-command size-20x20 btn-red icon-20x20-close\" ng-click=\"removeCommand(command, EVENT_CODES.COMMAND_REMOVED)\" tooltip=\"\" tooltip-content=\"{{ 'queue_remove' | i18n:loc.ale:'command_queue' }}\"></a><tr><td>{{ 'villages' | i18n:loc.ale:'common' }}<td><a class=\"origin\"><span class=\"village-link img-link icon-20x20-village btn btn-orange padded\" ng-click=\"openVillageInfo(command.origin.id)\">{{ command.origin.name }} ({{ command.origin.x }}|{{ command.origin.y }})</span></a> <span class=\"size-20x20 icon-26x26-{{ command.type }}\"></span> <a class=\"target\"><span class=\"village-link img-link icon-20x20-village btn btn-orange padded\" ng-click=\"openVillageInfo(command.target.id)\">{{ command.target.name }} ({{ command.target.x }}|{{ command.target.y }})</span></a><tr><td>{{ 'units' | i18n:loc.ale:'common' }}<td class=\"units\"><div class=\"unit\" ng-repeat=\"(unit, amount) in command.units\"><span class=\"icon-34x34-unit-{{ unit }} icon\"></span> <span class=\"amount\">{{ amount }}</span> <span ng-if=\"unit === 'catapult' && command.type === COMMAND_TYPES.ATTACK\">({{ command.catapultTarget | i18n:loc.ale:'building_names' }})</span></div><div class=\"officer\" ng-repeat=\"(officer, enabled) in command.officers\"><span class=\"icon-34x34-premium_officer_{{ officer }}\"></span></div></table></div></div><div class=\"logs rich-text\" ng-show=\"selectedTab === TAB_TYPES.LOGS\"><h5 class=\"twx-section\">{{ 'queue_sent' | i18n:loc.ale:'command_queue' }}</h5><p class=\"text-center\" ng-show=\"!sentCommands.length\">{{ 'queue_none_sent' | i18n:loc.ale:'command_queue' }}<table class=\"tbl-border-light\" ng-repeat=\"command in sentCommands track by $index\"><col width=\"100px\"><tr><th colspan=\"2\"><span ng-class=\"{true: 'icon-bg-red', false:'icon-bg-blue'}[command.type === COMMAND_TYPES.ATTACK]\" class=\"icon-26x26-{{ command.type }}\" tooltip=\"\" tooltip-content=\"{{ command.type | i18n:loc.ale:'common' }}\"></span> <span class=\"size-26x26 icon-bg-black icon-20x20-units-outgoing\" tooltip=\"\" tooltip-content=\"{{ 'command_out' | i18n:loc.ale:'command_queue' }}\"></span> <span class=\"sent-time\">{{ command.sendTime | readableDateFilter:loc.ale }}</span> <span class=\"size-26x26 icon-bg-black icon-20x20-time-arrival\" tooltip=\"\" tooltip-content=\"{{ 'command_arrive' | i18n:loc.ale:'command_queue' }}\"></span> <span class=\"arrive-time\">{{ command.arriveTime | readableDateFilter:loc.ale }}</span><tr><td>{{ 'villages' | i18n:loc.ale:'common' }}<td><a class=\"origin\"><span class=\"village-link img-link icon-20x20-village btn btn-orange padded\" ng-click=\"openVillageInfo(command.origin.id)\">{{ command.origin.name }} ({{ command.origin.x }}|{{ command.origin.y }})</span></a> <span class=\"size-20x20 icon-26x26-{{ command.type }}\"></span> <a class=\"target\"><span class=\"village-link img-link icon-20x20-village btn btn-orange padded\" ng-click=\"openVillageInfo(command.target.id)\">{{ command.target.name }} ({{ command.target.x }}|{{ command.target.y }})</span></a><tr><td>{{ 'units' | i18n:loc.ale:'common' }}<td class=\"units\"><div class=\"unit\" ng-repeat=\"(unit, amount) in command.units\"><span class=\"icon-34x34-unit-{{ unit }} icon\"></span> <span class=\"amount\">{{ amount }}</span> <span ng-if=\"unit === 'catapult' && command.type === COMMAND_TYPES.ATTACK\">({{ command.catapultTarget | i18n:loc.ale:'common' }})</span></div><div class=\"officer\" ng-repeat=\"(officer, enabled) in command.officers\"><span class=\"icon-34x34-premium_officer_{{ officer }}\"></span></div></table><h5 class=\"twx-section\">{{ 'queue_expired' | i18n:loc.ale:'command_queue' }}</h5><p class=\"text-center\" ng-show=\"!expiredCommands.length\">{{ 'queue_none_expired' | i18n:loc.ale:'command_queue' }}<table class=\"tbl-border-light\" ng-repeat=\"command in expiredCommands track by $index\"><col width=\"100px\"><tr><th colspan=\"2\"><span ng-class=\"{true: 'icon-bg-red', false:'icon-bg-blue'}[command.type === COMMAND_TYPES.ATTACK]\" class=\"icon-26x26-{{ command.type }}\" tooltip=\"\" tooltip-content=\"{{ command.type | i18n:loc.ale:'common' }}\"></span> <span class=\"size-26x26 icon-bg-black icon-20x20-units-outgoing\" tooltip=\"\" tooltip-content=\"{{ 'command_out' | i18n:loc.ale:'command_queue' }}\"></span> <span class=\"sent-time\">{{ command.sendTime | readableDateFilter:loc.ale }}</span> <span class=\"size-26x26 icon-bg-black icon-20x20-time-arrival\" tooltip=\"\" tooltip-content=\"{{ 'command_arrive' | i18n:loc.ale:'command_queue' }}\"></span> <span class=\"arrive-time\">{{ command.arriveTime | readableDateFilter:loc.ale }}</span><tr><td>{{ 'villages' | i18n:loc.ale:'common' }}<td><a class=\"origin\"><span class=\"village-link img-link icon-20x20-village btn btn-orange padded\" ng-click=\"openVillageInfo(command.origin.id)\">{{ command.origin.name }} ({{ command.origin.x }}|{{ command.origin.y }})</span></a> <span class=\"size-20x20 icon-26x26-{{ command.type }}\"></span> <a class=\"target\"><span class=\"village-link img-link icon-20x20-village btn btn-orange padded\" ng-click=\"openVillageInfo(command.target.id)\">{{ command.target.name }} ({{ command.target.x }}|{{ command.target.y }})</span></a><tr><td>{{ 'units' | i18n:loc.ale:'common' }}<td class=\"units\"><div class=\"unit\" ng-repeat=\"(unit, amount) in command.units\"><span class=\"icon-34x34-unit-{{ unit }} icon\"></span> <span class=\"amount\">{{ amount }}</span> <span ng-if=\"unit === 'catapult' && command.type === COMMAND_TYPES.ATTACK\">({{ command.catapultTarget | i18n:loc.ale:'common' }})</span></div><div class=\"officer\" ng-repeat=\"(officer, enabled) in command.officers\"><span class=\"icon-34x34-premium_officer_{{ officer }}\"></span></div></table></div></div></div></div><footer class=\"win-foot\"><ul class=\"list-btn list-center\"><li ng-show=\"selectedTab === TAB_TYPES.LOGS\"><a class=\"btn-orange btn-border\" ng-click=\"clearRegisters()\">{{ 'general_clear' | i18n:loc.ale:'command_queue' }}</a><li ng-show=\"selectedTab === TAB_TYPES.ADD\"><a class=\"btn-orange btn-border add\" ng-click=\"addCommand(COMMAND_TYPES.ATTACK)\"><span class=\"icon-26x26-attack-small\"></span> {{ COMMAND_TYPES.ATTACK | i18n:loc.ale:'common' }}</a><li ng-show=\"selectedTab === TAB_TYPES.ADD\"><a class=\"btn-orange btn-border add\" ng-click=\"addCommand(COMMAND_TYPES.SUPPORT)\"><span class=\"icon-26x26-support\"></span> {{ COMMAND_TYPES.SUPPORT | i18n:loc.ale:'common' }}</a><li ng-show=\"relocateEnabled && selectedTab === TAB_TYPES.ADD\"><a class=\"btn-orange btn-border add\" ng-click=\"addCommand(COMMAND_TYPES.RELOCATE)\"><span class=\"icon-26x26-relocate\"></span> {{ COMMAND_TYPES.RELOCATE | i18n:loc.ale:'common' }}</a><li><a href=\"#\" ng-class=\"{false:'btn-green', true:'btn-red'}[running]\" class=\"btn-border\" ng-click=\"switchCommandQueue()\"><span ng-show=\"running\">{{ 'deactivate' | i18n:loc.ale:'common' }}</span> <span ng-show=\"!running\">{{ 'activate' | i18n:loc.ale:'common' }}</span></a></ul></footer></div>"),
e.addStyle('#two-command-queue input.unit{width:80px;height:34px}#two-command-queue form .padded{padding:2px 8px}#two-command-queue .basic-config input{width:200px;height:28px;font-weight:bold;padding:1px 8px 0 8px;outline:none;border:none;color:#000;resize:none}#two-command-queue span.select-wrapper{height:27px}#two-command-queue span.select-wrapper a.select-button{height:23px}#two-command-queue span.select-wrapper a.select-handler{-webkit-box-shadow:none;box-shadow:none;height:23px;line-height:23px;margin-bottom:-1px}#two-command-queue .custom-select{width:240px}#two-command-queue .originVillage,#two-command-queue .targetVillage{padding:0 7px}#two-command-queue a.btn{height:28px;line-height:28px;padding:0 10px}#two-command-queue .actions{text-align:center;user-select:none}#two-command-queue .command-village{padding-left:5px;padding-right:5px}#two-command-queue .add-units td{padding:2px 0;text-align:center}#two-command-queue .add-units .unit-icon{top:-1px}#two-command-queue .add-units span[class*="icon-34x34"]{margin-top:-2px !important}#two-command-queue .add-units input{height:34px;color:#fff3d0;border:none;outline:none;font-size:14px;background:url(data:image/png;base64,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) top left #b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px}#two-command-queue .add-officers .cell-officers{padding:7px 11px 5px 11px}#two-command-queue .add-officers .amount{color:#fff;text-align:center}#two-command-queue .command{margin-bottom:10px}#two-command-queue .command .time-left{width:93px;display:inline-block;padding:0 0 0 3px}#two-command-queue .command .sent-time,#two-command-queue .command .arrive-time{width:160px;display:inline-block;padding:0 0 0 5px}#two-command-queue .command td{padding:3px 6px}#two-command-queue .officers td{width:111px;text-align:center}#two-command-queue .officers label{margin-left:5px}#two-command-queue .officers span{margin-left:2px}#two-command-queue .units div.unit{float:left}#two-command-queue .units div.unit span.icon{transform:scale(.7);width:25px;height:25px}#two-command-queue .units div.unit span.amount{vertical-align:-2px;margin:0 5px 0 2px}#two-command-queue .units div.officer{float:left;margin:0 2px}#two-command-queue .units div.officer span{transform:scale(.7);width:25px;height:25px}#two-command-queue .remove-command{float:right;margin-top:3px}#two-command-queue .tbl-units td{text-align:center}#two-command-queue .tbl-speed{margin-top:10px}#two-command-queue .tbl-speed th{text-align:center}#two-command-queue .tbl-speed td{font-size:12px}#two-command-queue .tbl-speed .box-time-sub-icon{position:relative}#two-command-queue .tbl-speed .box-time-sub-icon .time-icon{position:absolute;top:-3px;left:27px;transform:scale(.7)}#two-command-queue .tbl-speed .box-time-sub-icon.time-relocate .time-icon{top:-6px;left:26px}#two-command-queue .tbl-speed .valid{color:#16600a}#two-command-queue .tbl-speed .invalid{color:#a1251f}#two-command-queue .tbl-speed .neutral{color:#000}#two-command-queue .dateType{width:200px}#two-command-queue .dateType .custom-select-handler{text-align:left}#two-command-queue .filters .icon{width:38px;float:left;margin:0 6px}#two-command-queue .filters .icon.active:before{box-shadow:0 0 0 1px #000,-1px -1px 0 2px #ac9c44,0 0 0 3px #ac9c44,0 0 0 4px #000;border-radius:1px;content:"";position:absolute;width:38px;height:38px;left:-1px;top:-1px}#two-command-queue .filters .text{margin-left:262px}#two-command-queue .filters .text input{height:36px;margin-top:1px;width:100%;text-align:left;padding:0 5px}#two-command-queue .filters .text input::placeholder{color:white}#two-command-queue .filters .text input:focus::placeholder{color:transparent}#two-command-queue .filters td{padding:6px}#two-command-queue .icon-34x34-barbarian-village:before{filter:grayscale(100%);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-220px -906px}#two-command-queue .icon-20x20-time-arrival:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-529px -454px}#two-command-queue .icon-20x20-attack:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-546px -1086px;width:26px;height:26px}#two-command-queue .icon-20x20-support:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-462px -360px;width:26px;height:26px}#two-command-queue .icon-20x20-relocate:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-1090px -130px;width:26px;height:26px}#two-command-queue .icon-26x26-attack:before{background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-546px -1086px}')
}})),define('two/commandQueue/storageKeys',[],(function(){return{QUEUE_COMMANDS:'command_queue_commands',QUEUE_SENT:'command_queue_sent',QUEUE_EXPIRED:'command_queue_expired',LAST_DATE_TYPE:'command_queue_last_date_type'}})),define('two/commandQueue/types/commands',[],(function(){return{ATTACK:'attack',SUPPORT:'support',RELOCATE:'relocate'}})),define('two/commandQueue/types/dates',[],(function(){return{ARRIVE:'date_type_arrive',OUT:'date_type_out'}})),define('two/commandQueue/types/events',[],(function(){return{NOT_OWN_VILLAGE:'not_own_village',NOT_ENOUGH_UNITS:'not_enough_units',TIME_LIMIT:'time_limit',COMMAND_REMOVED:'command_removed',COMMAND_SENT:'command_sent'}})),define('two/commandQueue/types/filters',[],(function(){return{SELECTED_VILLAGE:'selected_village',BARBARIAN_TARGET:'barbarian_target',ALLOWED_TYPES:'allowed_types',ATTACK:'attack',SUPPORT:'support',RELOCATE:'relocate',TEXT_MATCH:'text_match'}})),define('two/commandQueue/errorCodes',[],(function(){return{
INVALID_ORIGIN:'invalid_origin',INVALID_TARGET:'invalid_target',INVALID_DATE:'invalid_date',NO_UNITS:'no_units',ALREADY_SENT:'already_sent',RELOCATE_DISABLED:'relocate_disabled',INVALID_DATE_TYPE:'invalid_date_type',INVALID_OFFICER:'invalid_officer',INVALID_COMMAND_TYPE:'invalid_command_type',INVALID_CATAPULT_TARGET:'invalid_catapult_target',INVALID_UNIT_TYPE:'invalid_unit_type',INVALID_OFFICER_TYPE:'invalid_officer_type'}})),require(['two/ready','two/commandQueue','two/commandQueue/ui','two/commandQueue/events'],(function(e,t,a){if(t.initialized)return!1;e((function(){t.init(),a(),t.getWaitingCommands().length>0&&t.start(!0)}),['map','world_config'])})),define('two/faithChecker',['two/utils','queues/EventQueue','Lockr','conf/buildingTypes','conf/locationTypes'],(function(e,n,r,c,d){let u,p,m,_,h,b=!1,f=!1,v=0;u=function(e){let t,a,n=0;for(t=0;t<e.length;t++)a=e[t].chapel||e[t].church,a&&a>n&&(n=a);return n},p=function(e,t){let a=i.getWorldConfig().getChurchBonus(),n=0
;return e<0||!t&&e>a.length-1?0:(n=t?i.getWorldConfig().getChapelBonus():a[e],Math.floor(100*n))},m=function(e,t){o.emit(l.VILLAGES_IN_PROVINCE,{village_id:e},t)};let E={init:function(){b=!0}};return E.start=function(){n.trigger(s.FAITH_CHECKER_STARTED),f=!0,i.getSelectedCharacter().getVillageList().forEach((function(n){let i=n.data.villageId,s=n.data.buildings.chapel.level,r=n.buildingQueue.data.queue,c=n.getResources().getComputed(),b=c.food,f=c.wood,E=c.clay,w=c.iron,T=b.currentStock,A=f.currentStock,y=E.currentStock,S=w.currentStock,I=[0,5e3],k=[160,16e3],x=[200,2e4],R=[50,5e3];1==s&&(v=1),m(i,(function(n){_=u(n.villages),h=p(_,1===s),console.log(h),50!=h||r!==t&&0!=r.length?50==h&&r?r.forEach((function(t){let n=t.building;'chapel'==n&&'church'==n||0!=v?'chapel'==n&&'church'==n||1!=v||(A>=k[1]&&y>=x[1]&&S>=R[1]&&T>=I[1]?(o.emit(l.VILLAGE_UPGRADE_BUILDING,{building:'church',village_id:i,location:d.MASS_SCREEN,premium:!1}),
e.notif('success',g('i18n')('church',a.loc.ale,'faith_checker'))):e.notif('error',g('i18n')('resources',a.loc.ale,'faith_checker'))):A>=k[0]&&y>=x[0]&&S>=R[0]&&T>=I[0]?(o.emit(l.VILLAGE_UPGRADE_BUILDING,{building:'chapel',village_id:i,location:d.MASS_SCREEN,premium:!1}),e.notif('success',g('i18n')('chapel',a.loc.ale,'faith_checker'))):e.notif('error',g('i18n')('resources',a.loc.ale,'faith_checker'))})):e.notif('success',g('i18n')('full',a.loc.ale,'faith_checker')):1==v?A>=k[1]&&y>=x[1]&&S>=R[1]&&T>=I[1]?(o.emit(l.VILLAGE_UPGRADE_BUILDING,{building:'church',village_id:i,location:d.MASS_SCREEN,premium:!1}),e.notif('success',g('i18n')('church',a.loc.ale,'faith_checker'))):e.notif('error',g('i18n')('resources',a.loc.ale,'faith_checker')):A>=k[0]&&y>=x[0]&&S>=R[0]&&T>=I[0]?(o.emit(l.VILLAGE_UPGRADE_BUILDING,{building:'chapel',village_id:i,location:d.MASS_SCREEN,premium:!1}),
e.notif('success',g('i18n')('chapel',a.loc.ale,'faith_checker'))):e.notif('error',g('i18n')('resources',a.loc.ale,'faith_checker'))}))}))},E.stop=function(){n.trigger(s.FAITH_CHECKER_STOPPED),f=!1},E.isRunning=function(){return f},E.isInitialized=function(){return b},E})),define('two/faithChecker/events',[],(function(){angular.extend(s,{FAITH_CHECKER_STARTED:'faith_checker_started',FAITH_CHECKER_STOPPED:'faith_checker_stopped'})})),define('two/faithChecker/ui',['two/ui','two/faithChecker','two/utils','queues/EventQueue'],(function(e,t,n,i){let o;return function(){return o=e.addMenuButton('Kapelan',80,g('i18n')('description',a.loc.ale,'faith_checker')),o.addEventListener('click',(function(){t.isRunning()?(t.stop(),n.notif('success',g('i18n')('deactivated',a.loc.ale,'faith_checker'))):(t.start(),n.notif('success',g('i18n')('activated',a.loc.ale,'faith_checker')))})),i.register(s.FAITH_CHECKER_STARTED,(function(){o.classList.remove('btn-orange'),o.classList.add('btn-red')})),
i.register(s.FAITH_CHECKER_STOPPED,(function(){o.classList.remove('btn-red'),o.classList.add('btn-orange')})),t.isRunning()&&i.trigger(s.FAITH_CHECKER_STARTED),opener}})),require(['two/ready','two/faithChecker','two/faithChecker/ui','Lockr','queues/EventQueue','two/faithChecker/events'],(function(e,t,a,n,i){const o='faith_checker_active';if(t.isInitialized())return!1;e((function(){t.init(),a(),e((function(){n.get(o,!1,!0)&&t.start(),i.register(s.FAITH_CHECKER_STARTED,(function(){n.set(o,!0)})),i.register(s.FAITH_CHECKER_STOPPED,(function(){n.set(o,!1)}))}),['initial_village'])}))})),
define('two/farmOverflow',['two/Settings','two/farmOverflow/types/errors','two/farmOverflow/types/status','two/farmOverflow/settings','two/farmOverflow/settings/map','two/farmOverflow/settings/updates','two/farmOverflow/types/logs','two/mapData','two/utils','two/ready','helper/math','helper/time','queues/EventQueue','conf/commandTypes','conf/village','conf/resourceTypes','struct/MapData','Lockr'],(function(e,t,n,r,c,p,g,m,_,f,v,E,w,T,A,y,S,I){let k,x,R,M,L,O=!1,N=!1,C=[],D=[],P=[],z=[],G=[],B=[],U=!1,V=!1,q=!1,W=0,F=null,j=null,Y=null,H={},Q=E.gameTime(),K=null,Z=null;const X='farm_overflow_logs',J='farm_overflow_settings',$='farm_overflow_exception_logs',ee=[y.WOOD,y.CLAY,y.IRON],te={distance:function(e){return!e.distance.between(x[r.MIN_DISTANCE],x[r.MAX_DISTANCE])},ownPlayer:function(e){return e.character_id===M.getId()},included:function(e){return e.character_id&&!P.includes(e.id)},ignored:function(e){return z.includes(e.id)},points:function(e){
return!e.between(x[r.MIN_POINTS],x[r.MAX_POINTS])}},ae=[te.distance,te.ownPlayer,te.included,te.ignored],ne=function(e){return e.sort().filter((function(e,t,a){return!t||e!=a[t-1]}))},ie=function(){!function(){const e=x[r.GROUP_INCLUDE];P=[],e.forEach((function(e){let t=i.getGroupList().getGroupVillageIds(e);P=P.concat(t)})),P=ne(P)}(),function(){const e=x[r.GROUP_IGNORE];z=i.getGroupList().getGroupVillageIds(e)}(),function(){const e=x[r.GROUP_ONLY];G=[],e.forEach((function(e){let t=i.getGroupList().getGroupVillageIds(e);t=t.filter((function(e){return!!M.getVillage(e)})),G=G.concat(t)})),G=ne(G)}(),function(){const e=z.concat(P);let t=!1;e.forEach((function(e){b.call(R,e)||(R[e]={time:E.gameTime(),report:!1},t=!0)})),_.each(R,(function(a,n){n=parseInt(n,10),e.includes(n)||(delete R[n],t=!0)})),t&&(I.set($,R),w.trigger(s.FARM_OVERFLOW_EXCEPTION_LOGS_UPDATED))}(),w.trigger(s.FARM_OVERFLOW_EXCEPTION_VILLAGES_UPDATED)},oe=function(e,t){
const a=x[r.GROUP_INCLUDE],n=x[r.GROUP_IGNORE],i=x[r.GROUP_ONLY],o=M.getVillage(t.village_id);let l=!1;if(ie(),n===t.group_id&&(o?(ke(t.village_id),l=!0):(Me(t.village_id),he(g.IGNORED_VILLAGE,{villageId:t.village_id}),_e(t.village_id))),a.includes(t.group_id)&&!o&&(Le(),he(g.INCLUDED_VILLAGE,{villageId:t.village_id}),_e(t.village_id)),i.includes(t.group_id)&&o){let e=ye(t.village_id);e.init().then((function(){N&&e.start()})),l=!0}l&&w.trigger(s.FARM_OVERFLOW_FARMER_VILLAGES_UPDATED)},le=function(e,t){const a=x[r.GROUP_INCLUDE],n=x[r.GROUP_IGNORE],i=x[r.GROUP_ONLY],o=M.getVillage(t.village_id);let l=!1;if(ie(),n===t.group_id)if(o){let e=ye(t.village_id);e.init().then((function(){N&&e.start()})),l=!0}else Le(),he(g.IGNORED_VILLAGE_REMOVED,{villageId:t.village_id});a.includes(t.group_id)&&!o&&(Le(),he(g.INCLUDED_VILLAGE_REMOVED,{villageId:t.village_id})),i.includes(t.group_id)&&o&&(ke(t.village_id),l=!0),l&&w.trigger(s.FARM_OVERFLOW_FARMER_VILLAGES_UPDATED)},se=function(e){
const t=i.getGroupList().getGroups(),a=x[r.GROUP_IGNORE],n=x[r.GROUP_ONLY],o=x[r.GROUP_INCLUDE],l=b.call(t,a)?a:k.getDefault(r.GROUP_IGNORE),s=n.filter(e=>b.call(t,e)),c=o.filter(e=>b.call(t,e));k.setAll({[r.GROUP_IGNORE]:l,[r.GROUP_ONLY]:s,[r.GROUP_INCLUDE]:c},e)},re=function(){se(),ie(),Ie(),Le(),Se()},ce=function(){B=[];const e=i.getPresetList().getPresets();x[r.PRESETS].forEach((function(t){if(!b.call(e,t))return;let a=e[t];a.load=me(a),a.travelTime=d.calculateTravelTime(a,{barbarian:!1,officers:!1}),B.push(a)})),B=B.sort((function(e,t){return e.travelTime-t.travelTime||t.load-e.load}))},de=function(){ce(),B.length||(w.trigger(s.FARM_OVERFLOW_STOP,{reason:t.NO_PRESETS}),N&&Oe.stop())},ue=function(e,t){x[r.IGNORE_ON_LOSS]&&x[r.GROUP_IGNORE]&&N&&t.type===T.TYPES.ATTACK&&1!==t.result&&Re(t.target_village_id)&&(H[t.target_village_id]={haul:t.haul,id:t.id,result:t.result,title:t.title},function(e){const t=x[r.GROUP_IGNORE];!!t&&o.emit(l.GROUPS_LINK_VILLAGE,{group_id:t,village_id:e})
}(t.target_village_id))},pe=function(e,t){U&&q&&t.origin.id===U.getId()&&t.target.id===q.id&&'forward'===t.direction&&t.type===T.TYPES.ATTACK&&U.commandSent(t)},ge=function(e,t){U&&V&&q&&t.cause===l.SEND_PRESET.type&&U.commandError(t)},me=function(e){let t=0;return _.each(e.units,(function(e,a){e&&(t+=L[a].load*e)})),t},_e=function(e){R[e]={time:E.gameTime(),report:H[e]||!1},delete H[e],I.set($,R),w.trigger(s.FARM_OVERFLOW_EXCEPTION_LOGS_UPDATED)},he=function(e,t={}){return'string'==typeof e&&(angular.isObject(t)||(t={}),t.time=E.gameTime(),t.type=e,D.unshift(t),be(),!0)},be=function(){const e=x[r.LOGS_LIMIT];D.length>e&&D.splice(D.length-e,D.length),I.set(X,D),w.trigger(s.FARM_OVERFLOW_LOGS_UPDATED)},fe=function(e,t,a){const n=x[r.TARGET_MULTIPLE_FARMERS],i=x[r.TARGET_SINGLE_ATTACK];if(n&&a){if(i&&e)return!0}else if(i){if(e||t)return!0}else if(t)return!0;return!1},ve=function(){Q=E.gameTime()},Ee=function(){clearTimeout(F),clearTimeout(j),clearTimeout(Y),F=null,j=null,Y=null
},we=function(){return Math.max(1,60*x[r.FARMER_CYCLE_INTERVAL]*1e3)},Te=function(){return Math.max(0,1e3*x[r.ATTACK_INTERVAL])},Ae=function(e){if(this.villageId=e,this.village=M.getVillage(e),!this.village)throw new Error(`new Farmer -> Village ${e} doesn't exist.`);this.index=0,this.running=!1,this.initialized=!1,this.targets=!1,this.onCycleEndFn=h,this.status=n.WAITING_CYCLE};Ae.prototype.init=function(){let e=[];return this.isInitialized()||(e.push(new Promise(e=>{if(this.isInitialized())return e();u.ensureVillageDataLoaded(this.villageId,e)})),e.push(new Promise(e=>{if(this.isInitialized())return e();this.loadTargets(()=>{w.trigger(s.FARM_OVERFLOW_INSTANCE_READY,{villageId:this.villageId}),e()})}))),Promise.all(e).then(()=>{this.initialized=!0})},Ae.prototype.start=function(){return ve(),!this.running&&(this.initialized?this.targets.length?(U=this,this.running=!0,w.trigger(s.FARM_OVERFLOW_INSTANCE_START,{villageId:this.villageId}),this.targetStep({delay:!1}),
!0):(w.trigger(s.FARM_OVERFLOW_INSTANCE_ERROR_NO_TARGETS,{villageId:this.villageId}),!1):(w.trigger(s.FARM_OVERFLOW_INSTANCE_ERROR_NOT_READY,{villageId:this.villageId}),!1))},Ae.prototype.stop=function(e){this.running=!1,w.trigger(s.FARM_OVERFLOW_INSTANCE_STOP,{villageId:this.villageId,reason:e}),e===t.USER_STOP&&this.setStatus(n.USER_STOP),Ee(),this.onCycleEndFn(e),this.onCycleEndFn=h},Ae.prototype.targetStep=async function(e={}){if(!this.running)return!1;ve();const t=this.village.getCommandListModel().getOutgoingCommands(!0,!0);let a,c,u,p,g=!1,m=!1;const h=()=>new Promise((t,a)=>{e.delay?j=setTimeout(()=>{if(j=null,!this.running)return a(n.USER_STOP);t()},_.randomSeconds(Te())):t()}),f=()=>new Promise((e,a)=>{const i=50-x[r.PRESERVE_COMMAND_SLOTS];t.length>=i?a(n.COMMAND_LIMIT):e()}),y=()=>new Promise((e,t)=>{if(x[r.IGNORE_FULL_STORAGE]){const e=this.village.getResources(),a=e.getComputed(),i=e.getMaxStorage();if(ee.every(e=>a[e].currentStock===i))return t(n.FULL_STORAGE)}e()
}),I=()=>new Promise((e,t)=>this.targets.length?this.index>this.targets.length||!this.targets[this.index]?t(n.TARGET_CYCLE_END):(a=this.targets[this.index],void e()):t(n.NO_TARGETS)),k=()=>new Promise((e,t)=>{S.getTownAtAsync(a.x,a.y,i=>{if(te.points(i.points))return t(n.NOT_ALLOWED_POINTS);o.emit(l.GET_ATTACKING_FACTOR,{target_id:a.id},i=>{this.running?null!==a.character_id||null===i.owner_id||P.includes(a.id)?a.attack_protection?t(n.PROTECTED_VILLAGE):e():t(n.ABANDONED_CONQUERED):t(n.USER_STOP)})})}),R=()=>new Promise((e,t)=>{!function(e,t){const a=i.getPresetList().getPresetsByVillageId(e);let n=[];if(B.forEach((function(e){b.call(a,e.id)||n.push(e.id)})),n.length){for(let e in a)b.call(a,e)&&n.push(e);o.emit(l.ASSIGN_PRESETS,{village_id:e,preset_ids:n},t)}else t()}(this.villageId,()=>{this.running?e():t(n.USER_STOP)})}),L=()=>new Promise((e,t)=>{const i=this.village.getUnitInfo().getUnits(),o=60*x[r.MAX_TRAVEL_TIME],l=this.village.getPosition(),s=v.actualDistance(l,a);_.each(B,l=>{
if(!!Object.entries(l.units).some(e=>{const t=e[0],a=e[1];return i[t].in_town<a}))return;const r=d.calculateTravelTime(l,{barbarian:!a.character_id,officers:!1});return o>r*s?(g=l,e()):t(n.TIME_LIMIT),!1}),g||t(n.NO_UNITS)}),O=()=>new Promise((e,i)=>{c=!1,p=M.getVillageList();const o=p.every(e=>e.isInitialized(A.READY_STATES.OWN_COMMANDS));if(o&&(c=p.some(e=>{if(e.getId()===this.villageId)return!1;return e.getCommandListModel().getOutgoingCommands(!0,!0).some(e=>e.targetVillageId===a.id&&'forward'===e.data.direction)})),u=t.some(e=>e.data.target.id===a.id&&'forward'===e.data.direction),fe(u,c,o))return i(n.BUSY_TARGET);o&&(m=!0),e()}),N=()=>new Promise((e,t)=>{if(!u&&!c)return e();const i=60*x[r.MULTIPLE_ATTACKS_INTERVAL];if(!i)return e();if(x[r.TARGET_SINGLE_ATTACK]&&!x[r.TARGET_MULTIPLE_FARMERS])return e();const o=Math.round(E.gameTime()/1e3),l=x[r.TARGET_MULTIPLE_FARMERS]?p:[this.village],s=this.village.getPosition(),m=v.actualDistance(s,a),_=d.calculateTravelTime(g,{
barbarian:!a.character_id,officers:!0,effects:!0}),h=d.getTravelTimeForDistance(g,_,m,T.TYPES.ATTACK);if(l.some(e=>{const t=e.getCommandListModel().getOutgoingCommands(!0,!0).filter(e=>e.targetVillageId===a.id&&'forward'===e.data.direction);if(t.length)return t.some(e=>Math.abs(o+h-e.time_completed)<i)}))return t(n.BUSY_TARGET);e()}),C=()=>new Promise((e,t)=>{if(m)return e();o.emit(l.MAP_GET_VILLAGE_DETAILS,{my_village_id:this.villageId,village_id:a.id,num_reports:0},a=>{if(!this.running)return t(n.USER_STOP);const i=a.commands.own.filter(e=>e.type===T.TYPES.ATTACK&&'forward'===e.direction),o=i.some(e=>e.start_village_id!==this.villageId),l=i.some(e=>e.start_village_id===this.villageId);if(fe(l,o,!0))return t(n.BUSY_TARGET);e()})});let D=new Promise((e,t)=>{h().then(f).then(y).then(I).then(k).then(R).then(L).then(O).then(N).then(C).then(e).catch(t)}),z=new Promise((e,t)=>{Y=setTimeout(()=>{this.running&&t(n.EXPIRED_STEP)},3e4)});Promise.race([D,z]).then(()=>{if(!this.running)return!1
;this.setStatus(n.ATTACKING),V=!0,q=a,this.index++,o.emit(l.SEND_PRESET,{start_village:this.villageId,target_village:a.id,army_preset_id:g.id,type:T.TYPES.ATTACK})}).catch(t=>{switch(Ee(),w.trigger(s.FARM_OVERFLOW_INSTANCE_STEP_STATUS,{villageId:this.villageId,error:t}),t){case n.TIME_LIMIT:case n.BUSY_TARGET:case n.ABANDONED_CONQUERED:case n.PROTECTED_VILLAGE:this.index++,this.setStatus(t),this.targetStep(e);break;case n.USER_STOP:this.setStatus(t);break;case n.NOT_ALLOWED_POINTS:this.index++,this.setStatus(t),Me(a.id),this.targetStep(e);break;case n.NO_UNITS:case n.NO_TARGETS:case n.FULL_STORAGE:case n.COMMAND_LIMIT:this.index++,this.setStatus(t),this.stop(t);break;case n.TARGET_CYCLE_END:this.index=0,this.setStatus(t),this.stop(t);break;case n.EXPIRED_STEP:this.setStatus(t),this.targetStep();break;default:console.error('Unknown status:',t),this.index++,this.setStatus(n.UNKNOWN),this.stop(n.UNKNOWN)}})},Ae.prototype.setStatus=function(e){this.status=e},
Ae.prototype.getStatus=function(){return this.status||n.UNKNOWN},Ae.prototype.commandSent=function(e){V=!1,q=!1,Ee(),he(g.ATTACKED_VILLAGE,{targetId:e.target.id}),this.targetStep({delay:!0})},Ae.prototype.commandError=function(){V=!1,q=!1,this.stop(n.COMMAND_ERROR)},Ae.prototype.onCycleEnd=function(e){this.onCycleEndFn=e},Ae.prototype.loadTargets=function(e){const t=this.village.getPosition();m.load(a=>{this.targets=function(e,t){return e.map((function(e){return e.distance=v.actualDistance(t,e),e}))}(a,t),this.targets=function(e){return e.filter((function(e){return ae.every((function(t){return!t(e)}))}))}(this.targets),this.targets=function(e){return e.sort((function(e,t){return e.distance-t.distance}))}(this.targets),this.targets=this.targets.slice(0,x[r.TARGET_LIMIT_PER_VILLAGE]),'function'==typeof e&&e(this.targets)})},Ae.prototype.getTargets=function(){return this.targets},Ae.prototype.getIndex=function(){return this.index},Ae.prototype.getVillage=function(){return this.village},
Ae.prototype.isRunning=function(){return this.running},Ae.prototype.isInitialized=function(){return this.initialized},Ae.prototype.removeTarget=function(e){return!('number'!=typeof e||!this.targets)&&(this.targets=this.targets.filter((function(t){return t.id!==e})),!0)},Ae.prototype.getId=function(){return this.villageId};const ye=function(e){const t=x[r.GROUP_ONLY];if(e=parseInt(e,10),t.length&&!G.includes(e))return!1;if(z.includes(e))return!1;let a=Oe.getFarmer(e);return a||(a=new Ae(e),C.push(a)),a},Se=function(){_.each(M.getVillages(),(function(e,t){ye(t)})),w.trigger(s.FARM_OVERFLOW_FARMER_VILLAGES_UPDATED)},Ie=function(){const e=x[r.GROUP_ONLY];let t=[];C.forEach((function(a){let n=a.getId();e.length&&!G.includes(n)?t.push(n):z.includes(n)&&t.push(n)})),t.length&&(t.forEach((function(e){ke(e)})),w.trigger(s.FARM_OVERFLOW_FARMER_VILLAGES_UPDATED))},ke=function(e){for(let a=0;a<C.length;a++)if(C[a].getId()===e)return C[a].stop(t.KILL_FARMER),C.splice(a,a+1),!0;return!1
},xe=function(e){ve(),C.length?W>=C.length?(W=0,U=!1,Z=E.gameTime()+we(),w.trigger(s.FARM_OVERFLOW_CYCLE_END)):U=C[W]:U=!1,U?(U.onCycleEnd((function(e){e!==t.USER_STOP&&(W++,xe())})),"cycle_begin"===e&&(Z=null,w.trigger(s.FARM_OVERFLOW_CYCLE_BEGIN)),U.start()):F=setTimeout((function(){F=null,W=0,Z=null,w.trigger(s.FARM_OVERFLOW_CYCLE_BEGIN),xe()}),we())},Re=function(e){for(let t=0;t<C.length;t++){let a=C[t].getTargets();for(let t=0;t<a.length;t++){if(a[t].id===e)return!0}}return!1},Me=function(e){C.forEach((function(t){t.removeTarget(e)}))},Le=function(){m.load((function(){C.forEach((function(e){e.loadTargets()}))}),!0)};let Oe={};return Oe.init=function(){O=!0,D=I.get(X,[]),R=I.get($,{}),M=i.getSelectedCharacter(),L=i.getGameData().getUnitsObject(),k=new e({settingsMap:c,storageKey:J}),k.onChange((function(e,t,a){x=k.getAll(),"ignore_update"!==a&&(t[p.PRESET]&&ce(),t[p.GROUPS]&&ie(),t[p.TARGETS]&&Le(),t[p.VILLAGES]&&(Ie(),Se()),t[p.LOGS]&&be(),t[p.INTERVAL_TIMERS]&&N&&(j?(Ee(),
U.targetStep({delay:!0})):F&&(Ee(),w.trigger(s.FARM_OVERFLOW_CYCLE_BEGIN),W=0,xe())))})),x=k.getAll(),se("ignore_update"),ie(),Se(),f((function(){ce()}),'presets'),f((function(){C.forEach((function(e){e.loadTargets()}))}),'minimap_data'),a.$on(s.ARMY_PRESET_UPDATE,de),a.$on(s.ARMY_PRESET_DELETED,de),a.$on(s.GROUPS_VILLAGE_LINKED,oe),a.$on(s.GROUPS_VILLAGE_UNLINKED,le),a.$on(s.GROUPS_DESTROYED,re),a.$on(s.COMMAND_SENT,pe),a.$on(s.MESSAGE_ERROR,ge),a.$on(s.REPORT_NEW,ue)},Oe.start=function(){let e;return!N&&(B.length?(N=!0,e=[],C.forEach((function(t){e.push(new Promise((function(e){t.init().then(e)})))})),e.length?(Promise.all(e).then((function(){xe("cycle_begin")})),ve(),function(){let e=we(),t=e+e/2+Te();K=setInterval((function(){E.gameTime()-Q>t&&(Oe.stop(),setTimeout(Oe.start,5e3))}),3e4)}(),w.trigger(s.FARM_OVERFLOW_START),void he(g.FARM_START)):(N=!1,!1)):(w.trigger(s.FARM_OVERFLOW_STOP,{reason:t.NO_PRESETS}),!1))},Oe.stop=function(e=n.USER_STOP){U?(U.stop(e),
e!==n.USER_STOP&&(Z=E.gameTime()+we()),w.trigger(s.FARM_OVERFLOW_CYCLE_END,e)):Z=null,N=!1,Ee(),w.trigger(s.FARM_OVERFLOW_STOP,{reason:e}),clearInterval(K),e===n.USER_STOP&&he(g.FARM_STOP)},Oe.getFarmer=function(e){return C.find((function(t){return t.getId()===e}))},Oe.getFarmers=function(){return C},Oe.getSettings=function(){return k},Oe.getExceptionVillages=function(){return{included:P,ignored:z}},Oe.getExceptionLogs=function(){return R},Oe.isInitialized=function(){return O},Oe.isRunning=function(){return N},Oe.getLogs=function(){return D},Oe.clearLogs=function(){return D=[],I.set(X,D),w.trigger(s.FARM_OVERFLOW_LOGS_UPDATED),D},Oe.getNextCycleDate=function(){return Z},Oe.getCycleInterval=we,Oe})),define('two/farmOverflow/events',[],(function(){angular.extend(s,{FARM_OVERFLOW_START:'farm_overflow_start',FARM_OVERFLOW_STOP:'farm_overflow_stop',FARM_OVERFLOW_INSTANCE_READY:'farm_overflow_instance_ready',FARM_OVERFLOW_INSTANCE_START:'farm_overflow_instance_start',
FARM_OVERFLOW_INSTANCE_STOP:'farm_overflow_instance_stop',FARM_OVERFLOW_INSTANCE_ERROR_NO_TARGETS:'farm_overflow_instance_error_no_targets',FARM_OVERFLOW_INSTANCE_ERROR_NOT_READY:'farm_overflow_instance_error_not_ready',FARM_OVERFLOW_INSTANCE_STEP_STATUS:'farm_overflow_instance_command_status',FARM_OVERFLOW_PRESETS_LOADED:'farm_overflow_presets_loaded',FARM_OVERFLOW_LOGS_UPDATED:'farm_overflow_log_updated',FARM_OVERFLOW_COMMAND_SENT:'farm_overflow_command_sent',FARM_OVERFLOW_IGNORED_TARGET:'farm_overflow_ignored_target',FARM_OVERFLOW_VILLAGE_IGNORED:'farm_overflow_village_ignored',FARM_OVERFLOW_EXCEPTION_VILLAGES_UPDATED:'farm_overflow_exception_villages_updated',FARM_OVERFLOW_FARMER_VILLAGES_UPDATED:'farm_overflow_farmer_villages_updated',FARM_OVERFLOW_REPORTS_UPDATED:'farm_overflow_reports_updated',FARM_OVERFLOW_EXCEPTION_LOGS_UPDATED:'farm_overflow_exception_logs_updated',FARM_OVERFLOW_CYCLE_BEGIN:'farm_overflow_cycle_begin',FARM_OVERFLOW_CYCLE_END:'farm_overflow_cycle_end'})})),
define('two/farmOverflow/ui',['two/ui','two/farmOverflow','two/farmOverflow/types/status','two/farmOverflow/types/errors','two/farmOverflow/types/logs','two/farmOverflow/settings','two/Settings','two/EventScope','two/utils','queues/EventQueue','helper/time'],(function(e,t,n,d,u,h,b,f,v,E,w){let T,A,y,S=i.getPresetList(),I=i.getGroupList(),k={},x={},R=null;const M={SETTINGS:'settings',VILLAGES:'villages',LOGS:'logs'},L=function(){const e=T.pagination.offset,t=T.pagination.limit;T.visibleLogs=T.logs.slice(e,e+t),T.pagination.count=T.logs.length,T.visibleLogs.forEach((function(e){e.villageId&&O(e.villageId),e.targetId&&O(e.targetId)}))},O=function(e){if(k[e])return k[e];k[e]=!0,x[e]='LOADING...',o.emit(l.MAP_GET_VILLAGE_DETAILS,{my_village_id:i.getSelectedVillage().getId(),village_id:e,num_reports:1},(function(t){k[e]={x:t.village_x,y:t.village_y,name:t.village_name,last_report:t.last_reports[0]},x[e]=`${t.village_name} (${t.village_x}|${t.village_y})`}))},N=function(){
T.exceptionVillages.included.forEach((function(e){O(e)})),T.exceptionVillages.ignored.forEach((function(e){O(e)}))},C=function(){t.isRunning()?t.stop():t.start()},D=function(e){T.selectedTab=e},P=function(){A.setAll(A.decode(T.settings)),T.saveButtonColor='orange',v.notif('success',g('i18n')('settings_saved',a.loc.ale,'farm_overflow'))},z=function(e){const t=A.get(h.GROUP_IGNORE);if(!i.getGroupList().getGroupVillageIds(t).includes(e))return!1;o.emit(l.GROUPS_UNLINK_VILLAGE,{group_id:t,village_id:e})},G=function(e){A.get(h.GROUP_INCLUDE).forEach((function(t){i.getGroupList().getGroupVillageIds(t).includes(e)&&o.emit(l.GROUPS_UNLINK_VILLAGE,{group_id:t,village_id:e})}))},B=function(){T.presets=b.encodeList(S.getPresets(),{disabled:!1,type:'presets'})},U=function(){T.groups=b.encodeList(I.getGroups(),{disabled:!1,type:'groups'}),T.groupsWithDisabled=b.encodeList(I.getGroups(),{disabled:!0,type:'groups'})},V=function(){T.running=!0,
v.notif('success',g('i18n')('farm_started',a.loc.ale,'farm_overflow'))},q=function(e,t){switch(T.running=!1,T.showCycleTimer=!1,clearInterval(R),t.reason){case d.NO_PRESETS:v.notif('success',g('i18n')('no_preset',a.loc.ale,'farm_overflow'));break;case d.USER_STOP:v.notif('success',g('i18n')('farm_stopped',a.loc.ale,'farm_overflow'))}},W=function(){T.logs=angular.copy(t.getLogs()),L(),T.logs.length||v.notif('success',g('i18n')('reseted_logs',a.loc.ale,'farm_overflow'))},F=function(){T.farmers=t.getFarmers()},j=function(){T.exceptionVillages=t.getExceptionVillages(),N()},Y=function(){T.exceptionLogs=t.getExceptionLogs()},H=function(){T.showCycleTimer=!1,clearInterval(R)},Q=function(e,a){a!==n.USER_STOP&&(T.showCycleTimer=!0,T.nextCycleCountdown=t.getCycleInterval(),R=setInterval((function(){T.nextCycleCountdown-=1e3}),1e3))},K=function(){let e=!0;T=a.$new(),T.SETTINGS=h,T.TAB_TYPES=M,T.LOG_TYPES=u,T.running=t.isRunning(),T.selectedTab=M.SETTINGS,T.farmers=t.getFarmers(),
T.villagesLabel=x,T.villagesInfo=k,T.exceptionVillages=t.getExceptionVillages(),T.exceptionLogs=t.getExceptionLogs(),T.logs=t.getLogs(),T.visibleLogs=[],T.showCycleTimer=!1,T.nextCycleCountdown=0,T.saveButtonColor='orange',T.settingsMap=A.settingsMap,T.pagination={count:T.logs.length,offset:0,loader:L,limit:m.getPaginationLimit()},A.injectScope(T),B(),U(),L(),N(),function(){let e=t.getNextCycleDate();e&&(T.showCycleTimer=!0,T.nextCycleCountdown=e-w.gameTime(),R=setInterval((function(){T.nextCycleCountdown-=1e3}),1e3))}(),T.switchFarm=C,T.selectTab=D,T.saveSettings=P,T.clearLogs=t.clearLogs,T.jumpToVillage=p.jumpToVillage,T.openVillageInfo=r.openVillageInfo,T.showReport=_.showReport,T.removeIgnored=z,T.removeIncluded=G;let n=new f('twoverflow_farm_overflow_window',(function(){clearInterval(R)}));n.register(s.ARMY_PRESET_UPDATE,B,!0),n.register(s.ARMY_PRESET_DELETED,B,!0),n.register(s.GROUPS_UPDATED,U,!0),n.register(s.GROUPS_CREATED,U,!0),n.register(s.GROUPS_DESTROYED,U,!0),
n.register(s.FARM_OVERFLOW_START,V),n.register(s.FARM_OVERFLOW_STOP,q),n.register(s.FARM_OVERFLOW_LOGS_UPDATED,W),n.register(s.FARM_OVERFLOW_FARMER_VILLAGES_UPDATED,F),n.register(s.FARM_OVERFLOW_EXCEPTION_VILLAGES_UPDATED,j),n.register(s.FARM_OVERFLOW_EXCEPTION_LOGS_UPDATED,Y),n.register(s.FARM_OVERFLOW_CYCLE_BEGIN,H),n.register(s.FARM_OVERFLOW_CYCLE_END,Q),c.getScreenWithInjectedScope('!twoverflow_farm_overflow_window',T),T.$watch('settings',(function(){e||(T.saveButtonColor='red'),e=!1}),!0)};return function(){A=t.getSettings(),y=e.addMenuButton('Farmer',10),y.addEventListener('click',(function(){K()})),E.register(s.FARM_OVERFLOW_START,(function(){y.classList.remove('btn-orange'),y.classList.add('btn-red')})),E.register(s.FARM_OVERFLOW_STOP,(function(){y.classList.remove('btn-red'),y.classList.add('btn-orange')})),
e.addTemplate('twoverflow_farm_overflow_window',"<div id=\"two-farmoverflow\" class=\"win-content two-window\"><header class=\"win-head\"><h2>Farmer</h2><ul class=\"list-btn\"><li><a href=\"#\" class=\"size-34x34 btn-red icon-26x26-close\" ng-click=\"closeWindow()\"></a></ul></header><div class=\"win-main\" scrollbar=\"\"><div class=\"tabs tabs-bg\"><div class=\"tabs-three-col\"><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.SETTINGS)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.SETTINGS}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.SETTINGS}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.SETTINGS}\">{{ TAB_TYPES.SETTINGS | i18n:loc.ale:'common' }}</a></div></div></div><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.VILLAGES)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.VILLAGES}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.VILLAGES}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.VILLAGES}\">{{ TAB_TYPES.VILLAGES | i18n:loc.ale:'common' }}</a></div></div></div><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.LOGS)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.LOGS}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.LOGS}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.LOGS}\">{{ TAB_TYPES.LOGS | i18n:loc.ale:'common' }}</a></div></div></div></div></div><div class=\"box-paper footer\"><div class=\"scroll-wrap\"><div class=\"settings\" ng-show=\"selectedTab === TAB_TYPES.SETTINGS\"><table class=\"tbl-border-light tbl-content tbl-medium-height\"><col><col width=\"200px\"><tr><th colspan=\"2\">{{ 'groups_presets' | i18n:loc.ale:'farm_overflow' }}<tr><td><span class=\"ff-cell-fix\">{{ 'presets' | i18n:loc.ale:'farm_overflow' }}</span><td><div select=\"\" list=\"presets\" selected=\"settings[SETTINGS.PRESETS]\" drop-down=\"true\"></div><tr><td><span class=\"ff-cell-fix\">{{ 'group_ignored' | i18n:loc.ale:'farm_overflow' }}</span><td class=\"snowflake\"><div select=\"\" list=\"groupsWithDisabled\" selected=\"settings[SETTINGS.GROUP_IGNORE]\" drop-down=\"true\"></div><tr><td><span class=\"ff-cell-fix\">{{ 'group_include' | i18n:loc.ale:'farm_overflow' }}</span><td><div select=\"\" list=\"groups\" selected=\"settings[SETTINGS.GROUP_INCLUDE]\" drop-down=\"true\"></div><tr><td><span class=\"ff-cell-fix\">{{ 'group_only' | i18n:loc.ale:'farm_overflow' }}</span><td><div select=\"\" list=\"groups\" selected=\"settings[SETTINGS.GROUP_ONLY]\" drop-down=\"true\"></div></table><table class=\"tbl-border-light tbl-content tbl-medium-height\"><col><col width=\"200px\"><col width=\"60px\"><tr><th colspan=\"3\">{{ 'misc' | i18n:loc.ale:'farm_overflow' }}<tr><td><span class=\"ff-cell-fix\">{{ 'attack_interval' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.ATTACK_INTERVAL].min\" max=\"settingsMap[SETTINGS.ATTACK_INTERVAL].max\" value=\"settings[SETTINGS.ATTACK_INTERVAL]\" enabled=\"true\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.ATTACK_INTERVAL]\"><tr><td><span class=\"ff-cell-fix\">{{ 'preserve_command_slots' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.PRESERVE_COMMAND_SLOTS].min\" max=\"settingsMap[SETTINGS.PRESERVE_COMMAND_SLOTS].max\" value=\"settings[SETTINGS.PRESERVE_COMMAND_SLOTS]\" enabled=\"true\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.PRESERVE_COMMAND_SLOTS]\"><tr><td colspan=\"2\"><span class=\"ff-cell-fix\">{{ 'ignore_on_loss' | i18n:loc.ale:'farm_overflow' }}</span><td><div switch-slider=\"\" enabled=\"settings[SETTINGS.GROUP_IGNORE].value\" border=\"true\" value=\"settings[SETTINGS.IGNORE_ON_LOSS]\" vertical=\"false\" size=\"'56x28'\"></div><tr><td colspan=\"2\"><span class=\"ff-cell-fix\">{{ 'ignore_full_storage' | i18n:loc.ale:'farm_overflow' }}</span><td><div switch-slider=\"\" enabled=\"true\" border=\"true\" value=\"settings[SETTINGS.IGNORE_FULL_STORAGE]\" vertical=\"false\" size=\"'56x28'\"></div><tr><td><span class=\"ff-cell-fix\">{{ 'target_limit_per_village' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.TARGET_LIMIT_PER_VILLAGE].min\" max=\"settingsMap[SETTINGS.TARGET_LIMIT_PER_VILLAGE].max\" value=\"settings[SETTINGS.TARGET_LIMIT_PER_VILLAGE]\" enabled=\"true\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.TARGET_LIMIT_PER_VILLAGE]\"></table><table class=\"tbl-border-light tbl-content tbl-medium-height\"><col><col width=\"200px\"><col width=\"60px\"><tr><th colspan=\"3\">{{ 'step_cycle_header' | i18n:loc.ale:'farm_overflow' }}<tr><td colspan=\"2\"><span class=\"ff-cell-fix\">{{ 'target_single_attack' | i18n:loc.ale:'farm_overflow' }}</span><td><div switch-slider=\"\" enabled=\"true\" border=\"true\" value=\"settings[SETTINGS.TARGET_SINGLE_ATTACK]\" vertical=\"false\" size=\"'56x28'\"></div><tr><td colspan=\"2\"><span class=\"ff-cell-fix\">{{ 'target_multiple_farmers' | i18n:loc.ale:'farm_overflow' }}</span><td><div switch-slider=\"\" enabled=\"true\" border=\"true\" value=\"settings[SETTINGS.TARGET_MULTIPLE_FARMERS]\" vertical=\"false\" size=\"'56x28'\"></div><tr><td><span class=\"ff-cell-fix\">{{ 'farmer_cycle_interval' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.FARMER_CYCLE_INTERVAL].min\" max=\"settingsMap[SETTINGS.FARMER_CYCLE_INTERVAL].max\" value=\"settings[SETTINGS.FARMER_CYCLE_INTERVAL]\" enabled=\"true\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.FARMER_CYCLE_INTERVAL]\"><tr><td><span class=\"ff-cell-fix\">{{ 'multiple_attacks_interval' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.MULTIPLE_ATTACKS_INTERVAL].min\" max=\"settingsMap[SETTINGS.MULTIPLE_ATTACKS_INTERVAL].max\" value=\"settings[SETTINGS.MULTIPLE_ATTACKS_INTERVAL]\" enabled=\"!(settings[SETTINGS.TARGET_SINGLE_ATTACK] && !settings[SETTINGS.TARGET_MULTIPLE_FARMERS])\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.MULTIPLE_ATTACKS_INTERVAL]\" ng-disabled=\"settings[SETTINGS.TARGET_SINGLE_ATTACK] && !settings[SETTINGS.TARGET_MULTIPLE_FARMERS]\"></table><table class=\"tbl-border-light tbl-content tbl-medium-height\"><col><col width=\"200px\"><col width=\"60px\"><tr><th colspan=\"3\">{{ 'target_filters' | i18n:loc.ale:'farm_overflow' }}<tr><td><span class=\"ff-cell-fix\">{{ 'min_distance' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.MIN_DISTANCE].min\" max=\"settingsMap[SETTINGS.MIN_DISTANCE].max\" value=\"settings[SETTINGS.MIN_DISTANCE]\" enabled=\"true\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.MIN_DISTANCE]\"><tr><td><span class=\"ff-cell-fix\">{{ 'max_distance' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.MAX_DISTANCE].min\" max=\"settingsMap[SETTINGS.MAX_DISTANCE].max\" value=\"settings[SETTINGS.MAX_DISTANCE]\" enabled=\"true\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.MAX_DISTANCE]\"><tr><td><span class=\"ff-cell-fix\">{{ 'min_points' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.MIN_POINTS].min\" max=\"settingsMap[SETTINGS.MIN_POINTS].max\" value=\"settings[SETTINGS.MIN_POINTS]\" enabled=\"true\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.MIN_POINTS]\"><tr><td><span class=\"ff-cell-fix\">{{ 'max_points' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.MAX_POINTS].min\" max=\"settingsMap[SETTINGS.MAX_POINTS].max\" value=\"settings[SETTINGS.MAX_POINTS]\" enabled=\"true\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.MAX_POINTS]\"><tr><td><span class=\"ff-cell-fix\">{{ 'max_travel_time' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.MAX_TRAVEL_TIME].min\" max=\"settingsMap[SETTINGS.MAX_TRAVEL_TIME].max\" value=\"settings[SETTINGS.MAX_TRAVEL_TIME]\" enabled=\"true\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.MAX_TRAVEL_TIME]\"></table><table class=\"tbl-border-light tbl-content tbl-medium-height\"><col><col width=\"200px\"><col width=\"60px\"><tr><th colspan=\"3\">{{ 'others' | i18n:loc.ale:'common' }}<tr><td><span class=\"ff-cell-fix\">{{ 'logs_limit' | i18n:loc.ale:'farm_overflow' }}</span><td><div range-slider=\"\" min=\"settingsMap[SETTINGS.LOGS_LIMIT].min\" max=\"settingsMap[SETTINGS.LOGS_LIMIT].max\" value=\"settings[SETTINGS.LOGS_LIMIT]\" enabled=\"true\"></div><td class=\"cell-bottom\"><input class=\"fit textfield-border text-center\" ng-model=\"settings[SETTINGS.LOGS_LIMIT]\"></table></div><div class=\"villages rich-text\" ng-show=\"selectedTab === TAB_TYPES.VILLAGES\"><p ng-show=\"showCycleTimer\" class=\"text-center\">{{ 'next_cycle_in' | i18n:loc.ale:'farm_overflow' }}: {{ nextCycleCountdown | readableMillisecondsFilter }}<h5 class=\"twx-section\">{{ 'farmer_villages' | i18n:loc.ale:'farm_overflow' }}</h5><p ng-show=\"!farmers.length\" class=\"text-center\">{{ 'no_farmer_villages' | i18n:loc.ale:'farm_overflow' }}<table class=\"tbl-border-light tbl-striped\" ng-show=\"farmers.length\"><col><col width=\"40%\"><col width=\"20%\"><tr><th>{{ 'villages' | i18n:loc.ale:'common' }}<th>{{ 'last_status' | i18n:loc.ale:'farm_overflow' }}<th>{{ 'target' | i18n:loc.ale:'common':2 }}<tr ng-repeat=\"farmer in farmers\"><td><span ng-class=\"{true:'icon-20x20-queue-indicator-long', false:'icon-20x20-queue-indicator-short'}[farmer.isRunning()]\"></span> <a class=\"link\" ng-click=\"openVillageInfo(farmer.getVillage().getId())\"><span class=\"icon-20x20-village\"></span> {{ farmer.getVillage().getName() }} ({{ farmer.getVillage().getX() }}|{{ farmer.getVillage().getY() }})</a><td>{{ 'status_' + farmer.getStatus() | i18n:loc.ale:'farm_overflow' }}<td ng-if=\"farmer.getTargets()\"><span ng-if=\"farmer.isRunning()\">{{ farmer.getIndex() }} / </span><span>{{ farmer.getTargets().length }}</span><td ng-if=\"!farmer.getTargets()\">{{ 'not_loaded' | i18n:loc.ale:'farm_overflow' }}</table><h5 class=\"twx-section\">{{ 'ignored_targets' | i18n:loc.ale:'farm_overflow' }}</h5><p ng-if=\"!exceptionVillages.ignored.length\" class=\"text-center\">{{ 'no_ignored_targets' | i18n:loc.ale:'farm_overflow' }}<table class=\"ignored-villages tbl-border-light tbl-striped\" ng-show=\"exceptionVillages.ignored.length\"><col><col width=\"15%\"><col width=\"15%\"><col width=\"30px\"><tr><th>{{ 'villages' | i18n:loc.ale:'common' }}<th>{{ 'date' | i18n:loc.ale:'farm_overflow' }}<th>{{ 'reports' | i18n:loc.ale:'farm_overflow' }}<th><tr ng-repeat=\"villageId in exceptionVillages.ignored track by $index\"><td><a class=\"link\" ng-click=\"openVillageInfo(villageId)\"><span class=\"icon-20x20-village\"></span> {{ villagesLabel[villageId] }}</a><td>{{ exceptionLogs[villageId].time | readableDateFilter:loc.ale:GAME_TIMEZONE:GAME_TIME_OFFSET }}<td><span ng-if=\"exceptionLogs[villageId].report\"><a class=\"link\" ng-click=\"showReport(exceptionLogs[villageId].report.id)\" tooltip=\"\" tooltip-content=\"{{ exceptionLogs[villageId].report.title }}\"><span class=\"icon-20x20-report\"></span> {{ 'open_report' | i18n:loc.ale:'farm_overflow' }}</a> <span ng-class=\"{2:'icon-20x20-queue-indicator-medium', 3:'icon-20x20-queue-indicator-short'}[exceptionLogs[villageId].report.result]\"></span> <span ng-class=\"{'full': 'icon-26x26-capacity', 'partial':'icon-26x26-capacity-low', 'none':'hidden'}[exceptionLogs[villageId].report.haul]\"></span> </span><span ng-if=\"!exceptionLogs[villageId].report\">{{ 'no_report' | i18n:loc.ale:'farm_overflow' }}</span><td><a href=\"#\" class=\"size-20x20 btn-red icon-20x20-close\" ng-click=\"removeIgnored(villageId)\" tooltip=\"\" tooltip-content=\"\"></a></table><h5 class=\"twx-section\">{{ 'included_targets' | i18n:loc.ale:'farm_overflow' }}</h5><p ng-if=\"!exceptionVillages.included.length\" class=\"text-center\">{{ 'no_included_targets' | i18n:loc.ale:'farm_overflow' }}<table class=\"tbl-border-light tbl-striped\" ng-show=\"exceptionVillages.included.length\"><col><col width=\"15%\"><col width=\"30px\"><tr><th>{{ 'villages' | i18n:loc.ale:'common' }}<th>{{ 'date' | i18n:loc.ale:'farm_overflow' }}<th><tr ng-repeat=\"villageId in exceptionVillages.included track by $index\"><td><a class=\"link\" ng-click=\"openVillageInfo(villageId)\"><span class=\"icon-20x20-village\"></span> {{ villagesLabel[villageId] }}</a><td>{{ exceptionLogs[villageId].time | readableDateFilter:loc.ale:GAME_TIMEZONE:GAME_TIME_OFFSET }}<td><a href=\"#\" class=\"size-20x20 btn-red icon-20x20-close\" ng-click=\"removeIncluded(villageId)\" tooltip=\"\" tooltip-content=\"\"></a></table></div><div class=\"logs rich-text\" ng-show=\"selectedTab === TAB_TYPES.LOGS\"><div class=\"page-wrap\" pagination=\"pagination\"></div><p class=\"text-center\" ng-show=\"!visibleLogs.length\">{{ 'no_logs' | i18n:loc.ale:'farm_overflow' }}<table class=\"log-list tbl-border-light tbl-striped\" ng-show=\"visibleLogs.length\"><col width=\"100px\"><col width=\"30px\"><col><tr ng-repeat=\"log in visibleLogs track by $index\"><td>{{ log.time | readableDateFilter:loc.ale:GAME_TIMEZONE:GAME_TIME_OFFSET }}<td><span class=\"icon-bg-black\" ng-class=\"{\n                                'icon-26x26-dot-green': log.type === LOG_TYPES.FARM_START,\n                                'icon-26x26-dot-red': log.type === LOG_TYPES.FARM_STOP,\n                                'icon-26x26-check-negative': log.type === LOG_TYPES.IGNORED_VILLAGE || log.type === LOG_TYPES.INCLUDED_VILLAGE_REMOVED,\n                                'icon-26x26-check-positive': log.type === LOG_TYPES.INCLUDED_VILLAGE || log.type === LOG_TYPES.IGNORED_VILLAGE_REMOVED,\n                                'icon-26x26-attack-small': log.type === LOG_TYPES.ATTACKED_VILLAGE}\"></span><td ng-if=\"log.type === LOG_TYPES.ATTACKED_VILLAGE\"><span class=\"icon-26x26-attack-small\"></span> <a class=\"link\" ng-click=\"openVillageInfo(log.targetId)\"><span class=\"icon-20x20-village\"></span> {{ villagesLabel[log.targetId] }}</a><td ng-if=\"log.type === LOG_TYPES.IGNORED_VILLAGE\"><a class=\"link\" ng-click=\"openVillageInfo(log.villageId)\"><span class=\"icon-20x20-village\"></span> {{ villagesLabel[log.villageId] }}</a> {{ 'ignored_village' | i18n:loc.ale:'farm_overflow' }}<td ng-if=\"log.type === LOG_TYPES.IGNORED_VILLAGE_REMOVED\"><a class=\"link\" ng-click=\"openVillageInfo(log.villageId)\"><span class=\"icon-20x20-village\"></span> {{ villagesLabel[log.villageId] }}</a> {{ 'ignored_village_removed' | i18n:loc.ale:'farm_overflow' }}<td ng-if=\"log.type === LOG_TYPES.INCLUDED_VILLAGE\"><a class=\"link\" ng-click=\"openVillageInfo(log.villageId)\"><span class=\"icon-20x20-village\"></span> {{ villagesLabel[log.villageId] }}</a> {{ 'included_village' | i18n:loc.ale:'farm_overflow' }}<td ng-if=\"log.type === LOG_TYPES.INCLUDED_VILLAGE_REMOVED\"><a class=\"link\" ng-click=\"openVillageInfo(log.villageId)\"><span class=\"icon-20x20-village\"></span> {{ villagesLabel[log.villageId] }}</a> {{ 'included_village_removed' | i18n:loc.ale:'farm_overflow' }}<td ng-if=\"log.type === LOG_TYPES.FARM_START\">{{ 'farm_started' | i18n:loc.ale:'farm_overflow' }}<td ng-if=\"log.type === LOG_TYPES.FARM_STOP\">{{ 'farm_stopped' | i18n:loc.ale:'farm_overflow' }}</table><div class=\"page-wrap\" pagination=\"pagination\"></div></div></div></div></div><footer class=\"win-foot\"><ul class=\"list-btn list-center\"><li ng-show=\"selectedTab === TAB_TYPES.SETTINGS\"><a href=\"#\" class=\"btn-border btn-{{ saveButtonColor }}\" ng-click=\"saveSettings()\">{{ 'save' | i18n:loc.ale:'common' }}</a><li ng-show=\"selectedTab === TAB_TYPES.LOGS\"><a href=\"#\" class=\"btn-border btn-orange\" ng-click=\"clearLogs()\">{{ 'clear_logs' | i18n:loc.ale:'farm_overflow' }}</a><li><a href=\"#\" ng-class=\"{false:'btn-green', true:'btn-red'}[running]\" class=\"btn-border\" ng-click=\"switchFarm()\"><span ng-show=\"running\">{{ 'pause' | i18n:loc.ale:'common' }}</span> <span ng-show=\"!running\">{{ 'start' | i18n:loc.ale:'common' }}</span></a></ul></footer></div>"),
e.addStyle('#two-farmoverflow .settings table{margin-bottom:15px}#two-farmoverflow .settings input.textfield-border{width:219px;height:34px;margin-bottom:2px;padding-top:2px}#two-farmoverflow .settings input.textfield-border.fit{width:100%}#two-farmoverflow .settings span.select-wrapper{width:219px}#two-farmoverflow .settings a.select-handler{line-height:28px}#two-farmoverflow .settings td.snowflake a.select-handler{line-height:31px}#two-farmoverflow .settings .range-container{width:250px}#two-farmoverflow .villages td{padding:2px 5px;white-space:nowrap}#two-farmoverflow .villages .hidden{display:none}#two-farmoverflow .logs .status tr{height:25px}#two-farmoverflow .logs .status td{padding:0 6px}#two-farmoverflow .logs .log-list{margin-bottom:10px}#two-farmoverflow .logs .log-list td{white-space:nowrap;text-align:center;padding:0 5px}#two-farmoverflow .logs .log-list td .village-link{max-width:200px;white-space:nowrap;text-overflow:ellipsis}#two-farmoverflow .icon-20x20-village:before{margin-top:-11px}')
}})),define('two/farmOverflow/settings',[],(function(){return{PRESETS:'presets',GROUP_IGNORE:'group_ignore',GROUP_INCLUDE:'group_include',GROUP_ONLY:'group_only',MAX_DISTANCE:'max_distance',MIN_DISTANCE:'min_distance',IGNORE_FULL_STORAGE:'ignore_full_storage',ATTACK_INTERVAL:'attack_interval',MAX_TRAVEL_TIME:'max_travel_time',TARGET_SINGLE_ATTACK:'target_single_attack',TARGET_MULTIPLE_FARMERS:'target_multiple_farmers',MULTIPLE_ATTACKS_INTERVAL:'multiple_attacks_interval',PRESERVE_COMMAND_SLOTS:'preserve_command_slots',FARMER_CYCLE_INTERVAL:'farmer_cycle_interval',MIN_POINTS:'min_points',MAX_POINTS:'max_points',LOGS_LIMIT:'logs_limit',IGNORE_ON_LOSS:'ignore_on_loss',TARGET_LIMIT:'target_limit'}})),define('two/farmOverflow/settings/updates',(function(){return{PRESET:'preset',GROUPS:'groups',TARGETS:'targets',VILLAGES:'villages',WAITING_VILLAGES:'waiting_villages',FULL_STORAGE:'full_storage',LOGS:'logs',INTERVAL_TIMERS:'interval_timers'}})),
define('two/farmOverflow/settings/map',['two/farmOverflow/settings','two/farmOverflow/settings/updates'],(function(e,t){return{[e.PRESETS]:{default:[],updates:[t.PRESET,t.INTERVAL_TIMERS],disabledOption:!0,inputType:'select',multiSelect:!0,type:'presets'},[e.GROUP_IGNORE]:{default:!1,updates:[t.GROUPS,t.INTERVAL_TIMERS],disabledOption:!0,inputType:'select',type:'groups'},[e.GROUP_INCLUDE]:{default:[],updates:[t.GROUPS,t.TARGETS,t.INTERVAL_TIMERS],disabledOption:!0,inputType:'select',multiSelect:!0,type:'groups'},[e.GROUP_ONLY]:{default:[],updates:[t.GROUPS,t.VILLAGES,t.TARGETS,t.INTERVAL_TIMERS],disabledOption:!0,inputType:'select',multiSelect:!0,type:'groups'},[e.ATTACK_INTERVAL]:{default:2,updates:[t.INTERVAL_TIMERS],inputType:'number',min:0,max:120},[e.FARMER_CYCLE_INTERVAL]:{default:5,updates:[t.INTERVAL_TIMERS],inputType:'number',min:1,max:120},[e.TARGET_SINGLE_ATTACK]:{default:!1,updates:[],inputType:'checkbox'},[e.TARGET_MULTIPLE_FARMERS]:{default:!0,updates:[t.INTERVAL_TIMERS],
inputType:'checkbox'},[e.MULTIPLE_ATTACKS_INTERVAL]:{default:5,updates:[t.INTERVAL_TIMERS],inputType:'number',min:0,max:60},[e.PRESERVE_COMMAND_SLOTS]:{default:5,updates:[],inputType:'number',min:0,max:50},[e.IGNORE_ON_LOSS]:{default:!0,updates:[],inputType:'checkbox'},[e.IGNORE_FULL_STORAGE]:{default:!0,updates:[t.INTERVAL_TIMERS],inputType:'checkbox'},[e.MIN_DISTANCE]:{default:0,updates:[t.TARGETS,t.INTERVAL_TIMERS],inputType:'number',min:0,max:50},[e.MAX_DISTANCE]:{default:15,updates:[t.TARGETS,t.INTERVAL_TIMERS],inputType:'number',min:0,max:50},[e.MIN_POINTS]:{default:0,updates:[t.TARGETS,t.INTERVAL_TIMERS],inputType:'number',min:0,max:11223},[e.MAX_POINTS]:{default:3600,updates:[t.TARGETS,t.INTERVAL_TIMERS],inputType:'number',min:0,max:11223},[e.MAX_TRAVEL_TIME]:{default:90,updates:[t.INTERVAL_TIMERS],inputType:'number',min:0,max:300},[e.LOGS_LIMIT]:{default:500,updates:[t.LOGS],inputType:'number',min:0,max:2e3},[e.TARGET_LIMIT_PER_VILLAGE]:{default:25,updates:[t.TARGETS],min:0,
max:500}}})),define('two/farmOverflow/types/errors',[],(function(){return{NO_PRESETS:'no_presets',USER_STOP:'user_stop',KILL_FARMER:'kill_farmer'}})),define('two/farmOverflow/types/status',[],(function(){return{TIME_LIMIT:'time_limit',COMMAND_LIMIT:'command_limit',FULL_STORAGE:'full_storage',NO_UNITS:'no_units',NO_SELECTED_VILLAGE:'no_selected_village',ABANDONED_CONQUERED:'abandoned_conquered',PROTECTED_VILLAGE:'protected_village',BUSY_TARGET:'busy_target',NO_TARGETS:'no_targets',TARGET_CYCLE_END:'target_cycle_end',FARMER_CYCLE_END:'farmer_cycle_end',COMMAND_ERROR:'command_error',NOT_ALLOWED_POINTS:'not_allowed_points',UNKNOWN:'unknown',ATTACKING:'attacking',WAITING_CYCLE:'waiting_cycle',USER_STOP:'user_stop',EXPIRED_STEP:'expired_step'}})),define('two/farmOverflow/types/logs',[],(function(){return{FARM_START:'farm_start',FARM_STOP:'farm_stop',IGNORED_VILLAGE:'ignored_village',INCLUDED_VILLAGE:'included_village',IGNORED_VILLAGE_REMOVED:'ignored_village_removed',
INCLUDED_VILLAGE_REMOVED:'included_village_removed',ATTACKED_VILLAGE:'attacked_village'}})),require(['two/ready','two/farmOverflow','two/farmOverflow/ui','two/farmOverflow/events'],(function(e,t,a){if(t.isInitialized())return!1;e((function(){t.init(),a()}),['map','presets'])})),define('two/minimap',['two/minimap/types/actions','two/minimap/types/mapSizes','two/minimap/settings','two/minimap/settings/map','two/minimap/settings/updates','two/utils','two/ready','two/Settings','two/mapData','queues/EventQueue','Lockr','struct/MapData','helper/mapconvert','cdn','conf/colors','conf/colorGroups','conf/conf','states/MapState'],(function(t,n,o,l,r,c,d,u,g,m,_,h,f,v,E,w,T,A){let y,S,I,k,x,R,M,L,O,N,C,D,P,z,G,B,U,V,q,W,F,j,Y,H=!1,Q={},K={village:{},character:{},tribe:{}},Z={a:0,b:0},X={a:0,b:0},J={a:0,b:0},$={a:0,b:0},ee={},te={},ae={},ne=!1;const ie='minimap_settings',oe={[n.VERY_SMALL]:2,[n.SMALL]:3,[n.BIG]:5,[n.VERY_BIG]:7},le=injector.get('colorService'),se=injector.get('spriteFactory')
;let re,ce=!0,de=!1,ue={},pe={x:0,y:0},ge=!0;const me=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,_e=function(e){let t=Math.ceil(ee.x+e.offsetX)-k,a=Math.ceil(ee.y+e.offsetY)+k;return Math.floor(a/S)%2&&(t+=k),t-=t%S,a-=a%S,{x:Math.ceil((t-O.width/2)/S),y:Math.ceil((a-O.height/2)/S)}},he=function(e,t){return{x:e/T.TILESIZE.x,y:t/T.TILESIZE.y/T.TILESIZE.off}},be=function(){Ae(x)},fe=function(){if(H){const e={x:ee.x-O.width/2,y:ee.y-O.height/2};N.clearRect(0,0,O.width,O.height),z.clearRect(0,0,P.width,P.height),function(e){N.drawImage(C,-e.x,-e.y)}(e),Y[o.SHOW_VIEW_REFERENCE]&&function(e){const t=Ce.getMapPosition(),a=(t.x-2)*S-e.x,n=(t.y-2)*S-e.y;z.fillStyle=Y[o.COLOR_VIEW_REFERENCE],z.fillRect(a,0,1,I),z.fillRect(0,n,I,1);const i=B.getBoundingClientRect(),l=i.width/T.TILESIZE.x/A.view.z*S,s=i.height/T.TILESIZE.y/A.view.z*S,r=a-l/2,c=n-s/2;z.clearRect(r,c,l,s),z.beginPath(),z.lineWidth=1,z.strokeStyle=Y[o.COLOR_VIEW_REFERENCE],z.rect(r,c,l,s),z.stroke()}(e)}e.requestAnimationFrame(fe)
},ve=function(){if(!ne)return!1;const e=K.village[M][L];we(e?K.character[e]:[[M,L]]),ne=!1,m.trigger(s.MINIMAP_VILLAGE_BLUR,{x:M,y:L})},Ee=function(e){let t=[];for(let a=0;a<e.length;a++){let n=e[a][0],i=e[a][1];t.push(ae[n][i])}Ae(t,Y[o.COLOR_QUICK_HIGHLIGHT])},we=function(e){let t=[];for(let a=0;a<e.length;a++){let n=e[a][0],i=e[a][1];t.push(ae[n][i])}Ae(t)},Te=function(e){if(Y[o.SHOW_ONLY_CUSTOM_HIGHLIGHTS])return e.character_id in Q.character?Q.character[e.character_id]:e.tribe_id in Q.tribe&&Q.tribe[e.tribe_id];if(!e.character_id)return!!Y[o.SHOW_BARBARIANS]&&W.barbarian;if(e.character_id===V){if(e.id===R.getId()&&Y[o.HIGHLIGHT_SELECTED])return W.selected;if(e.character_id in Q.character)return Q.character[e.character_id];if(Y[o.HIGHLIGHT_OWN])return W.player}else{if(e.character_id in Q.character)return Q.character[e.character_id];if(e.tribe_id in Q.tribe)return Q.tribe[e.tribe_id];if(q&&q===e.tribe_id&&Y[o.HIGHLIGHT_DIPLOMACY])return W.tribe;if(F&&Y[o.HIGHLIGHT_DIPLOMACY]){
if(F.isAlly(e.tribe_id))return W.ally;if(F.isEnemy(e.tribe_id))return W.enemy;if(F.isNAP(e.tribe_id))return W.friendly}}return W.ugly},Ae=function(e,t){for(let a=0;a<e.length;a++){const n=e[a];if(n.id<0)continue;const i=t||Te(n);if(!i)continue;const o=n.x*S+(n.y%2?k:0),l=n.y*S;D.fillStyle=i,D.fillRect(o,l,y,y)}},ye=function(){y=oe[Y[o.MAP_SIZE]],k=Math.round(y/2),S=y+1,I=1e3*S,J.a=Z.a*S,J.b=Z.b*S,$.a=X.a*S,$.b=X.b*S,C.width=1e3*S,C.height=1e3*S,D.imageSmoothingEnabled=!1},Se=function(){const e=document.body.clientHeight-265;O.width=686,O.height=e,P.width=686,P.height=e,N.imageSmoothingEnabled=!1,z.imageSmoothingEnabled=!1},Ie=function(e){var a,n;e.preventDefault(),ce=!0,de=!0,ue.x=ee.x+e.pageX,ue.y=ee.y+e.pageY,ne&&(m.trigger(s.MINIMAP_VILLAGE_CLICK,[M,L,e]),3===e.which&&(a=M,n=L,h.getTownAtAsync(a,n,(function(e){if(!e)return!1;switch(Y[o.RIGHT_CLICK_ACTION]){case t.HIGHLIGHT_PLAYER:if(!e.character_id)return!1;Ce.addHighlight({type:'character',id:e.character_id
},E.palette.flat().random());break;case t.HIGHLIGHT_TRIBE:if(!e.tribe_id)return!1;Ce.addHighlight({type:'tribe',id:e.tribe_id},E.palette.flat().random())}})))),m.trigger(s.MINIMAP_START_MOVE)},ke=function(){de=!1,ue={},ce||m.trigger(s.MINIMAP_STOP_MOVE)},xe=function(e){if(ce=!1,pe=_e(e),de)return ee.x=(ue.x-e.pageX).bound(J.a,J.b),ee.y=(ue.y-e.pageY).bound($.a,$.b),te.x=pe.x,te.y=pe.y,!1;if(te.x===pe.x&&te.y===pe.y||(re.alpha=0,function(e,t){let a=p.tileCoordinate2Pixel(e,t);re.setTranslation(a[0]-25,a[1]+2),re.alpha=1}(pe.x,pe.y)),pe.x in ae&&pe.y in ae[pe.x]){let t=ae[pe.x][pe.y];if(!Y[o.SHOW_BARBARIANS]&&!t.character_id)return!1;if(Y[o.SHOW_ONLY_CUSTOM_HIGHLIGHTS]){let e=!1;if(t.character_id in Q.character?e=!0:t.tribe_id in Q.tribe&&(e=!0),!e)return!1}return function(e,t){if(ne){if(M===e.x&&L===e.y)return!1;ve()}ne=!0,M=e.x,L=e.y,m.trigger(s.MINIMAP_VILLAGE_HOVER,{x:M,y:L,event:t});const a=K.village[M][L];Ee(a?K.character[a]:[[M,L]])}(pe,e)}ve()},Re=function(){ne&&ve(),
m.trigger(s.MINIMAP_MOUSE_LEAVE)},Me=function(e){if(!ce)return!1;const t=_e(e);p.jumpToVillage(t.x,t.y)},Le=function(e){return e.preventDefault(),!1},Oe=function(){Q.tribe=le.getCustomColorsByGroup(w.TRIBE_COLORS)||{},Q.character=le.getCustomColorsByGroup(w.PLAYER_COLORS)||{},be()},Ne=function(){const e={id:R.getId(),x:R.getX(),y:R.getY()};R=U.getSelectedVillage(),Ae([{character_id:U.getId(),id:e.id,x:e.x,y:e.y},{character_id:U.getId(),id:R.getId(),x:R.getX(),y:R.getY()}])};let Ce={addHighlight:function(e,t){if(!(e&&e.type&&e.id&&b.call(Q,e.type)))return m.trigger(s.MINIMAP_HIGHLIGHT_ADD_ERROR_NO_ENTRY),!1;if(!me.test(t))return m.trigger(s.MINIMAP_HIGHLIGHT_ADD_ERROR_INVALID_COLOR),!1;Q[e.type][e.id]='#'!==t[0]?'#'+t:t;const n='character'===e.type?w.PLAYER_COLORS:w.TRIBE_COLORS;return le.setCustomColorsByGroup(n,Q[e.type]),a.$broadcast(s.GROUPS_VILLAGES_CHANGED),be(),!0},removeHighlight:function(e,t){if(void 0===t||!b.call(Q,e))return!1;if(!b.call(Q[e],t))return!1;delete Q[e][t]
;const n='character'===e?w.PLAYER_COLORS:w.TRIBE_COLORS;return le.setCustomColorsByGroup(n,Q[e]),a.$broadcast(s.GROUPS_VILLAGES_CHANGED),be(),!0},getHighlight:function(e,t){return!!b.call(Q[e],t)&&Q[e][t]},getHighlights:function(){return Q},eachHighlight:function(e){for(let t in Q)for(let a in Q[t])e(t,a,Q[t][a])},setViewport:function(e){O=e,O.style.background=Y[o.COLOR_BACKGROUND],N=O.getContext('2d')},setViewportRef:function(e){P=e,z=P.getContext('2d')},setCurrentPosition:function(e,t){ee.x=e*S,ee.y=t*S,te.x=Math.ceil(e),te.y=Math.ceil(t)}};return Ce.getMapPosition=function(){if(!G.width||!G.height)return!1;let e=h.getMap().engine.getView(),t=function(e,t){t=1/(t||1);const a=he(e[0]*t,e[1]*t),n=he(e[2]*t,e[3]*t);return[a.x-1,a.y-1,n.x+3||1,n.y+3||1]}([-e.x,-e.y,G.width/2,G.height/2],e.z);return{x:t[0]+t[2],y:t[1]+t[3]}},Ce.getSettings=function(){return j},Ce.drawMinimap=function(){ge&&(ge=!1),O.style.background=Y[o.COLOR_BACKGROUND],D.clearRect(0,0,C.width,C.height),d((function(){
!function(){const e=v.getPath(T.getMapPath()),t=Y[o.SHOW_CONTINENT_DEMARCATIONS],a=Y[o.SHOW_PROVINCE_DEMARCATIONS],n=function(e,t){D.fillStyle=Y[o.COLOR_CONTINENT],D.fillRect(e*S+k-1,t*S+k-1,3,1),D.fillRect(e*S+k,t*S+k-2,1,3)},i=function(e,t){D.fillStyle=Y[o.COLOR_PROVINCE],D.fillRect(e*S+k,t*S+k-1,1,1)};c.xhrGet(e,'arraybuffer').then((function(e){const o=new DataView(e.response),l={a:Z.a-10,b:Z.b+10},s={a:X.a-10,b:X.b+10};if(t||a)for(let e=l.a;e<l.b;e++)for(let l=s.a;l<s.b;l++){const s=f.toTile(o,e,l);s.key.b&&(s.key.c&&t?n(e,l):a&&i(e,l))}const r=l.a*S,c=s.a*S,d=(l.b-l.a)*S,u=(s.b-s.a)*S;D.beginPath(),D.lineWidth=2,D.strokeStyle="#2B4700",D.rect(r,c,d,u),D.stroke()}))}(),be()}),'minimap_data')},Ce.enableRendering=function(){H=!0},Ce.disableRendering=function(){H=!1},Ce.isFirstDraw=function(){return!!ge},Ce.init=function(){Ce.initialized=!0,C=document.createElement('canvas'),D=C.getContext('2d'),re=se.make('hover'),j=new u({settingsMap:l,storageKey:ie}),j.onChange((function(e,t){
Y=j.getAll(),ye(),t[r.MAP_POSITION]&&Ce.setCurrentPosition(te.x,te.y),t[r.MINIMAP]&&Ce.drawMinimap()})),Y=j.getAll(),Q.tribe=le.getCustomColorsByGroup(w.TRIBE_COLORS)||{},Q.character=le.getCustomColorsByGroup(w.PLAYER_COLORS)||{},ye()},Ce.run=function(){d((function(){B=document.getElementById('map'),G=document.getElementById('main-canvas'),U=i.getSelectedCharacter(),F=U.getTribeRelations(),V=U.getId(),q=U.getTribeId(),W=U.getVillagesColors(),re.alpha=0,A.graph.layers.effects.push(re),Se(),R=U.getSelectedVillage(),te.x=R.getX(),te.y=R.getY(),ee.x=R.getX()*S,ee.y=R.getY()*S,e.addEventListener('resize',Se,!1),P.addEventListener('mousedown',Ie),P.addEventListener('mouseup',ke),P.addEventListener('mousemove',xe),P.addEventListener('mouseleave',Re),P.addEventListener('click',Me),P.addEventListener('contextmenu',Le),g.load((function(){x=g.getVillages(),function(e){for(let t=0,a=e.length;t<a;t++){let a=e[t];a.id<0||(a.x in K.village||(K.village[a.x]={}),a.x in ae||(ae[a.x]=[]),
K.village[a.x][a.y]=a.character_id||0,ae[a.x][a.y]=a,a.character_id&&(a.character_id in K.character?K.character[a.character_id].push([a.x,a.y]):K.character[a.character_id]=[[a.x,a.y]],a.tribe_id&&(a.tribe_id in K.tribe?K.tribe[a.tribe_id].push(a.character_id):K.tribe[a.tribe_id]=[a.character_id])))}}(x),function(){let e=[],t=[];for(let a in K.village){e.push(a);for(let e in K.village[a])t.push(e)}Z.a=Math.min(...e),Z.b=Math.max(...e),X.a=Math.min(...t),X.b=Math.max(...t),J.a=Z.a*S,J.b=Z.b*S,$.a=X.a*S,$.b=X.b*S}(),fe(),a.$on(s.VILLAGE_SELECTED_CHANGED,Ne),a.$on(s.TRIBE_RELATION_CHANGED,be),a.$on(s.GROUPS_VILLAGES_CHANGED,Oe)}))}),['initial_village','tribe_relations'])},Ce})),define('two/minimap/events',[],(function(){angular.extend(s,{MINIMAP_HIGHLIGHT_ADD_ERROR_EXISTS:'minimap_highlight_add_error_exists',MINIMAP_HIGHLIGHT_ADD_ERROR_NO_ENTRY:'minimap_highlight_add_error_no_entry',MINIMAP_HIGHLIGHT_ADD_ERROR_INVALID_COLOR:'minimap_highlight_add_error_invalid_color',
MINIMAP_VILLAGE_CLICK:'minimap_village_click',MINIMAP_VILLAGE_HOVER:'minimap_village_hover',MINIMAP_VILLAGE_BLUR:'minimap_village_blur',MINIMAP_MOUSE_LEAVE:'minimap_mouse_leave',MINIMAP_START_MOVE:'minimap_start_move',MINIMAP_STOP_MOVE:'minimap_stop_move',MINIMAP_AREA_LOADED:'minimap_area_loaded'})})),define('two/minimap/ui',['two/ui','two/minimap','two/minimap/types/actions','two/minimap/types/mapSizes','two/minimap/settings','two/minimap/settings/map','two/utils','two/EventScope','two/Settings','helper/util','struct/MapData','cdn','conf/colors'],(function(t,i,d,u,p,m,_,h,b,f,v,E,w){let T,A,y,S,I,k,x,R,M,L,O,N={},C=!1,D={character:{},tribe:{}};const P={MINIMAP:'minimap',HIGHLIGHTS:'highlights',SETTINGS:'settings'},z=P.MINIMAP,G=function(e){T.selectedTab=e,e===P.MINIMAP?i.enableRendering():i.disableRendering()},B=function(){Object.keys(T.highlights.character).forEach((function(e){e in D.character||function(e,t){o.emit(l.CHAR_GET_PROFILE,{character_id:e.id},t)}({id:e},(function(t){
D.character[e]=t.character_name}))})),Object.keys(T.highlights.tribe).forEach((function(e){e in D.tribe||function(e,t){o.emit(l.TRIBE_GET_PROFILE,{tribe_id:e.id},t)}({id:e},(function(t){D.tribe[e]=t.name}))}))},U=function(e,t){return String(e)+String(t)},V=function(e,t){if(!M)return;let a=U(t.x,t.y);var n,i;L=a,N[a]=!0,C=!0,(n=t.x,i=t.y,new Promise((function(e){let t=v.getTownAt(n,i);if(t)return e(t);v.loadTownDataAsync(n,i,1,1,(function(t){e(t)}))}))).then((function(e){if(!N[U(e.x,e.y)])return;if(!C)return;x.appendChild(M),M.classList.remove('ng-hide'),k.tt.name=e.name,k.tt.x=e.x,k.tt.y=e.y,k.tt.province_name=e.province_name,k.tt.points=e.points,k.tt.character_name=e.character_name||'-',k.tt.character_points=e.character_points||0,k.tt.tribe_name=e.tribe_name||'-',k.tt.tribe_tag=e.tribe_tag||'-',k.tt.tribe_points=e.tribe_points||0,k.tt.morale=e.morale||0,k.tt.position={},k.tt.position.x=t.event.pageX+50,k.tt.position.y=t.event.pageY+50,k.tt.visible=!0
;const a=M.getBoundingClientRect(),n=x.getBoundingClientRect(),i=a.width+50,o=a.height+50,l=k.tt.position.y+o>n.top+n.height,s=k.tt.position.x+i>n.width;l&&(k.tt.position.y-=50),M.classList.toggle('left',s),M.classList.toggle('top',l)}))},q=function(e,t){if(!M)return;let a=t?U(t):L;N[a]=!1,C=!1,k.tt.visible=!1,M.classList.add('ng-hide'),R.appendChild(M)},W=function(e,t,n){let o,l,s=a.$new(),r=!0;s.colorPalettes=w.palette,'setting'===e?(l=t,o=O.get(l),r=!1,s.submit=function(){T.settings[l]='#'+s.selectedColor,s.closeWindow()},s.reset=function(){T.settings[l]=O.getDefault(l),s.closeWindow()}):'add_custom_highlight'===e?(o=T.addHighlightColor,s.submit=function(){T.addHighlightColor='#'+s.selectedColor,s.closeWindow()}):'edit_custom_highlight'===e&&(o=T.highlights[t][n],s.submit=function(){i.addHighlight({id:n,type:t},s.selectedColor),s.closeWindow()}),s.selectedColor=o.replace('#',''),s.hasCustomColors=!0,s.hideReset=r,s.finishAction=function(e,t){s.selectedColor=t},
c.getModal('modal_color_palette',s)},F=function(){i.addHighlight(T.selectedHighlight,T.addHighlightColor)},j=function(){O.setAll(O.decode(T.settings)),_.notif('success',g('i18n')('settings_saved',a.loc.ale,'minimap'))},Y=function(){let e=a.$new();e.title=g('i18n')('reset_confirm_title',a.loc.ale,'minimap'),e.text=g('i18n')('reset_confirm_text',a.loc.ale,'minimap'),e.submitText=g('i18n')('reset',a.loc.ale,'common'),e.cancelText=g('i18n')('cancel',a.loc.ale,'common'),e.showQuestionMarkIcon=!0,e.switchColors=!0,e.submit=function(){O.resetAll(),_.notif('success',g('i18n')('settings_reset',a.loc.ale,'minimap')),e.closeWindow()},e.cancel=function(){e.closeWindow()},c.getModal('modal_attention',e)},H=function(){return Object.keys(T.highlights.character).length+Object.keys(T.highlights.tribe).length},Q=function(e,t){('character'===e?r.openCharacterProfile:r.openTribeProfile)(t)},K={addHighlightAutoCompleteSelect:function(e){T.selectedHighlight={id:e.id,type:e.type,name:e.name}},
highlightUpdate:function(){B()},highlightAddErrorExists:function(){_.notif('error',g('i18n')('highlight_add_error_exists',a.loc.ale,'minimap'))},highlightAddErrorNoEntry:function(){_.notif('error',g('i18n')('highlight_add_error_no_entry',a.loc.ale,'minimap'))},highlightAddErrorInvalidColor:function(){_.notif('error',g('i18n')('highlight_add_error_invalid_color',a.loc.ale,'minimap'))},onMouseLeaveMinimap:function(){q(),S.dispatchEvent(new MouseEvent('mouseup',{view:e,bubbles:!0,cancelable:!0}))},onMouseMoveMinimap:function(){q(),S.style.cursor='url('+E.getPath('/img/cursor/grab_pushed.png')+'), move'},onMouseStopMoveMinimap:function(){S.style.cursor=''}},Z=function(){T=a.$new(),T.SETTINGS=p,T.TAB_TYPES=P,T.selectedTab=z,T.selectedHighlight=!1,T.addHighlightColor='#000000',T.highlights=i.getHighlights(),T.highlightNames=D,T.mapSizes=b.encodeList(u,{textObject:'minimap',disabled:!1}),T.actionTypes=b.encodeList(d,{textObject:'minimap',disabled:!1}),T.autoComplete={
type:['character','tribe'],placeholder:g('i18n')('placeholder_search',a.loc.ale,'minimap'),onEnter:K.addHighlightAutoCompleteSelect},T.selectTab=G,T.openColorPalette=W,T.addCustomHighlight=F,T.removeHighlight=i.removeHighlight,T.saveSettings=j,T.resetSettings=Y,T.highlightsCount=H,T.openProfile=Q,O.injectScope(T,{textObject:'minimap'});let e=new h('twoverflow_minimap_window',(function(){i.disableRendering()}));e.register(s.GROUPS_VILLAGES_CHANGED,K.highlightUpdate,!0),e.register(s.MINIMAP_HIGHLIGHT_ADD_ERROR_EXISTS,K.highlightAddErrorExists),e.register(s.MINIMAP_HIGHLIGHT_ADD_ERROR_NO_ENTRY,K.highlightAddErrorNoEntry),e.register(s.MINIMAP_HIGHLIGHT_ADD_ERROR_INVALID_COLOR,K.highlightAddErrorInvalidColor),e.register(s.MINIMAP_VILLAGE_HOVER,V),e.register(s.MINIMAP_VILLAGE_BLUR,q),e.register(s.MINIMAP_MOUSE_LEAVE,K.onMouseLeaveMinimap),e.register(s.MINIMAP_START_MOVE,K.onMouseMoveMinimap),e.register(s.MINIMAP_STOP_MOVE,K.onMouseStopMoveMinimap),
c.getScreenWithInjectedScope('!twoverflow_minimap_window',T),B(),I=document.querySelector('#two-minimap .minimap-container'),I.appendChild(y),I.appendChild(S),i.enableRendering(),i.isFirstDraw()&&i.drawMinimap()};return function(){O=i.getSettings(),k=n.getSharedData('MapController'),y=document.createElement('canvas'),y.className='minimap',S=document.createElement('canvas'),S.className='cross',i.setViewport(y),i.setViewportRef(S),M=document.querySelector('#map-tooltip'),x=document.querySelector('#wrapper'),R=document.querySelector('#map'),A=t.addMenuButton('Minimapa',180),A.addEventListener('click',(function(){const e=i.getMapPosition();if(!e)return!1;Z(),i.setCurrentPosition(e.x,e.y)})),
t.addTemplate('twoverflow_minimap_window',"<div id=\"two-minimap\" class=\"win-content two-window\"><header class=\"win-head\"><h2>Minimapa</h2><ul class=\"list-btn\"><li><a href=\"#\" class=\"size-34x34 btn-red icon-26x26-close\" ng-click=\"closeWindow()\"></a></ul></header><div class=\"win-main small-select\" scrollbar=\"\"><div class=\"tabs tabs-bg\"><div class=\"tabs-three-col\"><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.MINIMAP)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.MINIMAP}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.MINIMAP}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.MINIMAP}\">{{ 'minimap' | i18n:loc.ale:'minimap' }}</a></div></div></div><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.HIGHLIGHTS)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.HIGHLIGHTS}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.HIGHLIGHTS}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.HIGHLIGHTS}\">{{ 'highlights' | i18n:loc.ale:'minimap' }}</a></div></div></div><div class=\"tab\" ng-click=\"selectTab(TAB_TYPES.SETTINGS)\" ng-class=\"{'tab-active': selectedTab == TAB_TYPES.SETTINGS}\"><div class=\"tab-inner\"><div ng-class=\"{'box-border-light': selectedTab === TAB_TYPES.SETTINGS}\"><a href=\"#\" ng-class=\"{'btn-icon btn-orange': selectedTab !== TAB_TYPES.SETTINGS}\">{{ 'settings' | i18n:loc.ale:'common' }}</a></div></div></div></div></div><div ng-show=\"selectedTab === TAB_TYPES.MINIMAP\" class=\"minimap-container\"></div><div class=\"box-paper\" ng-class=\"{'footer': selectedTab == TAB_TYPES.SETTINGS}\"><div class=\"scroll-wrap\"><div ng-show=\"selectedTab == TAB_TYPES.HIGHLIGHTS\"><h5 class=\"twx-section\">{{ 'add' | i18n:loc.ale:'minimap' }}</h5><table class=\"tbl-border-light tbl-striped add-highlight\"><col width=\"40%\"><col><col width=\"4%\"><col width=\"4%\"><tr><td><div auto-complete=\"autoComplete\"></div><td class=\"text-center\"><span ng-show=\"selectedHighlight\" class=\"icon-26x26-rte-{{ selectedHighlight.type }}\"></span> {{ selectedHighlight.name }}<td><div class=\"color-container box-border-dark\" ng-click=\"openColorPalette('add_custom_highlight')\" ng-style=\"{'background-color': addHighlightColor }\" tooltip=\"\" tooltip-content=\"{{ 'tooltip_pick_color' | i18n:loc.ale:'minimap' }}\"></div><td><span class=\"btn-orange icon-26x26-plus\" ng-click=\"addCustomHighlight()\" tooltip=\"\" tooltip-content=\"{{ 'add' | i18n:loc.ale:'minimap' }}\"></span></table><h5 class=\"twx-section\">{{ TAB_TYPES.HIGHLIGHTS | i18n:loc.ale:'minimap' }}</h5><p class=\"text-center\" ng-show=\"!highlightsCount()\">{{ 'no_highlights' | i18n:loc.ale:'minimap' }}<table class=\"highlights tbl-border-light tbl-striped\" ng-show=\"highlightsCount()\"><col width=\"4%\"><col><col width=\"4%\"><col width=\"4%\"><tr ng-repeat=\"(id, color) in highlights.character\"><td><span class=\"icon-26x26-rte-character\"></span><td><span class=\"open-profile\" ng-click=\"openProfile('character', id)\">{{ highlightNames.character[id] }}</span><td><div class=\"color-container box-border-dark\" ng-click=\"openColorPalette('edit_custom_highlight', 'character', id)\" ng-style=\"{'background-color': color }\"></div><td><a class=\"size-26x26 btn-red icon-20x20-close\" ng-click=\"removeHighlight('character', id)\" tooltip=\"\" tooltip-content=\"{{ 'remove' | i18n:loc.ale:'minimap' }}\"></a><tr ng-repeat=\"(id, color) in highlights.tribe\"><td><span class=\"icon-26x26-rte-tribe\"></span><td><span class=\"open-profile\" ng-click=\"openProfile('tribe', id)\">{{ highlightNames.tribe[id] }}</span><td><div class=\"color-container box-border-dark\" ng-click=\"openColorPalette('edit_custom_highlight', 'tribe', id)\" ng-style=\"{'background-color': color }\"></div><td><a class=\"size-26x26 btn-red icon-20x20-close\" ng-click=\"removeHighlight('tribe', id)\" tooltip=\"\" tooltip-content=\"{{ 'remove' | i18n:loc.ale:'minimap' }}\"></a></table></div><div class=\"settings\" ng-show=\"selectedTab == TAB_TYPES.SETTINGS\"><table class=\"tbl-border-light tbl-striped\"><col width=\"60%\"><col><col width=\"56px\"><tr><th colspan=\"3\">{{ 'misc' | i18n:loc.ale:'minimap' }}<tr><td>{{ 'settings_map_size' | i18n:loc.ale:'minimap' }}<td colspan=\"3\"><div select=\"\" list=\"mapSizes\" selected=\"settings[SETTINGS.MAP_SIZE]\" drop-down=\"true\"></div><tr><td>{{ 'settings_right_click_action' | i18n:loc.ale:'minimap' }}<td colspan=\"3\"><div select=\"\" list=\"actionTypes\" selected=\"settings[SETTINGS.RIGHT_CLICK_ACTION]\" drop-down=\"true\"></div><tr><td colspan=\"2\">{{ 'settings_show_view_reference' | i18n:loc.ale:'minimap' }}<td><div switch-slider=\"\" value=\"settings[SETTINGS.SHOW_VIEW_REFERENCE]\" vertical=\"false\" size=\"'56x28'\" enabled=\"true\"></div><tr><td colspan=\"2\">{{ 'settings_show_continent_demarcations' | i18n:loc.ale:'minimap' }}<td><div switch-slider=\"\" value=\"settings[SETTINGS.SHOW_CONTINENT_DEMARCATIONS]\" vertical=\"false\" size=\"'56x28'\" enabled=\"true\"></div><tr><td colspan=\"2\">{{ 'settings_show_province_demarcations' | i18n:loc.ale:'minimap' }}<td><div switch-slider=\"\" value=\"settings[SETTINGS.SHOW_PROVINCE_DEMARCATIONS]\" vertical=\"false\" size=\"'56x28'\" enabled=\"true\"></div><tr><td colspan=\"2\">{{ 'settings_show_barbarians' | i18n:loc.ale:'minimap' }}<td><div switch-slider=\"\" value=\"settings[SETTINGS.SHOW_BARBARIANS]\" vertical=\"false\" size=\"'56x28'\" enabled=\"true\"></div><tr><td colspan=\"2\">{{ 'settings_show_only_custom_highlights' | i18n:loc.ale:'minimap' }}<td><div switch-slider=\"\" value=\"settings[SETTINGS.SHOW_ONLY_CUSTOM_HIGHLIGHTS]\" vertical=\"false\" size=\"'56x28'\" enabled=\"true\"></div><tr><td colspan=\"2\">{{ 'settings_highlight_own' | i18n:loc.ale:'minimap' }}<td><div switch-slider=\"\" value=\"settings[SETTINGS.HIGHLIGHT_OWN]\" vertical=\"false\" size=\"'56x28'\" enabled=\"true\"></div><tr><td colspan=\"2\">{{ 'settings_highlight_selected' | i18n:loc.ale:'minimap' }}<td><div switch-slider=\"\" value=\"settings[SETTINGS.HIGHLIGHT_SELECTED]\" vertical=\"false\" size=\"'56x28'\" enabled=\"true\"></div><tr><td colspan=\"2\">{{ 'settings_highlight_diplomacy' | i18n:loc.ale:'minimap' }}<td><div switch-slider=\"\" value=\"settings[SETTINGS.HIGHLIGHT_DIPLOMACY]\" vertical=\"false\" size=\"'56x28'\" enabled=\"true\"></div></table><table class=\"tbl-border-light tbl-striped\"><col><col width=\"29px\"><tr><th colspan=\"2\">{{ 'colors_misc' | i18n:loc.ale:'minimap' }}<tr><td>{{ 'settings_colors_background' | i18n:loc.ale:'minimap' }}<td><div class=\"color-container box-border-dark\" ng-click=\"openColorPalette('setting', SETTINGS.COLOR_BACKGROUND)\" ng-style=\"{'background-color': settings[SETTINGS.COLOR_BACKGROUND] }\"></div><tr><td>{{ 'settings_colors_province' | i18n:loc.ale:'minimap' }}<td><div class=\"color-container box-border-dark\" ng-click=\"openColorPalette('setting', SETTINGS.COLOR_PROVINCE)\" ng-style=\"{'background-color': settings[SETTINGS.COLOR_PROVINCE] }\"></div><tr><td>{{ 'settings_colors_continent' | i18n:loc.ale:'minimap' }}<td><div class=\"color-container box-border-dark\" ng-click=\"openColorPalette('setting', SETTINGS.COLOR_CONTINENT)\" ng-style=\"{'background-color': settings[SETTINGS.COLOR_CONTINENT] }\"></div><tr><td>{{ 'settings_colors_view_reference' | i18n:loc.ale:'minimap' }}<td><div class=\"color-container box-border-dark\" ng-click=\"openColorPalette('setting', SETTINGS.COLOR_VIEW_REFERENCE)\" ng-style=\"{'background-color': settings[SETTINGS.COLOR_VIEW_REFERENCE] }\"></div><tr><td>{{ 'settings_colors_quick_highlight' | i18n:loc.ale:'minimap' }}<td><div class=\"color-container box-border-dark\" ng-click=\"openColorPalette('setting', SETTINGS.COLOR_QUICK_HIGHLIGHT)\" ng-style=\"{'background-color': settings[SETTINGS.COLOR_QUICK_HIGHLIGHT] }\"></div></table><p class=\"text-center\">{{ 'default_village_colors_info'| i18n:loc.ale:'minimap' }}</div></div></div></div><footer class=\"win-foot\" ng-show=\"selectedTab === TAB_TYPES.SETTINGS\"><ul class=\"list-btn list-center\"><li><a href=\"#\" class=\"btn-border btn-red\" ng-click=\"resetSettings()\">{{ 'reset' | i18n:loc.ale:'common' }}</a><li><a href=\"#\" class=\"btn-border btn-green\" ng-click=\"saveSettings()\">{{ 'save' | i18n:loc.ale:'common' }}</a></ul></footer></div>"),
t.addStyle('#map-tooltip{z-index:1000}#two-minimap .minimap{position:absolute;left:0;top:38px;z-index:5}#two-minimap .cross{position:absolute;left:0;top:38px;z-index:6}#two-minimap .box-paper:not(.footer) .scroll-wrap{margin-bottom:40px}#two-minimap span.select-wrapper{width:100%}#two-minimap .add-highlight input{width:100%}#two-minimap .open-profile{font-weight:500;color:#5d3b17;padding:0 5px}#two-minimap .open-profile:hover{text-shadow:-1px 1px 0 #e0cc97}#two-minimap .settings td:first-child{padding:0 5px}#two-minimap .highlights .color-container{margin:1px}')}})),define('two/minimap/settings',[],(function(){return{MAP_SIZE:'map_size',RIGHT_CLICK_ACTION:'right_click_action',FLOATING_MINIMAP:'floating_minimap',SHOW_VIEW_REFERENCE:'show_view_reference',SHOW_CONTINENT_DEMARCATIONS:'show_continent_demarcations',SHOW_PROVINCE_DEMARCATIONS:'show_province_demarcations',SHOW_BARBARIANS:'show_barbarians',SHOW_ONLY_CUSTOM_HIGHLIGHTS:'show_only_custom_highlights',HIGHLIGHT_OWN:'highlight_own',
HIGHLIGHT_SELECTED:'highlight_selected',HIGHLIGHT_DIPLOMACY:'highlight_diplomacy',COLOR_GHOST:'color_ghost',COLOR_QUICK_HIGHLIGHT:'color_quick_highlight',COLOR_BACKGROUND:'color_background',COLOR_PROVINCE:'color_province',COLOR_CONTINENT:'color_continent',COLOR_VIEW_REFERENCE:'color_view_reference'}})),define('two/minimap/settings/updates',(function(){return{MINIMAP:'minimap',MAP_POSITION:'map_position'}})),define('two/minimap/settings/map',['two/minimap/settings','two/minimap/types/actions','two/minimap/types/mapSizes','two/minimap/settings/updates'],(function(e,t,a,n){return{[e.MAP_SIZE]:{default:a.SMALL,inputType:'select',updates:[n.MINIMAP,n.MAP_POSITION],disabledOption:!1},[e.RIGHT_CLICK_ACTION]:{default:t.HIGHLIGHT_PLAYER,inputType:'select',disabledOption:!1},[e.SHOW_VIEW_REFERENCE]:{default:!0,inputType:'checkbox',updates:[n.MINIMAP]},[e.SHOW_CONTINENT_DEMARCATIONS]:{default:!1,inputType:'checkbox',updates:[n.MINIMAP]},[e.SHOW_PROVINCE_DEMARCATIONS]:{default:!0,
inputType:'checkbox',updates:[n.MINIMAP]},[e.SHOW_BARBARIANS]:{default:!1,inputType:'checkbox',updates:[n.MINIMAP]},[e.SHOW_ONLY_CUSTOM_HIGHLIGHTS]:{default:!1,inputType:'checkbox',updates:[n.MINIMAP]},[e.HIGHLIGHT_OWN]:{default:!0,inputType:'checkbox',updates:[n.MINIMAP]},[e.HIGHLIGHT_SELECTED]:{default:!0,inputType:'checkbox',updates:[n.MINIMAP]},[e.HIGHLIGHT_DIPLOMACY]:{default:!0,inputType:'checkbox',updates:[n.MINIMAP]},[e.COLOR_SELECTED]:{default:'#ffffff',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_BARBARIAN]:{default:'#969696',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_PLAYER]:{default:'#f0c800',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_QUICK_HIGHLIGHT]:{default:'#ffffff',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_BACKGROUND]:{default:'#436213',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_PROVINCE]:{default:'#74c374',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_CONTINENT]:{default:'#74c374',inputType:'color',updates:[n.MINIMAP]},
[e.COLOR_VIEW_REFERENCE]:{default:'#999999',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_TRIBE]:{default:'#0000DB',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_ALLY]:{default:'#00a0f4',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_ENEMY]:{default:'#ED1212',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_FRIENDLY]:{default:'#BF4DA4',inputType:'color',updates:[n.MINIMAP]},[e.COLOR_GHOST]:{default:'#3E551C',inputType:'color',updates:[n.MINIMAP]}}})),define('two/minimap/types/actions',[],(function(){return{HIGHLIGHT_PLAYER:'highlight_player',HIGHLIGHT_TRIBE:'highlight_tribe'}})),define('two/minimap/types/mapSizes',[],(function(){return{VERY_SMALL:'very_small',SMALL:'small',BIG:'big',VERY_BIG:'very_big'}})),require(['two/ready','two/minimap','two/minimap/ui','two/minimap/events','two/minimap/types/actions','two/minimap/settings','two/minimap/settings/updates','two/minimap/settings/map'],(function(e,t,a){if(t.initialized)return!1;e((function(){t.init(),a(),t.run()}),'map')})),
define('two/mintHelper',['queues/EventQueue'],(function(e){let t=!1,a=!1,n=3e3;function r(){i.getSelectedCharacter().getVillageList().forEach((function(e){let t=0,a=0,i=0,s=e.data.buildings.academy.level,r=e.getResources().getComputed(),c=r.wood,d=r.clay,u=r.iron,p=c.currentStock,g=d.currentStock,m=u.currentStock;setTimeout((function(){s>0?p>=28e3&&g>=3e4&&m>=25e3?(t=Math.floor(p/28e3),a=Math.floor(g/3e4),i=Math.floor(m/25e3),t<=i&&t<=a?(o.emit(l.MINT_COINS,{village_id:e.getId(),amount:t}),console.log('W wiosce '+e.getName()+' wybito '+t+' monet.')):a<=i&&a<=t?(o.emit(l.MINT_COINS,{village_id:e.getId(),amount:a}),console.log('W wiosce '+e.getName()+' wybito '+a+' monet.')):(o.emit(l.MINT_COINS,{village_id:e.getId(),amount:i}),console.log('W wiosce '+e.getName()+' wybito '+i+' monet.'))):console.log('Za mało surowców żeby wybić monety w wiosce'+e.getName()):console.log('W wiosce '+e.getName()+' brak akademi')}),n)})),setTimeout(r,3e4)}let c={init:function(){t=!0},start:function(){
e.trigger(s.MINT_HELPER_STARTED),a=!0,r()},stop:function(){e.trigger(s.MINT_HELPER_STOPPED),a=!1},isRunning:function(){return a},isInitialized:function(){return t}};return c})),define('two/mintHelper/events',[],(function(){angular.extend(s,{MINT_HELPER_STARTED:'mint_helper_started',MINT_HELPER_STOPPED:'mint_helper_stopped'})})),define('two/mintHelper/ui',['two/ui','two/mintHelper','two/utils','queues/EventQueue'],(function(e,t,n,i){let o;return function(){return o=e.addMenuButton('Mincerz',90,g('i18n')('description',a.loc.ale,'mint_helper')),o.addEventListener('click',(function(){t.isRunning()?(t.stop(),n.notif('success',g('i18n')('deactivated',a.loc.ale,'mint_helper'))):(t.start(),n.notif('success',g('i18n')('activated',a.loc.ale,'mint_helper')))})),i.register(s.MINT_HELPER_STARTED,(function(){o.classList.remove('btn-orange'),o.classList.add('btn-red')})),i.register(s.MINT_HELPER_STOPPED,(function(){o.classList.remove('btn-red'),o.classList.add('btn-orange')})),
t.isRunning()&&i.trigger(s.MINT_HELPER_STARTED),opener}})),require(['two/ready','two/mintHelper','two/mintHelper/ui','Lockr','queues/EventQueue','two/mintHelper/events'],(function(e,t,a,n,i){const o='mint_helper_active';if(t.isInitialized())return!1;e((function(){t.init(),a(),e((function(){n.get(o,!1,!0)&&t.start(),i.register(s.AUTO_HELPER_STARTED,(function(){n.set(o,!0)})),i.register(s.AUTO_HELPER_STOPPED,(function(){n.set(o,!1)}))}),['initial_village'])}))})),define('two/presetCreator',['queues/EventQueue','two/utils'],(function(e,t){var n=!1,r=!1,c=i.getSelectedCharacter().getVillageList(),d='060504',u='060505',p='06050f',m='060506',_='060502',h='060501',b='060503',f='05020a',v='05030a',E='04080a',w='040a0a',T='070e04',A='070e05',y='070e0f',S='070e06',I='070e02',k='070e01',x='070e03',R='070e07',M='070e0b',L='070e0e',O='030d07',N='030d0b',C='030d0e';var D={init:function(){n=!0}};return D.start=function(){e.trigger(s.PRESET_CREATOR_STARTED),r=!0,d='string'==typeof d?parseInt(d,16):d,
u='string'==typeof u?parseInt(u,16):u,p='string'==typeof p?parseInt(p,16):p,m='string'==typeof m?parseInt(m,16):m,_='string'==typeof _?parseInt(_,16):_,h='string'==typeof h?parseInt(h,16):h,b='string'==typeof b?parseInt(b,16):b,f='string'==typeof f?parseInt(f,16):f,v='string'==typeof v?parseInt(v,16):v,E='string'==typeof E?parseInt(E,16):E,w='string'==typeof w?parseInt(w,16):w,T='string'==typeof T?parseInt(T,16):T,A='string'==typeof A?parseInt(A,16):A,y='string'==typeof y?parseInt(y,16):y,S='string'==typeof S?parseInt(S,16):S,I='string'==typeof I?parseInt(I,16):I,k='string'==typeof k?parseInt(k,16):k,x='string'==typeof x?parseInt(x,16):x,R='string'==typeof R?parseInt(R,16):R,M='string'==typeof M?parseInt(M,16):M,L='string'==typeof L?parseInt(L,16):L,O='string'==typeof O?parseInt(O,16):O,N='string'==typeof N?parseInt(N,16):N,C='string'==typeof C?parseInt(C,16):C,o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'Farma (pik)',icon:d,officers:{leader:!1,loot_master:!1,
medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:20,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'Farma (miecz)',icon:u,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:33,axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'Farma (top)',icon:p,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:25,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'Farma (łuk)',icon:m,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,
sword:0,axe:0,archer:50,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'Farma (lk)',icon:_,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:10,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'Farma (łk)',icon:h,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:10,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'Farma (ck)',icon:b,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:0,
heavy_cavalry:10,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'PartDeff',icon:f,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:180,sword:140,axe:0,archer:100,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'FullDeff',icon:v,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:9e3,sword:7e3,axe:0,archer:5e3,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'PartOff',icon:E,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:200,archer:0,light_cavalry:75,mounted_archer:87,heavy_cavalry:0,ram:15,catapult:0,trebuchet:0,
doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'FullOff',icon:w,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:4e3,archer:0,light_cavalry:1500,mounted_archer:1750,heavy_cavalry:0,ram:300,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'fejk (pik)',icon:T,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:1,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'fejk (miecz)',icon:A,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:1,axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),
o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'fejk (top)',icon:y,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:1,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'fejk (łuk)',icon:S,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:1,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'fejk (lk)',icon:I,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:1,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,
name:'fejk (łk)',icon:k,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:1,heavy_cavalry:0,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'fejk (ck)',icon:x,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:1,ram:0,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'fejk (tar)',icon:R,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:1,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'fejk (kat)',icon:M,officers:{leader:!1,loot_master:!1,medic:!1,
scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:1,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'fejk (treb)',icon:L,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:1,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'kareta (tar)',icon:C,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:1,catapult:0,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'kareta (kat)',icon:C,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,
axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:1,trebuchet:0,doppelsoldner:0,snob:0,knight:0}}),o.emit(l.SAVE_NEW_PRESET,{village_id:c[0].data.villageId,name:'kareta (treb)',icon:C,officers:{leader:!1,loot_master:!1,medic:!1,scout:!1,supporter:!1,bastard:!1},units:{spear:0,sword:0,axe:0,archer:0,light_cavalry:0,mounted_archer:0,heavy_cavalry:0,ram:0,catapult:0,trebuchet:1,doppelsoldner:0,snob:0,knight:0}}),t.notif('success',g('i18n')('done',a.loc.ale,'preset_creator')),t.notif('success',g('i18n')('deactivated',a.loc.ale,'preset_creator')),D.stop()},D.stop=function(){e.trigger(s.PRESET_CREATOR_STOPPED),r=!1},D.isRunning=function(){return r},D.isInitialized=function(){return n},D})),define('two/presetCreator/events',[],(function(){angular.extend(s,{PRESET_CREATOR_STARTED:'preset_creator_started',PRESET_CREATOR_STOPPED:'preset_creator_stopped'})})),
define('two/presetCreator/ui',['two/ui','two/presetCreator','two/utils','queues/EventQueue'],(function(e,t,n,i){let o;return function(){return o=e.addMenuButton('Wojewoda',60,g('i18n')('description',a.loc.ale,'preset_creator')),o.addEventListener('click',(function(){t.isRunning()?(t.stop(),n.notif('success',g('i18n')('deactivated',a.loc.ale,'preset_creator'))):(t.start(),n.notif('success',g('i18n')('activated',a.loc.ale,'preset_creator')))})),i.register(s.PRESET_CREATOR_STARTED,(function(){o.classList.remove('btn-orange'),o.classList.add('btn-red')})),i.register(s.PRESET_CREATOR_STOPPED,(function(){o.classList.remove('btn-red'),o.classList.add('btn-orange')})),t.isRunning()&&i.trigger(s.PRESET_CREATOR_STARTED),opener}})),require(['two/ready','two/presetCreator','two/presetCreator/ui','Lockr','queues/EventQueue','two/presetCreator/events'],(function(e,t,a,n,i){const o='preset_creator_active';if(t.isInitialized())return!1;e((function(){t.init(),a(),e((function(){
n.get(o,!1,!0)&&t.start(),i.register(s.PRESET_CREATOR_STARTED,(function(){n.set(o,!0)})),i.register(s.PRESET_CREATOR_STOPPED,(function(){n.set(o,!1)}))}),['initial_village'])}))})),define('two/reportSender',['queues/EventQueue'],(function(e){var t=i.getSelectedCharacter(),a=t.data.character_id,n=t.data.character_name,r=!1,c=!1,d=[],u=[],p=[];function g(e){var t=new Date(1e3*e);return t.toLocaleString()}var m=function(){o.emit(l.REPORT_GET_LIST_REVERSE,{offset:0,count:50,query:'',types:['scouting']},(function(e){for(var t=e.reports,a=0;a<t.length;a++)d.includes(t[a].id)?console.log('Raport zwiadowczy już wysłany'):(d.push(t[a].id),o.emit(l.REPORT_GET,{id:t[a].id},_))})),o.emit(l.REPORT_GET_LIST_REVERSE,{offset:0,count:100,query:'',types:['defense']},(function(e){for(var t=e.reports,a=0;a<t.length;a++)u.includes(t[a].id)?console.log('Raport wsparcia już wysłany'):(u.push(t[a].id),o.emit(l.REPORT_GET,{id:t[a].id},h))})),o.emit(l.REPORT_GET_LIST_REVERSE,{offset:0,count:100,query:'',
types:['attack']},(function(e){for(var t=e.reports,a=0;a<t.length;a++)p.includes(t[a].id)?console.log('Raport ataku już wysłany'):(p.push(t[a].id),o.emit(l.REPORT_GET,{id:t[a].id},b))})),setTimeout(m,3e4)},_=function(e){var t,i,s,r,c,d=[],u=e.result,p=e.token,m=e.time_created,_=g(m),h=e.ReportScouting,b=h.attCharacterId,f=h.attCharacterName,v=h.attScouts,E=h.attLosses,w=h.attVillageId,T=h.attVillageName,A=h.defCharacterId,y=h.defCharacterName,S=h.defLosses,I=h.defScouts,k=h.defVillageId,x=h.defVillageName,R=h.commandType,M='',L='',O='',N='',C=Date.now(),D=p.split('.').join('_');2==u?M=' [color=d96a19]Częściowy sukces[/color]':1==u?M=' [color=0a8028]Sukces[/color]':3==u&&(M=' [color=e21f1f]Porażka[/color]'),L='units'==R?'Jednostki':'buildings'==R?'Budynki':'Sabotaż',i=null==I?'nieznana':I,s=null==v?'nieznana':v,r=null==S?'nieznana':S,c=null==E?'nieznana':E,N=null==f&&null==b?'Brak danych':'[player='+b+']'+f+'[/player]',O=null==T&&null==w?'Brak danych':'[village='+w+']'+T+'[/village]',
t=Math.floor(C/1e3-m),d.push('[size=XL][b]Raport szpiegowski: [report]'+D+'[/report][br]'+M+' --- Typ: '+L+'[/b][/size][br][b][size=large] Czas wejścia szpiegów: '+_+'[/size][/b][br][size=medium][b] Wioska cel: [/b][village='+k+']'+x+'[/village][b] Gracz cel: [/b][player='+A+']'+y+'[/player][br]Liczba szpiegów: [b]'+i+'[/b] Stracone: [b][color=e21f1f]'+r+'[/color][/b][br]Wioska pochodzenia: [/b]'+O+'[b] Gracz szpiegujący: [/b]'+N+'[br]Liczba szpiegów: [b]'+s+'[/b] Stracone: [b][color=e21f1f]'+c+'[/color][/b][/size]');var P=d.join();A!=a?t<10800&&('Hajduk Split'==n||'halfsack'==n||'Black Rider'==n?o.emit(l.MESSAGE_REPLY,{message_id:14383,message:P}):o.emit(l.MESSAGE_REPLY,{message_id:6467,message:P}),d=[]):t<10800&&('Hajduk Split'==n||'halfsack'==n||'Black Rider'==n?o.emit(l.MESSAGE_REPLY,{message_id:14382,message:P}):o.emit(l.MESSAGE_REPLY,{message_id:6466,message:P}),d=[])},h=function(e){
var t,a=[],i=e.result,s=e.token,r=e.time_created,c=g(r),d=e.ReportAttack,u=d.attCharacterId,p=d.attCharacterName,m=d.attVillageId,_=d.attVillageName,h=d.attEffects,b=d.defEffects,f=d.attUnits;if(f.spear+f.sword+f.axe+f.archer+f.light_cavalry+f.mounted_archer+f.ram+f.catapult+f.heavy_cavalry+f.trebuchet+f.knight+f.snob+f.doppelsoldner>30){var v=[],E=[];h.forEach((function(e){var t=e.type,a=0,n=0,i=0,o=0,l=0,s=0,r=0,c=0,d=0,u=0,p=0,g=0;'increased_carrying_capacity'==t&&(a=(100*(e.factor-1)).toFixed([0]),v.push(' Wagony '+a+'%')),'base_wall_levels'==t&&(n=e.min_level,v.push(' Żelazny mur '+n)),'modify_attack_factor'==t&&(i=100*e.bonus,v.push(' Mistrzostwo broni '+i+'%')),'revive_attacker_losses'==t&&(o=100*e.ratio,v.push(' Doktor '+o+'%')),'extra_hospital_beds'==t&&(l=e.beds,v.push(' Klinika '+l)),'increase_spy_defense'==t&&(s=e.increased_by,v.push(' Agent wewnętrzny '+s+'%')),'increase_member_limit'==t&&(r=e.increased_by,v.push(' Siła w liczbach '+r)),
'recruit_speed_boost'==t&&(c=e.factor,v.push(' Intensywny trening '+c+'%')),'farm_speed_increase'==t&&(d=e.factor,v.push(' Drogi najazdów '+d+'%')),'resource_deposit_job_amount'==t&&(u=e.factor,v.push(' Wagony(depozyt) '+u+'%')),'resource_deposit_job_duration'==t&&(p=e.factor,v.push(' Drogi najazdów(depozyt) '+p+'%')),'faster_tribe_support'==t&&(g=e.factor,v.push(' Zjednoczenie '+g+'%'))}));var w=v.join();b.forEach((function(e){var t=e.type,a=0,n=0,i=0,o=0,l=0,s=0,r=0,c=0,d=0,u=0,p=0,g=0;'increased_carrying_capacity'==t&&(a=(100*(e.factor-1)).toFixed([0]),E.push(' Wagony '+a+'%')),'base_wall_levels'==t&&(n=e.min_level,E.push(' Żelazny mur '+n)),'modify_attack_factor'==t&&(i=100*e.bonus,E.push(' Mistrzostwo broni '+i+'%')),'revive_attacker_losses'==t&&(o=100*e.ratio,E.push(' Doktor '+o+'%')),'extra_hospital_beds'==t&&(l=e.beds,E.push(' Klinika '+l)),'increase_spy_defense'==t&&(s=e.increased_by,E.push(' Agent wewnętrzny '+s+'%')),'increase_member_limit'==t&&(r=e.increased_by,
E.push(' Siła w liczbach '+r)),'recruit_speed_boost'==t&&(c=e.factor,E.push(' Intensywny trening '+c+'%')),'farm_speed_increase'==t&&(d=e.factor,E.push(' Drogi najazdów '+d+'%')),'resource_deposit_job_amount'==t&&(u=e.factor,E.push(' Wagony(depozyt) '+u+'%')),'resource_deposit_job_duration'==t&&(p=e.factor,E.push(' Drogi najazdów(depozyt) '+p+'%')),'faster_tribe_support'==t&&(g=e.factor,E.push(' Zjednoczenie '+g+'%'))}));var T=E.join(),A=(100*d.attFaith).toFixed([0]),y=Math.round(100*d.attModifier).toFixed([0]),S=Math.round(100*d.morale).toFixed([0]),I=(100*(d.luck-1)).toFixed([0]),k=d.defCharacterId,x=d.defCharacterName,R=d.defVillageId,M=d.defVillageName,L=(100*d.defFaith).toFixed([0]),O=Math.round(100*d.defModifier).toFixed([0]),N=(100*d.wallBonus).toFixed([0]),C=d.night,D=d.loyaltyAfter,P=d.loyaltyBefore,z=d.wallAfter,G=d.wallBefore,B=d.officers,U=d.leader,V='',q='',W='',F='',j='',Y='',H='',Q='',K='',Z=Date.now(),X=s.split('.').join('_')
;null!=P&&(Y='Lojalność przed atakiem: '+Math.floor(P)+' '),null!=D&&(H='Lojalność po ataku: '+Math.floor(D)+' '),null!=G&&(Q='Mury przed ataku: '+G+' '),null!=z&&(K='Mury po ataku: '+z+' '),null==B&&1==U?j='Brak':null==B&&1.1==U&&(j=' Wielki Mistrz '),F=0==C?'Nie':'Tak',2==i?V=' [color=d96a19]Częściowy sukces[/color]':1==i?V=' [color=0a8028]Sukces[/color]':3==i&&(V=' [color=e21f1f]Porażka[/color]'),W=null==p&&null==u?'Brak danych':'[player='+u+']'+p+'[/player]',q=null==_&&null==m?'Brak danych':'[village='+m+']'+_+'[/village]',t=Math.floor(Z/1e3-r),
a.push('[size=XL][b]Raport obronny: [report]'+X+'[/report][br]'+V+'[/b][/size][br][b][size=large] Czas wejścia ataku: '+c+'[/size][/b][br][size=medium][b] Wioska cel: [/b][village='+R+']'+M+'[/village][b] Gracz cel: [/b][player='+k+']'+x+'[/player][br]Modyfikator obrony: [b]'+O+'[/b] Bonus za mury: [b]'+N+'[/b][br]Wiara: [b]'+L+'[/b] Bonus nocny: [b]'+F+'[/b][br]Pozostałe bonusy: [b]'+T+'[/b][br][b]Wioska pochodzenia: [/b]'+q+'[b] Gracz atakujący: [/b]'+W+'[br]Modyfikator ataku: [b]'+y+'[/b] Morale: [b]'+S+'[/b][br]Wiara: [b]'+A+'[/b] Szczęście: [b]'+I+'[/b][br]Pozostałe bonusy: [b]'+w+'[/b][br]Oficerowie: [b]'+j+'[/b][br]'+Y+H+'[br]'+Q+K+'[/size]');var J=a.join();t<10800&&('Hajduk Split'==n||'halfsack'==n||'Black Rider'==n?o.emit(l.MESSAGE_REPLY,{message_id:14381,message:J}):o.emit(l.MESSAGE_REPLY,{message_id:6982,message:J}),a=[])}},b=function(e){
var t,a=[],i=e.result,s=e.token,r=e.time_created,c=g(r),d=e.ReportAttack,u=d.attCharacterId,p=d.attCharacterName,m=d.attVillageId,_=d.attVillageName,h=d.attEffects,b=d.defEffects,f=d.attUnits;if(f.spear+f.sword+f.axe+f.archer+f.light_cavalry+f.mounted_archer+f.ram+f.catapult+f.heavy_cavalry+f.trebuchet+f.knight+f.snob+f.doppelsoldner>30){var v=[],E=[];h.forEach((function(e){var t=e.type,a=0,n=0,i=0,o=0,l=0,s=0,r=0,c=0,d=0,u=0,p=0,g=0;'increased_carrying_capacity'==t&&(a=(100*(e.factor-1)).toFixed([0]),v.push(' Wagony '+a+'%')),'base_wall_levels'==t&&(n=e.min_level,v.push(' Żelazny mur '+n)),'modify_attack_factor'==t&&(i=100*e.bonus,v.push(' Mistrzostwo broni '+i+'%')),'revive_attacker_losses'==t&&(o=100*e.ratio,v.push(' Doktor '+o+'%')),'extra_hospital_beds'==t&&(l=e.beds,v.push(' Klinika '+l)),'increase_spy_defense'==t&&(s=e.increased_by,v.push(' Agent wewnętrzny '+s+'%')),'increase_member_limit'==t&&(r=e.increased_by,v.push(' Siła w liczbach '+r)),
'recruit_speed_boost'==t&&(c=e.factor,v.push(' Intensywny trening '+c+'%')),'farm_speed_increase'==t&&(d=e.factor,v.push(' Drogi najazdów '+d+'%')),'resource_deposit_job_amount'==t&&(u=e.factor,v.push(' Wagony(depozyt) '+u+'%')),'resource_deposit_job_duration'==t&&(p=e.factor,v.push(' Drogi najazdów(depozyt) '+p+'%')),'faster_tribe_support'==t&&(g=e.factor,v.push(' Zjednoczenie '+g+'%'))}));var w=v.join();b.forEach((function(e){var t=e.type,a=0,n=0,i=0,o=0,l=0,s=0,r=0,c=0,d=0,u=0,p=0,g=0;'increased_carrying_capacity'==t&&(a=(100*(e.factor-1)).toFixed([0]),E.push(' Wagony '+a+'%')),'base_wall_levels'==t&&(n=e.min_level,E.push(' Żelazny mur '+n)),'modify_attack_factor'==t&&(i=100*e.bonus,E.push(' Mistrzostwo broni '+i+'%')),'revive_attacker_losses'==t&&(o=100*e.ratio,E.push(' Doktor '+o+'%')),'extra_hospital_beds'==t&&(l=e.beds,E.push(' Klinika '+l)),'increase_spy_defense'==t&&(s=e.increased_by,E.push(' Agent wewnętrzny '+s+'%')),'increase_member_limit'==t&&(r=e.increased_by,
E.push(' Siła w liczbach '+r)),'recruit_speed_boost'==t&&(c=e.factor,E.push(' Intensywny trening '+c+'%')),'farm_speed_increase'==t&&(d=e.factor,E.push(' Drogi najazdów '+d+'%')),'resource_deposit_job_amount'==t&&(u=e.factor,E.push(' Wagony(depozyt) '+u+'%')),'resource_deposit_job_duration'==t&&(p=e.factor,E.push(' Drogi najazdów(depozyt) '+p+'%')),'faster_tribe_support'==t&&(g=e.factor,E.push(' Zjednoczenie '+g+'%'))}));var T,A=E.join(),y=(100*d.attFaith).toFixed([0]),S=Math.round(100*d.attModifier).toFixed([0]),I=Math.round(100*d.morale).toFixed([0]),k=(100*(d.luck-1)).toFixed([0]),x=d.defCharacterId,R=d.defCharacterName,M=d.defVillageId,L=d.defVillageName,O=(100*d.defFaith).toFixed([0]),N=Math.round(100*d.defModifier).toFixed([0]),C=(100*d.wallBonus).toFixed([0]),D=d.night,P=d.loyaltyAfter,z=d.loyaltyBefore,G=d.wallAfter,B=d.wallBefore,U=d.officers,V='',q='',W='',F='',j='',Y='',H='',Q='',K=[],Z=Date.now(),X=s.split('.').join('_')
;if(null!=z&&(j='Lojalność przed atakiem: '+Math.floor(z)+' '),null!=P&&(Y='Lojalność po ataku: '+Math.floor(P)+' '),null!=B&&(H='Mury przed ataku: '+B+' '),null!=G&&(Q='Mury po ataku: '+G+' '),null==U)K.push('Brak');else{var J=d.officers.bastard,$=d.officers.leader,ee=d.officers.medic,te=d.officers.scout,ae=d.officers.loot_master,ne=d.officers.supporter;0==J&&0==$&&0==ee&&0==ae&&0==te&&0==ne?K.push('Brak'):(1==J?K.push(' Oszust '):K.push(''),1==$?K.push(' Wielki Mistrz '):K.push(''),1==ee?K.push(' Medyk '):K.push(''),1==te?K.push(' Łowczy '):K.push(''),1==ae?K.push(' Mistrz Łupu '):K.push(''),1==ne?K.push(' Taktyk '):K.push(''))}if(F=0==D?'Nie':'Tak',2==i?V=' [color=d96a19]Częściowy sukces[/color]':1==i?V=' [color=0a8028]Sukces[/color]':3==i&&(V=' [color=e21f1f]Porażka[/color]'),W=null==p&&null==u?'Brak danych':'[player='+u+']'+p+'[/player]',q=null==_&&null==m?'Brak danych':'[village='+m+']'+_+'[/village]',t=Math.floor(Z/1e3-r),T=K.join(),null!=R){
a.push('[size=XL][b]Raport z ataku: [report]'+X+'[/report][br]'+V+'[/b][/size][br][b][size=large] Czas wejścia ataku: '+c+'[/size][/b][br][size=medium][b] Wioska cel: [/b][village='+M+']'+L+'[/village][b] Gracz cel: [/b][player='+x+']'+R+'[/player][br]Modyfikator obrony: [b]'+N+'[/b] Bonus za mury: [b]'+C+'[/b][br]Wiara: [b]'+O+'[/b] Bonus nocny: [b]'+F+'[/b][br]Pozostałe bonusy: [b]'+A+'[/b][br][b]Wioska pochodzenia: [/b]'+q+'[b] Gracz atakujący: [/b]'+W+'[br]Modyfikator ataku: [b]'+S+'[/b] Morale: [b]'+I+'[/b][br]Wiara: [b]'+y+'[/b] Szczęście: [b]'+k+'[/b][br]Pozostałe bonusy: [b]'+w+'[/b][br]Oficerowie: [b]'+T+'[/b][br]'+j+Y+'[br]'+H+Q+'[/size]');var ie=a.join();t<10800&&('Hajduk Split'==n||'halfsack'==n||'Black Rider'==n?o.emit(l.MESSAGE_REPLY,{message_id:14380,message:ie}):o.emit(l.MESSAGE_REPLY,{message_id:6983,message:ie}),a=[])}}},f={init:function(){r=!0},start:function(){e.trigger(s.REPORT_SENDER_STARTED),c=!0,m()},stop:function(){e.trigger(s.REPORT_SENDER_STOPPED),c=!1},
isRunning:function(){return c},isInitialized:function(){return r}};return f})),define('two/reportSender/events',[],(function(){angular.extend(s,{REPORT_SENDER_STARTED:'report_sender_started',REPORT_SENDER_STOPPED:'report_sender_stopped'})})),define('two/reportSender/ui',['two/ui','two/reportSender','two/utils','queues/EventQueue'],(function(e,t,n,i){let o;return function(){return o=e.addMenuButton('Goniec',110,g('i18n')('description',a.loc.ale,'report_sender')),o.addEventListener('click',(function(){t.isRunning()?(t.stop(),n.notif('success',g('i18n')('deactivated',a.loc.ale,'report_sender'))):(t.start(),n.notif('success',g('i18n')('activated',a.loc.ale,'report_sender')))})),i.register(s.REPORT_SENDER_STARTED,(function(){o.classList.remove('btn-orange'),o.classList.add('btn-red')})),i.register(s.REPORT_SENDER_STOPPED,(function(){o.classList.remove('btn-red'),o.classList.add('btn-orange')})),t.isRunning()&&i.trigger(s.REPORT_SENDER_STARTED),opener}})),
require(['two/ready','two/reportSender','two/reportSender/ui','Lockr','queues/EventQueue','two/reportSender/events'],(function(e,t,a,n,i){const o='report_sender_active';if(t.isInitialized())return!1;e((function(){t.init(),a(),e((function(){n.get(o,!1,!0)&&t.start(),i.register(s.REPORT_SENDER_STARTED,(function(){n.set(o,!0)})),i.register(s.REPORT_SENDER_STOPPED,(function(){n.set(o,!1)}))}),['initial_village'])}))}))}(this);