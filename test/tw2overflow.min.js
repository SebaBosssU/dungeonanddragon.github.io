/*! tw2overflow.min.js@1.0.7 | Licence MIT */
!function(a,b){define("Lockr",function(a,b){"use strict";return b.prefix="",b._getPrefixedKey=function(a,b){return b=b||{},b.noPrefix?a:this.prefix+a},b.set=function(a,b,c){var d=this._getPrefixedKey(a,c);try{localStorage.setItem(d,JSON.stringify({data:b}))}catch(a){}},b.get=function(a,b,c){var d,e=this._getPrefixedKey(a,c);try{d=JSON.parse(localStorage.getItem(e))}catch(a){d=localStorage[e]?{data:localStorage.getItem(e)}:null}return null===d?b:"object"==typeof d&&void 0!==d.data?d.data:b},b}(a,{}))}(this),function(){var a,b,c,d=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(){this.translate=d(this.translate,this),this.data={values:{},contexts:[]},this.globalContext={}}return a.prototype.translate=function(a,b,c,d,e){var f,g,h,i;return null==e&&(e=this.globalContext),h=function(a){var b;return"function"===(b=typeof a)||"object"===b&&!!a},h(b)?(f=null,i=null,g=b,e=c||this.globalContext):"number"==typeof b?(f=null,i=b,g=c,e=d||this.globalContext):(f=b,"number"==typeof c?(i=c,g=d,e=e):(i=null,g=c,e=d||this.globalContext)),h(a)?(h(a.i18n)&&(a=a.i18n),this.translateHash(a,e)):this.translateText(a,i,g,e,f)},a.prototype.add=function(a){var b,c,d,e,f,g,h,i;if(null!=a.values){g=a.values;for(c in g)d=g[c],this.data.values[c]=d}if(null!=a.contexts){for(h=a.contexts,i=[],e=0,f=h.length;e<f;e++)b=h[e],i.push(this.data.contexts.push(b));return i}},a.prototype.setContext=function(a,b){return this.globalContext[a]=b},a.prototype.clearContext=function(a){return this.lobalContext[a]=null},a.prototype.reset=function(){return this.data={values:{},contexts:[]},this.globalContext={}},a.prototype.resetData=function(){return this.data={values:{},contexts:[]}},a.prototype.resetContext=function(){return this.globalContext={}},a.prototype.translateHash=function(a,b){var c,d;for(c in a)"string"==typeof(d=a[c])&&(a[c]=this.translateText(d,null,null,b));return a},a.prototype.translateText=function(a,b,c,d,e){var f,g;return null==d&&(d=this.globalContext),null==this.data?this.useOriginalText(e||a,b,c):(f=this.getContextData(this.data,d),null!=f&&(g=this.findTranslation(a,b,c,f.values,e)),null==g&&(g=this.findTranslation(a,b,c,this.data.values,e)),null==g?this.useOriginalText(e||a,b,c):g)},a.prototype.findTranslation=function(a,b,c,d){var e,f,g,h,i;if(null==(g=d[a]))return null;if(null==b){if("string"==typeof g)return this.applyFormatting(g,b,c)}else if(g instanceof Array||g.length)for(h=0,i=g.length;h<i;h++)if(f=g[h],(b>=f[0]||null===f[0])&&(b<=f[1]||null===f[1]))return e=this.applyFormatting(f[2].replace("-%n",String(-b)),b,c),this.applyFormatting(e.replace("%n",String(b)),b,c);return null},a.prototype.getContextData=function(a,b){var c,d,e,f,g,h,i,j;if(null==a.contexts)return null;for(i=a.contexts,g=0,h=i.length;g<h;g++){c=i[g],d=!0,j=c.matches;for(e in j)f=j[e],d=d&&f===b[e];if(d)return c}return null},a.prototype.useOriginalText=function(a,b,c){return null==b?this.applyFormatting(a,b,c):this.applyFormatting(a.replace("%n",String(b)),b,c)},a.prototype.applyFormatting=function(a,b,c){var d,e;for(d in c)e=new RegExp("%{"+d+"}","g"),a=a.replace(e,c[d]);return a},a}(),c=new a,b=c.translate,b.translator=c,b.create=function(c){var d;return d=new a,null!=c&&d.add(c),d.translate.create=b.create,d.translate},define("i18n",function(){return b})}.call(this),function(a){define("ejs",function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){var d;if("/"==a.charAt(0))d=c.resolveInclude(a.replace(/^\/*/,""),b.root||"/",!0);else{if(!b.filename)throw new Error("`include` use relative path requires the 'filename' option.");d=c.resolveInclude(a,b.filename)}return d}function e(a,b){var d,e=a.filename,f=arguments.length>1;if(a.cache){if(!e)throw new Error("cache option requires a filename");if(d=c.cache.get(e))return d;f||(b=g(e).toString().replace(v,""))}else if(!f){if(!e)throw new Error("Internal EJS error: no file name or template provided");b=g(e).toString().replace(v,"")}return d=c.compile(b,a),a.cache&&c.cache.set(e,d),d}function f(a,b,c){var d;try{d=e(a)(b)}catch(a){return c(a)}return c(null,d)}function g(a){return c.fileLoader(a)}function h(a,b){var c=o.shallowCopy({},b);return c.filename=d(a,c),e(c)}function i(a,b){var c,e,f=o.shallowCopy({},b);c=d(a,f),e=g(c).toString().replace(v,""),f.filename=c;var h=new l(e,f);return h.generateSource(),{source:h.source,filename:c,template:e}}function j(a,b,c,d,e){var f=b.split("\n"),g=Math.max(d-3,0),h=Math.min(f.length,d+3),i=e(c),j=f.slice(g,h).map(function(a,b){var c=b+g+1;return(c==d?" >> ":"    ")+c+"| "+a}).join("\n");throw a.path=i,a.message=(i||"ejs")+":"+d+"\n"+j+"\n\n"+a.message,a}function k(a){return a.replace(/;(\s*$)/,"$1")}function l(a,b){b=b||{};var d={};this.templateText=a,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],d.client=b.client||!1,d.escapeFunction=b.escape||o.escapeXML,d.compileDebug=!1!==b.compileDebug,d.debug=!!b.debug,d.filename=b.filename,d.delimiter=b.delimiter||c.delimiter||r,d.strict=b.strict||!1,d.context=b.context,d.cache=b.cache||!1,d.rmWhitespace=b.rmWhitespace,d.root=b.root,d.localsName=b.localsName||c.localsName||s,d.strict?d._with=!1:d._with=void 0===b._with||b._with,this.opts=d,this.regex=this.createRegex()}var m=a("fs"),n=a("path"),o=a("./utils"),p=!1,q=a("../package.json").version,r="%",s="locals",t=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename"],u=t.concat("cache"),v=/^\uFEFF/;c.cache=o.cache,c.fileLoader=m.readFileSync,c.localsName=s,c.resolveInclude=function(a,b,c){var d=n.dirname,e=n.extname,f=n.resolve,g=f(c?b:d(b),a);return e(a)||(g+=".ejs"),g},c.compile=function(a,b){var c;return b&&b.scope&&(p||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),p=!0),b.context||(b.context=b.scope),delete b.scope),c=new l(a,b),c.compile()},c.render=function(a,b,c){var d=b||{},f=c||{};return 2==arguments.length&&o.shallowCopyFromList(f,d,t),e(f,a)(d)},c.renderFile=function(){var a,b=arguments[0],c=arguments[arguments.length-1],d={filename:b};return arguments.length>2?(a=arguments[1],3===arguments.length?a.settings&&a.settings["view options"]?o.shallowCopyFromList(d,a.settings["view options"],u):o.shallowCopyFromList(d,a,u):o.shallowCopy(d,arguments[2]),d.filename=b):a={},f(d,a,c)},c.clearCache=function(){c.cache.reset()},l.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},l.prototype={createRegex:function(){var a="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",b=o.escapeRegExpChars(this.opts.delimiter);return a=a.replace(/%/g,b),new RegExp(a)},compile:function(){var a,b,c=this.opts,d="",e="",f=c.escapeFunction;this.source||(this.generateSource(),d+="  var __output = [], __append = __output.push.bind(__output);\n",!1!==c._with&&(d+="  with ("+c.localsName+" || {}) {\n",e+="  }\n"),e+='  return __output.join("");\n',this.source=d+this.source+e),a=c.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(c.filename?JSON.stringify(c.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,c.debug&&console.log(a),c.client&&(a="escapeFn = escapeFn || "+f.toString()+";\n"+a,c.compileDebug&&(a="rethrow = rethrow || "+j.toString()+";\n"+a)),c.strict&&(a='"use strict";\n'+a);try{b=new Function(c.localsName+", escapeFn, include, rethrow",a)}catch(a){throw a instanceof SyntaxError&&(c.filename&&(a.message+=" in "+c.filename),a.message+=" while compiling ejs\n\n",a.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",a.message+="https://github.com/RyanZim/EJS-Lint"),a}if(c.client)return b.dependencies=this.dependencies,b;var g=function(a){var d=function(b,d){var e=o.shallowCopy({},a);return d&&(e=o.shallowCopy(e,d)),h(b,c)(e)};return b.apply(c.context,[a||{},f,d,j])};return g.dependencies=this.dependencies,g},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/\r/g,"").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var a=this,b=this.parseTemplateText(),d=this.opts.delimiter;b&&b.length&&b.forEach(function(e,f){var g,h,j,k,l,m;if(0===e.indexOf("<"+d)&&0!==e.indexOf("<"+d+d)&&(h=b[f+2])!=d+">"&&h!="-"+d+">"&&h!="_"+d+">")throw new Error('Could not find matching close tag for "'+e+'".');if((j=e.match(/^\s*include\s+(\S+)/))&&(g=b[f-1])&&(g=="<"+d||g=="<"+d+"-"||g=="<"+d+"_"))return k=o.shallowCopy({},a.opts),l=i(j[1],k),m=a.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(l.template)+"\n      , __filename = "+JSON.stringify(l.filename)+";\n      try {\n"+l.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+l.source+"    ; }).call(this)\n",a.source+=m,void a.dependencies.push(c.resolveInclude(j[1],k.filename));a.scanLine(e)})},parseTemplateText:function(){for(var a,b=this.templateText,c=this.regex,d=c.exec(b),e=[];d;)a=d.index,0!==a&&(e.push(b.substring(0,a)),b=b.slice(a)),e.push(d[0]),b=b.slice(d[0].length),d=c.exec(b);return b&&e.push(b),e},scanLine:function(a){function b(){c.truncate?(a=a.replace(/^(?:\r\n|\r|\n)/,""),c.truncate=!1):c.opts.rmWhitespace&&(a=a.replace(/^\n/,"")),a&&(a=a.replace(/\\/g,"\\\\"),a=a.replace(/\n/g,"\\n"),a=a.replace(/\r/g,"\\r"),a=a.replace(/"/g,'\\"'),c.source+='    ; __append("'+a+'")\n')}var c=this,d=this.opts.delimiter,e=0;switch(e=a.split("\n").length-1,a){case"<"+d:case"<"+d+"_":this.mode=l.modes.EVAL;break;case"<"+d+"=":this.mode=l.modes.ESCAPED;break;case"<"+d+"-":this.mode=l.modes.RAW;break;case"<"+d+"#":this.mode=l.modes.COMMENT;break;case"<"+d+d:this.mode=l.modes.LITERAL,this.source+='    ; __append("'+a.replace("<"+d+d,"<"+d)+'")\n';break;case d+d+">":this.mode=l.modes.LITERAL,this.source+='    ; __append("'+a.replace(d+d+">",d+">")+'")\n';break;case d+">":case"-"+d+">":case"_"+d+">":this.mode==l.modes.LITERAL&&b(),this.mode=null,this.truncate=0===a.indexOf("-")||0===a.indexOf("_");break;default:if(this.mode){switch(this.mode){case l.modes.EVAL:case l.modes.ESCAPED:case l.modes.RAW:a.lastIndexOf("//")>a.lastIndexOf("\n")&&(a+="\n")}switch(this.mode){case l.modes.EVAL:this.source+="    ; "+a+"\n";break;case l.modes.ESCAPED:this.source+="    ; __append(escapeFn("+k(a)+"))\n";break;case l.modes.RAW:this.source+="    ; __append("+k(a)+")\n";break;case l.modes.COMMENT:break;case l.modes.LITERAL:b()}}else b()}c.opts.compileDebug&&e&&(this.currentLine+=e,this.source+="    ; __line = "+this.currentLine+"\n")}},c.escapeXML=o.escapeXML,c.__express=c.renderFile,a.extensions&&(a.extensions[".ejs"]=function(a,b){var d=b||a.filename,e={filename:d,client:!0},f=g(d).toString(),h=c.compile(f,e);a._compile("module.exports = "+h.toString()+";",d)}),c.VERSION=q,c.name="ejs","undefined"!=typeof window&&(window.ejs=c)},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(a,b,c){"use strict";function d(a){return f[a]||a}var e=/[|\\{}()[\]^$+*?.]/g;c.escapeRegExpChars=function(a){return a?String(a).replace(e,"\\$&"):""};var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},g=/[&<>\'"]/g;c.escapeXML=function(a){return void 0==a?"":String(a).replace(g,d)},c.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},c.shallowCopy=function(a,b){b=b||{};for(var c in b)a[c]=b[c];return a},c.shallowCopyFromList=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];void 0!==b[e]&&(a[e]=b[e])}return a},c.cache={_data:{},set:function(a,b){this._data[a]=b},get:function(a){return this._data[a]},reset:function(){this._data={}}}},{}],3:[function(a,b,c){},{}],4:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:5}],5:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],6:[function(a,b,c){b.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.5.6",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.0.1",eslint:"^3.0.0","git-directory-deploy":"^1.5.1",istanbul:"~0.4.3",jake:"^8.0.0",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^3.0.2","uglify-js":"^2.6.2"},engines:{node:">=0.10.0"},scripts:{test:"mocha",lint:'eslint "**/*.js" Jakefile',coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"jake doc",devdoc:"jake doc[dev]"}}},{}]},{},[1])(1)}())}(),function(a,b){var c=injector.get("$rootScope"),d=injector.get("transferredSharedDataService"),e=injector.get("modelDataService"),f=injector.get("socketService"),g=injector.get("routeProvider"),j=injector.get("eventTypeProvider"),k=injector.get("windowDisplayService"),l=injector.get("windowManagerService"),m=injector.get("hotkeys"),n=injector.get("armyService"),o=injector.get("villageService"),p=injector.get("mapService"),q=injector.get("$filter");define("two/eventQueue",function(){var a={},b={};return b.bind=function(b,c){a.hasOwnProperty(b)||(a[b]=[]),a[b].push(c)},b.trigger=function(b,c){a.hasOwnProperty(b)&&a[b].forEach(function(a){a.apply(this,c)})},b}),define("two/utils",["helper/time"],function(a){var b={};return b.randomSeconds=function(a){a=parseInt(a,10);var b=a+a/2,c=a-a/2;return Math.round(Math.random()*(b-c)+c)},b.time2seconds=function(a){return a=a.split(":"),a[0]=60*parseInt(a[0],10)*60,a[1]=60*parseInt(a[1],10),a[2]=parseInt(a[2],10),a.reduce(function(a,b){return a+b})},b.emitNotif=function(a,b){var d="success"===a?j.MESSAGE_SUCCESS:j.MESSAGE_ERROR;c.$broadcast(d,{message:b})},b.genVillageLabel=function(a){return a.name+" ("+a.x+"|"+a.y+")"},b.isValidCoords=function(a){return/\s*\d{2,3}\|\d{2,3}\s*/.test(a)},b.isValidDateTime=function(a){return/^\s*([01][0-9]|2[0-3]):[0-5]\d:[0-5]\d(:\d{1,3})? (0[1-9]|[12][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/\d{4}\s*$/.test(a)},b.fixDate=function(a){var b=a.split(" "),c=b[0],d=b[1].split("/");return c+" "+d[1]+"/"+d[0]+"/"+d[2]},b.guid=function(){return Math.floor(16777216*Math.random()).toString(16)},b.matchesElem=function(a,b){return!!$(a).parents(b).length},b.getTimeFromString=function(a,b){var c=a.trim().split(" "),d=c[0].split(":"),e=c[1].split("/"),f=d[0],g=d[1],h=d[2],i=d[3]||null,j=parseInt(e[0],10)-1,k=e[1],l=e[2],e=new Date(l,j,k,f,g,h,i);return e.getTime()+(b||0)},b.formatDate=function(a,b){return q("readableDateFilter")(a,null,c.GAME_TIMEZONE,c.GAME_TIME_OFFSET,b||"HH:mm:ss dd/MM/yyyy")},b.getTimeOffset=function(){return 1e3*a.gameDate().getTimezoneOffset()*60+c.GAME_TIME_OFFSET},b}),define("two/locale",["conf/locale","i18n"],function(a,b){function c(a,b,c){if(!d.hasOwnProperty(a))return console.error("Language for module "+a+" not created");var e=Array.from(arguments).slice(1),g=f[a];return d[a][g].apply(this,e)}var d={},e={},f={},g=a.LANGUAGE.split("_")[0],h=function(a){for(var b in a)return b};return c.create=function(a,c,i){if(d.hasOwnProperty(a))return!1;d[a]={};var j=c.hasOwnProperty(g),k=c.hasOwnProperty(i);e[a]=k?i:h(c),f[a]=j?g:e[a];for(var l in c)d[a][l]=b.create({values:c[l]})},c.change=function(a,b){d[a].hasOwnProperty(b)?f[a]=b:(console.error("Language "+b+" of module "+a+" not created. Selection default ("+e[a]+")"),f[a]=e[a])},c.current=function(a){return f[a]},c.eachLang=function(a,b){var c=d[a];for(var e in c)b(e,c[e]("langName"))},c}),define("two/ready",["conf/gameStates"],function(a){var b=function(f,g){g=g||["map"];var h=function(a){g=g.filter(function(b){return b!==a}),g.length||f()},i={map:function(){if(d.getSharedData("MapController").isInitialized)return h("map");c.$on(j.MAP_INITIALIZED,function(){h("map")})},tribe_relations:function(){var a=e.getSelectedCharacter();if(a){var b=a.getTribeRelations();if(!a.getTribeId()||b)return h("tribe_relations")}var d=c.$on(j.TRIBE_RELATION_LIST,function(){d(),h("tribe_relations")})},initial_village:function(){if(e.getGameState().getGameState(a.INITIAL_VILLAGE_READY))return h("initial_village");c.$on(j.GAME_STATE_INITIAL_VILLAGE_READY,function(){h("initial_village")})},all_villages_ready:function(){if(e.getGameState().getGameState(a.ALL_VILLAGES_READY))return h("all_villages_ready");c.$on(j.GAME_STATE_ALL_VILLAGES_READY,function(){h("all_villages_ready")})}};if(!d.getSharedData("MapController"))return setTimeout(function(){b(f,g)},100);g.forEach(function(a){i[a]()})};return b}),require(["two/ready","Lockr","ejs"],function(a,b,d){a(function(){var a=e.getSelectedCharacter();d.delimiter="#",b.prefix=a.getId()+"_twOverflow_"+a.getWorldId()+"-",m.add("esc",function(){c.$broadcast(j.WINDOW_CLOSED,null,!0)},["INPUT","SELECT","TEXTAREA"])})}),require(["two/locale"],function(a){a.create("common",{en:{start:"Start",started:"Uruchomiony",pause:"Pauza",paused:"Wstrzymany",stop:"Zatrzymany",stopped:"Zatrzymany",status:"Status",none:"Żaden",info:"Informacje",settings:"Ustawienia",others:"Inne",village:"Wioska",villages:"Wioski",building:"Budynek",buildings:"Budynki",level:"Poziom",registers:"Rejestry",filters:"Filtry",add:"Dodaj",waiting:"Oczekujące",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",activate:"Włącz",deactivate:"Wyłącz",units:"Jednostki",officers:"Oficerowie",origin:"Źródło",target:"Cel",save:"Zapisz",logs:"Logi",headquarter:"Ratusz",barracks:"Koszary",tavern:"Tawerna",hospital:"Szpital",preceptory:"Komturia",chapel:"Kaplica",church:"Kościół",academy:"Akademia",rally_point:"Plac",statue:"Piedestał",market:"Rynek",timber_camp:"Tartak",clay_pit:"Kopalnia gliny",iron_mine:"Huta żelaza",farm:"Farma",warehouse:"Magazyn",wall:"Mur",spear:"Pikinier",sword:"Miecznik",axe:"Topornik",archer:"Łucznik",light_cavalry:"Lekki kawalerzysta",mounted_archer:"Łucznik konny",heavy_cavalry:"Ciężki kawalerzysta",ram:"Taran",catapult:"Katapulta",doppelsoldner:"Berserker",trebuchet:"Trebusz",snob:"Szlachcic",knight:"Rycerz","no-results":"Brak wyników...",selected:"Wybrana",now:"Teraz",costs:"Koszty",duration:"Czas trwania",points:"Punkty",player:"Gracz",players:"Gracze",next_features:"Następne funkcje",misc:"Różne",colors:"Kolory"},pl:{start:"Start",started:"Uruchomiony",pause:"Pauza",paused:"Wstrzymany",stop:"Zatrzymany",stopped:"Zatrzymany",status:"Status",none:"Żaden",info:"Informacje",settings:"Ustawienia",others:"Inne",village:"Wioska",villages:"Wioski",building:"Budynek",buildings:"Budynki",level:"Poziom",registers:"Rejestry",filters:"Filtry",add:"Dodaj",waiting:"Oczekujące",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",activate:"Włącz",deactivate:"Wyłącz",units:"Jednostki",officers:"Oficerowie",origin:"Źródło",target:"Cel",save:"Zapisz",logs:"Logi",headquarter:"Ratusz",barracks:"Koszary",tavern:"Tawerna",hospital:"Szpital",preceptory:"Komturia",chapel:"Kaplica",church:"Kościół",academy:"Akademia",rally_point:"Plac",statue:"Piedestał",market:"Rynek",timber_camp:"Tartak",clay_pit:"Kopalnia gliny",iron_mine:"Huta żelaza",farm:"Farma",warehouse:"Magazyn",wall:"Mur",spear:"Pikinier",sword:"Miecznik",axe:"Topornik",archer:"Łucznik",light_cavalry:"Lekki kawalerzysta",mounted_archer:"Łucznik konny",heavy_cavalry:"Ciężki kawalerzysta",ram:"Taran",catapult:"Katapulta",doppelsoldner:"Berserker",trebuchet:"Trebusz",snob:"Szlachcic",knight:"Rycerz","no-results":"Brak wyników...",selected:"Wybrana",now:"Teraz",costs:"Koszty",duration:"Czas trwania",points:"Punkty",player:"Gracz",players:"Gracze",next_features:"Następne funkcje",misc:"Różne",colors:"Kolory"},pt:{start:"Iniciar",started:"Iniciado",pause:"Pausar",paused:"Pausado",stop:"Parar",stopped:"Parado",status:"Status",none:"Nenhum",info:"Informações",settings:"Configurações",others:"Outros",village:"Aldeia",villages:"Aldeias",building:"Edifício",buildings:"Edifícios",level:"Nível",registers:"Registros",filters:"Filtros",add:"Adicionar",waiting:"Em espera",attack:"Ataque",support:"Apoio",relocate:"Transferência",activate:"Ativar",deactivate:"Desativar",units:"Unidades",officers:"Oficiais",origin:"Origem",target:"Alvo",save:"Salvar",logs:"Logs",headquarter:"Edifício Principal",barracks:"Quartel",tavern:"Taverna",hospital:"Hospital",preceptory:"Salão das Ordens",chapel:"Capela",church:"Igreja",academy:"Academia",rally_point:"Ponto de Encontro",statue:"Estátua",market:"Mercado",timber_camp:"Bosque",clay_pit:"Poço de Argila",iron_mine:"Mina de Ferro",farm:"Fazenda",warehouse:"Armazém",wall:"Muralha",spear:"Lanceiro",sword:"Espadachim",axe:"Viking",archer:"Arqueiro",light_cavalry:"Cavalaria Leve",mounted_archer:"Arqueiro Montado",heavy_cavalry:"Cavalaria Pesada",ram:"Aríete",catapult:"Catapulta",doppelsoldner:"Berserker",trebuchet:"Trabuco",snob:"Nobre",knight:"Paladino","no-results":"Sem resultados...",selected:"Selecionado",now:"Agora",costs:"Custos",duration:"Duração",points:"Pontos",player:"Jogador",players:"Jogadores"},us:{start:"Start",started:"Started",pause:"Pause",paused:"Paused",stop:"Stop",stopped:"Stopped",status:"Status",none:"None",info:"Information",settings:"Settings",others:"Others",village:"Village",villages:"Villages",building:"Building",buildings:"Buildings",level:"Level",registers:"Registers",filters:"Filters",add:"Add",waiting:"Waiting",attack:"Attack",support:"Support",relocate:"Transfer",activate:"Enable",deactivate:"Disable",units:"Units",officers:"Officers",origin:"Origin",target:"Target",save:"Save",logs:"Logs",headquarter:"Headquarters",barracks:"Barracks",tavern:"Tavern",hospital:"Hospital",preceptory:"Hall of Orders",chapel:"Chapel",church:"Church",academy:"Academy",rally_point:"Rally Point",statue:"Statue",market:"Market",timber_camp:"Timber Camp",clay_pit:"Clay Pit",iron_mine:"Iron Mine",farm:"Farm",warehouse:"Warehouse",wall:"Wall",spear:"Spearman",sword:"Swordsman",axe:"Axe Fighter",archer:"Archer",light_cavalry:"Light Cavalry",mounted_archer:"Mounted Archer",heavy_cavalry:"Heavy Cavalry",ram:"Ram",catapult:"Catapult",doppelsoldner:"Berserker",trebuchet:"Trebuchet",snob:"Nobleman",knight:"Paladin","no-results":"No results...",selected:"Selected",now:"Now",costs:"Costs",duration:"Duration",points:"Points",player:"Player",players:"Players",next_features:"Next features",misc:"Miscellaneous",colors:"Colors"}},"pl")}),define("two/administrator",["two/locale","two/ready","Lockr"],function(a,b,c){var d={};return d.version="1.0.0",d.init=function(){a.create("administrator",{en:{title:"Wojewoda",presets:"Przypisz szablony",army:"Wojsko","presets-all":"Wszystkie szablony","presets.all":"Przypisz wszystkie szablony do wszystkich wiosek.",asigningAll:"Przypisuje wszystkie szablony","presets-name":"Szablony z nazwą","entry/name":"Wpisz frazę","presets.name":"Przypisz szablony zawierające wskazaną frazę do wszystkich wiosek.",asigningName:"Przypisuje określone szablony","presets-group":"Szablony do grupy","entry/group":"Wpisz nazwę grupy","presets.group":"Przypisz wszystkie szablony do wybranej grupy wiosek.",asigningGroup:"Przypisuje szablony do wybranej grupy","presets-ng":"Szablony - zaawansowane przypisywanie","presets.ng":"Przypisz szablony zawierające wskazaną fraze do wybranej grupy wiosek.",asigningNG:"Przypisuje określone szablony do wybranej grupy wiosek",asign:"Przypisz",check:"Sprawdź ilość jednostek w wioskach","check.tip":"Zlicza jednostki w wioskach","check.btn":"Zlicz","army.amounts":"Wojsko",unit:"Jednostka",available:"Dostępne",own:"Posiadane","in-town":"W wioskach",support:"Wsparcie",recruiting:"W rekrutacji",total:"Wszystko",calculated:"Wojsko zliczone!",assigned:"Szablony przypisane!",assignedN:"Szablony przypisane wg nazwy!",assignedG:"Szablony przypisane do grupy wiosek!",assignedNG:"Szablony przypisane wg nazwy do grupy wiosek!","deffensive-troops":"Defensywne jednostki","offensive-troops":"Ofensywne jednostki","special-troops":"Specjalne jednostki"},pl:{title:"Wojewoda",presets:"Przypisz szablony",army:"Wojsko","presets-all":"Wszystkie szablony","presets.all":"Przypisz wszystkie szablony do wszystkich wiosek.",asigningAll:"Przypisuje wszystkie szablony","presets-name":"Szablony z nazwą","entry/name":"Wpisz frazę","presets.name":"Przypisz szablony zawierające wskazaną frazę do wszystkich wiosek.",asigningName:"Przypisuje określone szablony","presets-group":"Szablony do grupy","entry/group":"Wpisz nazwę grupy","presets.group":"Przypisz wszystkie szablony do wybranej grupy wiosek.",asigningGroup:"Przypisuje szablony do wybranej grupy","presets-ng":"Szablony - zaawansowane przypisywanie","presets.ng":"Przypisz szablony zawierające wskazaną fraze do wybranej grupy wiosek.",asigningNG:"Przypisuje określone szablony do wybranej grupy wiosek",asign:"Przypisz",check:"Sprawdź ilość jednostek w wioskach","check.tip":"Zlicza jednostki w wioskach","check.btn":"Zlicz","army.amounts":"Wojsko",unit:"Jednostka",available:"Dostępne",own:"Posiadane","in-town":"W wioskach",support:"Wsparcie",recruiting:"W rekrutacji",total:"Wszystko",calculated:"Wojsko zliczone!",assigned:"Szablony przypisane!",assignedN:"Szablony przypisane wg nazwy!",assignedG:"Szablony przypisane do grupy wiosek!",assignedNG:"Szablony przypisane wg nazwy do grupy wiosek!","deffensive-troops":"Defensywne jednostki","offensive-troops":"Ofensywne jednostki","special-troops":"Specjalne jednostki"},us:{title:"ArmyHelper",presets:"Assign Presets",army:"Army","presets-all":"All presets","presets.all":"Assign all presets to all villages.",asigningAll:"Assign all presets","presets-name":"Presets by name","entry/name":"Entry name","presets.name":"Assign presets which contains entered word to all villages.",asigningName:"Assign specified presets","presets-group":"Presets to group","entry/group":"Entry group name","presets.group":"Assign all presets to group of villages.",asigningGroup:"Assign presets to specified group","presets-ng":"Presets by name to group","presets.ng":"Assign presets which contains entered word to group of villages.",asigningNG:"Assign specified presets to specified group",asign:"Assign",check:"Check army in villages","check.tip":"Check amounts of units on all villages","check.btn":"Check","army.amounts":"Army amounts",unit:"Unit",available:"Available",own:"Own","in-town":"In town",support:"Support",recruiting:"Recruiting",total:"Total",calculated:"Army calculated!",assigned:"Presets assigned!",assignedN:"Presets assigned by name!",assignedG:"Presets assigned to villages group!",assignedNG:"Presets assigned by name to villages group!","deffensive-troops":"Deffensive troops","offensive-troops":"Offensive troops","special-troops":"Special troops"}},"pl"),d.initialized=!0},d.run=function(){if(!d.interfaceInitialized)throw new Error("ArmyHelper interface not initialized");b(function(){$player=e.getSelectedCharacter()},["initial_village"])},d}),define("two/administrator/data",["two/administrator"],function(a){var b={};a.data=b}),require(["two/ready","two/administrator","two/administrator/data","two/administrator/ui"],function(a,b){if(b.initialized)return!1;a(function(){b.init(),b.interface(),b.run()})}),define("two/administrator/ui",["two/administrator","two/locale","two/ui","two/ui/autoComplete","two/FrontButton","two/utils","two/eventQueue","ejs","struct/MapData","cdn","Lockr"],function(a,b,d,f,g,h,k,l,m,n,o){var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a=function(){s.on("click",function(){function a(){var a=k.reduce(function(a,b,c){return a[c]=b,a},{});m.content=a,setTimeout(c,3e3)}function c(){j.forEach(function(a,b){setTimeout(function(){e.emit(f.ASSIGN_PRESETS,{village_id:a.getId(),preset_ids:m.content})},b*l*Math.random())}),
h.emitNotif("success",b("administrator","assigned"))}var d=injector.get("modelDataService"),e=injector.get("socketService"),f=injector.get("routeProvider"),g=d.getSelectedCharacter(),j=g.getVillageList(),k=[],l=5e3,m={content:{}};!function(){e.emit(f.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)k.push(a.presets[i].id)}),setTimeout(a,3e3)}()}),t.on("click",function(){function a(){var a=k.reduce(function(a,b,c){return a[c]=b,a},{});m.content=a,setTimeout(c,3e3)}function c(){j.forEach(function(a,b){nameN=a.getName(),setTimeout(function(){e.emit(f.ASSIGN_PRESETS,{village_id:a.getId(),preset_ids:m.content});a.getName()},b*l*Math.random())}),h.emitNotif("success",b("administrator","assignedN"))}var d=injector.get("modelDataService"),e=injector.get("socketService"),f=injector.get("routeProvider"),g=d.getSelectedCharacter(),j=g.getVillageList(),k=[],l=5e3,m={content:{}},n=document.getElementById("presetsName").value;!function(){e.emit(f.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name.indexOf(n)>=0&&k.push(a.presets[i].id)}),setTimeout(a,3e3)}()}),u.on("click",function(){function a(){var a=l.reduce(function(a,b,c){return a[c]=b,a},{});n.content=a,setTimeout(c,3e3)}function c(){k.forEach(function(a,b){setTimeout(function(){e.emit(f.ASSIGN_PRESETS,{village_id:a,preset_ids:n.content})},b*m*Math.random())}),h.emitNotif("success",b("administrator","assignedG"))}var d=injector.get("modelDataService"),e=injector.get("socketService"),f=injector.get("routeProvider"),g=(d.getSelectedCharacter(),d.getGroupList()),j=Za[0].dataset.value,k=g.getGroupVillageIds(j),l=[],m=5e3,n={content:{}};!function(){e.emit(f.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)l.push(a.presets[i].id)}),setTimeout(a,3e3)}()}),v.on("click",function(){function a(){var a=l.reduce(function(a,b,c){return a[c]=b,a},{});n.content=a,setTimeout(c,3e3)}function c(){k.forEach(function(a,b){setTimeout(function(){e.emit(f.ASSIGN_PRESETS,{village_id:a,preset_ids:n.content})},b*m*Math.random())}),h.emitNotif("success",b("administrator","assignedG"))}var d=injector.get("modelDataService"),e=injector.get("socketService"),f=injector.get("routeProvider"),g=(d.getSelectedCharacter(),d.getGroupList()),j=$a[0].dataset.value,k=g.getGroupVillageIds(j),l=[],m=5e3,n={content:{}},o=document.getElementById("presetsN").value;!function(){e.emit(f.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name.indexOf(o)>=0&&l.push(a.presets[i].id)}),setTimeout(a,3e3)}()}),w.on("click",function(){function a(){x.html(SpearA),y.html(SpearO),z.html(SpearI),A.html(SpearS),B.html(SpearR),C.html(SpearT),D.html(SwordA),E.html(SwordO),F.html(SwordI),G.html(SwordS),H.html(SwordR),I.html(SwordT),J.html(AxeA),K.html(AxeO),L.html(AxeI),M.html(AxeS),N.html(AxeR),O.html(AxeT),P.html(ArcherA),Q.html(ArcherO),R.html(ArcherI),S.html(ArcherS),T.html(ArcherR),U.html(ArcherT),V.html(LightCavalryA),W.html(LightCavalryO),X.html(LightCavalryI),Y.html(LightCavalryS),Z.html(LightCavalryR),_.html(LightCavalryT),aa.html(MountedArcherA),ba.html(MountedArcherO),ca.html(MountedArcherI),da.html(MountedArcherS),ea.html(MountedArcherR),fa.html(MountedArcherT),ga.html(HeavyCavalryA),ha.html(HeavyCavalryO),ia.html(HeavyCavalryI),ja.html(HeavyCavalryS),ka.html(HeavyCavalryR),la.html(HeavyCavalryT),ma.html(RamA),na.html(RamO),oa.html(RamI),pa.html(RamS),qa.html(RamR),ra.html(RamT),sa.html(CatapultA),ta.html(CatapultO),ua.html(CatapultI),va.html(CatapultS),wa.html(CatapultR),xa.html(CatapultT),ya.html(TrebuchetA),za.html(TrebuchetO),Aa.html(TrebuchetI),Ba.html(TrebuchetS),Ca.html(TrebuchetR),Da.html(TrebuchetT),Ea.html(BerserkerA),Fa.html(BerserkerO),Ga.html(BerserkerI),Ha.html(BerserkerS),Ia.html(BerserkerR),Ja.html(BerserkerT),Ka.html(SnobA),La.html(SnobO),Ma.html(SnobI),Na.html(SnobS),Oa.html(SnobR),Pa.html(SnobT),Qa.html(KnightA),Ra.html(KnightO),Sa.html(KnightI),Ta.html(KnightS),Ua.html(KnightR),Va.html(KnightT),h.emitNotif("success",b("administrator","calculated"))}var c=injector.get("modelDataService"),d=(injector.get("socketService"),injector.get("routeProvider"),c.getSelectedCharacter()),e=d.getVillageList();SpearA=0,SpearO=0,SpearI=0,SpearS=0,SpearR=0,SpearT=0,SwordA=0,SwordO=0,SwordI=0,SwordS=0,SwordR=0,SwordT=0,AxeA=0,AxeO=0,AxeI=0,AxeS=0,AxeR=0,AxeT=0,ArcherA=0,ArcherO=0,ArcherI=0,ArcherS=0,ArcherR=0,ArcherT=0,LightCavalryA=0,LightCavalryO=0,LightCavalryI=0,LightCavalryS=0,LightCavalryR=0,LightCavalryT=0,MountedArcherA=0,MountedArcherO=0,MountedArcherI=0,MountedArcherS=0,MountedArcherR=0,MountedArcherT=0,HeavyCavalryA=0,HeavyCavalryO=0,HeavyCavalryI=0,HeavyCavalryS=0,HeavyCavalryR=0,HeavyCavalryT=0,RamA=0,RamO=0,RamI=0,RamS=0,RamR=0,RamT=0,CatapultA=0,CatapultO=0,CatapultI=0,CatapultS=0,CatapultR=0,CatapultT=0,TrebuchetA=0,TrebuchetO=0,TrebuchetI=0,TrebuchetS=0,TrebuchetR=0,TrebuchetT=0,BerserkerA=0,BerserkerO=0,BerserkerI=0,BerserkerS=0,BerserkerR=0,BerserkerT=0,SnobA=0,SnobO=0,SnobI=0,SnobS=0,SnobR=0,SnobT=0,KnightA=0,KnightO=0,KnightI=0,KnightS=0,KnightR=0,KnightT=0,function(){e.forEach(function(a){var b=a.unitInfo,c=b.units,d=c.spear,e=c.sword,f=c.axe,g=c.archer,h=c.light_cavalry,i=c.mounted_archer,j=c.heavy_cavalry,k=c.ram,l=c.catapult,m=c.trebuchet,n=c.doppelsoldner,o=c.snob,p=c.knight;SpearA+=d.available,SpearO+=d.own,SpearI+=d.in_town,SpearS+=d.support,SpearR+=d.recruiting,SpearT+=d.total,SwordA+=e.available,SwordO+=e.own,SwordI+=e.in_town,SwordS+=e.support,SwordR+=e.recruiting,SwordT+=e.total,AxeA+=f.available,AxeO+=f.own,AxeI+=f.in_town,AxeS+=f.support,AxeR+=f.recruiting,AxeT+=f.total,ArcherA+=g.available,ArcherO+=g.own,ArcherI+=g.in_town,ArcherS+=g.support,ArcherR+=g.recruiting,ArcherT+=g.total,LightCavalryA+=h.available,LightCavalryO+=h.own,LightCavalryI+=h.in_town,LightCavalryS+=h.support,LightCavalryR+=h.recruiting,LightCavalryT+=h.total,MountedArcherA+=i.available,MountedArcherO+=i.own,MountedArcherI+=i.in_town,MountedArcherS+=i.support,MountedArcherR+=i.recruiting,MountedArcherT+=i.total,HeavyCavalryA+=j.available,HeavyCavalryO+=j.own,HeavyCavalryI+=j.in_town,HeavyCavalryS+=j.support,HeavyCavalryR+=j.recruiting,HeavyCavalryT+=j.total,RamA+=k.available,RamO+=k.own,RamI+=k.in_town,RamS+=k.support,RamR+=k.recruiting,RamT+=k.total,CatapultA+=l.available,CatapultO+=l.own,CatapultI+=l.in_town,CatapultS+=l.support,CatapultR+=l.recruiting,CatapultT+=l.total,TrebuchetA+=m.available,TrebuchetO+=m.own,TrebuchetI+=m.in_town,TrebuchetS+=m.support,TrebuchetR+=m.recruiting,TrebuchetT+=m.total,BerserkerA+=n.available,BerserkerO+=n.own,BerserkerI+=n.in_town,BerserkerS+=n.support,BerserkerR+=n.recruiting,BerserkerT+=n.total,SnobA+=o.available,SnobO+=o.own,SnobI+=o.in_town,SnobS+=o.support,SnobR+=o.recruiting,SnobT+=o.total,KnightA+=p.available,KnightO+=p.own,KnightI+=p.in_town,KnightS+=p.support,KnightR+=p.recruiting,KnightT+=p.total}),setTimeout(a,3e3)}()}),c.$on(j.GROUPS_UPDATED,function(){cb()}),Za.on("selectSelected",function(){selectedGroup1=Za[0].dataset.value}),$a.on("selectSelected",function(){selectedGroup2=$a[0].dataset.value})},ab=function(){return Wa=e.getGroupList().getGroups(),p=new d("ArmyHelper",{activeTab:"presets",template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("administrator", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-two-col"><div class="tab" tab="presets"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("administrator", "presets") #></a></div></div></div><div class="tab" tab="army"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("administrator", "army") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-presets"><h5 class="twx-section"><#= locale("administrator", "presets-all") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col><col width="18%"></colgroup><tbody><tr><td class="item-name"><#= locale("administrator", "presets.all") #></td><td class="item-asignAll"><span class="btn btn-orange addSelected" tooltip="<#= locale("administrator", "asigningAll") #>"><#= locale("administrator", "asign") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("administrator", "presets-name") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="presetsName" value="" autocomplete="off" placeholder="<#= locale("administrator", "entry/name") #>"></td><td class="item-name"><#= locale("administrator", "presets.name") #></td><td class="item-asignName"><span class="btn btn-orange addSelected" tooltip="<#= locale("administrator", "asigningName") #>"><#= locale("administrator", "asign") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("administrator", "presets-group") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="18%"></colgroup><tbody><tr><td><select data-setting="group1" class="group1"></select></td><td class="item-name"><#= locale("administrator", "presets.group") #></td><td class="item-asignGroup"><span class="btn btn-orange addSelected" tooltip="<#= locale("administrator", "asigningGroup") #>"><#= locale("administrator", "asign") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("administrator", "presets-ng") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col width="20%"><col><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="presetsN" value="" autocomplete="off" placeholder="<#= locale("administrator", "entry/name") #>"></td><td><select data-setting="group2" class="group2"></select></td><td class="item-name"><#= locale("administrator", "presets.ng") #></td><td class="item-asignNG"><span class="btn btn-orange addSelected" tooltip="<#= locale("administrator", "asigningNG") #>"><#= locale("administrator", "asign") #></span></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-army"><h5 class="twx-section"><#= locale("administrator", "check") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col></colgroup><tbody><tr><td class="item-check"><span class="btn btn-orange addSelected" tooltip="<#= locale("administrator", "check.tip") #>"><#= locale("administrator", "check.btn") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("administrator", "army.amounts") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col><col width="13%"><col width="13%"><col width="13%"><col width="13%"><col width="13%"><col width="13%"></colgroup><tbody><tr><th class="item-head"><#= locale("administrator", "unit") #></th><th class="item-head"><#= locale("administrator", "available") #></th><th class="item-head"><#= locale("administrator", "own") #></th><th class="item-head"><#= locale("administrator", "in-town") #></th><th class="item-head"><#= locale("administrator", "support") #></th><th class="item-head"><#= locale("administrator", "recruiting") #></th><th class="item-head"><#= locale("administrator", "total") #></th></tr><tr><td class="item-name" colspan="7"><#= locale("administrator", "deffensive-troops") #></td></tr><tr><td class="item-name"><#= locale("common", "spear") #></td><td class="item-spear-a"></td><td class="item-spear-o"></td><td class="item-spear-i"></td><td class="item-spear-s"></td><td class="item-spear-r"></td><td class="item-spear-t"></td></tr><tr><td class="item-name"><#= locale("common", "sword") #></td><td class="item-sword-a"></td><td class="item-sword-o"></td><td class="item-sword-i"></td><td class="item-sword-s"></td><td class="item-sword-r"></td><td class="item-sword-t"></td></tr><tr><td class="item-name"><#= locale("common", "archer") #></td><td class="item-archer-a"></td><td class="item-archer-o"></td><td class="item-archer-i"></td><td class="item-archer-s"></td><td class="item-archer-r"></td><td class="item-archer-t"></td></tr><tr><td class="item-name"><#= locale("common", "heavy_cavalry") #></td><td class="item-hc-a"></td><td class="item-hc-o"></td><td class="item-hc-i"></td><td class="item-hc-s"></td><td class="item-hc-r"></td><td class="item-hc-t"></td></tr><tr><td class="item-name"><#= locale("common", "trebuchet") #></td><td class="item-trebuchet-a"></td><td class="item-trebuchet-o"></td><td class="item-trebuchet-i"></td><td class="item-trebuchet-s"></td><td class="item-trebuchet-r"></td><td class="item-trebuchet-t"></td></tr><tr><td class="item-name" colspan="7"><#= locale("administrator", "offensive-troops") #></td></tr><tr><td class="item-name"><#= locale("common", "axe") #></td><td class="item-axe-a"></td><td class="item-axe-o"></td><td class="item-axe-i"></td><td class="item-axe-s"></td><td class="item-axe-r"></td><td class="item-axe-t"></td></tr><tr><td class="item-name"><#= locale("common", "light_cavalry") #></td><td class="item-lc-a"></td><td class="item-lc-o"></td><td class="item-lc-i"></td><td class="item-lc-s"></td><td class="item-lc-r"></td><td class="item-lc-t"></td></tr><tr><td class="item-name"><#= locale("common", "mounted_archer") #></td><td class="item-ma-a"></td><td class="item-ma-o"></td><td class="item-ma-i"></td><td class="item-ma-s"></td><td class="item-ma-r"></td><td class="item-ma-t"></td></tr><tr><td class="item-name"><#= locale("common", "ram") #></td><td class="item-ram-a"></td><td class="item-ram-o"></td><td class="item-ram-i"></td><td class="item-ram-s"></td><td class="item-ram-r"></td><td class="item-ram-t"></td></tr><tr><td class="item-name"><#= locale("common", "catapult") #></td><td class="item-catapult-a"></td><td class="item-catapult-o"></td><td class="item-catapult-i"></td><td class="item-catapult-s"></td><td class="item-catapult-r"></td><td class="item-catapult-t"></td></tr><tr><td class="item-name"><#= locale("common", "doppelsoldner") #></td><td class="item-doppelsoldner-a"></td><td class="item-doppelsoldner-o"></td><td class="item-doppelsoldner-i"></td><td class="item-doppelsoldner-s"></td><td class="item-doppelsoldner-r"></td><td class="item-doppelsoldner-t"></td></tr><tr><td class="item-name" colspan="7"><#= locale("administrator", "special-troops") #></td></tr><tr><td class="item-name"><#= locale("common", "snob") #></td><td class="item-snob-a"></td><td class="item-snob-o"></td><td class="item-snob-i"></td><td class="item-snob-s"></td><td class="item-snob-r"></td><td class="item-snob-t"></td></tr><tr><td class="item-name"><#= locale("common", "knight") #></td><td class="item-knight-a"></td><td class="item-knight-o"></td><td class="item-knight-i"></td><td class="item-knight-s"></td><td class="item-knight-r"></td><td class="item-knight-t"></td></tr></tbody></table></form></div></div></div>',css:"#ArmyHelper .addForm input{width:100%}#ArmyHelper .addForm td{text-align:center}#ArmyHelper .addForm th{text-align:center;padding:0}#ArmyHelper .addForm span{height:26px;line-height:26px;padding:0 10px}#ArmyHelper .group1{width:175px}#ArmyHelper .group2{width:175px}",replaces:{locale:b,version:a.version,types:["village","character"]}}),q=new g(b("administrator","title"),{classHover:!1,classBlur:!1,onClick:function(){p.openWindow()}}),r=$(p.$window),s=r.find(".item-asignAll span"),t=r.find(".item-asignName span"),u=r.find(".item-asignGroup span"),v=r.find(".item-asignNG span"),w=r.find(".item-check span"),x=r.find(".item-spear-a"),y=r.find(".item-spear-o"),z=r.find(".item-spear-i"),A=r.find(".item-spear-s"),B=r.find(".item-spear-r"),C=r.find(".item-spear-t"),D=r.find(".item-sword-a"),E=r.find(".item-sword-o"),F=r.find(".item-sword-i"),G=r.find(".item-sword-s"),H=r.find(".item-sword-r"),I=r.find(".item-sword-t"),J=r.find(".item-axe-a"),K=r.find(".item-axe-o"),L=r.find(".item-axe-i"),M=r.find(".item-axe-s"),N=r.find(".item-axe-r"),O=r.find(".item-axe-t"),P=r.find(".item-archer-a"),Q=r.find(".item-archer-o"),R=r.find(".item-archer-i"),S=r.find(".item-archer-s"),T=r.find(".item-archer-r"),U=r.find(".item-archer-t"),V=r.find(".item-lc-a"),W=r.find(".item-lc-o"),X=r.find(".item-lc-i"),Y=r.find(".item-lc-s"),Z=r.find(".item-lc-r"),_=r.find(".item-lc-t"),aa=r.find(".item-ma-a"),ba=r.find(".item-ma-o"),ca=r.find(".item-ma-i"),da=r.find(".item-ma-s"),ea=r.find(".item-ma-r"),fa=r.find(".item-ma-t"),ga=r.find(".item-hc-a"),ha=r.find(".item-hc-o"),ia=r.find(".item-hc-i"),ja=r.find(".item-hc-s"),ka=r.find(".item-hc-r"),la=r.find(".item-hc-t"),ma=r.find(".item-ram-a"),na=r.find(".item-ram-o"),oa=r.find(".item-ram-i"),pa=r.find(".item-ram-s"),qa=r.find(".item-ram-r"),ra=r.find(".item-ram-t"),sa=r.find(".item-catapult-a"),ta=r.find(".item-catapult-o"),ua=r.find(".item-catapult-i"),va=r.find(".item-catapult-s"),wa=r.find(".item-catapult-r"),xa=r.find(".item-catapult-t"),ya=r.find(".item-trebuchet-a"),za=r.find(".item-trebuchet-o"),Aa=r.find(".item-trebuchet-i"),Ba=r.find(".item-trebuchet-s"),Ca=r.find(".item-trebuchet-r"),Da=r.find(".item-trebuchet-t"),Ea=r.find(".item-berserker-a"),Fa=r.find(".item-berserker-o"),Ga=r.find(".item-berserker-i"),Ha=r.find(".item-berserker-s"),Ia=r.find(".item-berserker-r"),Ja=r.find(".item-berserker-t"),Ka=r.find(".item-snob-a"),La=r.find(".item-snob-o"),Ma=r.find(".item-snob-i"),Na=r.find(".item-snob-s"),Oa=r.find(".item-snob-r"),Pa=r.find(".item-snob-t"),Qa=r.find(".item-knight-a"),Ra=r.find(".item-knight-o"),Sa=r.find(".item-knight-i"),Ta=r.find(".item-knight-s"),Ua=r.find(".item-knight-r"),Va=r.find(".item-knight-t"),Xa=r.find(".group1"),Ya=r.find(".group2"),Za=r.find(".group1"),$a=r.find(".group2"),cb(),db(),_a(),a.interfaceInitialized=!0,p},bb=function(a,b){var c=document.createElement("span");for(var d in b)c.dataset[d]=b[d];a.append(c)},cb=function(){var a=(Xa.find(".custom-select-handler").html(""),Xa.find(".custom-select-data").html(""));for(var b in Wa){var c=Wa[b].name;bb(a,{name:c,value:b,icon:Wa[b].icon}),Xa.append(a)}},db=function(){var a=(Ya.find(".custom-select-handler").html(""),Ya.find(".custom-select-data").html(""));for(var b in Wa){var c=Wa[b].name;bb(a,{name:c,value:b,icon:Wa[b].icon}),Ya.append(a)}};a.interface=function(){a.interface=ab()}}),define("two/attackView",["two/queue","two/eventQueue","two/ready","two/locale","models/CommandModel","conf/unitTypes","Lockr","helper/math","helper/mapconvert","struct/MapData"],function(a,b,d,h,i,k,l,m,n,o){for(var p={ORIGIN_VILLAGE:"origin_village_name",COMMAND_TYPE:"command_type",TARGET_VILLAGE:"target_village_name",TIME_COMPLETED:"time_completed",COMMAND_PROGRESS:"command_progress",ORIGIN_CHARACTER:"origin_character_name"},q={ATTACK:"attack",SUPPORT:"support",RELOCATE:"relocate"},r={COMMAND_TYPES:"commandTypes",VILLAGE:"village",INCOMING_UNITS:"incomingUnits"},s=[k.LIGHT_CAVALRY,k.HEAVY_CAVALRY,k.AXE,k.SWORD,k.RAM,k.SNOB,k.TREBUCHET],t={},u=0;u<s.length;u++)t[s[u]]=!0;var v,w=!1,x={},y=injector.get("overviewService"),z=[],A={},B={},C={reverse:!1,column:p.COMMAND_PROGRESS},D=function(){var a,b,c=[r.COMMAND_TYPES],d=e.getSelectedVillage().getId(),f={};for(a=0;a<c.length;a++)for(b in A[c[a]])if(f[c[a]]||(f[c[a]]=[]),A[c[a]][b])switch(c[a]){case r.COMMAND_TYPES:"ATTACK"===b?f[c[a]].push(q.ATTACK):"SUPPORT"===b?f[c[a]].push(q.SUPPORT):"RELOCATE"===b&&f[c[a]].push(q.RELOCATE)}B=f,B.village=A[r.VILLAGE]?[d]:[]},E=function(a,c){c?A[a][c]=!A[a][c]:A[a]=!A[a],D(),b.trigger("attackView/filtersChanged")},F=function(a){if(!p[a])return!1;p[a]===C.column?C.reverse=!C.reverse:(C.column=p[a],C.reverse=!1),b.trigger("attackView/sortingChanged")},G=function(){O()},H=function(a,c){b.trigger("attackView/commandCancelled",[c.id||c.command_id])},I=function(a,c){for(var d=0;d<z.length;d++)z[d].command_id===c.command_id&&z.splice(d,1);b.trigger("attackView/commandIgnored",[c.command_id])},J=function(a,c){for(var d=0;d<z.length;d++)z[d].target_village_id===c.village_id&&(z[d].target_village_name=c.name,z[d].targetVillage.name=c.name);b.trigger("attackView/villageRenamed",[c])},K=function(a,b){B[r.VILLAGE].length&&(B[r.VILLAGE]=[b],O())},L=function(){l.set("attackView-filters",A),O()},M=function(){O()},N=function(a){z=a.commands;for(var c=0;c<z.length;c++)y.formatCommand(z[c]),z[c].slowestUnit=P(z[c]);z=z.filter(function(a){return A[r.INCOMING_UNITS][a.slowestUnit]}),b.trigger("attackView/commandsLoaded",[z])},O=function(){var a=v.getCommandListModel().getIncomingCommands().length,b=a>25?a:25;f.emit(g.OVERVIEW_GET_INCOMING,{count:b,offset:0,sorting:C.column,reverse:C.reverse?1:0,groups:[],command_types:B[r.COMMAND_TYPES],villages:B[r.VILLAGE]},N)},P=function(b){var c=b.model.duration,d={},e={x:b.origin_x,y:b.origin_y},f={x:b.target_x,y:b.target_y},g=[];return s.forEach(function(c){d[c]=1,g.push({unit:c,duration:a.getTravelTime(e,f,d,b.command_type,{})})}),g=g.map(function(a){return a.duration=Math.abs(a.duration-c),a}).sort(function(a,b){return a.duration-b.duration}),g[0].unit},Q=function(){return z},R=function(){return A},S=function(){return C},T=function(){x[j.COMMAND_INCOMING]=c.$on(j.COMMAND_INCOMING,G),x[j.COMMAND_CANCELLED]=c.$on(j.COMMAND_CANCELLED,H),x[j.MAP_SELECTED_VILLAGE]=c.$on(j.MAP_SELECTED_VILLAGE,K),x[j.VILLAGE_NAME_CHANGED]=c.$on(j.VILLAGE_NAME_CHANGED,J),x[j.COMMAND_IGNORED]=c.$on(j.COMMAND_IGNORED,I)},U=function(){for(var a in x)x[a]()},V=function(a,b){return a.sort(function(a,c){return m.actualDistance(b,a)-m.actualDistance(b,c)})},W=function(a,b){if(o.hasTownDataInChunk(a.x,a.y)){var c,d,f,g=o.loadTownData(a.x,a.y,25,25,25),h=[],i=[],j=[],k=[],l=e.getSelectedCharacter().getTribeId(),m=e.getSelectedCharacter().getId();if(g.forEach(function(a){for(d in a.data)for(f in a.data[d])h.push(a.data[d][f])}),i=h.filter(function(a){return null===a.character_id&&a.id>0}),j=h.filter(function(b){return b.character_id===m&&a.id!==b.id}),l&&(k=h.filter(function(a){return l&&a.tribe_id===l})),i.length)c=V(i,a);else if(j.length)c=V(j,a);else{if(!k.length)return b(!1);c=V(k,a)}return b(c[0])}var p=n.scaledGridCoordinates(a.x,a.y,25,25,25),q=0;o.loadTownDataAsync(a.x,a.y,25,25,function(){++q===p.length&&W(a,b)})},X=function(b,c){W(b.targetVillage,function(d){var e=b.targetVillage,f=d,g=null===f.character_id?"attack":"support";a.addCommand({origin:e,target:f,date:c,dateType:"out",units:{spear:"*",sword:"*",axe:"*",archer:"*",light_cavalry:"*",mounted_archer:"*",heavy_cavalry:"*",ram:"*",catapult:"*",snob:"*",knight:"*",doppelsoldner:"*",trebuchet:"*"},officers:{},type:g,catapultTarget:"wall"}),a.isRunning()||a.start()})};return{init:function(){h.create("attackView",{en:{title:"Strażnik","filters.tooltip.current-only":"Tylko aktywna wioska","filters.types":"Rodzaj","filters.tooltip.show-attacks":"Pokaż ataki","filters.tooltip.show-supports":"Pokaż wsparcia","filters.tooltip.show-relocations":"Pokaż przeniesienia","filters.incoming-units":"Nadchodzące jednostki","tooltip.command-type":"Rodzaj","tooltip.slowest-unit":"Najwolniejsza jednostka","command-type":"Rodzaj","slowest-unit":"Co?",actions:"Działania",arrive:"Dotrze",arrivetime:"Czas dotarcia skopiowany!",backtime:"Czas powrotu skopiowany!",spyorigin:"Szpiedzy wysłani do %{name}!","no-incoming":"Brak nadchodzących wojsk.","commands.tooltip.spy":"Szpieguj wioske źródłową.","commands.tooltip.copy-arrival":"Kopiuj czas dotarcia.","commands.tooltip.copy-back":"Kopiuj czas powrotu do wioski źródłowej.","commands.tooltip.set-remove":"Wstaw rozkaz wycofania wojsk przed dotarciem ataku do Kolejki rozkazów."},pl:{title:"Strażnik","filters.tooltip.current-only":"Tylko aktywna wioska","filters.types":"Rodzaj","filters.tooltip.show-attacks":"Pokaż ataki","filters.tooltip.show-supports":"Pokaż wsparcia","filters.tooltip.show-relocations":"Pokaż przeniesienia","filters.incoming-units":"Nadchodzące jednostki","tooltip.command-type":"Rodzaj","tooltip.slowest-unit":"Najwolniejsza jednostka","command-type":"Rodzaj","slowest-unit":"Co?",actions:"Działania",arrive:"Dotrze",arrivetime:"Czas dotarcia skopiowany!",backtime:"Czas powrotu skopiowany!",spyorigin:"Szpiedzy wysłani do %{name}!","no-incoming":"Brak nadchodzących wojsk.","commands.tooltip.spy":"Szpieguj wioske źródłową.","commands.tooltip.copy-arrival":"Kopiuj czas dotarcia.","commands.tooltip.copy-back":"Kopiuj czas powrotu do wioski źródłowej.","commands.tooltip.set-remove":"Wstaw rozkaz wycofania wojsk przed dotarciem ataku do Kolejki rozkazów."},pt:{title:"AttackView","filters.tooltip.current-only":"Apenas aldeia selecionada","filters.types":"Tipos","filters.tooltip.show-attacks":"Mostrar ataques","filters.tooltip.show-supports":"Mostrar apoios","filters.tooltip.show-relocations":"Mostrar transferências","filters.incoming-units":"Unidades Chegando","tooltip.command-type":"Tipo de Comando","tooltip.slowest-unit":"Unidade mais Lenta","command-type":"TC","slowest-unit":"UL",actions:"Ações","no-incoming":"Nenhum comando chegando.","commands.tooltip.copy-arrival":"Copiar data de chegada.","commands.tooltip.copy-back":"Copiar backtime.","commands.tooltip.set-remove":"Criar um comando no CommandQueue para remover todas tropas da aldeia antes do comando bater na aldeia."},us:{title:"AttackView","filters.tooltip.current-only":"Current village only","filters.types":"Types","filters.tooltip.show-attacks":"Show attacks","filters.tooltip.show-supports":"Show supports","filters.tooltip.show-relocations":"Show relocations","filters.incoming-units":"Incoming Units","tooltip.command-type":"Command Type","tooltip.slowest-unit":"Slowest Unit","command-type":"CT","slowest-unit":"SU",actions:"Actions",arrive:"Arrive",arrivetime:"Arrive time copied!",backtime:"Back time copied!",spyorigin:"Spies sended on %{name}!","no-incoming":"No commands incoming.","commands.tooltip.spy":"Spy origin village.","commands.tooltip.copy-arrival":"Copy arrival date.","commands.tooltip.copy-back":"Copy backtime date.","commands.tooltip.set-remove":"Set a CommandQueue to remove all troops before the attack hit."}},"pl");var a={};a[r.COMMAND_TYPES]=angular.copy(q),a[r.INCOMING_UNITS]=angular.copy(t),a[r.VILLAGE]=!1,w=!0,v=e.getSelectedCharacter().getGlobalInfo(),A=l.get("attackView-filters",{},!0),angular.merge(A,a),d(function(){D()},["initial_village"]),b.bind("attackView/filtersChanged",L),b.bind("attackView/sortingChanged",M)},version:"1.0.0",loadCommands:O,getCommands:Q,getFilters:R,getSortings:S,toggleFilter:E,toggleSorting:F,FILTER_TYPES:r,COMMAND_TYPES:q,UNIT_SPEED_ORDER:s,COLUMN_TYPES:p,registerListeners:T,unregisterListeners:U,setQueueCommand:X}}),require(["two/ready","two/attackView","two/attackView/ui"],function(a,b){if(b.initialized)return!1;a(function(){b.init(),b.interface()})}),define("two/attackView/ui",["two/attackView","two/queue","two/locale","two/ui","two/FrontButton","two/utils","two/eventQueue","helper/time","conf/unitTypes","ejs"],function(a,b,d,f,g,h,i,l,m,n){var o,q,r,s,t,u,v,w,x=function(){return o=new f("AttackView",{template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("attackView", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="win-main"><div class="box-paper"><div class="filters"><table class="tbl-border-light"><tbody><tr><th><#= locale("common", "village") #></th></tr><tr><td><div class="box-border-dark icon village" tooltip="<#= locale("attackView", "filters.tooltip.current-only") #>"><span class="icon-34x34-village-info icon-bg-black"></span></div></td></tr></tbody></table><table class="tbl-border-light"><tbody><tr><th><#= locale("attackView", "filters.types") #></th></tr><tr><td><div data-filter="ATTACK" class="box-border-dark icon commandTypes attack" tooltip="<#= locale("attackView", "filters.tooltip.show-attacks") #>"><span class="icon-34x34-attack icon-bg-black"></span></div><div data-filter="SUPPORT" class="box-border-dark icon commandTypes support" tooltip="<#= locale("attackView", "filters.tooltip.show-supports") #>"><span class="icon-34x34-support icon-bg-black"></span></div><div data-filter="RELOCATE" class="box-border-dark icon commandTypes relocate" tooltip="<#= locale("attackView", "filters.tooltip.show-relocations") #>"><span class="icon-34x34-relocate icon-bg-black"></span></div></td></tr></tbody></table><table class="tbl-border-light"><tbody><tr><th><#= locale("attackView", "filters.incoming-units") #></th></tr><tr><td> <# UNIT_SPEED_ORDER.forEach(function(unit) { #> <div data-filter="<#= unit #>" class="box-border-dark icon incomingUnits <#= unit #>" tooltip="<#= locale("common", unit) #>"><span class="icon-34x34-unit-<#= unit #> icon-bg-black"></span></div> <# }) #> </td></tr></tbody></table></div><table class="tbl-border-light commands-table"><colgroup><col width="7%"><col width="14%"><col width=""><col width=""><col width="4%"><col width="12%"><col width="15%"></colgroup><thead class="sorting"><tr><th data-sort="COMMAND_TYPE" tooltip="<#= locale("attackView", "tooltip.command-type") #>"><#= locale("attackView", "command-type") #></th><th data-sort="ORIGIN_CHARACTER"><#= locale("common", "player") #></th><th data-sort="ORIGIN_VILLAGE"><#= locale("common", "origin") #></th><th data-sort="TARGET_VILLAGE"><#= locale("common", "target") #></th><th tooltip="<#= locale("attackView", "tooltip.slowest-unit") #>"><#= locale("attackView", "slowest-unit") #></th><th data-sort="TIME_COMPLETED"><#= locale("attackView", "arrive") #></th><th><#= locale("attackView", "actions") #></th></tr></thead><tbody class="commands"></tbody><tbody class="empty"><tr><td colspan="7"><#= locale("attackView", "no-incoming") #></td></tr></tbody></table></div></div></div>',activeTab:"attacks",replaces:{version:a.version,author:{name:"Rafael Mafra",email:"mafrazzrafael@gmail.com",url:"https://github.com/mafrazz"},locale:d,UNIT_SPEED_ORDER:a.UNIT_SPEED_ORDER},
css:'#AttackView table.commands-table{table-layout:fixed;font-size:13px}#AttackView table.commands-table th{text-align:center;padding:0}#AttackView table.commands-table td{padding:1px 0;min-height:initial;border:none;text-align:center}#AttackView table.commands-table tr.attack.snob td{background:#bb8658}#AttackView table.commands-table tr.support td,#AttackView table.commands-table tr.relocate td{background:#9c9368}#AttackView table.commands-table .empty td{height:32px}#AttackView .village .coords{font-size:11px;color:#71471a}#AttackView .village .coords:hover{color:#ffde00;text-shadow:0 1px 0 #000}#AttackView .village .name:hover{color:#fff;text-shadow:0 1px 0 #000}#AttackView .village.selected .name{font-weight:bold}#AttackView .character .name:hover{color:#fff;text-shadow:1px 1px 0 #000}#AttackView .progress-wrapper{height:20px;margin-bottom:0}#AttackView .progress-wrapper .progress-text{position:absolute;width:100%;height:100%;text-align:center;z-index:10;padding:0 5px;line-height:20px;color:#f0ffc9;overflow:hidden}#AttackView .filters{height:95px;margin-bottom:10px}#AttackView .filters table{width:auto;float:left;margin:5px}#AttackView .filters .icon{width:38px;float:left;margin:0 6px}#AttackView .filters .icon.active:before{box-shadow:0 0 0 1px #000,-1px -1px 0 2px #ac9c44,0 0 0 3px #ac9c44,0 0 0 4px #000;border-radius:1px;content:"";position:absolute;width:38px;height:38px;left:-1px;top:-1px}#AttackView .filters td{padding:6px}#AttackView .icon-20x20-backtime{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAEMklEQVQ4y42US2xUdRTGf3funZn/PHqnnVdpKZZ2RCWBVESgoZogSAKKEEAlGhVNLMGg0QiJKxYudIdoTEyDj8SFGo2seDUGhEQqRHk/UimDpdAptHMr8+jM3Dv35QJbi9KEszzJ+eU753z5JKYuOQGBUpAa2SLiuPgBPBKGrZAPlSlmoQLYk4ekqUCmEHHL0pslRb7fsNwWF8L/DIz5Fanftey0oogBr65rk8HS3WC6jyY8ckfZdNtfWdX++tzGIDMabAJmArte4my/l/c//vaLoFc6jmP3iCqD41B5Mi0BId1Hk+V6ljfEQlvWL2xZoY/lKOTLGCY01tZhVLMkRJEtqzoeyUvSnN70SNZRXC1iUylDVZmszhQiDmbH9Lrgpta4mKPlCjy95D6Wrn8GAKFEEfEmdG2Qowd+4I0XFrUC7+w7eL5sCu8hdL3imaQuYFl6c9l021vjYk7Y72Xjq4/z1IaNCCVKMRckq+moiQDJ2bN48uV3GbnSx9b1ra1l0223LL05AYF/Vw4S80jyonnN6paq5YTe3LyU2rpaYrFpJGfPItlcTzI1H8R8cC38NTFiaojhSzeJJ8KNJ/4YOmP43GsTCmWLiGG5LTUBb2LuzGm3e3Ij3321m5Hey6A0AVAcPjmhQcSbuDyU5sF6e5phuS2yRWQC6Lj4x62h1vjJ3BwjlUoiYn52ffolmUtnuXj4ADu2b7/DFoN9RVQ1gAthx8U/+Sk4LiGAQtFAHzXIajpr16yiu/tX98euzyWAzrc6Abj8+1G0TIZ8uYx/xJpgjANlWfEKqjaZbIlixQQgdDHDyuULWLFisZTVdBJxQTIVA2uQ+qZ6KoU0nhqV09f+QoIxj4ThAWRVJWLZToNXUaarYR8Hdm+iZBic7N5LbmgI0xclERcAFLIVAHRtkFOHjwBwNHNryK9I/bZCXlFVIk6ZuSbukidmR1Z+/cliAHzRBjKjBTq37bz9gEAAgA+2vQjAjb4j9F6pUCga/Hzm5v6A5KRDFkXF1UnWRcRj256d/vam9zrJXT0GwGc7V+ONRwAwtTwAa9bs4ND+PTy8MMW5az7+vJ7lXKZ4IeiVjsuIgaylVxTHxf/S84+u3bh5Mbmrx/D6Y1hjGtaYBjduH9g0RonNSmH4o/T1j9JzeoBixSRbsi9ktNIuRXJ6vFVbA2ypVoiZNuay+qj62r6u1R0ee4i65Iw7rDEOnLegC4CSqwxf18b23C0cFMenF5wKJzLZfLDtuW/4pWt1Ry6XY8/ug8jRB6gN3GI0k6VtXcq9csvqtm2rTyjS+YDkpGXEgLdq/z++EhA2hYjbmMtMx7P8+4/Wbdj64U89/cP5Xlli2HGcUsAnjziulMGxbrheRu4lYH21QjSarvXQoraZbQC/nUoflzwMyx6hVz26MRVkysROQNhQ8XmqQr1XwH/rb2Du69Eebp25AAAAAElFTkSuQmCC")}#AttackView .icon-20x20-arrivetime{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAEW0lEQVQ4y4WUWWxUZRiGn7PMnNPOVtvODHQBSlulAUFBoQiEaBHBhCsSFaIhIe6JSyAkRkO8NpErY2KoYuINISkkRFAjEUyAUCQsBSu1BVpKZ2DmTNuZzsyZMz3L70Vbgkjqe/Ul//89//K9eSX+KyUKFcVKQopDxBNoALJE2VXJBUzyBpQA9xG9SA+DbF2vdRxrvqQqLWVHNAkITm8saKo0KBz3hqrqt32WlXkUWHoQZvlpQFbWmLZo//zj7W8ua7JRUoKSz+DOXYVrSZMfjnV/W+mTuvHcs/okIw9DFYAoBCw/DY6QX9yycemer9/p6KiQE7ilIj4vwNXBFIO3M1iFLKta4suNvLUwZzpZTxWZiEvJhMkHgYpf1+cKSazfsnHpnve2rVqYTg2xdvMrPL76JWKNNSxesYB1LyyDiQQ9fWkCmhxzkRuLZTcpVC1lOU4eEDNPDUzitJVc6eUDn6zuSAwl2PDGLqrnx9ECPob6kkxaPiLBEK1LniIaFVz/c4SAJsf6U2ZaEfZwxMOYuaVCJTWypKz68LXV7y6sigWf7thMdfMKkMOgryA2r5pYYwWBaA3FzBhFM8uiRXFOnumn/jGt0SjYl8t+MWzbFABkxSFSdkTTE3F3zkDyBnptw/2J5VMXpwq1gfT1AQ4eOIyi1AHw5II5hCp80bIjmhSHyEyP7Ak0AcFwuIKR/vy/PLVv7156T/1M4u8e9n/1HXqNRnNzjMS9AuGQBlMfF5zxKoA6U2hph5xp0nv+ErX1KVqfXctbH+yk65tOAOa1tolNm56TjIyFNVpmIl8GwBMEHnSzKkuUJUHh8vAYcihMIFQi3hAHZ4T65hq27dyKkbGI1uqS7a/mXO8F+gZGuDZ0j4nClFsU1adj2wrgyq5KTlOlwTOJ8STApVO/Y2VGAJgwSgBEa3VsfzXZZJKLvxyjWC7z8+G3CQf9+FS13nG9ueEwEUBRqmywEfrAvWLF4rqq5fmiwCvcIjuqYCTu8v5nnXQd7+bgoZ/48dduXF8F4ZpaNj0/j60bgly+YLTeNMyUYosxPUhONaBUpeq3K7G7T/Ym2pfWh5ZU1MzBX/0XV/64iVYe4+jR3QD4aqeGaWdylPNjABw9upv9X3R+9GVXwsjmrZQCiJDjOI4scjnTyZZc0ZhKJmM9PcNYlsu4CLJjez3jt65ij45jpZPYhVG8SRNFrcQc7eeZ9evIl9xI96Xh4yqAAaXoJCOW3zuRGjfNwbRob6wNbkkYxTizaDx9B0+pY93rnWdTYxPf+xQ9p0yvCRPciEtJqFpKEfZwyXaupArOYLbM+JK2lS3HDhyRbgwanO6eoPvEaWLxOixLY+WOrrP5onUI4Z2TdMeQZgtYySaGrM6VJVFfmnRjsiwHXEG8KR5p2/fpxjWv7jpyyCd7JxR8v03nY0Fidt2H+z1dcz1LFx7xlctb2gHO9wz1+CS1L2tZSabD4f+Asx7g+a0JbYJJg6lgAPgHUh4QWRIJr4EAAAAASUVORK5CYII=")}#AttackView .icon-20x20-spy{background-image:url("https://twxen.innogamescdn.com/img/icons/alpha_907725c8a7.png");background-position:-509px -966px;height:20px;width:20px}',onClose:function(){a.unregisterListeners()}}),q=new g(d("attackView","title"),{onClick:function(){a.registerListeners(),a.loadCommands(),y(),o.openWindow()},classHover:!1,classBlur:!1}),r=$(o.$window),s=r.find(".commands"),t=r.find(".empty"),v=r.find(".filters"),u={village:v.find(".village"),commandTypes:{ATTACK:v.find(".attack"),SUPPORT:v.find(".support"),RELOCATE:v.find(".relocate")},incomingUnits:{light_cavalry:v.find(".light_cavalry"),heavy_cavalry:v.find(".heavy_cavalry"),axe:v.find(".axe"),sword:v.find(".sword"),ram:v.find(".ram"),snob:v.find(".snob"),trebuchet:v.find(".trebuchet")}},w=r.find(".sorting th[data-sort]"),u.village.on("click",function(){a.toggleFilter(a.FILTER_TYPES.VILLAGE)}),v.find(".commandTypes").on("click",function(){a.toggleFilter(a.FILTER_TYPES.COMMAND_TYPES,this.dataset.filter)}),v.find(".incomingUnits").on("click",function(){a.toggleFilter(a.FILTER_TYPES.INCOMING_UNITS,this.dataset.filter)}),w.on("click",function(){a.toggleSorting(this.dataset.sort)}),setInterval(function(){o.isVisible("attacks")&&y()},1e3),i.bind("attackView/commandsLoaded",z),i.bind("attackView/commandCancelled",A),i.bind("attackView/commandIgnored",B),i.bind("attackView/villageRenamed",C),i.bind("attackView/filtersChanged",G),i.bind("attackView/sortingChanged",H),c.$on(j.MAP_SELECTED_VILLAGE,D),G(),o},y=function(){for(var b,c=a.getCommands(),d=.001*Date.now(),e=0;e<c.length;e++)b=c[e].model.percent(),100!==b?(c[e].$arrivalProgress.style.width=b+"%",c[e].$arrivalIn.innerHTML=l.readableSeconds(l.server2ClientTimeInSeconds(c[e].time_completed-d))):c[e].$command.remove()},z=function(b){s.children().remove();var c=Date.now();if(!b.length)return t.css("display","");t.hide(),b.forEach(function(b){var e=document.createElement("tr"),f=1e3*b.time_completed,g=h.formatDate(f,"HH:mm:ss dd/MM/yyyy"),i=l.server2ClientTimeInSeconds(f-c),j=l.readableMilliseconds(i,!1,!0),o=b.time_completed-b.time_start,q=1e3*(b.time_completed+o),r=h.formatDate(q,"HH:mm:ss dd/MM/yyyy"),t="command-"+b.command_id+" "+b.command_type;b.slowestUnit===m.SNOB&&(t+=" snob"),e.className=t,e.innerHTML=n.render('<td class="commandType"><span class="icon-20x20-<#= commandType #>"></span></td><td class="originCharacter character player-<#= originCharacter.id #>"><span class="name"><#= originCharacter.name #> </span></td><td class="originVillage village village-<#= originVillage.id #>"><span class="name"><#= originVillage.name #></span><span class="coords"> <#= originVillage.x #>|<#= originVillage.y #></span></td><td class="targetVillage village village-<#= targetVillage.id #>"><span class="name"><#= targetVillage.name #></span><span class="coords"> <#= targetVillage.x #>|<#= targetVillage.y #></span></td><td><span class="icon-20x20-unit-<#= slowestUnit #>"></span></td><td><div class="progress-wrapper" tooltip="<#= arrivalDate #>"><div class="progress-bar arrivalProgress" style="width:<#= progress #>%"></div><div class="progress-text"><span class="arrivalIn"><#= arrivalIn #></span></div></div></td><td class="actions"><a class="spyVillage btn btn-orange size-20x20 icon-20x20-spy" tooltip="<#= locale("attackView", "commands.tooltip.spy") #>"></a> <a class="copyArriveTime btn btn-orange size-20x20 icon-20x20-arrivetime" tooltip="<#= locale("attackView", "commands.tooltip.copy-arrival") #>"></a> <a class="copyBackTime btn btn-red size-20x20 icon-20x20-backtime" tooltip="<#= locale("attackView", "commands.tooltip.copy-back") #>"></a> <a class="removeTroops btn btn-orange size-20x20 icon-20x20-units-outgoing" tooltip="<#= locale("attackView", "commands.tooltip.set-remove") #>"></a></td>',{locale:d,originCharacter:b.originCharacter,originVillage:b.originVillage,targetVillage:b.targetVillage,arrivalDate:g,arrivalIn:j,slowestUnit:b.slowestUnit,progress:b.model.percent(),commandType:b.command_type});var u=e.querySelector(".originCharacter .name"),v=e.querySelector(".originVillage .name"),w=e.querySelector(".originVillage .coords"),x=e.querySelector(".targetVillage .name"),y=e.querySelector(".targetVillage .coords"),z=e.querySelector(".arrivalProgress"),A=e.querySelector(".arrivalIn"),B=e.querySelector(".spyVillage"),C=e.querySelector(".removeTroops"),D=e.querySelector(".copyArriveTime"),E=e.querySelector(".copyBackTime");u.addEventListener("click",function(){k.openCharacterProfile(b.originCharacter.id)}),v.addEventListener("click",function(){k.openVillageInfo(b.originVillage.id)}),w.addEventListener("click",function(){p.jumpToVillage(b.originVillage.x,b.originVillage.y)}),x.addEventListener("click",function(){k.openVillageInfo(b.targetVillage.id)}),y.addEventListener("click",function(){p.jumpToVillage(b.targetVillage.x,b.targetVillage.y)}),B.addEventListener("click",function(){var a=b.originVillage.id,c=b.originVillage.name,d=injector.get("modelDataService"),e=injector.get("socketService"),f=injector.get("routeProvider"),g=d.getSelectedCharacter(),i=g.getVillageList(),j=0;i.forEach(function(b,d){var g=b.scoutingInfo,i=g.spies;setTimeout(function(){i.forEach(function(d,g){1==d.type&&(j+=1)<=7&&(setTimeout(function(){e.emit(f.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"units"})},5e3*g*Math.random()),h.emitNotif("success","Szpieg nr "+j+" wysłany na "+c))})},7e3*d*Math.random())})}),C.addEventListener("click",function(){var c=h.formatDate(1e3*(b.time_completed-10),"HH:mm:ss:sss dd/MM/yyyy");a.setQueueCommand(b,c)}),D.addEventListener("click",function(){document.execCommand("copy")}),D.addEventListener("copy",function(a){a.preventDefault(),a.clipboardData.setData("text/plain",g),h.emitNotif("success",d("attackView","arrivetime"))}),E.addEventListener("click",function(){document.execCommand("copy")}),E.addEventListener("copy",function(a){a.preventDefault(),a.clipboardData.setData("text/plain",r),h.emitNotif("success",d("attackView","backtime"))}),s.append(e),b.$command=e,b.$arrivalProgress=z,b.$arrivalIn=A}),o.setTooltips(),o.recalcScrollbar(),F()},A=function(a){s.find(".command-"+a).remove(),o.recalcScrollbar()},B=function(a){s.find(".command-"+a).remove(),o.recalcScrollbar()},C=function(a){var b=".village-"+a.village_id+" .name";s.find(b).html(a.name)},D=function(b,c){a.getFilters()[a.FILTER_TYPES.VILLAGE]||F(c)},E=function(){s.find(".village.selected").removeClass("selected")},F=function(a){E(),a=a||e.getSelectedVillage().getId(),s.find(".village-"+a).addClass("selected")},G=function(){var b,c,d,e=a.getFilters();for(b in e)if(angular.isObject(e[b]))for(c in e[b])d=e[b][c]?"addClass":"removeClass",u[b][c][d]("active");else d=e[b]?"addClass":"removeClass",u[b][d]("active")},H=function(){var b=a.getSortings(),c=document.createElement("span");c.className="float-right arrow ",c.className+=b.reverse?"icon-26x26-normal-arrow-up":"icon-26x26-normal-arrow-down",w.find(".arrow").remove(),w.some(function(d,e){var f=d.dataset.sort;if(b.column===a.COLUMN_TYPES[f])return d.appendChild(c),!0})};a.interface=function(){a.interface=x()}}),define("two/autoCollector",["two/eventQueue","helper/time","Lockr"],function(a,b,d){var h=!1,i=!1,k=!0,l=0,m=function(a){f.emit(g.RESOURCE_DEPOSIT_START_JOB,{job_id:a.id})},n=function(a){f.emit(g.RESOURCE_DEPOSIT_COLLECT,{job_id:a.id,village_id:e.getSelectedVillage().getId()})},o=function(){f.emit(g.RESOURCE_DEPOSIT_GET_INFO,{})},p=function(){if(!i)return!1;var a=e.getSelectedCharacter().getResourceDeposit();if(!a)return!1;if(a.getCurrentJob())return!1;var b=a.getCollectibleJobs();if(b)return n(b.shift());var c=a.getReadyJobs();return c?m(q(c)):void 0},q=function(a){return a.sort(function(a,b){return a.duration-b.duration})[0]},r=function(a){var b=1e3*a.time_next_reset-Date.now()+1e3;clearTimeout(l),l=setTimeout(o,b)},s={};return s.init=function(){h=!0,c.$on(j.RESOURCE_DEPOSIT_JOB_COLLECTIBLE,function(){if(!k||!i)return!1;k=!1,setTimeout(function(){k=!0,p()},1500)}),c.$on(j.RESOURCE_DEPOSIT_JOBS_REROLLED,p),c.$on(j.RESOURCE_DEPOSIT_JOB_COLLECTED,p),c.$on(j.RESOURCE_DEPOSIT_INFO,function(a,b){p(),r(b)})},s.start=function(){a.trigger("Collector/started"),i=!0,p()},s.stop=function(){a.trigger("Collector/stopped"),i=!1},s.isRunning=function(){return i},s.isInitialized=function(){return h},s}),define("two/autoCollector/secondVillage",["two/autoCollector","two/eventQueue","helper/time","models/SecondVillageModel"],function(a,b,d,h){var i=!1,k=!1,l=injector.get("secondVillageService"),m=function(a){var b=Date.now();for(var c in a)if(a[c].time_started&&a[c].time_completed&&b<d.server2ClientTime(a[c].time_completed))return a[c];return!1},n=function(a){var b=Date.now();for(var c in a)if(a[c].time_started&&a[c].time_completed&&b>=d.server2ClientTime(a[c].time_completed)&&!a[c].collected)return c;return!1},o=function(a){f.emit(g.SECOND_VILLAGE_COLLECT_JOB_REWARD,{village_id:e.getSelectedVillage().getId(),job_id:a})},p=function(a,b){f.emit(g.SECOND_VILLAGE_START_JOB,{village_id:e.getSelectedVillage().getId(),job_id:a},b)},q=function(a){for(var b in a)return b;return!1},r=function(a){f.emit(g.SECOND_VILLAGE_GET_INFO,{},function(b){var c=new h(b);e.getSelectedCharacter().setSecondVillage(c),a()})},s=function(){r(t)},t=function(){var a=e.getSelectedCharacter().getSecondVillage();if(!k||!a||!a.isAvailable())return!1;var b=m(a.data.jobs);if(b){var c=d.server2ClientTime(b.time_completed),f=c-Date.now()+1e3;return setTimeout(s,f),!1}var g=n(a.data.jobs);if(g)return o(g);var h=l.getCurrentDayJobs(a.data.jobs,a.data.day),i=l.getCollectedJobs(a.data.jobs),j=e.getSelectedVillage().getResources().getResources(),r=l.getAvailableJobs(h,i,j,[]);if(r){var t=q(r);p(t,function(){var a=r[t];setTimeout(s,1e3*a.duration+1e3)})}},u={};u.init=function(){if(!l.isFeatureActive())return!1;i=!0,c.$on(j.SECOND_VILLAGE_VILLAGE_CREATED,s),c.$on(j.SECOND_VILLAGE_JOB_COLLECTED,s),c.$on(j.SECOND_VILLAGE_VILLAGE_CREATED,s)},u.start=function(){if(!i)return!1;b.trigger("Collector/secondVillage/started"),k=!0,s()},u.stop=function(){if(!i)return!1;b.trigger("Collector/secondVillage/stopped"),k=!1},u.isRunning=function(){return k},u.isInitialized=function(){return i},a.secondVillage=u}),require(["two/ready","two/autoCollector","Lockr","two/eventQueue","two/autoCollector/secondVillage","two/autoCollector/ui"],function(a,b,c,d){if(b.isInitialized())return!1;a(function(){b.init(),b.secondVillage.init(),b.interface(),a(function(){c.get("collector-active",!1,!0)&&(b.start(),b.secondVillage.start()),d.bind("Collector/started",function(){c.set("collector-active",!0)}),d.bind("Collector/stopped",function(){c.set("collector-active",!1)})},["initial_village"])})}),define("two/autoCollector/ui",["two/autoCollector","two/FrontButton","two/locale","two/utils","two/eventQueue"],function(a,b,c,d,e){function f(){return c.create("collector",{en:{title:"Kolekcjoner",description:"Automatyczny kolekcjoner depozytu/drugiej wioski.",activated:"Kolekcjoner aktywowany",deactivated:"Kolekcjoner deaktywowany"},pl:{title:"Kolekcjoner",description:"Automatyczny kolekcjoner depozytu/drugiej wioski.",activated:"Kolekcjoner aktywowany",deactivated:"Kolekcjoner deaktywowany"},pt:{title:"AutoCollector",description:"Coletor automático para Depósito de Recursos/Segunda Aldeia.",activated:"Coletor Automático ativado",deactivated:"Coletor Automático desativado"},us:{title:"AutoCollector",description:"Automatic Resource Deposit/Second Village collector.",activated:"Automatic Collector activated",deactivated:"Automatic Collector deactivated"}},"pl"),g=new b(c("collector","title"),{classHover:!1,classBlur:!1,tooltip:c("collector","description")}),g.click(function(){a.isRunning()?(a.stop(),a.secondVillage.stop(),d.emitNotif("success",c("collector","deactivated"))):(a.start(),a.secondVillage.start(),d.emitNotif("success",c("collector","activated")))}),e.bind("Collector/started",function(){g.$elem.removeClass("btn-green").addClass("btn-red")}),e.bind("Collector/stopped",function(){g.$elem.removeClass("btn-red").addClass("btn-green")}),a.isRunning()&&e.trigger("Collector/started"),g}var g;a.interface=function(){a.interface=f()}}),define("two/autoHealer",["two/eventQueue","helper/time","two/locale","two/utils","Lockr"],function(a,b,c,d,e){function f(){g.getSelectedCharacter().getVillageList().forEach(function(a,b){var c=a.hospital,e=c.patients,f=e.healed;e.pending,0==f.length||setTimeout(function(){f.forEach(function(b,c){setTimeout(function(){h.emit(i.HOSPITAL_RELEASE_PATIENT,{village_id:a.getId(),patient_id:b.id})},c*m),d.emitNotif("success","W wiosce: "+a.getName()+" wyleczono: "+b.id)})},b*l)}),d.emitNotif("success",c("healer","deactivated")),n.stop()}var g=injector.get("modelDataService"),h=injector.get("socketService"),i=injector.get("routeProvider"),j=!1,k=!1,l=3e3,m=1e3,n={};return n.init=function(){j=!0},n.start=function(){a.trigger("Healer/started"),k=!0,f()},n.stop=function(){a.trigger("Healer/stopped"),k=!1},n.isRunning=function(){return k},n.isInitialized=function(){return j},n}),require(["two/ready","two/autoHealer","Lockr","two/eventQueue","two/autoHealer/ui"],function(a,b,c,d){if(b.isInitialized())return!1;a(function(){b.init(),b.interface(),a(function(){c.get("healer-active",!1,!0)&&b.start(),d.bind("Healer/started",function(){c.set("healer-active",!0)}),d.bind("Healer/stopped",function(){c.set("healer-active",!1)})},["initial_village"])})}),define("two/autoHealer/ui",["two/autoHealer","two/FrontButton","two/locale","two/utils","two/eventQueue"],function(a,b,c,d,e){function f(){return c.create("healer",{en:{title:"Lekarz","no-patients":"Brak pacjentów do wypisania.",description:"Automatycznie przywraca uzdrowione jednostki ze szpitala.",activated:"Lekarz aktywowany",deactivated:"Lekarz skończył działanie"},pl:{title:"Lekarz","no-patients":"Brak pacjentów do wypisania.",description:"Automatycznie przywraca uzdrowione jednostki ze szpitala.",activated:"Lekarz aktywowany",deactivated:"Lekarz skończył działanie"},us:{title:"AutoHealer","no-patients":"No patients to heal.",description:"Automatic restore healed units from the hospital.",activated:"Automatic Healer activated",deactivated:"Automatic Healer deactivated"}},"pl"),g=new b(c("healer","title"),{classHover:!1,classBlur:!1,tooltip:c("healer","description")}),g.click(function(){a.isRunning()?(a.stop(),d.emitNotif("success",c("healer","deactivated"))):(a.start(),d.emitNotif("success",c("healer","activated")))}),e.bind("Healer/started",function(){g.$elem.removeClass("btn-green").addClass("btn-red")}),e.bind("Healer/stopped",function(){g.$elem.removeClass("btn-red").addClass("btn-green")}),a.isRunning()&&e.trigger("Healer/started"),g}var g;a.interface=function(){a.interface=f()}}),define("two/simulator",["two/locale","two/ready"],function(a,b){var c={};return c.version="0.9.9",c.init=function(){a.create("simulator",{en:{title:"Strateg","checkT.tip":"Liczy koszty produkcji jednostek","check.tip":"Liczy punkty bojowe dla wybranych jednostek","check.btn":"Policz","simulate.tip":"Symuluje bitwe na podstawie wskazanych danych","simulate.btn":"Symuluj",wood:"Drewno",iron:"Żelazo",clay:"Glina",food:"Prowiant",attack:"Siła ataku",load:"Ładowność",buildtime:"Czas rekrutacji",defarc:"Obrona przeciw łucznikom",definf:"obrona przeciw piechocie",defcav:"Obrona przeciw kawaleri",attackarc:"Siła ataku łuczników",attackinf:"Siła ataku piechoty",attackcav:"Siła ataku kawaleri",discipline:"Dyscyplina",speed:"Prędkość",battle:"Bitwa","battle.predamage":"Uszkodzenia przed walką","battle.header":"Kalkulator bitewny","battle.killrateA":"Procent strat","battle.attackBashpoint":"Punkty bojowe off","battle.strentghAttack":"Siła bojowa off","battle.killrateD":"Procent strat","battle.defenceBashpoint":"Punkty bojowe deff","battle.strentghDefend":"Siła bojowa deff","battle.attackModifier":"Modyfikator ataku","battle.defenceModifier":"Modyfikator obrony","battle.provisions":"Prowiant","battle.attacker":"Atakujący","battle.unit":"Jednostka","battle.amount":"Ilość","battle.loses":"Straty","battle.revived":"Uratowane","battle.survivors":"Ocalałe","battle.survivorsA":"Ocalałe(z uratowanymi)","battle.survivorsD":"Ocalałe(bez uratowanych)","battle.defender":"Obrońca","battle.damage":"Uszkodzenia taranów","battle.damageCatapult":"Uszkodzenia katapult","battle.downgrade":"Mur uszkodzony z poziomu ","battle.downgradeCatapult":" uszkodzony/a z poziomu ","battle.to":" do ","battle.insert":"Wstaw ocalałe jednostki","battle.faith":"Wiara","battle.morale":"Morale","battle.luck":"Szczęście","battle.wall":"Mury","battle.nightbonus":"Bonus nocny","battle.leader":"Wielki mistrz","battle.medic":"Medyk","battle.doctor":"Doktor","battle.attack-bonus":"Mistrzostwo broni","battle.iron-walls":"Żelazny mur","battle.clinique":"Klinika","battle.hospital":"Szpital","battle.equip":"Przedmioty rycerza","battle.halberd":"Halabarda Guan Yu","battle.longsword":"Długi miecz Paracelsusa","battle.battleaxe":"Bojowy topór Thorgarda","battle.longbow":"Łuk Nimroda","battle.lance":"Lanca Mieszka","battle.compositebow":"Kompozytowy łuk Nimroda","battle.banner":"Chorągiew Baptystów","battle.star":"Gwiazda poranna Karola","battle.bonfire":"Pochodnia Alethei","battle.scepter":"Berło Vasca","battle.target":"Cel katapult",bunker:"Bunkier","bunker.header":"Kalkulator optymalnego offa na bunkier",troops:"Koszt jednostek","troops.header":"Kalkulator kosztów produkcji jednostek","troops.th":"Koszty produkcji","troops.units":"Jednostki","troops.building":"Budynek","troops.barracks":"Koszary","troops.preceptory":"Komturia","troops.effects":"Efekty","troops.domination":"Dominacja","troops.training":"Intensywny trening","troops.templars":"Zakon Templariuszy","troops.teutonic":"Zakon Krzyżacki","troops.none":"Brak",bashpoints:"Punkty Bojowe","bashpoints.header":"Kalkulator punktów bojowych","bashpoints.th":"Punkty bojowe","bashpoints.attacker":"Jako atakujący","bashpoints.defender":"Jako obrońca","bashpoints.killed":"Zniszczone jednostki"},pl:{title:"Strateg","checkT.tip":"Liczy koszty produkcji jednostek","check.tip":"Liczy punkty bojowe dla wybranych jednostek","check.btn":"Policz","simulate.tip":"Symuluje bitwe na podstawie wskazanych danych","simulate.btn":"Symuluj",wood:"Drewno",iron:"Żelazo",clay:"Glina",food:"Prowiant",attack:"Siła ataku",load:"Ładowność",buildtime:"Czas rekrutacji",defarc:"Obrona przeciw łucznikom",definf:"obrona przeciw piechocie",defcav:"Obrona przeciw kawaleri",attackarc:"Siła ataku łuczników",attackinf:"Siła ataku piechoty",attackcav:"Siła ataku kawaleri",discipline:"Dyscyplina",speed:"Prędkość",battle:"Bitwa","battle.predamage":"Uszkodzenia przed walką","battle.header":"Kalkulator bitewny","battle.killrateA":"Procent strat","battle.attackBashpoint":"Punkty bojowe off","battle.strentghAttack":"Siła bojowa off","battle.killrateD":"Procent strat","battle.defenceBashpoint":"Punkty bojowe deff","battle.strentghDefend":"Siła bojowa deff","battle.attackModifier":"Modyfikator ataku","battle.defenceModifier":"Modyfikator obrony","battle.provisions":"Prowiant","battle.attacker":"Atakujący","battle.unit":"Jednostka","battle.amount":"Ilość","battle.loses":"Straty","battle.revived":"Uratowane","battle.survivors":"Ocalałe","battle.survivorsA":"Ocalałe(z uratowanymi)","battle.survivorsD":"Ocalałe(bez uratowanych)","battle.defender":"Obrońca","battle.damage":"Uszkodzenia taranów","battle.damageCatapult":"Uszkodzenia katapult","battle.downgrade":"Mur uszkodzony z poziomu ","battle.downgradeCatapult":" uszkodzony/a z poziomu ","battle.to":" do ","battle.insert":"Wstaw ocalałe jednostki","battle.faith":"Wiara","battle.morale":"Morale","battle.luck":"Szczęście","battle.wall":"Mury","battle.nightbonus":"Bonus nocny","battle.leader":"Wielki mistrz","battle.medic":"Medyk","battle.doctor":"Doktor","battle.attack-bonus":"Mistrzostwo broni","battle.iron-walls":"Żelazny mur","battle.clinique":"Klinika","battle.hospital":"Szpital","battle.equip":"Przedmioty rycerza","battle.halberd":"Halabarda Guan Yu","battle.longsword":"Długi miecz Paracelsusa","battle.battleaxe":"Bojowy topór Thorgarda","battle.longbow":"Łuk Nimroda","battle.lance":"Lanca Mieszka","battle.compositebow":"Kompozytowy łuk Nimroda","battle.banner":"Chorągiew Baptystów","battle.star":"Gwiazda poranna Karola","battle.bonfire":"Pochodnia Alethei","battle.scepter":"Berło Vasca","battle.target":"Cel katapult",bunker:"Bunkier","bunker.header":"Kalkulator optymalnego offa na bunkier",troops:"Koszt jednostek","troops.header":"Kalkulator kosztów produkcji jednostek","troops.th":"Koszty produkcji","troops.units":"Jednostki","troops.building":"Budynek","troops.barracks":"Koszary","troops.preceptory":"Komturia","troops.effects":"Efekty","troops.domination":"Dominacja","troops.training":"Intensywny trening","troops.templars":"Zakon Templariuszy","troops.teutonic":"Zakon Krzyżacki","troops.none":"Brak",bashpoints:"Punkty Bojowe","bashpoints.header":"Kalkulator punktów bojowych","bashpoints.th":"Punkty bojowe","bashpoints.attacker":"Jako atakujący","bashpoints.defender":"Jako obrońca","bashpoints.killed":"Zniszczone jednostki"},us:{title:"Calculators","checkT.tip":"Check units production costs","check.tip":"Check bashpoints of units","check.btn":"Check",battle:"Battle","battle.header":"Battle calculator","battle.attacker":"Attacker","battle.unit":"Unit","battle.amount":"Amount","battle.loses":"Loses","battle.defender":"Defender","battle.damage":"Damages","battle.downgrade":"Wall damaged from level ","battle.to":" to ","battle.insert":"Insert remaining troops","battle.faith":"Faith","battle.morale":"Morale","battle.luck":"Luck","battle.wall":"Wall","battle.nightbonus":"Night bonus",bunker:"Bunker","bunker.header":"Best nuke against bunker - calculator",troops:"Units cost","troops.header":"Units production cost calculator","troops.th":"Production cost","troops.units":"Units","troops.building":"Building","troops.barracks":"Barracks","troops.preceptory":"Preceptory","troops.effects":"Effects","troops.domination":"Domination","troops.training":"Intense Training","troops.templars":"Templar Order","troops.teutonic":"Teutonic Order",bashpoints:"Bashpoints","bashpoints.header":"Bashpoints calculator","bashpoints.th":"Bashpoints","bashpoints.attacker":"Attacker","bashpoints.defender":"Defender","bashpoints.killed":"Killed units"}},"pl"),c.initialized=!0},c.run=function(){if(!c.interfaceInitialized)throw new Error("BattleCalculator interface not initialized");b(function(){$player=e.getSelectedCharacter()},["initial_village"])},c}),define("two/simulator/data",["two/simulator"],function(a){var b={};a.data=b}),require(["two/ready","two/simulator","two/simulator/data","two/simulator/ui"],function(a,b){if(b.initialized)return!1;a(function(){b.init(),b.interface(),b.run()})}),define("two/simulator/ui",["two/simulator","two/locale","two/ui","two/ui/autoComplete","two/FrontButton","two/utils","two/eventQueue","ejs","struct/MapData","cdn"],function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b=function(){kb.on("click",function(){function a(){Mh=parseInt(Ib[0].dataset.value),console.log("Wiara broniącego: "+Mh),c()}function c(){al=document.getElementById("settings-nightBonus").checked?2:1,console.log("Bonus nocny: "+al),d()}function d(){fk=document.getElementById("settings-officerLeader").checked?.1:0,console.log("Mistrz Broni-oficer: "+fk),e()}function e(){Zk=document.getElementById("settings-officerMedic").checked?.1:0,console.log("Medyk oficer: "+Zk),g()}function g(){om=document.getElementById("settings-skillMedic").checked?.1:0,console.log("Doktor: "+om),h()}function h(){mm=parseInt(Nb[0].dataset.value),console.log("Mistrzostwo broni: "+mm),i()}function i(){pm=parseInt(Ob[0].dataset.value),console.log("Żelazny mur: "+pm),j()}function j(){nm=parseInt(Pb[0].dataset.value),console.log("Klinika: "+nm),k()}function k(){ni=parseInt(Qb[0].dataset.value),console.log("Szpital: "+ni),l()}function l(){Zg=Rb[0].dataset.value,console.log("Cel katapult: "+Zg),m()}function m(){oi=Sb[0].dataset.value,pi=Tb[0].dataset.value,qi=Ub[0].dataset.value,ri=Vb[0].dataset.value,gk=parseInt(Wb[0].dataset.value),hk=parseInt(Xb[0].dataset.value),ik=parseInt(Yb[0].dataset.value),jk=parseInt(Zb[0].dataset.value),console.log("Przedmiot rycerza-deff1: "+oi),console.log("Przedmiot rycerza-deff2: "+pi),console.log("Przedmiot rycerza-deff3: "+qi),console.log("Przedmiot rycerza-off: "+ri),console.log("Przedmiot rycerza-deff1-level: "+gk),console.log("Przedmiot rycerza-deff2-level: "+hk),console.log("Przedmiot rycerza-deff3-level: "+ik),console.log("Przedmiot rycerza-off-level: "+jk),$()}function $(){rh="lc"==oi&1==gk?[1.05,1.1]:"lc"==oi&2==gk?[1.1,1.2]:"lc"==oi&3==gk?[1.2,1.3]:[1,1],console.log("Dla lk Deff1: "+rh),kb()}function kb(){fh="axe"==oi&1==gk?[1.05,1.1]:"axe"==oi&2==gk?[1.1,1.2]:"axe"==oi&3==gk?[1.2,1.3]:[1,1],console.log("Dla toporów Deff1: "+fh),lb()}function lb(){vh="ma"==oi&1==gk?[1.05,1.1]:"ma"==oi&2==gk?[1.1,1.2]:"ma"==oi&3==gk?[1.2,1.3]:[1,1],console.log("Dla łk Deff1: "+vh),mb()}function mb(){Dh="spear"==oi&1==gk?[1.1,1.05]:"spear"==oi&2==gk?[1.2,1.1]:"spear"==oi&3==gk?[1.3,1.2]:[1,1],console.log("Dla pików Deff1: "+Dh),nb()}function nb(){Hh="sword"==oi&1==gk?[1.1,1.05]:"sword"==oi&2==gk?[1.2,1.1]:"sword"==oi&3==gk?[1.3,1.2]:[1,1],console.log("Dla mieczy Deff1: "+Hh),ob()}function ob(){bh="archer"==oi&1==gk?[1.1,1.05]:"archer"==oi&2==gk?[1.2,1.1]:"archer"==oi&3==gk?[1.3,1.2]:[1,1],console.log("Dla łuków Deff1: "+bh),pb()}function pb(){nh="hc"==oi&1==gk?[1.1,1.1]:"hc"==oi&2==gk?[1.2,1.2]:"hc"==oi&3==gk?[1.3,1.3]:[1,1],console.log("Dla ck Deff1: "+nh),qb()}function qb(){zh="ram"==oi&1==gk?[1.05,1.25]:"ram"==oi&2==gk?[1.1,1.5]:"ram"==oi&3==gk?[1.2,2]:[1,1],console.log("Dla taranów Deff1: "+zh),rb()}function rb(){jh="catapult"==oi&1==gk?[1.05,1.25]:"catapult"==oi&2==gk?[1.1,1.5]:"catapult"==oi&3==gk?[1.2,2]:[1,1],console.log("Dla katapult Deff1: "+jh),sb()}function sb(){sh="lc"==pi&1==hk?[1.05,1.1]:"lc"==pi&2==hk?[1.1,1.2]:"lc"==pi&3==hk?[1.2,1.3]:[1,1],tb()}function tb(){gh="axe"==pi&1==hk?[1.05,1.1]:"axe"==pi&2==hk?[1.1,1.2]:"axe"==pi&3==hk?[1.2,1.3]:[1,1],ub()}function ub(){wh="ma"==pi&1==hk?[1.05,1.1]:"ma"==pi&2==hk?[1.1,1.2]:"ma"==pi&3==hk?[1.2,1.3]:[1,1],vb()}function vb(){Eh="spear"==pi&1==hk?[1.1,1.05]:"spear"==pi&2==hk?[1.2,1.1]:"spear"==pi&3==hk?[1.3,1.2]:[1,1],wb()}function wb(){Ih="sword"==pi&1==hk?[1.1,1.05]:"sword"==pi&2==hk?[1.2,1.1]:"sword"==pi&3==hk?[1.3,1.2]:[1,1],xb()}function xb(){ch="archer"==pi&1==hk?[1.1,1.05]:"archer"==pi&2==hk?[1.2,1.1]:"archer"==pi&3==hk?[1.3,1.2]:[1,1],yb()}function yb(){oh="hc"==pi&1==hk?[1.1,1.1]:"hc"==pi&2==hk?[1.2,1.2]:"hc"==pi&3==hk?[1.3,1.3]:[1,1],zb()}function zb(){Ah="ram"==pi&1==hk?[1.05,1.25]:"ram"==pi&2==hk?[1.1,1.5]:"ram"==pi&3==hk?[1.2,2]:[1,1],Ab()}function Ab(){kh="catapult"==pi&1==hk?[1.05,1.25]:"catapult"==pi&2==hk?[1.1,1.5]:"catapult"==pi&3==hk?[1.2,2]:[1,1],Bb()}function Bb(){
hh="axe"==qi&1==ik?[1.05,1.1]:"axe"==qi&2==ik?[1.1,1.2]:"axe"==qi&3==ik?[1.2,1.3]:[1,1],Cb()}function Cb(){xh="ma"==qi&1==ik?[1.05,1.1]:"ma"==qi&2==ik?[1.1,1.2]:"ma"==qi&3==ik?[1.2,1.3]:[1,1],Db()}function Db(){Fh="spear"==qi&1==ik?[1.1,1.05]:"spear"==qi&2==ik?[1.2,1.1]:"spear"==qi&3==ik?[1.3,1.2]:[1,1],Eb()}function Eb(){Jh="sword"==qi&1==ik?[1.1,1.05]:"sword"==qi&2==ik?[1.2,1.1]:"sword"==qi&3==ik?[1.3,1.2]:[1,1],Fb()}function Fb(){dh="archer"==qi&1==ik?[1.1,1.05]:"archer"==qi&2==ik?[1.2,1.1]:"archer"==qi&3==ik?[1.3,1.2]:[1,1],Gb()}function Gb(){ph="hc"==qi&1==ik?[1.1,1.1]:"hc"==qi&2==ik?[1.2,1.2]:"hc"==qi&3==ik?[1.3,1.3]:[1,1],Jb()}function Jb(){Bh="ram"==qi&1==ik?[1.05,1.25]:"ram"==qi&2==ik?[1.1,1.5]:"ram"==qi&3==ik?[1.2,2]:[1,1],Kb()}function Kb(){lh="catapult"==qi&1==ik?[1.05,1.25]:"catapult"==qi&2==ik?[1.1,1.5]:"catapult"==qi&3==ik?[1.2,2]:[1,1],Lb()}function Lb(){qh=rh[0]>=sh[0]&&rh[0]>=th[0]?rh:sh[0]>=rh[0]&&sh[0]>=th[0]?sh:th[0]>=rh[0]&&th[0]>=sh[0]?th:[1,1],console.log("Dla lk Deff1 koncowy: "+qh),Mb()}function Mb(){eh=fh[0]>=gh[0]&&fh[0]>=hh[0]?fh:gh[0]>=fh[0]&&gh[0]>=hh[0]?gh:hh[0]>=fh[0]&&hh[0]>=gh[0]?hh:[1,1],$b()}function $b(){uh=vh[0]>=wh[0]&&vh[0]>=xh[0]?vh:wh[0]>=vh[0]&&wh[0]>=xh[0]?wh:xh[0]>=vh[0]&&xh[0]>=wh[0]?xh:[1,1],_b()}function _b(){mh=nh[0]>=oh[0]&&nh[0]>=ph[0]?nh:oh[0]>=nh[0]&&oh[0]>=ph[0]?oh:ph[0]>=nh[0]&&ph[0]>=oh[0]?ph:[1,1],ac()}function ac(){yh=zh[0]>=Ah[0]&&zh[0]>=Bh[0]?zh:Ah[0]>=zh[0]&&Ah[0]>=Bh[0]?Ah:Bh[0]>=zh[0]&&Bh[0]>=Ah[0]?Bh:[1,1],bc()}function bc(){ih=jh[0]>=kh[0]&&jh[0]>=lh[0]?jh:kh[0]>=jh[0]&&kh[0]>=lh[0]?kh:lh[0]>=jh[0]&&lh[0]>=kh[0]?lh:[1,1],cc()}function cc(){Ch=Dh[0]>=Eh[0]&&Dh[0]>=Fh[0]?Dh:Eh[0]>=Dh[0]&&Eh[0]>=Fh[0]?Eh:Fh[0]>=Dh[0]&&Fh[0]>=Eh[0]?Fh:[1,1],dc()}function dc(){Gh=Hh[0]>=Ih[0]&&Hh[0]>=Jh[0]?Hh:Ih[0]>=Hh[0]&&Ih[0]>=Jh[0]?Ih:Jh[0]>=Hh[0]&&Jh[0]>=Ih[0]?Jh:[1,1],ec()}function ec(){ah=bh[0]>=ch[0]&&bh[0]>=dh[0]?bh:ch[0]>=bh[0]&&ch[0]>=dh[0]?ch:dh[0]>=bh[0]&&dh[0]>=ch[0]?dh:[1,1],fc()}function fc(){mj="lc"==ri&1==jk?[1.05,1.1]:"lc"==ri&2==jk?[1.1,1.2]:"lc"==ri&3==jk?[1.2,1.3]:[1,1],console.log("Dla lk Off koncowy: "+mj),gc()}function gc(){jj="axe"==ri&1==jk?[1.05,1.1]:"axe"==ri&2==jk?[1.1,1.2]:"axe"==ri&3==jk?[1.2,1.3]:[1,1],hc()}function hc(){nj="ma"==ri&1==jk?[1.05,1.1]:"ma"==ri&2==jk?[1.1,1.2]:"ma"==ri&3==jk?[1.2,1.3]:[1,1],ic()}function ic(){pj="spear"==ri&1==jk?[1.1,1.05]:"spear"==ri&2==jk?[1.2,1.1]:"spear"==ri&3==jk?[1.3,1.2]:[1,1],jc()}function jc(){qj="sword"==ri&1==jk?[1.1,1.05]:"sword"==ri&2==jk?[1.2,1.1]:"sword"==ri&3==jk?[1.3,1.2]:[1,1],kc()}function kc(){ij="archer"==ri&1==jk?[1.1,1.05]:"archer"==ri&2==jk?[1.2,1.1]:"archer"==ri&3==jk?[1.3,1.2]:[1,1],lc()}function lc(){lj="hc"==ri&1==jk?[1.1,1.1]:"hc"==ri&2==jk?[1.2,1.2]:"hc"==ri&3==jk?[1.3,1.3]:[1,1],mc()}function mc(){oj="ram"==ri&1==jk?[1.05,1.25]:"ram"==ri&2==jk?[1.1,1.5]:"ram"==ri&3==jk?[1.2,2]:[1,1],nc()}function nc(){kj="catapult"==ri&1==jk?[1.05,1.25]:"catapult"==ri&2==jk?[1.1,1.5]:"catapult"==ri&3==jk?[1.2,2]:[1,1],oc()}function oc(){Bf=Ve*Ge[0]+Xe*Ge[1]+ze*Ge[2]+we*Ge[3]+Le*Ge[4]+Oe*Ge[5]+He*Ge[6]+Re*Ge[7]+De*Ge[8]+Je*Ge[9]+Te*Ge[10]+Ze*Ge[11]+Be*Ge[12],$g=We*Ge[0]+Ye*Ge[1]+Ae*Ge[2]+xe*Ge[3]+Me*Ge[4]+Pe*Ge[5]+Ie*Ge[6]+Se*Ge[7]+Ee*Ge[8]+Ke*Ge[9]+Ue*Ge[10]+$e*Ge[11]+Ce*Ge[12],console.log("Prowiant atakującego: "+Bf),console.log("Prowiant broniącego: "+$g),pc()}function pc(){Kh=2*Bf<=$g?2:1,console.log("Szał berków: "+Kh),qc()}function qc(){em=5*Re,bl=Bf-em,console.log("Zredukowany prowiant o tarany przed walką: "+bl),rc()}function rc(){el=0==_e?0:Math.round(20*Math.pow(1.2515,_e-1)),console.log("Bazowy modyfikator obroncy przed walką: "+el),sc()}function sc(){$k=el+100*Ue,_g=$g+$k,console.log("Powiekszony prowiant obroncy o szalchte przed walką: "+_g),tc()}function tc(){Dl=0==bl||0==_g?0:bl/_g>1?1:bl/_g,console.log("Modyfiaktor prowiantów przed walką: "+Dl),uc()}function uc(){_k=Qe/100,Bk=Ne/100,vc()}function vc(){dl=Math.round(1e3*(Lh/100*_k*(1+Bk)+mm/100+fk))/1e3,console.log("Modyfikator atakującego: "+dl),wc()}function wc(){cp=Re+De,dp=De/cp,ep=Re/cp,Io=Math.round($e*dp),Zo=Math.round($e*ep),console.log("Maszyny oblężnicze: "+cp),console.log("Procent taranów w maszynach oblężniczych: "+ep),console.log("Procent katapult w maszynach oblężniczych: "+dp),console.log("Obrona trebuszowa-tarany: "+Zo),console.log("Obrona trebuszowa-katsy: "+Io),xc()}function xc(){Ll=0==Re?0:Re<Zo?Re:Zo,console.log("Tarany zniszczone po obronie trebuszowej: "+Ll),yc()}function yc(){fm=Re-Ll,console.log("Tarany pozostałe po obronie trebuszowej: "+fm),zc()}function zc(){si="ram"==ri?1==jk?[1.05,1.25]:2==jk?[1.1,1.5]:3==jk?[1.2,2]:[1,1]:[1,1],console.log("Efekt przedmiotu rycerza dla taranów: "+si),Ac()}function Ac(){cm=fm*Dl*dl*si[1],console.log("Siła taranów: "+cm),Bc()}function Bc(){li=20==_e?18:19==_e?17:18==_e?15:17==_e?14:16==_e?13:15==_e?11:14==_e?10:13==_e||12==_e?9:11==_e?8:10==_e?7:9==_e||8==_e?6:7==_e||6==_e?5:5==_e||4==_e||3==_e?4:2==_e||1==_e?3:0,console.log("Punkty obrony murów: "+li),Cc()}function Cc(){ap=0==_e?0:2*li,console.log("Siła obrony murów: "+ap),Dc()}function Dc(){$o=0==_e?0:cm/ap,console.log("Liczba zniszczonych poziomów murów przez tarany przed walką: "+$o),Ec()}function Ec(){bp=_e<=pm?_e:_e-pm<$o?_e<pm?_e:pm:_e-$o,console.log("Mury po wejsciu taranów przed walką(nie zaokrąglone): "+bp),Fc()}function Fc(){_f=Math.round(bp),$f=Math.round(.05*_f*1e3)/1e3,console.log("Bonus atakującego: "+_f),console.log("Bonus obrońcy: "+$f),Gc()}function Gc(){cl=Math.round(Mh/100*(1+$f)*al*1e3)/1e3,console.log("Modyfikator obrony: "+cl),Hc()}function Hc(){Eg=0==De?0:De<Io?De:Io,console.log("Zniszczone katapulty po obronie trebuszowej: "+Eg),Ic()}function Ic(){Yg=De-Eg,console.log("Pozostałe katapulty po obronie trebuszowej: "+Yg),Jc()}function Jc(){_o=Math.round(bp),Zf=0==_o?0:Math.round(20*Math.pow(1.2515,_o-1)),console.log("Bazowy modyfikator obroncy na walke: "+Zf),Kc()}function Kc(){Jj=Ve+Xe+ze+Be>Le+He&&Ve+Xe+ze+Be>we+Oe?"inf":Le+He>Ve+Xe+ze+Be&&Le+He>we+Oe?"cav":"arc",console.log("Największa grupa woja w ofie: "+Jj),Lc()}function Lc(){ol=Ve*Ge[0]+Xe*Ge[1]+ze*Ge[2]+we*Ge[3]+Le*Ge[4]+Oe*Ge[5]+He*Ge[6]+fm*Ge[7]+Yg*Ge[8]+Je*Ge[9]+Te*Ge[10]+Ze*Ge[11]+Be*Ge[12],Al=We*Ge[0]+Ye*Ge[1]+Ae*Ge[2]+xe*Ge[3]+Me*Ge[4]+Pe*Ge[5]+Ie*Ge[6]+Se*Ge[7]+Ee*Ge[8]+Ke*Ge[9]+Ue*Ge[10]+$e*Ge[11]+Ce*Ge[12],console.log("Prowiant atakującego po rundzie wstępnej: "+ol),console.log("Prowiant broniącego po rundzie wstępnej: "+Al),Mc()}function Mc(){hm=fm*Ge[7]+Yg*Ge[8]+Ze*Ge[11]+Je*Ge[9],console.log("Runda1 prowiant maszyn oblężniczych i rycerza: "+hm),Nc()}function Nc(){"cav"==Jj?(il=Le*Ge[4]+He*Ge[6]+hm,ll=Ve*Ge[0]+Xe*Ge[1]+ze*Ge[2]+Be*Ge[12]+Te*Ge[10],fl=we*Ge[3]+Oe*Ge[5]):"inf"==Jj?(ll=Ve*Ge[0]+Xe*Ge[1]+ze*Ge[2]+Be*Ge[12]+Te*Ge[10]+hm,il=Le*Ge[4]+He*Ge[6],fl=we*Ge[3]+Oe*Ge[5]):"arc"==Jj?(ll=Ve*Ge[0]+Xe*Ge[1]+ze*Ge[2]+Be*Ge[12]+Te*Ge[10],il=Le*Ge[4]+He*Ge[6],fl=we*Ge[3]+Oe*Ge[5]+hm):(ll=Ve*Ge[0]+Xe*Ge[1]+ze*Ge[2]+Be*Ge[12]+Te*Ge[10],il=Le*Ge[4]+He*Ge[6],fl=we*Ge[3]+Oe*Ge[5]),console.log("Runda1 prowiant piechoty: "+ll),console.log("Runda1 prowiant kawaleri: "+il),console.log("Runda1 prowiant łuczników: "+fl),Oc()}function Oc(){sk=0==ll?0:Math.round(ll/ol*1e4)/1e4,console.log("Runda1 prowiant piechoty-procent w całości: "+sk),Pc()}function Pc(){rk=0==il?0:Math.round(il/ol*1e4)/1e4,console.log("Runda1 prowiant kawaleri-procent w całości: "+rk),Qc()}function Qc(){qk=0==fl?0:Math.round(fl/ol*1e4)/1e4,console.log("Runda1 prowiant łuczników-procent w całości: "+qk),Rc()}function Rc(){_m=We*sk,$m=We*rk,Zm=We-$m-_m,so=Ye*sk,ro=Ye*rk,qo=Ye-ro-so,Qf=Ae*sk,Pf=Ae*rk,Of=Ae-Pf-Qf,rf=xe*sk,qf=xe*rk,pf=xe-qf-rf,Yj=Me*sk,Xj=Me*rk,Wj=Me-Xj-Yj,Qk=Pe*sk,Pk=Pe*rk,Ok=Pe-Pk-Qk,bi=Ie*sk,ai=Ie*rk,_h=Ie-ai-bi,Tl=Se*sk,Sl=Se*rk,Rl=Se-Sl-Tl,Mg=Ee*sk,Lg=Ee*rk,Kg=Ee-Lg-Mg,Em=Ue*sk,Dm=Ue*rk,Cm=Ue-Dm-Em,Qo=$e*sk,Po=$e*rk,Oo=$e-Po-Qo,og=Ce*sk,ng=Ce*rk,mg=Ce-ng-og,_i=Ke*sk,$i=Ke*rk,Zi=Ke-$i-_i,console.log("ilosc pik zmodyfikowana: "+_m),Sc()}function Sc(){xl=_m*Ge[0]+so*Ge[1]+Qf*Ge[2]+og*Ge[12]+Em*Ge[10]+Yj*Ge[4]+bi*Ge[6]+rf*Ge[3]+Qk*Ge[5]+Tl*Ge[7]+Mg*Ge[8]+Qo*Ge[11]+_i*Ge[9],ul=$m*Ge[0]+ro*Ge[1]+Pf*Ge[2]+ng*Ge[12]+Dm*Ge[10]+Xj*Ge[4]+ai*Ge[6]+qf*Ge[3]+Pk*Ge[5]+Sl*Ge[7]+Lg*Ge[8]+Po*Ge[11]+$i*Ge[9],rl=Zm*Ge[0]+qo*Ge[1]+Of*Ge[2]+mg*Ge[12]+Cm*Ge[10]+Wj*Ge[4]+_h*Ge[6]+pf*Ge[3]+Ok*Ge[5]+Rl*Ge[7]+Kg*Ge[8]+Oo*Ge[11]+Zi*Ge[9],Tc()}function Tc(){Kn=_m*ye[0]*Ch[0]+so*ye[1]*Gh[0]+Qf*ye[2]*eh[0]+og*ye[12]+Em*ye[10]+Yj*ye[4]*qh[0]+bi*ye[6]*mh[0]+rf*ye[3]*ah[0]+Qk*ye[5]*uh[0]+Tl*ye[7]*yh[0]+Mg*ye[8]*ih[0]+Qo*ye[11]+_i*ye[9],Hn=$m*ye[0]*Ch[0]+ro*ye[1]*Gh[0]+Pf*ye[2]*eh[0]+ng*ye[12]+Dm*ye[10]+Xj*ye[4]*qh[0]+ai*ye[6]*mh[0]+qf*ye[3]*ah[0]+Pk*ye[5]*uh[0]+Sl*ye[7]*yh[0]+Lg*ye[8]*ih[0]+Po*ye[11]+$i*ye[9],En=Zm*ye[0]*Ch[0]+qo*ye[1]*Gh[0]+Of*ye[2]*eh[0]+mg*ye[12]+Cm*ye[10]+Wj*ye[4]*qh[0]+_h*ye[6]*mh[0]+pf*ye[3]*ah[0]+Ok*ye[5]*uh[0]+Rl*ye[7]*yh[0]+Kg*ye[8]*ih[0]+Oo*ye[11]+Zi*ye[9],console.log("siła obrony zmodyfikowanych jednostek piechoty: "+Kn),Uc()}function Uc(){km=fm*ye[7]*oj[1]+Yg*ye[8]*kj[1]+Ze*ye[11]+Je*ye[9],Vc()}function Vc(){"cav"==Jj?(yn=Le*ye[4]*mj[1]+He*ye[6]*lj[1]+km,Bn=Ve*ye[0]*pj[1]+Xe*ye[1]*qj[1]+ze*ye[2]*jj[1]+Be*ye[12]*Kh+Te*ye[10],vn=we*ye[3]*ij[1]+Oe*ye[5]*nj[1]):"inf"==Jj?(Bn=Ve*ye[0]*pj[1]+Xe*ye[1]*qj[1]+ze*ye[2]*jj[1]+Be*ye[12]*Kh+Te*ye[10]+km,yn=Le*ye[4]*mj[1]+He*ye[6]*lj[1],vn=we*ye[3]*ij[1]+Oe*ye[5]*nj[1]):"arc"==Jj?(Bn=Ve*ye[0]*pj[1]+Xe*ye[1]*qj[1]+ze*ye[2]*jj[1]+Be*ye[12]*Kh+Te*ye[10],yn=Le*ye[4]*mj[1]+He*ye[6]*lj[1],vn=we*ye[3]*ij[1]+Oe*ye[5]*nj[1]+km):(Bn=Ve*ye[0]*pj[1]+Xe*ye[1]*qj[1]+ze*ye[2]*jj[1]+Be*ye[12]*Kh+Te*ye[10],yn=Le*ye[4]*mj[1]+He*ye[6]*lj[1],vn=we*ye[3]*ij[1]+Oe*ye[5]*nj[1]),Wc()}function Wc(){pn=Bn*dl,Tn=Kn*cl,mn=yn*dl,Qn=Hn*cl,jn=vn*dl,Nn=En*cl,console.log("siła ataku piechoty runda 1: "+pn),Xc()}function Xc(){sn=pn+mn+jn,Wn=Tn+Qn+Nn,Yc()}function Yc(){Hj=0==pn||0==Tn?0:Tn<=pn?1:Math.pow(pn/Tn,.5/(Tn/pn)),Zc()}function Zc(){Ej=0==mn||0==Qn?0:Qn<=mn?1:Math.pow(mn/Qn,.5/(Qn/mn)),$c()}function $c(){Bj=0==jn||0==Nn?0:Nn<=jn?1:Math.pow(jn/Nn,.5/(Nn/jn)),_c()}function _c(){yj=0==pn||0==Tn?0:pn<=Tn?1:Math.pow(Tn/pn,.5/(pn/Tn)),ad()}function ad(){vj=0==mn||0==Qn?0:mn<=Qn?1:Math.pow(Qn/mn,.5/(mn/Qn)),bd()}function bd(){sj=0==jn||0==Nn?0:jn<=Nn?1:Math.pow(Nn/jn,.5/(jn/Nn)),cd()}function cd(){vi=Math.round(1e6*yj)/1e6,ui=Math.round(1e6*vj)/1e6,ti=Math.round(1e6*sj)/1e6,yi=Math.round(1e6*Hj)/1e6,xi=Math.round(1e6*Ej)/1e6,wi=Math.round(1e6*Bj)/1e6,console.log("killrate piechoty off runda 1: "+vi),console.log("killrate piechoty deff runda 1: "+yi),dd()}function dd(){Vm=Math.round(-_m*yi+1e-6)+Math.round(-$m*xi+1e-6)+Math.round(-Zm*wi+1e-6),mo=Math.round(-so*yi+1e-6)+Math.round(-ro*xi+1e-6)+Math.round(-qo*wi+1e-6),Kf=Math.round(-Qf*yi+1e-6)+Math.round(-Pf*xi+1e-6)+Math.round(-Of*wi+1e-6),lf=Math.round(-rf*yi+1e-6)+Math.round(-qf*xi+1e-6)+Math.round(-pf*wi+1e-6),Sj=Math.round(-Yj*yi+1e-6)+Math.round(-Xj*xi+1e-6)+Math.round(-Wj*wi+1e-6),Kk=Math.round(-Qk*yi+1e-6)+Math.round(-Pk*xi+1e-6)+Math.round(-Ok*wi+1e-6),Xh=Math.round(-bi*yi+1e-6)+Math.round(-ai*xi+1e-6)+Math.round(-_h*wi+1e-6),Nl=Math.round(-Tl*yi+1e-6)+Math.round(-Sl*xi+1e-6)+Math.round(-Rl*wi+1e-6),Gg=Math.round(-Mg*yi+1e-6)+Math.round(-Lg*xi+1e-6)+Math.round(-Kg*wi+1e-6),Ko=Math.round(-Qo*yi+1e-6)+Math.round(-Po*xi+1e-6)+Math.round(-Oo*wi+1e-6),ig=Math.round(-og*yi+1e-6)+Math.round(-ng*xi+1e-6)+Math.round(-mg*wi+1e-6),Vi=Math.round(-_i*yi+1e-6)+Math.round(-$i*xi+1e-6)+Math.round(-Zi*wi+1e-6),ym=Math.round(-Em*yi+1e-6)+Math.round(-Dm*xi+1e-6)+Math.round(-Cm*wi+1e-6),Om=Math.round(-Ve*vi+1e-6),fo=Math.round(-Xe*vi+1e-6),Df=Math.round(-ze*vi+1e-6),bg=Math.round(-Be*vi+1e-6),df=Math.round(-we*ti+1e-6),Dk=Math.round(-Oe*ti+1e-6),Lj=Math.round(-Le*ui+1e-6),Qh=Math.round(-He*ui+1e-6),"cav"==Jj?(Fl=Math.round(-fm*ui+1e-6),yg=Math.round(-Yg*ui+1e-6),Co=Math.round(-Ze*ui+1e-6),Oi=Math.round(-Je*ui+1e-6)):"inf"==Jj?(Fl=Math.round(-fm*vi+1e-6),yg=Math.round(-Yg*vi+1e-6),Co=Math.round(-Ze*vi+1e-6),Oi=Math.round(-Je*vi+1e-6)):"arc"==Jj&&(Fl=Math.round(-fm*ti+1e-6),yg=Math.round(-Yg*ti+1e-6),Co=Math.round(-Ze*ti+1e-6),Oi=Math.round(-Je*ti+1e-6)),ed()}function ed(){rm=100*Te==ll?0:Math.round(-Te*vi+1e-6),fd()}function fd(){Rm=Ve+Om,io=Xe+fo,Gf=ze+Df,gf=we+df,Oj=Le+Lj,Gk=Oe+Dk,Th=He+Qh,Il=fm+Fl,Bg=Yg+yg,Fo=Ze+Co,eg=Be+bg,um=Te+rm,Ri=Je+Oi,Ym=We+Vm,po=Ye+mo,Nf=Ae+Kf,of=xe+lf,Vj=Me+Sj,Nk=Pe+Kk,$h=Ie+Xh,Ql=Se+Nl,Jg=Ee+Gg,No=$e+Ko,lg=Ce+ig,Bm=Ue+ym,Yi=Ke+Vi,gd()}function gd(){kk=Om*Ge[0]+fo*Ge[1]+Df*Ge[2]+df*Ge[3]+Lj*Ge[4]+Dk*Ge[5]+Qh*Ge[6]+Fl*Ge[7]+yg*Ge[8]+Oi*Ge[9]+rm*Ge[10]+Co*Ge[11]+bg*Ge[12],nk=Vm*Ge[0]+mo*Ge[1]+Kf*Ge[2]+lf*Ge[3]+Sj*Ge[4]+Kk*Ge[5]+Xh*Ge[6]+Nl*Ge[7]+Gg*Ge[8]+Vi*Ge[9]+ym*Ge[10]+Ko*Ge[11]+ig*Ge[12],hd()}function hd(){Zn=Rm*Ge[0]+io*Ge[1]+Gf*Ge[2]+gf*Ge[3]+Oj*Ge[4]+Gk*Ge[5]+Th*Ge[6]+Il*Ge[7]+Bg*Ge[8]+Fo*Ge[11]+eg*Ge[12]+um*Ge[10]+Ri*Ge[9],ao=Ym*Ge[0]+po*Ge[1]+Nf*Ge[2]+of*Ge[3]+Vj*Ge[4]+Nk*Ge[5]+$h*Ge[6]+Ql*Ge[7]+Jg*Ge[8]+No*Ge[11]+lg*Ge[12]+Bm*Ge[10]+Yi*Ge[9],id()}function id(){Af=0==sn||0==Wn?0:Wn<=sn?1:Math.pow(sn/Wn,.5/(Wn/sn)),jd()}function jd(){pl=Rm*Ge[0]+io*Ge[1]+Gf*Ge[2]+gf*Ge[3]+Oj*Ge[4]+Gk*Ge[5]+Th*Ge[6]+Il*Ge[7]+Bg*Ge[8]+Ri*Ge[9]+um*Ge[10]+Fo*Ge[11]+eg*Ge[12],Bl=Ym*Ge[0]+po*Ge[1]+Nf*Ge[2]+of*Ge[3]+Vj*Ge[4]+Nk*Ge[5]+$h*Ge[6]+Ql*Ge[7]+Jg*Ge[8]+Yi*Ge[9]+Bm*Ge[10]+No*Ge[11]+lg*Ge[12],kd()}function kd(){im=Il*Ge[7]+Bg*Ge[8]+Fo*Ge[11]+Ri*Ge[9],ld()}function ld(){"cav"==Jj?(jl=Oj*Ge[4]+Th*Ge[6]+im,ml=Rm*Ge[0]+io*Ge[1]+Gf*Ge[2]+eg*Ge[12]+um*Ge[10],gl=gf*Ge[3]+Gk*Ge[5]):"inf"==Jj?(ml=Rm*Ge[0]+io*Ge[1]+Gf*Ge[2]+eg*Ge[12]+um*Ge[10]+im,jl=Oj*Ge[4]+Th*Ge[6],gl=gf*Ge[3]+Gk*Ge[5]):"arc"==Jj?(ml=Rm*Ge[0]+io*Ge[1]+Gf*Ge[2]+eg*Ge[12]+um*Ge[10],jl=Oj*Ge[4]+Th*Ge[6],gl=gf*Ge[3]+Gk*Ge[5]+im):(ml=Rm*Ge[0]+io*Ge[1]+Gf*Ge[2]+eg*Ge[12]+um*Ge[10],jl=Oj*Ge[4]+Th*Ge[6],gl=gf*Ge[3]+Gk*Ge[5]),md()}function md(){vk=0==ml?0:Math.round(ml/pl*1e4)/1e4,nd()}function nd(){uk=0==jl?0:Math.round(jl/pl*1e4)/1e4,od()}function od(){tk=0==gl?0:Math.round(gl/pl*1e4)/1e4,pd()}function pd(){dn=Ym*vk,cn=Ym*uk,bn=Ym-cn-dn,wo=po*vk,vo=po*uk,uo=po-vo-wo,Uf=Nf*vk,Tf=Nf*uk,Sf=Nf-Tf-Uf,vf=of*vk,uf=of*uk,tf=of-uf-vf,ak=Vj*vk,_j=Vj*uk,$j=Vj-_j-ak,Uk=Nk*vk,Tk=Nk*uk,Sk=Nk-Tk-Uk,fi=$h*vk,ei=$h*uk,di=$h-ei-fi,Xl=Ql*vk,Wl=Ql*uk,Vl=Ql-Wl-Xl,Qg=Jg*vk,Pg=Jg*uk,Og=Jg-Pg-Qg,Im=Bm*vk,Hm=Bm*uk,Gm=Bm-Hm-Im,Uo=No*vk,To=No*uk,So=No-To-Uo,sg=lg*vk,rg=lg*uk,qg=lg-rg-sg,dj=Yi*vk,cj=Yi*uk,bj=Yi-cj-dj,qd()}function qd(){yl=dn*Ge[0]+wo*Ge[1]+Uf*Ge[2]+sg*Ge[12]+Im*Ge[10]+ak*Ge[4]+fi*Ge[6]+vf*Ge[3]+Uk*Ge[5]+Xl*Ge[7]+Qg*Ge[8]+Uo*Ge[11]+dj*Ge[9],vl=cn*Ge[0]+vo*Ge[1]+Tf*Ge[2]+rg*Ge[12]+Hm*Ge[10]+_j*Ge[4]+ei*Ge[6]+uf*Ge[3]+Tk*Ge[5]+Wl*Ge[7]+Pg*Ge[8]+To*Ge[11]+cj*Ge[9],sl=bn*Ge[0]+uo*Ge[1]+Sf*Ge[2]+qg*Ge[12]+Gm*Ge[10]+$j*Ge[4]+di*Ge[6]+tf*Ge[3]+Sk*Ge[5]+Vl*Ge[7]+Og*Ge[8]+So*Ge[11]+bj*Ge[9],rd()}function rd(){Ln=dn*ye[0]*Ch[0]+wo*ye[1]*Gh[0]+Uf*ye[2]*eh[0]+sg*ye[12]+Im*ye[10]+ak*ye[4]*qh[0]+fi*ye[6]*mh[0]+vf*ye[3]*ah[0]+Uk*ye[5]*uh[0]+Xl*ye[7]*yh[0]+Qg*ye[8]*ih[0]+Uo*ye[11]+dj*ye[9],In=cn*ye[0]*Ch[0]+vo*ye[1]*Gh[0]+Tf*ye[2]*eh[0]+rg*ye[12]+Hm*ye[10]+_j*ye[4]*qh[0]+ei*ye[6]*mh[0]+uf*ye[3]*ah[0]+Tk*ye[5]*uh[0]+Wl*ye[7]*yh[0]+Pg*ye[8]*ih[0]+To*ye[11]+cj*ye[9],Fn=bn*ye[0]*Ch[0]+uo*ye[1]*Gh[0]+Sf*ye[2]*eh[0]+qg*ye[12]+Gm*ye[10]+$j*ye[4]*qh[0]+di*ye[6]*mh[0]+tf*ye[3]*ah[0]+Sk*ye[5]*uh[0]+Vl*ye[7]*yh[0]+Og*ye[8]*ih[0]+So*ye[11]+bj*ye[9],sd()}function sd(){lm=Il*ye[7]*oj[1]+Bg*ye[8]*kj[1]+Fo*ye[11]+Ri*ye[9],td()}function td(){"cav"==Jj?(zn=Oj*ye[4]*mj[1]+Th*ye[6]*lj[1]+lm,Cn=Rm*ye[0]*pj[1]+io*ye[1]*qj[1]+Gf*ye[2]*jj[1]+eg*ye[12]*Kh+um*ye[10],wn=gf*ye[3]*ij[1]+Gk*ye[5]*nj[1]):"inf"==Jj?(Cn=Rm*ye[0]*pj[1]+io*ye[1]*qj[1]+Gf*ye[2]*jj[1]+eg*ye[12]*Kh+um*ye[10]+lm,zn=Oj*ye[4]*mj[1]+Th*ye[6]*lj[1],wn=gf*ye[3]*ij[1]+Gk*ye[5]*nj[1]):"arc"==Jj?(Cn=Rm*ye[0]*pj[1]+io*ye[1]*qj[1]+Gf*ye[2]*jj[1]+eg*ye[12]*Kh+um*ye[10],zn=Oj*ye[4]*mj[1]+Th*ye[6]*lj[1],wn=gf*ye[3]*ij[1]+Gk*ye[5]*nj[1]+lm):(Cn=Rm*ye[0]*pj[1]+io*ye[1]*qj[1]+Gf*ye[2]*jj[1]+eg*ye[12]*Kh+um*ye[10],zn=Oj*ye[4]*mj[1]+Th*ye[6]*lj[1],wn=gf*ye[3]*ij[1]+Gk*ye[5]*nj[1]),ud()}function ud(){qn=Cn*dl,Un=Ln*cl,nn=zn*dl,Rn=In*cl,kn=wn*dl,On=Fn*cl,vd()}function vd(){tn=qn+nn+kn,Xn=Un+Rn+On,wd()}function wd(){Ij=0==qn||0==Un?0:Un<=qn?1:Math.pow(qn/Un,.5/(Un/qn)),xd()}function xd(){Fj=0==nn||0==Rn?0:Rn<=nn?1:Math.pow(nn/Rn,.5/(Rn/nn)),yd()}function yd(){Cj=0==kn||0==On?0:On<=kn?1:Math.pow(kn/On,.5/(On/kn)),zd()}function zd(){zj=0==qn||0==Un?0:qn<=Un?1:Math.pow(Un/qn,.5/(qn/Un)),Ad()}function Ad(){wj=0==nn||0==Rn?0:nn<=Rn?1:Math.pow(Rn/nn,.5/(nn/Rn)),Bd()}function Bd(){tj=0==kn||0==On?0:kn<=On?1:Math.pow(On/kn,.5/(kn/On)),Cd()}function Cd(){Bi=Math.round(1e6*zj)/1e6,Ai=Math.round(1e6*wj)/1e6,zi=Math.round(1e6*tj)/1e6,Ei=Math.round(1e6*Ij)/1e6,Di=Math.round(1e6*Fj)/1e6,Ci=Math.round(1e6*Cj)/1e6,Dd()}function Dd(){Wm=Math.round(-dn*Ei+1e-6)+Math.round(-cn*Di+1e-6)+Math.round(-bn*Ci+1e-6),no=Math.round(-wo*Ei+1e-6)+Math.round(-vo*Di+1e-6)+Math.round(-uo*Ci+1e-6),Lf=Math.round(-Uf*Ei+1e-6)+Math.round(-Tf*Di+1e-6)+Math.round(-Sf*Ci+1e-6),mf=Math.round(-vf*Ei+1e-6)+Math.round(-uf*Di+1e-6)+Math.round(-tf*Ci+1e-6),Tj=Math.round(-ak*Ei+1e-6)+Math.round(-_j*Di+1e-6)+Math.round(-$j*Ci+1e-6),Lk=Math.round(-Uk*Ei+1e-6)+Math.round(-Tk*Di+1e-6)+Math.round(-Sk*Ci+1e-6),Yh=Math.round(-fi*Ei+1e-6)+Math.round(-ei*Di+1e-6)+Math.round(-di*Ci+1e-6),Ol=Math.round(-Xl*Ei+1e-6)+Math.round(-Wl*Di+1e-6)+Math.round(-Vl*Ci+1e-6),Hg=Math.round(-Qg*Ei+1e-6)+Math.round(-Pg*Di+1e-6)+Math.round(-Og*Ci+1e-6),Lo=Math.round(-Uo*Ei+1e-6)+Math.round(-To*Di+1e-6)+Math.round(-So*Ci+1e-6),jg=Math.round(-sg*Ei+1e-6)+Math.round(-rg*Di+1e-6)+Math.round(-qg*Ci+1e-6),Wi=Math.round(-dj*Ei+1e-6)+Math.round(-cj*Di+1e-6)+Math.round(-bj*Ci+1e-6),zm=Math.round(-Im*Ei+1e-6)+Math.round(-Hm*Di+1e-6)+Math.round(-Gm*Ci+1e-6),Pm=Math.round(-Rm*Bi+1e-6),go=Math.round(-io*Bi+1e-6),Ef=Math.round(-Gf*Bi+1e-6),cg=Math.round(-eg*Bi+1e-6),ef=Math.round(-gf*zi+1e-6),Ek=Math.round(-Gk*zi+1e-6),Mj=Math.round(-Oj*Ai+1e-6),Rh=Math.round(-Th*Ai+1e-6),"cav"==Jj?(Gl=Math.round(-Il*Ai+1e-6),zg=Math.round(-Bg*Ai+1e-6),Do=Math.round(-Fo*Ai+1e-6),Pi=Math.round(-Ri*Ai+1e-6)):"inf"==Jj?(Gl=Math.round(-Il*Bi+1e-6),zg=Math.round(-Bg*Bi+1e-6),Do=Math.round(-Fo*Bi+1e-6),Pi=Math.round(-Ri*Bi+1e-6)):"arc"==Jj&&(Gl=Math.round(-Il*zi+1e-6),zg=Math.round(-Bg*zi+1e-6),Do=Math.round(-Fo*zi+1e-6),Pi=Math.round(-Ri*zi+1e-6)),Ed()}function Ed(){sm=100*um==ml?0:Math.round(-um*Bi+1e-6),Fd()}function Fd(){Sm=Rm+Pm,jo=io+go,Hf=Gf+Ef,hf=gf+ef,Pj=Oj+Mj,Hk=Gk+Ek,Uh=Th+Rh,Jl=Il+Gl,Cg=Bg+zg,Go=Fo+Do,fg=eg+cg,vm=um+sm,Si=Ri+Pi,an=Ym+Wm,to=po+no,Rf=Nf+Lf,sf=of+mf,Zj=Vj+Tj,Rk=Nk+Lk,ci=$h+Yh,Ul=Ql+Ol,Ng=Jg+Hg,Ro=No+Lo,pg=lg+jg,Fm=Bm+zm,aj=Yi+Wi,Gd()}function Gd(){lk=Pm*Ge[0]+go*Ge[1]+Ef*Ge[2]+ef*Ge[3]+Mj*Ge[4]+Ek*Ge[5]+Rh*Ge[6]+Gl*Ge[7]+zg*Ge[8]+Pi*Ge[9]+sm*Ge[10]+Do*Ge[11]+cg*Ge[12],ok=Wm*Ge[0]+no*Ge[1]+Lf*Ge[2]+mf*Ge[3]+Tj*Ge[4]+Lk*Ge[5]+Yh*Ge[6]+Ol*Ge[7]+Hg*Ge[8]+Wi*Ge[9]+zm*Ge[10]+Lo*Ge[11]+jg*Ge[12],Hd()}function Hd(){$n=Sm*Ge[0]+jo*Ge[1]+Hf*Ge[2]+hf*Ge[3]+Pj*Ge[4]+Hk*Ge[5]+Uh*Ge[6]+Jl*Ge[7]+Cg*Ge[8]+Go*Ge[11]+fg*Ge[12]+vm*Ge[10]+Si*Ge[9],bo=an*Ge[0]+to*Ge[1]+Rf*Ge[2]+sf*Ge[3]+Zj*Ge[4]+Rk*Ge[5]+ci*Ge[6]+Ul*Ge[7]+Ng*Ge[8]+Ro*Ge[11]+pg*Ge[12]+Fm*Ge[10]+aj*Ge[9],Id()}function Id(){ql=Sm*Ge[0]+jo*Ge[1]+Hf*Ge[2]+hf*Ge[3]+Pj*Ge[4]+Hk*Ge[5]+Uh*Ge[6]+Jl*Ge[7]+Cg*Ge[8]+Si*Ge[9]+vm*Ge[10]+Go*Ge[11]+fg*Ge[12],Cl=an*Ge[0]+to*Ge[1]+Rf*Ge[2]+sf*Ge[3]+Zj*Ge[4]+Rk*Ge[5]+ci*Ge[6]+Ul*Ge[7]+Ng*Ge[8]+aj*Ge[9]+Fm*Ge[10]+Ro*Ge[11]+pg*Ge[12],Jd()}function Jd(){gm=Jl*Ge[7]+Cg*Ge[8]+Go*Ge[11]+Si*Ge[9],Kd()}function Kd(){"cav"==Jj?(kl=Pj*Ge[4]+Uh*Ge[6]+gm,nl=Sm*Ge[0]+jo*Ge[1]+Hf*Ge[2]+fg*Ge[12]+vm*Ge[10],hl=hf*Ge[3]+Hk*Ge[5]):"inf"==Jj?(nl=Sm*Ge[0]+jo*Ge[1]+Hf*Ge[2]+fg*Ge[12]+vm*Ge[10]+gm,kl=Pj*Ge[4]+Uh*Ge[6],hl=hf*Ge[3]+Hk*Ge[5]):"arc"==Jj?(nl=Sm*Ge[0]+jo*Ge[1]+Hf*Ge[2]+fg*Ge[12]+vm*Ge[10],kl=Pj*Ge[4]+Uh*Ge[6],hl=hf*Ge[3]+Hk*Ge[5]+gm):(nl=Sm*Ge[0]+jo*Ge[1]+Hf*Ge[2]+fg*Ge[12]+vm*Ge[10],kl=Pj*Ge[4]+Uh*Ge[6],hl=hf*Ge[3]+Hk*Ge[5]),Ld()}function Ld(){yk=0==nl?0:Math.round(nl/ql*1e4)/1e4,Md()}function Md(){xk=0==kl?0:Math.round(kl/ql*1e4)/1e4,Nd()}function Nd(){wk=0==hl?0:Math.round(hl/ql*1e4)/1e4,Od()}function Od(){hn=an*yk,gn=an*xk,fn=an-gn-hn,Ao=to*yk,zo=to*xk,yo=to-zo-Ao,Yf=Rf*yk,Xf=Rf*xk,Wf=Rf-Xf-Yf,zf=sf*yk,yf=sf*xk,xf=sf-yf-zf,ek=Zj*yk,dk=Zj*xk,ck=Zj-dk-ek,Yk=Rk*yk,Xk=Rk*xk,Wk=Rk-Xk-Yk,ji=ci*yk,ii=ci*xk,hi=ci-ii-ji,_l=Ul*yk,$l=Ul*xk,Zl=Ul-$l-_l,Ug=Ng*yk,Tg=Ng*xk,Sg=Ng-Tg-Ug,Mm=Fm*yk,Lm=Fm*xk,Km=Fm-Lm-Mm,Yo=Ro*yk,Xo=Ro*xk,Wo=Ro-Xo-Yo,wg=pg*yk,vg=pg*xk,ug=pg-vg-wg,hj=aj*yk,gj=aj*xk,fj=aj-gj-hj,Pd()}function Pd(){zl=hn*Ge[0]+Ao*Ge[1]+Yf*Ge[2]+wg*Ge[12]+Mm*Ge[10]+ek*Ge[4]+ji*Ge[6]+zf*Ge[3]+Yk*Ge[5]+_l*Ge[7]+Ug*Ge[8]+Yo*Ge[11]+hj*Ge[9],wl=gn*Ge[0]+zo*Ge[1]+Xf*Ge[2]+vg*Ge[12]+Lm*Ge[10]+dk*Ge[4]+ii*Ge[6]+yf*Ge[3]+Xk*Ge[5]+$l*Ge[7]+Tg*Ge[8]+Xo*Ge[11]+gj*Ge[9],tl=fn*Ge[0]+yo*Ge[1]+Wf*Ge[2]+ug*Ge[12]+Km*Ge[10]+ck*Ge[4]+hi*Ge[6]+xf*Ge[3]+Wk*Ge[5]+Zl*Ge[7]+Sg*Ge[8]+Wo*Ge[11]+fj*Ge[9],Qd()}function Qd(){Mn=hn*ye[0]*Ch[0]+Ao*ye[1]*Gh[0]+Yf*ye[2]*eh[0]+wg*ye[12]+Mm*ye[10]+ek*ye[4]*qh[0]+ji*ye[6]*mh[0]+zf*ye[3]*ah[0]+Yk*ye[5]*uh[0]+_l*ye[7]*yh[0]+Ug*ye[8]*ih[0]+Yo*ye[11]+hj*ye[9],Jn=gn*ye[0]*Ch[0]+zo*ye[1]*Gh[0]+Xf*ye[2]*eh[0]+vg*ye[12]+Lm*ye[10]+dk*ye[4]*qh[0]+ii*ye[6]*mh[0]+yf*ye[3]*ah[0]+Xk*ye[5]*uh[0]+$l*ye[7]*yh[0]+Tg*ye[8]*ih[0]+Xo*ye[11]+gj*ye[9],Gn=fn*ye[0]*Ch[0]+yo*ye[1]*Gh[0]+Wf*ye[2]*eh[0]+ug*ye[12]+Km*ye[10]+ck*ye[4]*qh[0]+hi*ye[6]*mh[0]+xf*ye[3]*ah[0]+Wk*ye[5]*uh[0]+Zl*ye[7]*yh[0]+Sg*ye[8]*ih[0]+Wo*ye[11]+fj*ye[9],Rd()}function Rd(){jm=Jl*ye[7]*oj[1]+Cg*ye[8]*kj[1]+Go*ye[11]+Si*ye[9],Sd()}function Sd(){"cav"==Jj?(An=Pj*ye[4]*mj[1]+Uh*ye[6]*lj[1]+jm,Dn=Sm*ye[0]*pj[1]+jo*ye[1]*qj[1]+Hf*ye[2]*jj[1]+fg*ye[12]*Kh+vm*ye[10],xn=hf*ye[3]*ij[1]+Hk*ye[5]*nj[1]):"inf"==Jj?(Dn=Sm*ye[0]*pj[1]+jo*ye[1]*qj[1]+Hf*ye[2]*jj[1]+fg*ye[12]*Kh+vm*ye[10]+jm,An=Pj*ye[4]*mj[1]+Uh*ye[6]*lj[1],xn=hf*ye[3]*ij[1]+Hk*ye[5]*nj[1]):"arc"==Jj?(Dn=Sm*ye[0]*pj[1]+jo*ye[1]*qj[1]+Hf*ye[2]*jj[1]+fg*ye[12]*Kh+vm*ye[10],An=Pj*ye[4]*mj[1]+Uh*ye[6]*lj[1],xn=hf*ye[3]*ij[1]+Hk*ye[5]*nj[1]+jm):(Dn=Sm*ye[0]*pj[1]+jo*ye[1]*qj[1]+Hf*ye[2]*jj[1]+fg*ye[12]*Kh+vm*ye[10],An=Pj*ye[4]*mj[1]+Uh*ye[6]*lj[1],xn=hf*ye[3]*ij[1]+Hk*ye[5]*nj[1]),Td()}function Td(){rn=Dn*dl,Vn=Mn*cl,on=An*dl,Sn=Jn*cl,ln=xn*dl,Pn=Gn*cl,Ud()}function Ud(){un=rn+on+ln,Yn=Vn+Sn+Pn,Vd()}function Vd(){Gj=0==rn||0==Vn?0:Vn<=rn?1:Math.pow(rn/Vn,.5/(Vn/rn)),Wd()}function Wd(){Dj=0==on||0==Sn?0:Sn<=on?1:Math.pow(on/Sn,.5/(Sn/on)),Xd()}function Xd(){Aj=0==ln||0==Pn?0:Pn<=ln?1:Math.pow(ln/Pn,.5/(Pn/ln)),Yd()}function Yd(){xj=0==rn||0==Vn?0:rn<=Vn?1:Math.pow(Vn/rn,.5/(rn/Vn)),Zd()}function Zd(){uj=0==on||0==Sn?0:on<=Sn?1:Math.pow(Sn/on,.5/(on/Sn)),$d()}function $d(){rj=0==ln||0==Pn?0:ln<=Pn?1:Math.pow(Pn/ln,.5/(ln/Pn)),_d()}function _d(){Hi=Math.round(1e6*xj)/1e6,Gi=Math.round(1e6*uj)/1e6,Fi=Math.round(1e6*rj)/1e6,Ki=Math.round(1e6*Gj)/1e6,Ji=Math.round(1e6*Dj)/1e6,Ii=Math.round(1e6*Aj)/1e6,ae()}function ae(){Xm=Math.round(-hn*Ki+1e-6)+Math.round(-gn*Ji+1e-6)+Math.round(-fn*Ii+1e-6),oo=Math.round(-Ao*Ki+1e-6)+Math.round(-zo*Ji+1e-6)+Math.round(-yo*Ii+1e-6),Mf=Math.round(-Yf*Ki+1e-6)+Math.round(-Xf*Ji+1e-6)+Math.round(-Wf*Ii+1e-6),nf=Math.round(-zf*Ki+1e-6)+Math.round(-yf*Ji+1e-6)+Math.round(-xf*Ii+1e-6),Uj=Math.round(-ek*Ki+1e-6)+Math.round(-dk*Ji+1e-6)+Math.round(-ck*Ii+1e-6),Mk=Math.round(-Yk*Ki+1e-6)+Math.round(-Xk*Ji+1e-6)+Math.round(-Wk*Ii+1e-6),Zh=Math.round(-ji*Ki+1e-6)+Math.round(-ii*Ji+1e-6)+Math.round(-hi*Ii+1e-6),Pl=Math.round(-_l*Ki+1e-6)+Math.round(-$l*Ji+1e-6)+Math.round(-Zl*Ii+1e-6),Ig=Math.round(-Ug*Ki+1e-6)+Math.round(-Tg*Ji+1e-6)+Math.round(-Sg*Ii+1e-6),Mo=Math.round(-Yo*Ki+1e-6)+Math.round(-Xo*Ji+1e-6)+Math.round(-Wo*Ii+1e-6),kg=Math.round(-wg*Ki+1e-6)+Math.round(-vg*Ji+1e-6)+Math.round(-ug*Ii+1e-6),Xi=Math.round(-hj*Ki+1e-6)+Math.round(-gj*Ji+1e-6)+Math.round(-fj*Ii+1e-6),Am=Math.round(-Mm*Ki+1e-6)+Math.round(-Lm*Ji+1e-6)+Math.round(-Km*Ii+1e-6),Qm=Math.round(-Sm*Hi+1e-6),ho=Math.round(-jo*Hi+1e-6),Ff=Math.round(-Hf*Hi+1e-6),dg=Math.round(-fg*Hi+1e-6),ff=Math.round(-hf*Fi+1e-6),Fk=Math.round(-Hk*Fi+1e-6),Nj=Math.round(-Pj*Gi+1e-6),Sh=Math.round(-Uh*Gi+1e-6),"cav"==Jj?(Hl=Math.round(-Jl*Gi+1e-6),Ag=Math.round(-Cg*Gi+1e-6),Eo=Math.round(-Go*Gi+1e-6),Qi=Math.round(-Si*Gi+1e-6)):"inf"==Jj?(Hl=Math.round(-Jl*Hi+1e-6),Ag=Math.round(-Cg*Hi+1e-6),Eo=Math.round(-Go*Hi+1e-6),Qi=Math.round(-Si*Hi+1e-6)):"arc"==Jj&&(Hl=Math.round(-Jl*Fi+1e-6),Ag=Math.round(-Cg*Fi+1e-6),Eo=Math.round(-Go*Fi+1e-6),Qi=Math.round(-Si*Fi+1e-6)),be()}function be(){tm=100*vm==nl?0:Math.round(-vm*Hi+1e-6),ce()}function ce(){Tm=Sm+Qm,ko=jo+ho,If=Hf+Ff,jf=hf+ff,Qj=Pj+Nj,Ik=Hk+Fk,Vh=Uh+Sh,Kl=Jl+Hl,Dg=Cg+Ag,Ho=Go+Eo,gg=fg+dg,wm=vm+tm,Ti=Si+Qi,en=an+Xm,xo=to+oo,Vf=Rf+Mf,wf=sf+nf,bk=Zj+Uj,Vk=Rk+Mk,gi=ci+Zh,Yl=Ul+Pl,Rg=Ng+Ig,Vo=Ro+Mo,tg=pg+kg,Jm=Fm+Am,ej=aj+Xi,de()}function de(){mk=Qm*Ge[0]+ho*Ge[1]+Ff*Ge[2]+ff*Ge[3]+Nj*Ge[4]+Fk*Ge[5]+Sh*Ge[6]+Hl*Ge[7]+Ag*Ge[8]+Qi*Ge[9]+tm*Ge[10]+Eo*Ge[11]+dg*Ge[12],pk=Xm*Ge[0]+oo*Ge[1]+Mf*Ge[2]+nf*Ge[3]+Uj*Ge[4]+Mk*Ge[5]+Zh*Ge[6]+Pl*Ge[7]+Ig*Ge[8]+Xi*Ge[9]+Am*Ge[10]+Mo*Ge[11]+kg*Ge[12],ee()}function ee(){_n=Tm*Ge[0]+ko*Ge[1]+If*Ge[2]+jf*Ge[3]+Qj*Ge[4]+Ik*Ge[5]+Vh*Ge[6]+Kl*Ge[7]+Dg*Ge[8]+Ho*Ge[11]+gg*Ge[12]+wm*Ge[10]+Ti*Ge[9],co=en*Ge[0]+xo*Ge[1]+Vf*Ge[2]+wf*Ge[3]+bk*Ge[4]+Vk*Ge[5]+gi*Ge[6]+Yl*Ge[7]+Rg*Ge[8]+Vo*Ge[11]+tg*Ge[12]+Jm*Ge[10]+ej*Ge[9],fe()}function fe(){Nm=-Ve+Tm,eo=-Xe+ko,Cf=-ze+If,cf=-we+jf,Kj=-Le+Qj,Ck=-Oe+Ik,Ph=-He+Vh,El=-Re+Kl,xg=-De+Dg,Bo=-Ze+If,ag=-Be+If,qm=-Te+wm,Ni=-Je+Ti,Um=-We+en,lo=-Ye+xo,Jf=-Ae+Vf,kf=-xe+wf,Rj=-Me+bk,Jk=-Pe+Vk,Wh=-Ie+gi,Ml=-Se+Yl,Fg=-Ee+Rg,Jo=-$e+Vf,hg=-Ce+Vf,xm=-Ue+Jm,Ui=-Ke+ej,ge()}function ge(){dm=0==Kl?0:Kl*dl*si[1],he()}function he(){mi=20==_o?18:19==_o?17:18==_o?15:17==_o?14:16==_o?13:15==_o?11:14==_o?10:13==_o||12==_o?9:11==_o?8:10==_o?7:9==_o||8==_o?6:7==_o||6==_o?5:5==_o||4==_o||3==_o?4:2==_o||1==_o?3:0,ie()}function ie(){am=0==$f?0:2*mi,je()}function je(){bm=0==dm||0==am?0:-dm/am,ke()}function ke(){Oh=_o<=pm?_o:_o-pm<-bm?_o<pm?_o:pm:_o+bm,le()}function le(){Xg=0==Dg||0==Fe?0:Dg*dl*kj[1],me()}function me(){ki=(Zg="headquarter")?30==Fe?72:29==Fe?65:28==Fe?59:27==Fe?54:26==Fe?50:25==Fe?45:24==Fe?41:23==Fe?36:22==Fe?33:21==Fe?30:20==Fe?27:19==Fe?26:18==Fe?23:17==Fe?14:16==Fe?13:15==Fe?11:14==Fe?10:13==Fe||12==Fe?9:11==Fe?8:10==Fe?7:9==Fe||8==Fe?6:7==Fe||6==Fe?5:5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="wall")?20==_o?18:19==_o?17:18==_o?15:17==_o?14:16==_o?13:15==_o?11:14==_o?10:13==_o||12==_o?9:11==_o?8:10==_o?7:9==_o||8==_o?6:7==_o||6==_o?5:5==_o||4==_o||3==_o?4:2==_o||1==_o?3:0:(Zg="tavern")?15==Fe?11:14==Fe?10:13==Fe||12==Fe?9:11==Fe?8:10==Fe?7:9==Fe||8==Fe?6:7==Fe||6==Fe?5:5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="hospital")?10==Fe?7:9==Fe||8==Fe?6:7==Fe||6==Fe?5:5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="satue")?5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="rally_point")?5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="church")?3==Fe||2==Fe||1==Fe?800:0:(Zg="academy")?1==Fe?500:0:(Zg="preceptory")?10==Fe?71:9==Fe?43:8==Fe?39:7==Fe?35:6==Fe?32:5==Fe?29:4==Fe?27:3==Fe?24:2==Fe?22:1==Fe?20:0:(Zg="barracks")?25==Fe?30:24==Fe?27:23==Fe?24:22==Fe?22:21==Fe?20:20==Fe?18:19==Fe?17:18==Fe?15:17==Fe?14:16==Fe?13:15==Fe?11:14==Fe?10:13==Fe||12==Fe?9:11==Fe?8:10==Fe?7:9==Fe||8==Fe?6:7==Fe||6==Fe?5:5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="market")?25==Fe?30:24==Fe?27:23==Fe?24:22==Fe?22:21==Fe?20:20==Fe?18:19==Fe?17:18==Fe?15:17==Fe?14:16==Fe?13:15==Fe?11:14==Fe?10:13==Fe||12==Fe?9:11==Fe?8:10==Fe?7:9==Fe||8==Fe?6:7==Fe||6==Fe?5:5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="warehouse")?30==Fe?48:29==Fe?43:28==Fe?39:27==Fe?36:26==Fe?33:25==Fe?30:24==Fe?27:23==Fe?24:22==Fe?22:21==Fe?20:20==Fe?18:19==Fe?17:18==Fe?15:17==Fe?14:16==Fe?13:15==Fe?11:14==Fe?10:13==Fe||12==Fe?9:11==Fe?8:10==Fe?7:9==Fe||8==Fe?6:7==Fe||6==Fe?5:5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="timber_camp")?30==Fe?48:29==Fe?43:28==Fe?39:27==Fe?36:26==Fe?33:25==Fe?30:24==Fe?27:23==Fe?24:22==Fe?22:21==Fe?20:20==Fe?18:19==Fe?17:18==Fe?15:17==Fe?14:16==Fe?13:15==Fe?11:14==Fe?10:13==Fe||12==Fe?9:11==Fe?8:10==Fe?7:9==Fe||8==Fe?6:7==Fe||6==Fe?5:5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="clay_pit")?30==Fe?48:29==Fe?43:28==Fe?39:27==Fe?36:26==Fe?33:25==Fe?30:24==Fe?27:23==Fe?24:22==Fe?22:21==Fe?20:20==Fe?18:19==Fe?17:18==Fe?15:17==Fe?14:16==Fe?13:15==Fe?11:14==Fe?10:13==Fe||12==Fe?9:11==Fe?8:10==Fe?7:9==Fe||8==Fe?6:7==Fe||6==Fe?5:5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="iron_mine")?30==Fe?48:29==Fe?43:28==Fe?39:27==Fe?36:26==Fe?33:25==Fe?30:24==Fe?27:23==Fe?24:22==Fe?22:21==Fe?20:20==Fe?18:19==Fe?17:18==Fe?15:17==Fe?14:16==Fe?13:15==Fe?11:14==Fe?10:13==Fe||12==Fe?9:11==Fe?8:10==Fe?7:9==Fe||8==Fe?6:7==Fe||6==Fe?5:5==Fe||4==Fe||3==Fe?4:2==Fe||1==Fe?3:0:(Zg="farm")?30==Fe?79:29==Fe?72:28==Fe?66:27==Fe?60:26==Fe?54:25==Fe?49:24==Fe?45:23==Fe?41:22==Fe?37:21==Fe?34:20==Fe?31:19==Fe?28:18==Fe?25:17==Fe?23:16==Fe?21:15==Fe?19:14==Fe?17:13==Fe?16:12==Fe?14:11==Fe?13:10==Fe?12:9==Fe?11:8==Fe?10:7==Fe?9:6==Fe?8:5==Fe||4==Fe?7:2==Fe||3==Fe?6:1==Fe?5:0:0,ne()}function ne(){Vg=0==Fe?0:ki*cl,oe()}function oe(){Wg=0==Xg||0==Vg?0:-Xg/Vg,pe()}function pe(){Nh="wall"==Zg?Oh<=pm?Oh:Oh-pm<-Wg?Oh<pm?Oh:pm:Oh+Wg:Wg+Fe<=0?0:Wg+Fe,qe()}function qe(){bf=Math.round(Oh),re()}function re(){af=Math.round(Nh),se()}function se(){zk=Nm*Ge[0]+eo*Ge[1]+Cf*Ge[2]+cf*Ge[3]+Kj*Ge[4]+Ck*Ge[5]+Ph*Ge[6]+El*Ge[7]+xg*Ge[8]+Ni*Ge[9]+qm*Ge[10]+Bo*Ge[11]+ag*Ge[12],Ak=Um*Ge[0]+lo*Ge[1]+Jf*Ge[2]+kf*Ge[3]+Rj*Ge[4]+Jk*Ge[5]+Wh*Ge[6]+Ml*Ge[7]+Fg*Ge[8]+Ui*Ge[9]+xm*Ge[10]+Jo*Ge[11]+hg*Ge[12],te()}function te(){Li=0==Bf||0==zk?0:-zk/Bf,ue()}function ue(){Mi=0==$g||0==Ak?0:-Ak/$g,ve()}function ve(){D.html(Ve),E.html(Nm),F.html(0),G.html(Tm),H.html(Xe),I.html(eo),J.html(0),K.html(ko),L.html(ze),M.html(Cf),N.html(0),O.html(If),P.html(we),Q.html(cf),R.html(0),S.html(jf),T.html(Le),U.html(Kj),V.html(0),W.html(Qj),X.html(Oe),Y.html(Ck),Z.html(0),_.html(Ik),aa.html(He),ba.html(Ph),ca.html(0),da.html(Vh),ea.html(Re),fa.html(El),ga.html(0),ha.html(Kl),ia.html(De),ja.html(xg),ka.html(0),la.html(Dg),ma.html(Te),na.html(qm),oa.html(0),pa.html(wm),qa.html(Je),ra.html(Ni),sa.html(0),ta.html(Ti),$trebuchetAamount.html(Ze),$trebuchetAlosses.html(Bo),$trebuchetArevived.html(0),$trebuchetAsurvived.html(Ho),$berserkerAamount.html(Be),$berserkerAlosses.html(ag),$berserkerArevived.html(0),$berserkerAsurvived.html(gg),ua.html(We),va.html(Um),wa.html(0),xa.html(en),ya.html(Ye),za.html(lo),Aa.html(0),Ba.html(xo),Ca.html(Ae),Da.html(Jf),Ea.html(0),Fa.html(Vf),Ga.html(xe),Ha.html(kf),Ia.html(0),Ja.html(wf),Ka.html(Me),La.html(Rj),Ma.html(0),Na.html(bk),Oa.html(Pe),Pa.html(Jk),Qa.html(0),Ra.html(Vk),Sa.html(Ie),Ta.html(Wh),Ua.html(0),Va.html(gi),Wa.html(Se),Xa.html(Ml),Ya.html(0),Za.html(Yl),$a.html(Ee),_a.html(Fg),ab.html(0),bb.html(Rg),cb.html(Ue),db.html(xm),eb.html(0),fb.html(Jm),gb.html(Ke),hb.html(Ui),ib.html(0),jb.html(ej),$trebuchetDamount.html($e),$trebuchetDlosses.html(Jo),$trebuchetDrevived.html(0),$trebuchetDsurvived.html(Vo),$berserkerDamount.html(Ce),$berserkerDlosses.html(hg),$berserkerDrevived.html(0),$berserkerDsurvived.html(tg),n.html(100*dl),o.html(Bf),p.html(0),q.html(Li),r.html(sn),s.html(100*cl),t.html($g),u.html(0),v.html(Mi),w.html(Wn),x.html(_e),y.html(_o),z.html(_o),A.html(bf),B.html(Fe),C.html(af),f.emitNotif("success",b("simulator","calculated"))}
var we=parseInt(document.getElementById("archerA").value),xe=parseInt(document.getElementById("archerD").value),ye=[10,25,45,25,130,150,150,2,100,150,30,30,300],ze=parseInt(document.getElementById("axeA").value),Ae=parseInt(document.getElementById("axeD").value),Be=parseInt(document.getElementById("berserkerA").value),Ce=parseInt(document.getElementById("berserkerD").value),De=parseInt(document.getElementById("catapultA").value),Ee=parseInt(document.getElementById("catapultD").value),Fe=parseInt(document.getElementById("buildingLevel").value),Ge=[1,1,1,1,4,5,6,5,8,1,100,10,6],He=parseInt(document.getElementById("hcA").value),Ie=parseInt(document.getElementById("hcD").value),Je=parseInt(document.getElementById("knightA").value),Ke=parseInt(document.getElementById("knightD").value),Le=parseInt(document.getElementById("lcA").value),Me=parseInt(document.getElementById("lcD").value),Ne=parseInt(document.getElementById("luck").value),Oe=parseInt(document.getElementById("maA").value),Pe=parseInt(document.getElementById("maD").value),Qe=parseInt(document.getElementById("morale").value),Re=parseInt(document.getElementById("ramA").value),Se=parseInt(document.getElementById("ramD").value),Te=parseInt(document.getElementById("snobA").value),Ue=parseInt(document.getElementById("snobD").value),Ve=parseInt(document.getElementById("spearA").value),We=parseInt(document.getElementById("spearD").value),Xe=parseInt(document.getElementById("swordA").value),Ye=parseInt(document.getElementById("swordD").value),Ze=parseInt(document.getElementById("trebuchetA").value),$e=parseInt(document.getElementById("trebuchetD").value),_e=parseInt(document.getElementById("wall").value),af=0,bf=0,cf=0,df=0,ef=0,ff=0,gf=0,hf=0,jf=0,kf=0,lf=0,mf=0,nf=0,of=0,pf=0,qf=0,rf=0,sf=0,tf=0,uf=0,vf=0,wf=0,xf=0,yf=0,zf=0,Af=0,Bf=0,Cf=0,Df=0,Ef=0,Ff=0,Gf=0,Hf=0,If=0,Jf=0,Kf=0,Lf=0,Mf=0,Nf=0,Of=0,Pf=0,Qf=0,Rf=0,Sf=0,Tf=0,Uf=0,Vf=0,Wf=0,Xf=0,Yf=0,Zf=0,$f=0,_f=0,ag=0,bg=0,cg=0,dg=0,eg=0,fg=0,gg=0,hg=0,ig=0,jg=0,kg=0,lg=0,mg=0,ng=0,og=0,pg=0,qg=0,rg=0,sg=0,tg=0,ug=0,vg=0,wg=0,xg=0,yg=0,zg=0,Ag=0,Bg=0,Cg=0,Dg=0,Eg=0,Fg=0,Gg=0,Hg=0,Ig=0,Jg=0,Kg=0,Lg=0,Mg=0,Ng=0,Og=0,Pg=0,Qg=0,Rg=0,Sg=0,Tg=0,Ug=0,Vg=0,Wg=0,Xg=0,Yg=0,Zg=0,$g=0,_g=0,ah=[1,1],bh=[1,1],ch=[1,1],dh=[1,1],eh=[1,1],fh=[1,1],gh=[1,1],hh=[1,1],ih=[1,1],jh=[1,1],kh=[1,1],lh=[1,1],mh=[1,1],nh=[1,1],oh=[1,1],ph=[1,1],qh=[1,1],rh=[1,1],sh=[1,1],th=[1,1],uh=[1,1],vh=[1,1],wh=[1,1],xh=[1,1],yh=[1,1],zh=[1,1],Ah=[1,1],Bh=[1,1],Ch=[1,1],Dh=[1,1],Eh=[1,1],Fh=[1,1],Gh=[1,1],Hh=[1,1],Ih=[1,1],Jh=[1,1],Kh=0,Lh=0,Mh=0,Nh=0,Oh=0,Ph=0,Qh=0,Rh=0,Sh=0,Th=0,Uh=0,Vh=0,Wh=0,Xh=0,Yh=0,Zh=0,$h=0,_h=0,ai=0,bi=0,ci=0,di=0,ei=0,fi=0,gi=0,hi=0,ii=0,ji=0,ki=0,li=0,mi=0,ni=0,oi=0,pi=0,qi=0,ri=0,si=[1,1],ti=0,ui=0,vi=0,wi=0,xi=0,yi=0,zi=0,Ai=0,Bi=0,Ci=0,Di=0,Ei=0,Fi=0,Gi=0,Hi=0,Ii=0,Ji=0,Ki=0,Li=0,Mi=0,Ni=0,Oi=0,Pi=0,Qi=0,Ri=0,Si=0,Ti=0,Ui=0,Vi=0,Wi=0,Xi=0,Yi=0,Zi=0,$i=0,_i=0,aj=0,bj=0,cj=0,dj=0,ej=0,fj=0,gj=0,hj=0,ij=[1,1],jj=[1,1],kj=[1,1],lj=[1,1],mj=[1,1],nj=[1,1],oj=[1,1],pj=[1,1],qj=[1,1],rj=0,sj=0,tj=0,uj=0,vj=0,wj=0,xj=0,yj=0,zj=0,Aj=0,Bj=0,Cj=0,Dj=0,Ej=0,Fj=0,Gj=0,Hj=0,Ij=0,Jj=0,Kj=0,Lj=0,Mj=0,Nj=0,Oj=0,Pj=0,Qj=0,Rj=0,Sj=0,Tj=0,Uj=0,Vj=0,Wj=0,Xj=0,Yj=0,Zj=0,$j=0,_j=0,ak=0,bk=0,ck=0,dk=0,ek=0,fk=0,gk=0,hk=0,ik=0,jk=0,kk=0,lk=0,mk=0,nk=0,ok=0,pk=0,qk=0,rk=0,sk=0,tk=0,uk=0,vk=0,wk=0,xk=0,yk=0,zk=0,Ak=0,Bk=0,Ck=0,Dk=0,Ek=0,Fk=0,Gk=0,Hk=0,Ik=0,Jk=0,Kk=0,Lk=0,Mk=0,Nk=0,Ok=0,Pk=0,Qk=0,Rk=0,Sk=0,Tk=0,Uk=0,Vk=0,Wk=0,Xk=0,Yk=0,Zk=0,$k=0,_k=0,al=1,bl=0,cl=0,dl=0,el=0,fl=0,gl=0,hl=0,il=0,jl=0,kl=0,ll=0,ml=0,nl=0,ol=0,pl=0,ql=0,rl=0,sl=0,tl=0,ul=0,vl=0,wl=0,xl=0,yl=0,zl=0,Al=0,Bl=0,Cl=0,Dl=0,El=0,Fl=0,Gl=0,Hl=0,Il=0,Jl=0,Kl=0,Ll=0,Ml=0,Nl=0,Ol=0,Pl=0,Ql=0,Rl=0,Sl=0,Tl=0,Ul=0,Vl=0,Wl=0,Xl=0,Yl=0,Zl=0,$l=0,_l=0,am=0,bm=0,cm=0,dm=0,em=0,fm=0,gm=0,hm=0,im=0,jm=0,km=0,lm=0,mm=0,nm=0,om=0,pm=0,qm=0,rm=0,sm=0,tm=0,um=0,vm=0,wm=0,xm=0,ym=0,zm=0,Am=0,Bm=0,Cm=0,Dm=0,Em=0,Fm=0,Gm=0,Hm=0,Im=0,Jm=0,Km=0,Lm=0,Mm=0,Nm=0,Om=0,Pm=0,Qm=0,Rm=0,Sm=0,Tm=0,Um=0,Vm=0,Wm=0,Xm=0,Ym=0,Zm=0,$m=0,_m=0,an=0,bn=0,cn=0,dn=0,en=0,fn=0,gn=0,hn=0,jn=0,kn=0,ln=0,mn=0,nn=0,on=0,pn=0,qn=0,rn=0,sn=0,tn=0,un=0,vn=0,wn=0,xn=0,yn=0,zn=0,An=0,Bn=0,Cn=0,Dn=0,En=0,Fn=0,Gn=0,Hn=0,In=0,Jn=0,Kn=0,Ln=0,Mn=0,Nn=0,On=0,Pn=0,Qn=0,Rn=0,Sn=0,Tn=0,Un=0,Vn=0,Wn=0,Xn=0,Yn=0,Zn=0,$n=0,_n=0,ao=0,bo=0,co=0,eo=0,fo=0,go=0,ho=0,io=0,jo=0,ko=0,lo=0,mo=0,no=0,oo=0,po=0,qo=0,ro=0,so=0,to=0,uo=0,vo=0,wo=0,xo=0,yo=0,zo=0,Ao=0,Bo=0,Co=0,Do=0,Eo=0,Fo=0,Go=0,Ho=0,Io=0,Jo=0,Ko=0,Lo=0,Mo=0,No=0,Oo=0,Po=0,Qo=0,Ro=0,So=0,To=0,Uo=0,Vo=0,Wo=0,Xo=0,Yo=0,Zo=0,$o=0,_o=0,ap=0,bp=0,cp=0,dp=0,ep=0;!function(){Lh=parseInt(Hb[0].dataset.value),console.log("Wiara atakującego: "+Lh),a()}()}),ob.on("click",function(){function a(){Q=Eb[0].dataset.value,b()}function b(){R=1==y?1.01:2==y?1.02:3==y?1.03:4==y?1.04:5==y?1.05:6==y?1.06:7==y?1.07:8==y?1.08:9==y?1.09:10==y?1.1:1,c()}function c(){P=document.getElementById("settings-domination").checked?1.1:1,e()}function d(a){var b="",c=new Date(1e3*a),d=c.toISOString().substr(11,8),e=Math.floor(a/86400);return e>1?b=e+" dni i ":e>0&&(b="1 dzień i "),b+=d}function e(){L=u>0?I[6]+" minut":v>0?I[5]+" minut":r>0||s>0?I[4]+" minuty":l>0?I[3]+" minut":k>0||m>0||n>0||t>0?I[2]+" minut":q>0?I[1]+" minut":o>0||p>0||w>0?I[0]+" minut":I[7]+" minut",f()}function f(){M=x>=7&&x<14?K[1]:x>=14&&x<23?K[2]:x>=23?K[3]:K[0],g()}function g(){T=N/(P*Q),S=T/O,U=S/R,V=N/R,h()}function h(){buildTime="deff"==W?U*(k*D[0]+l*D[1]+n*D[3]+q*D[6])+V*(u*D[11])+S*(m*D[2]+o*D[4]+p*D[5]+r*D[7]+s*D[8])+t*D[12]+w*D[9]+v*D[10]:"off"==W?S*(k*D[0]+l*D[1]+n*D[3]+q*D[6])+u*D[11]+U*(m*D[2]+o*D[4]+p*D[5]+r*D[7]+s*D[8])+V*(t*D[12])+w*D[9]+v*D[10]:S*(k*D[0]+l*D[1]+n*D[3]+q*D[6])+u*D[11]+S*(m*D[2]+o*D[4]+p*D[5]+r*D[7]+s*D[8])+t*D[12]+w*D[9]+v*D[10],i()}function i(){woodAmount=k*z[0]+l*z[1]+m*z[2]+n*z[3]+o*z[4]+p*z[5]+q*z[6]+r*z[7]+s*z[8]+w*z[9]+v*z[10]+u*z[11]+t*z[12],clayAmount=k*A[0]+l*A[1]+m*A[2]+n*A[3]+o*A[4]+p*A[5]+q*A[6]+r*A[7]+s*A[8]+w*A[9]+v*A[10]+u*A[11]+t*A[12],ironAmount=k*B[0]+l*B[1]+m*B[2]+n*B[3]+o*B[4]+p*B[5]+q*B[6]+r*B[7]+s*B[8]+w*B[9]+v*B[10]+u*B[11]+t*B[12],foodAmount=k*C[0]+l*C[1]+m*C[2]+n*C[3]+o*C[4]+p*C[5]+q*C[6]+r*C[7]+s*C[8]+w*C[9]+v*C[10]+u*C[11]+t*C[12],attackPower=k*E[0]+l*E[1]+m*E[2]+n*E[3]+o*E[4]+p*E[5]+q*E[6]+r*E[7]+s*E[8]+w*E[9]+v*E[10]+u*E[11]+t*E[12],defInf=k*F[0]+l*F[1]+m*F[2]+n*F[3]+o*F[4]+p*F[5]+q*F[6]+r*F[7]+s*F[8]+w*F[9]+v*F[10]+u*F[11]+t*F[12],defCav=k*G[0]+l*G[1]+m*G[2]+n*G[3]+o*G[4]+p*G[5]+q*G[6]+r*G[7]+s*G[8]+w*G[9]+v*G[10]+u*G[11]+t*G[12],defArch=k*H[0]+l*H[1]+m*H[2]+n*H[3]+o*H[4]+p*H[5]+q*H[6]+r*H[7]+s*H[8]+w*H[9]+v*H[10]+u*H[11]+t*H[12],loadAmount=k*J[0]+l*J[1]+m*J[2]+n*J[3]+o*J[4]+p*J[5]+q*J[6]+r*J[7]+s*J[8]+w*J[9]+v*J[10]+u*J[11]+t*J[12],finalTime=d(buildTime),attInf=k*E[0]+l*E[1]+m*E[2]+r*E[7]+s*E[8]+u*E[11]+t*E[12],attCav=o*E[4]+q*E[6]+w*E[9],attArc=n*E[3]+p*E[5],j()}function j(){pb.html(woodAmount),qb.html(clayAmount),rb.html(ironAmount),sb.html(foodAmount),tb.html(attackPower),ub.html(attInf),vb.html(attCav),wb.html(attArc),xb.html(defInf),yb.html(defCav),zb.html(defArch),Ab.html(L),Bb.html(loadAmount),Cb.html(M),Db.html(finalTime)}var k=document.getElementById("spearCost").value,l=document.getElementById("swordCost").value,m=document.getElementById("axeCost").value,n=document.getElementById("archerCost").value,o=document.getElementById("lcCost").value,p=document.getElementById("maCost").value,q=document.getElementById("hcCost").value,r=document.getElementById("ramCost").value,s=document.getElementById("catapultCost").value,t=document.getElementById("berserkerCost").value,u=document.getElementById("trebuchetCost").value,v=document.getElementById("snobCost").value,w=document.getElementById("knightCost").value,x=document.getElementById("barracks").value,y=document.getElementById("preceptory").value,z=[50,30,60,80,125,250,200,300,320,0,4e4,4e3,1200],A=[30,30,30,30,100,100,150,200,400,0,5e4,2e3,1200],B=[20,70,40,60,250,150,600,200,100,0,5e4,2e3,2400],C=[1,1,1,1,4,5,6,5,8,1,100,10,6],D=[90,120,150,180,360,450,600,480,450,10800,3600,1200,1200],E=[10,25,45,25,130,150,150,2,100,150,30,30,300],F=[25,55,10,10,30,40,200,20,100,250,100,200,100],G=[45,5,5,30,40,30,80,50,50,400,50,250,100],H=[10,30,10,60,30,50,180,20,100,150,100,200,50],I=[8,9,14,18,24,35,50,0],J=[25,15,10,10,80,50,50,0,0,100,0,0,10],K=[0,33,66,99],L=0,M=0,N=1,O=1,P=1,Q=1,R=1,S=1,T=1,U=1,V=1,W=Gb[0].dataset.value;!function(){O=x>=10&&x<20?1.05:x>=20&&x<25?1.15:x>=25?1.3:1,a()}()}),lb.on("click",function(){function a(){mb.html(r),nb.html(q)}var b=document.getElementById("spearBash").value,c=document.getElementById("swordBash").value,d=document.getElementById("axeBash").value,e=document.getElementById("archerBash").value,f=document.getElementById("lcBash").value,g=document.getElementById("maBash").value,h=document.getElementById("hcBash").value,i=document.getElementById("ramBash").value,j=document.getElementById("catapultBash").value,k=document.getElementById("berserkerBash").value,l=document.getElementById("trebuchetBash").value,m=document.getElementById("snobBash").value,n=document.getElementById("knightBash").value,o=[1,2,4,2,13,12,15,8,10,20,200,0,25],p=[4,5,1,5,5,6,23,4,12,40,200,25,10],q=0,r=0;!function(){q=b*o[0]+c*o[1]+d*o[2]+e*o[3]+f*o[4]+g*o[5]+h*o[6]+i*o[7]+j*o[8]+n*o[9]+m*o[10]+l*o[11]+k*o[12],r=b*p[0]+c*p[1]+d*p[2]+e*p[3]+f*p[4]+g*p[5]+h*p[6]+i*p[7]+j*p[8]+n*p[9]+m*p[10]+l*p[11]+k*p[12],setTimeout(a,500)}()}),Eb.on("selectSelected",function(){intenseTraining=Eb[0].dataset.value}),Gb.on("selectSelected",function(){order=Gb[0].dataset.value}),Ib.on("selectSelected",function(){faithDefender=Ib[0].dataset.value}),Hb.on("selectSelected",function(){faithAttacker=Hb[0].dataset.value}),Nb.on("selectSelected",function(){skillAttack=Nb[0].dataset.value}),Ob.on("selectSelected",function(){skillWalls=Ob[0].dataset.value}),Pb.on("selectSelected",function(){skillClinique=Pb[0].dataset.value}),Qb.on("selectSelected",function(){hospitalBeds=Qb[0].dataset.value}),Rb.on("selectSelected",function(){catapultTarget=Rb[0].dataset.value}),Sb.on("selectSelected",function(){itemDeff1=Sb[0].dataset.value}),Tb.on("selectSelected",function(){itemDeff2=Tb[0].dataset.value}),Ub.on("selectSelected",function(){itemDeff3=Ub[0].dataset.value}),Vb.on("selectSelected",function(){itemOff=Vb[0].dataset.value}),Wb.on("selectSelected",function(){levelDeff1=Wb[0].dataset.value}),Xb.on("selectSelected",function(){levelDeff2=Xb[0].dataset.value}),Yb.on("selectSelected",function(){levelDeff3=Yb[0].dataset.value}),Zb.on("selectSelected",function(){levelOff=Zb[0].dataset.value})},_b=function(){return k=new c("BattleCalculator",{activeTab:"battle",
template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("simulator", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-three-col"><div class="tab" tab="battle"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("simulator", "battle") #></a></div></div></div><div class="tab" tab="troops"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("simulator", "troops") #></a></div></div></div><div class="tab" tab="bashpoints"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("simulator", "bashpoints") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-battle"><h5 class="twx-section"><#= locale("simulator", "battle.header") #></h5><form class="addForm1"><table class="tbl-border-light tbl-striped"><colgroup><col></colgroup><tbody><tr><td class="item-simulate"><span class="btn btn-orange addSelected" tooltip="<#= locale("simulator", "simulate.tip") #>"><#= locale("simulator", "simulate.btn") #></span></td></tr></tbody></table></form><form class="addForm"><table class="table table_vertical" id="simulation_result"><colgroup><col><col width="34px"><col width="34px"><col width="34px"><col width="34px"><col width="34px"><col width="34px"><col width="34px"><col width="34px"><col width="34px"><col width="34px"><col width="34px"><col width="34px"><col width="34px"></colgroup><tbody><tr><th colspan="14"><#= locale("simulator", "battle.attacker") #></th></tr><tr><td style="padding-left:5px;"><div style="height:34px;line-height:34px;"><span class="unitname"><#= locale("simulator", "battle.unit") #></span></div><div height="26px"><span class="icon-20x20-report-amount"></span><span class="unitname"><#= locale("simulator", "battle.amount") #></span></div><div height="26px"><span class="icon-20x20-report-losses"></span><span class="unitname"><#= locale("simulator", "battle.loses") #></span></div><div height="26px"><span class="icon-20x20-report-revive"></span><span class="unitname"><#= locale("simulator", "battle.revived") #></span></div><div height="26px"><span class="unitname" tooltip="<#= locale("simulator", "battle.survivorsA") #>"><#= locale("simulator", "battle.survivors") #></span></div></td><td><span class="icon-bg-black icon-34x34-unit-spear"></span><div class="spearA-amount" style="text-align:center;">0</div><div class="spearA-losses" style="text-align:center;color:#a1251f">0</div><div class="spearA-revived" style="text-align:center;color:#009fff">0</div><div class="spearA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-sword"></span><div class="swordA-amount" style="text-align:center;">0</div><div class="swordA-losses" style="text-align:center;color:#a1251f">0</div><div class="swordA-revived" style="text-align:center;color:#009fff">0</div><div class="swordA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-axe"></span><div class="axeA-amount" style="text-align:center;">0</div><div class="axeA-losses" style="text-align:center;color:#a1251f">0</div><div class="axeA-revived" style="text-align:center;color:#009fff">0</div><div class="axeA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-archer"></span><div class="archerA-amount" style="text-align:center;">0</div><div class="archerA-losses" style="text-align:center;color:#a1251f">0</div><div class="archerA-revived" style="text-align:center;color:#009fff">0</div><div class="archerA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-light_cavalry"></span><div class="lcA-amount" style="text-align:center;">0</div><div class="lcA-losses" style="text-align:center;color:#a1251f">0</div><div class="lcA-revived" style="text-align:center;color:#009fff">0</div><div class="lcA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-mounted_archer"></span><div class="maA-amount" style="text-align:center;">0</div><div class="maA-losses" style="text-align:center;color:#a1251f">0</div><div class="maA-revived" style="text-align:center;color:#009fff">0</div><div class="maA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-heavy_cavalry"></span><div class="hcA-amount" style="text-align:center;">0</div><div class="hcA-losses" style="text-align:center;color:#a1251f">0</div><div class="hcA-revived" style="text-align:center;color:#009fff">0</div><div class="hcA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-ram"></span><div class="ramA-amount" style="text-align:center;">0</div><div class="ramA-losses" style="text-align:center;color:#a1251f">0</div><div class="ramA-revived" style="text-align:center;color:#009fff">0</div><div class="ramA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-catapult"></span><div class="catapultA-amount" style="text-align:center;">0</div><div class="catapultA-losses" style="text-align:center;color:#a1251f">0</div><div class="catapultA-revived" style="text-align:center;color:#009fff">0</div><div class="catapultA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-doppelsoldner"></span><div class="berserkerA-amount" style="text-align:center;">0</div><div class="berserkerA-losses" style="text-align:center;color:#a1251f">0</div><div class="berserkerA-revived" style="text-align:center;color:#009fff">0</div><div class="berserkerA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-trebuchet"></span><div class="trebuchetA-amount" style="text-align:center;">0</div><div class="trebuchetA-losses" style="text-align:center;color:#a1251f">0</div><div class="trebuchetA-revived" style="text-align:center;color:#009fff">0</div><div class="trebuchetA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-snob"></span><div class="snobA-amount" style="text-align:center;">0</div><div class="snobA-losses" style="text-align:center;color:#a1251f">0</div><div class="snobA-revived" style="text-align:center;color:#009fff">0</div><div class="snobA-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-knight"></span><div class="knightA-amount" style="text-align:center;">0</div><div class="knightA-losses" style="text-align:center;color:#a1251f">0</div><div class="knightA-revived" style="text-align:center;color:#009fff">0</div><div class="knightA-survived" style="text-align:center;color:#000000">0</div></td></tr><tr><td colspan="7"><#= locale("simulator", "battle.attackModifier") #><span align="right" class="attackModifier"></span>%</td><td colspan="7"><#= locale("simulator", "battle.provisions") #><span align="right" class="attackProvisions"></span></td></tr><tr><td colspan="7"><#= locale("simulator", "battle.attackBashpoint") #><span align="right" class="attackBashpoint"></span></td><td colspan="7"><#= locale("simulator", "battle.killrateA") #><span align="right" class="killrateA"></span>%</td></tr><tr><td colspan="14"><#= locale("simulator", "battle.strentghAttack") #><span align="right" class="strentghAttack"></span></td></tr><tr><th colspan="14"><#= locale("simulator", "battle.defender") #></th></tr><tr><td style="padding-left:5px;"><div style="height:34px;line-height:34px;"><span class="unitname"><#= locale("simulator", "battle.unit") #></span></div><div height="26px"><span class="icon-20x20-report-amount"></span><span class="unitname"><#= locale("simulator", "battle.amount") #></span></div><div height="26px"><span class="icon-20x20-report-losses"></span><span class="unitname"><#= locale("simulator", "battle.loses") #></span></div><div height="26px"><span class="icon-20x20-report-revive"></span><span class="unitname"><#= locale("simulator", "battle.revived") #></span></div><div height="26px"><span class="unitname" tooltip="<#= locale("simulator", "battle.survivorsD") #>"><#= locale("simulator", "battle.survivors") #></span></div></td><td><span class="icon-bg-black icon-34x34-unit-spear"></span><div class="spearD-amount" style="text-align:center;">0</div><div class="spearD-losses" style="text-align:center;color:#a1251f">0</div><div class="spearD-revived" style="text-align:center;color:#009fff">0</div><div class="spearD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-sword"></span><div class="swordD-amount" style="text-align:center;">0</div><div class="swordD-losses" style="text-align:center;color:#a1251f">0</div><div class="swordD-revived" style="text-align:center;color:#009fff">0</div><div class="swordD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-axe"></span><div class="axeD-amount" style="text-align:center;">0</div><div class="axeD-losses" style="text-align:center;color:#a1251f">0</div><div class="axeD-revived" style="text-align:center;color:#009fff">0</div><div class="axeD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-archer"></span><div class="archerD-amount" style="text-align:center;">0</div><div class="archerD-losses" style="text-align:center;color:#a1251f">0</div><div class="archerD-revived" style="text-align:center;color:#009fff">0</div><div class="archerD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-light_cavalry"></span><div class="lcD-amount" style="text-align:center;">0</div><div class="lcD-losses" style="text-align:center;color:#a1251f">0</div><div class="lcD-revived" style="text-align:center;color:#009fff">0</div><div class="lcD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-mounted_archer"></span><div class="maD-amount" style="text-align:center;">0</div><div class="maD-losses" style="text-align:center;color:#a1251f">0</div><div class="maD-revived" style="text-align:center;color:#009fff">0</div><div class="maD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-heavy_cavalry"></span><div class="hcD-amount" style="text-align:center;">0</div><div class="hcD-losses" style="text-align:center;color:#a1251f">0</div><div class="hcD-revived" style="text-align:center;color:#009fff">0</div><div class="hcD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-ram"></span><div class="ramD-amount" style="text-align:center;">0</div><div class="ramD-losses" style="text-align:center;color:#a1251f">0</div><div class="ramD-revived" style="text-align:center;color:#009fff">0</div><div class="ramD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-catapult"></span><div class="catapultD-amount" style="text-align:center;">0</div><div class="catapultD-losses" style="text-align:center;color:#a1251f">0</div><div class="catapultD-revived" style="text-align:center;color:#009fff">0</div><div class="catapultD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-doppelsoldner"></span><div class="berserkerD-amount" style="text-align:center;">0</div><div class="berserkerD-losses" style="text-align:center;color:#a1251f">0</div><div class="berserkerD-revived" style="text-align:center;color:#009fff">0</div><div class="berserkerD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-trebuchet"></span><div class="trebuchetD-amount" style="text-align:center;">0</div><div class="trebuchetD-losses" style="text-align:center;color:#a1251f">0</div><div class="trebuchetD-revived" style="text-align:center;color:#009fff">0</div><div class="trebuchetD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-snob"></span><div class="snobD-amount" style="text-align:center;">0</div><div class="snobD-losses" style="text-align:center;color:#a1251f">0</div><div class="snobD-revived" style="text-align:center;color:#009fff">0</div><div class="snobD-survived" style="text-align:center;color:#000000">0</div></td><td><span class="icon-bg-black icon-34x34-unit-knight"></span><div class="knightD-amount" style="text-align:center;">0</div><div class="knightD-losses" style="text-align:center;color:#a1251f">0</div><div class="knightD-revived" style="text-align:center;color:#009fff">0</div><div class="knightD-survived" style="text-align:center;color:#000000">0</div></td></tr><tr><td colspan="7"><#= locale("simulator", "battle.defenceModifier") #><span align="right" class="defenceModifier"></span>%</td><td colspan="7"><#= locale("simulator", "battle.provisions") #><span align="right" class="defenceProvisions"></span></td></tr><tr><td colspan="7"><#= locale("simulator", "battle.defenceBashpoint") #><span align="right" class="defenceBashpoint"></span></td><td colspan="7"><#= locale("simulator", "battle.killrateD") #><span align="right" class="killrateD"></span>%</td></tr><tr><td colspan="14"><#= locale("simulator", "battle.strentghDefend") #><span align="right" class="strentghDefend"></span></td></tr><tr id="predamage"><th><span class="unitname"><#= locale("simulator", "battle.predamage") #>:</span></th><td colspan="13"><#= locale("simulator", "battle.downgrade") #><b class="wallfrompre" id="wallfrompre">20</b><#= locale("simulator", "battle.to") #><b class="walltopre" id="walltopre">20</b></td></tr><tr id="ramdamage"><th><span class="unitname"><#= locale("simulator", "battle.damage") #>:</span></th><td colspan="13"><#= locale("simulator", "battle.downgrade") #><b class="wallfrom" id="wallfrom">20</b><#= locale("simulator", "battle.to") #><b class="wallto" id="wallto">20</b></td></tr><tr id="catapultdamage"><th><span class="unitname"><#= locale("simulator", "battle.damageCatapult") #>:</span></th><td colspan="13"><#= locale("simulator", "battle.downgradeCatapult") #><b class="buildingfrom" id="buildingfrom"></b><#= locale("simulator", "battle.to") #><b class="buildingto" id="buildingto"></b></td></tr></tbody></table></form><form class="addForm1"><table class="tbl-border-light tbl-striped"><colgroup><col></colgroup><tbody><tr><td class="item-insert"><span class="btn btn-orange addSelected"><#= locale("simulator", "battle.insert") #></span></td></tr></tbody></table></form><form class="addForm"><table class="table" id="units"><colgroup><col><col width="33%"><col width="33%"></colgroup><thead><tr><th></th><th><#= locale("simulator", "battle.attacker") #></th><th><#= locale("simulator", "battle.defender") #></th></tr></thead><tbody><tr><td><span class="icon-bg-black icon-34x34-unit-spear"></span><span class="unitname"> <#= locale("common", "spear") #></span></td><td><input id="spearA" class="unit-input-simulator" type="number" value="0" wtx-context="8DC5EF4E-1D3F-452A-8571-42A2CAE5DC1C"></td><td><input id="spearD" class="unit-input-simulator" type="number" value="0" wtx-context="32E792F5-4705-46B4-BA5A-9B1B410E8C11"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-sword"></span><span class="unitname"> <#= locale("common", "sword") #></span></td><td><input id="swordA" class="unit-input-simulator" type="number" value="0" wtx-context="CF865D26-64C0-4BF2-8F08-21CE8656A334"></td><td><input id="swordD" class="unit-input-simulator" type="number" value="0" wtx-context="835EFAEA-2D34-465B-8AC1-ACE363F605AB"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-axe"></span><span class="unitname"> <#= locale("common", "axe") #></span></td><td><input id="axeA" class="unit-input-simulator" type="number" value="0" wtx-context="99147BD4-7928-4D76-8613-61088B81E1BF"></td><td><input id="axeD" class="unit-input-simulator" type="number" value="0" wtx-context="5E82BCF4-A38E-42A6-887A-79B6A068D0ED"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-archer"></span><span class="unitname"> <#= locale("common", "archer") #></span></td><td><input id="archerA" class="unit-input-simulator" type="number" value="0" wtx-context="F2CD8E79-5C3A-4308-95AA-C292DB75E017"></td><td><input id="archerD" class="unit-input-simulator" type="number" value="0" wtx-context="5993D6D0-8A51-49CD-88A4-30797CB383EA"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-light_cavalry"></span><span class="unitname"> <#= locale("common", "light_cavalry") #></span></td><td><input id="lcA" class="unit-input-simulator" type="number" value="0" wtx-context="5D82F230-641D-4D0F-8B52-EB848FB2A2A1"></td><td><input id="lcD" class="unit-input-simulator" type="number" value="0" wtx-context="50349433-AA98-41FB-BF99-9BB0CFF3857C"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-mounted_archer"></span><span class="unitname"> <#= locale("common", "mounted_archer") #></span></td><td><input id="maA" class="unit-input-simulator" type="number" value="0" wtx-context="66341B10-B615-43DF-824B-1D53D889EF6E"></td><td><input id="maD" class="unit-input-simulator" type="number" value="0" wtx-context="9AD03030-6189-482A-9F41-C3C4E2FBB1AC"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-heavy_cavalry"></span><span class="unitname"> <#= locale("common", "heavy_cavalry") #></span></td><td><input id="hcA" class="unit-input-simulator" type="number" value="0" wtx-context="00E6F59C-13F8-4368-82E0-7505936546C3"></td><td><input id="hcD" class="unit-input-simulator" type="number" value="0" wtx-context="DC44138D-F849-4B6E-87E1-F7721CF3F787"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-ram"></span><span class="unitname"> <#= locale("common", "ram") #></span></td><td><input id="ramA" class="unit-input-simulator" type="number" value="0" wtx-context="F87CF418-DB3A-4414-8F44-874535D682A7"></td><td><input id="ramD" class="unit-input-simulator" type="number" value="0" wtx-context="139366C4-479C-49EA-9545-2F1B268A51C8"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-catapult"></span><span class="unitname"> <#= locale("common", "catapult") #></span></td><td><input id="catapultA" class="unit-input-simulator" type="number" value="0" wtx-context="511D5503-6950-4FB8-8CD0-414C0D4726A5"></td><td><input id="catapultD" class="unit-input-simulator" type="number" value="0" wtx-context="2E81787B-ABC2-420D-8A3C-CE73523AA333"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-doppelsoldner"></span><span class="unitname"> <#= locale("common", "doppelsoldner") #></span></td><td><input id="berserkerA" class="unit-input-simulator" type="number" value="0" wtx-context="7E10139B-D00D-488E-8017-1A4BBDDA565B"></td><td><input id="berserkerD" class="unit-input-simulator" type="number" value="0" wtx-context="D07902A3-E06C-4FE7-8729-BA330E1102A5"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-trebuchet"></span><span class="unitname"> <#= locale("common", "trebuchet") #></span></td><td><input id="trebuchetA" class="unit-input-simulator" type="number" value="0" wtx-context="A9656A00-573F-4FD6-B714-35CBCA31EBB9"></td><td><input id="trebuchetD" class="unit-input-simulator" type="number" value="0" wtx-context="0114F99E-A67A-4116-86A8-5A1DEA6DC9F9"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-snob"></span><span class="unitname"> <#= locale("common", "snob") #></span></td><td><input id="snobA" class="unit-input-simulator" type="number" value="0" wtx-context="368791FA-0308-4D3D-9FFE-B083D16930DA"></td><td><input id="snobD" class="unit-input-simulator" type="number" value="0" wtx-context="17B37D78-12C4-4420-8AF1-76F89F31756A"></td></tr><tr><td><span class="icon-bg-black icon-34x34-unit-knight"></span><span class="unitname"> <#= locale("common", "knight") #></span></td><td><input id="knightA" class="unit-input-simulator" type="number" value="0" wtx-context="D9570F6D-9C0E-4EF7-8D5F-3C4D33C438C5"></td><td><input id="knightD" class="unit-input-simulator" type="number" value="0" wtx-context="FAF6B41A-0256-49D6-B171-B40369AEA815"></td></tr><tr><td><span class="icon-bg-black icon-34x34-church"></span> <#= locale("simulator", "battle.faith") #></td><td><span class="ff-cell-fix"><select data-setting="beliefAttacker" class="beliefAttacker" id="beliefAttacker"><option value="50">0</option><option value="100" selected="selected">1</option><option value="105">2</option><option value="110">3</option></select></span></td><td><span class="ff-cell-fix"><select data-setting="beliefDefender" class="beliefDefender" id="beliefDefender"><option value="50">0</option><option value="100" selected="selected">1</option><option value="105">2</option><option value="110">3</option></select></span></td></tr><tr><td><span class="icon-bg-black icon-34x34-moral"></span> <#= locale("simulator", "battle.morale") #></td><td><input class="unit-input-simulator" type="number" value="100" id="morale"></td><td>%</td></tr><tr><td><span class="icon-bg-black icon-34x34-clover"></span> <#= locale("simulator", "battle.luck") #></td><td><input class="unit-input-simulator" type="number" value="0" id="luck"></td><td>%</td></tr><tr><td><span class="icon-bg-black icon-34x34-building-wall"></span> <#= locale("simulator", "battle.wall") #></td><td></td><td><input class="unit-input-simulator" type="number" value="0" id="wall"></td></tr><tr><td><span class="icon-bg-black icon-26x26-night-mode"></span> <#= locale("simulator", "battle.nightbonus") #></td><td></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-nightBonus"><input id="settings-nightBonus" data-setting="nightBonus" type="checkbox"></label></td></tr><tr><td><span class="icon-bg-black icon-44x44-premium_officer_leader"></span> <#= locale("simulator", "battle.leader") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-officerLeader"><input id="settings-officerLeader" data-setting="officerLeader" type="checkbox"></label></td><td></td></tr><tr><td><span class="icon-bg-black icon-44x44-premium_officer_medic"></span> <#= locale("simulator", "battle.medic") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-officerMedic"><input id="settings-officerMedic" data-setting="officerMedic" type="checkbox"></label></td><td></td></tr><tr><td><span class="icon-bg-black icon-120x120-skill-medic"></span> <#= locale("simulator", "battle.doctor") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-skillMedic"><input id="settings-skillMedic" data-setting="skillMedic" type="checkbox"></label></td><td></td></tr><tr><td><span class="icon-bg-black icon-120x120-skill-attack_bonus"></span> <#= locale("simulator", "battle.attack-bonus") #></td><td><span class="ff-cell-fix"><select data-setting="dataMaster" class="dataMaster" id="master"><option value="0" selected="selected">0</option><option value="2">1</option><option value="4">2</option><option value="6">3</option><option value="8">4</option><option value="10">5</option></select></span></td><td></td></tr><tr><td><span class="icon-bg-black icon-120x120-skill-iron_walls"></span> <#= locale("simulator", "battle.iron-walls") #></td><td></td><td><span class="ff-cell-fix"><select data-setting="dataWalls" class="dataWalls" id="walls"><option value="0" selected="selected">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select></span></td></tr><tr><td><span class="icon-bg-black icon-120x120-skill-better_hospital"></span> <#= locale("simulator", "battle.clinique") #></td><td></td><td><span class="ff-cell-fix"><select data-setting="dataClinique" class="dataClinique" id="clinique"><option value="0" selected="selected">0</option><option value="100">1</option><option value="200">2</option><option value="300">3</option><option value="400">4</option><option value="500">5</option><option value="600">6</option><option value="700">7</option><option value="800">8</option><option value="900">9</option><option value="1000">10</option></select></span></td></tr><tr><td><span class="icon-bg-black icon-34x34-building-hospital"></span> <#= locale("simulator", "battle.hospital") #></td><td></td><td><span class="ff-cell-fix"><select data-setting="dataHospital" class="dataHospital" id="hospital"><option value="0" selected="selected">0</option><option value="100">1</option><option value="129">2</option><option value="167">3</option><option value="215">4</option><option value="278">5</option><option value="359">6</option><option value="464">7</option><option value="599">8</option><option value="774">9</option><option value="1000">10</option></select></span></td></tr></tbody></table></form><form class="addForm1"><table class="tbl-border-light tbl-striped"><colgroup><col width="33%"><col width="34%"><col></colgroup><thead><tr><th colspan="3"><span class="icon-bg-black icon-34x34-paladin"></span> <#= locale("simulator", "battle.equip") #></th></tr></thead><tbody><tr><td colspan="3"><#= locale("simulator", "battle.defender") #></td></tr><tr><td><span class="ff-cell-fix"><select data-setting="dataEquip1" class="dataEquip1" id="equip1"><option value="none" selected="selected">brak</option><option value="spear"><#= locale("simulator", "battle.halberd") #></option><option value="sword"><#= locale("simulator", "battle.longsword") #></option><option value="axe"><#= locale("simulator", "battle.battleaxe") #></option><option value="archer"><#= locale("simulator", "battle.longbow") #></option><option value="light_cavalry"><#= locale("simulator", "battle.lance") #></option><option value="mounted_archer"><#= locale("simulator", "battle.compositebow") #></option><option value="heavy_cavalry"><#= locale("simulator", "battle.banner") #></option><option value="ram"><#= locale("simulator", "battle.star") #></option><option value="catapult"><#= locale("simulator", "battle.bonfire") #></option><option value="snob"><#= locale("simulator", "battle.scepter") #></option></select></span></td><td><span class="ff-cell-fix"><select data-setting="dataEquip2" class="dataEquip2" id="equip2"><option value="none" selected="selected">brak</option><option value="spear"><#= locale("simulator", "battle.halberd") #></option><option value="sword"><#= locale("simulator", "battle.longsword") #></option><option value="axe"><#= locale("simulator", "battle.battleaxe") #></option><option value="archer"><#= locale("simulator", "battle.longbow") #></option><option value="light_cavalry"><#= locale("simulator", "battle.lance") #></option><option value="mounted_archer"><#= locale("simulator", "battle.compositebow") #></option><option value="heavy_cavalry"><#= locale("simulator", "battle.banner") #></option><option value="ram"><#= locale("simulator", "battle.star") #></option><option value="catapult"><#= locale("simulator", "battle.bonfire") #></option><option value="snob"><#= locale("simulator", "battle.scepter") #></option></select></span></td><td><span class="ff-cell-fix"><select data-setting="dataEquip3" class="dataEquip3" id="equip3"><option value="none" selected="selected">brak</option><option value="spear"><#= locale("simulator", "battle.halberd") #></option><option value="sword"><#= locale("simulator", "battle.longsword") #></option><option value="axe"><#= locale("simulator", "battle.battleaxe") #></option><option value="archer"><#= locale("simulator", "battle.longbow") #></option><option value="light_cavalry"><#= locale("simulator", "battle.lance") #></option><option value="mounted_archer"><#= locale("simulator", "battle.compositebow") #></option><option value="heavy_cavalry"><#= locale("simulator", "battle.banner") #></option><option value="ram"><#= locale("simulator", "battle.star") #></option><option value="catapult"><#= locale("simulator", "battle.bonfire") #></option><option value="snob"><#= locale("simulator", "battle.scepter") #></option></select></span></td></tr><tr><td><span class="ff-cell-fix"><select data-setting="dataLevel1" class="dataLevel1" id="level1"><option value="0" selected="selected">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></span></td><td><span class="ff-cell-fix"><select data-setting="dataLevel2" class="dataLevel2" id="level2"><option value="0" selected="selected">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></span></td><td><span class="ff-cell-fix"><select data-setting="dataLevel3" class="dataLevel3" id="level3"><option value="0" selected="selected">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></span></td></tr><tr><td colspan="3"><#= locale("simulator", "battle.attacker") #></td></tr><tr><td colspan="3"><span class="ff-cell-fix"><select data-setting="dataEquip4" class="dataEquip4" id="equip4"><option value="none" selected="selected">brak</option><option value="spear"><#= locale("simulator", "battle.halberd") #></option><option value="sword"><#= locale("simulator", "battle.longsword") #></option><option value="axe"><#= locale("simulator", "battle.battleaxe") #></option><option value="archer"><#= locale("simulator", "battle.longbow") #></option><option value="light_cavalry"><#= locale("simulator", "battle.lance") #></option><option value="mounted_archer"><#= locale("simulator", "battle.compositebow") #></option><option value="heavy_cavalry"><#= locale("simulator", "battle.banner") #></option><option value="ram"><#= locale("simulator", "battle.star") #></option><option value="catapult"><#= locale("simulator", "battle.bonfire") #></option><option value="snob"><#= locale("simulator", "battle.scepter") #></option></select></span></td></tr><tr><td colspan="3"><span class="ff-cell-fix"><select data-setting="dataLevel4" class="dataLevel4" id="level4"><option value="0" selected="selected">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></span></td></tr></tbody></table></form><form class="addForm1"><table class="tbl-border-light tbl-striped"><colgroup><col></colgroup><thead><tr><th><span class="icon-34x34-unit-special-ability-catapult"></span> <#= locale("simulator", "battle.target") #></th></tr></thead><tbody><tr><td><span class="ff-cell-fix"><select data-setting="catapultTarget" class="catapultTarget" id="catapultTarget"><option value="0" selected="selected">brak</option><option value="wall"><#= locale("common", "wall") #></option><option value="headquarter"><#= locale("common", "headquarter") #></option><option value="farm"><#= locale("common", "farm") #></option><option value="warehouse"><#= locale("common", "warehouse") #></option><option value="barracks"><#= locale("common", "barracks") #></option><option value="church"><#= locale("common", "church") #></option><option value="academy"><#= locale("common", "academy") #></option><option value="preceptory"><#= locale("common", "preceptory") #></option><option value="tavern"><#= locale("common", "tavern") #></option><option value="hospital"><#= locale("common", "hospital") #></option><option value="rally_point"><#= locale("common", "rally_point") #></option><option value="statue"><#= locale("common", "statue") #></option><option value="market"><#= locale("common", "market") #></option><option value="timber_camp"><#= locale("common", "timber_camp") #></option><option value="clay_pit"><#= locale("common", "clay_pit") #></option><option value="iron_mine"><#= locale("common", "iron_mine") #></option></select></span></td></tr><tr><td><input width="60px" class="buildingLevel" type="number" value="0" id="buildingLevel"></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-troops"><h5 class="twx-section"><#= locale("simulator", "troops.header") #></h5><form class="addForm1"><table class="tbl-border-light tbl-striped"><colgroup><col></colgroup><tbody><tr><td class="item-check-T"><span class="btn btn-orange addSelected" tooltip="<#= locale("simulator", "checkT.tip") #>"><#= locale("simulator", "check.btn") #></span></td></tr></tbody></table></form><form class="addForm"><table class="table"><colgroup><col width="33%"><col width="33%"><col></colgroup><thead><tr><th colspan="3"><#= locale("simulator", "troops.th") #></th></tr></thead><tbody><tr><td><span style="float:left" class="icon-bg-black icon-34x34-resource-wood" tooltip="<#= locale("simulator", "wood") #>"></span><div class="center-34x"><span class="wood"></span></div></td><td><span style="float:left" class="icon-bg-black icon-34x34-time-per-tile" tooltip="<#= locale("simulator", "speed") #>"></span><div class="center-34x"><span class="speed"></span></div></td><td><span style="float:left" class="icon-bg-black icon-34x34-attack" tooltip="<#= locale("simulator", "attack") #>"></span><div class="center-34x"><span class="attack"></span></div></td></tr><tr><td><span style="float:left" class="icon-bg-black icon-34x34-resource-clay" tooltip="<#= locale("simulator", "clay") #>"></span><div class="center-34x"><span class="clay"></span></div></td><td><span style="float:left" class="icon-bg-black icon-34x34-units" tooltip="<#= locale("simulator", "discipline") #>"></span><div class="center-34x"><span class="discipline"></span></div></td><td><span style="float:left" class="icon-bg-black icon-34x34-defense" tooltip="<#= locale("simulator", "definf") #>"></span><div class="center-34x"><span class="definf"></span></div></td></tr><tr><td><span style="float:left" class="icon-bg-black icon-34x34-resource-iron" tooltip="<#= locale("simulator", "iron") #>"></span><div class="center-34x"><span class="iron"></span></div></td><td><span style="float:left" class="icon-bg-black icon-34x34-weight" tooltip="<#= locale("simulator", "load") #>"></span><div class="center-34x"><span class="load"></span></div></td><td><span style="float:left" class="icon-bg-black icon-34x34-defense-cavalry" tooltip="<#= locale("simulator", "defcav") #>"></span><div class="center-34x"><span class="defcav"></span></div></td></tr><tr><td><span style="float:left" class="icon-bg-black icon-34x34-resource-food" tooltip="<#= locale("simulator", "food") #>"></span><div class="center-34x"><span class="food"></span></div></td><td><span style="float:left" class="icon-bg-black icon-34x34-time" tooltip="<#= locale("simulator", "buildtime") #>"></span><div class="center-34x"><span class="buildtime"></span></div></td><td><span style="float:left" class="icon-bg-black icon-34x34-defense-archer" tooltip="<#= locale("simulator", "defarc") #>"></span><div class="center-34x"><span class="defarc"></span></div></td></tr><tr><td><span style="float:left" class="icon-bg-black icon-34x34-attackinf" tooltip="<#= locale("simulator", "attackinf") #>"></span><div class="center-34x"><span class="attackinf"></span></div></td><td><span style="float:left" class="icon-bg-black icon-34x34-attackcav" tooltip="<#= locale("simulator", "attackcav") #>"></span><div class="center-34x"><span class="attackcav"></span></div></td><td><span style="float:left" class="icon-bg-black icon-34x34-attackarc" tooltip="<#= locale("simulator", "attackarc") #>"></span><div class="center-34x"><span class="attackarc"></span></div></td></tr></tbody></table><br><table class="table" id="unitsCost"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th colspan="2"><#= locale("simulator", "troops.units") #></th></tr></thead><tbody><tr><td><span class="icon-bg-black icon-44x44-unit-spear"></span> <#= locale("common", "spear") #><input class="unit-cost" id="spearCost" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-sword"></span> <#= locale("common", "sword") #><input class="unit-cost" id="swordCost" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-axe"></span> <#= locale("common", "axe") #><input class="unit-cost" id="axeCost" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-archer"></span> <#= locale("common", "archer") #><input class="unit-cost" id="archerCost" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-light_cavalry"></span> <#= locale("common", "light_cavalry") #><input class="unit-cost" id="lcCost" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-mounted_archer"></span> <#= locale("common", "mounted_archer") #><input class="unit-cost" id="maCost" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-heavy_cavalry"></span> <#= locale("common", "heavy_cavalry") #><input class="unit-cost" id="hcCost" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-ram"></span> <#= locale("common", "ram") #><input class="unit-cost" id="ramCost" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-doppelsoldner"></span> <#= locale("common", "doppelsoldner") #><input class="unit-cost" id="berserkerCost" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-trebuchet"></span> <#= locale("common", "trebuchet") #><input class="unit-cost" id="trebuchetCost" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-snob"></span> <#= locale("common", "snob") #><input class="unit-cost" id="snobCost" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-knight"></span> <#= locale("common", "knight") #><input class="unit-cost" id="knightCost" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-catapult"></span> <#= locale("common", "catapult") #><input class="unit-cost" id="catapultCost" type="text" value=""></td><td></td></tr></tbody></table><br><table class="table"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th colspan="2"><#= locale("simulator", "troops.building") #></th></tr></thead><tbody><tr><td><span class="icon-bg-black icon-34x34-building-barracks"></span> <#= locale("simulator", "troops.barracks") #></td><td><input class="unit-barracks" type="text" value="25" height="34px" id="barracks"></td></tr><tr><td><span class="icon-bg-black icon-34x34-building-preceptory"></span> <#= locale("simulator", "troops.preceptory") #></td><td><span class="ff-cell-fix"><select data-setting="dataOrder" class="dataOrder" id="order"><option value="none" selected="selected"><#= locale("simulator", "troops.none") #></option><option value="deff"><#= locale("simulator", "troops.templars") #></option><option value="off"><#= locale("simulator", "troops.teutonic") #></option></select> </span><input class="unit-preceptory" type="text" value="0" height="34px" id="preceptory"></td></tr></tbody></table><table class="table"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th colspan="2"><#= locale("simulator", "troops.effects") #></th></tr></thead><tbody><tr><td><span class="icon-bg-black icon-120x120-domination"></span> <#= locale("simulator", "troops.domination") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-domination"><input id="settings-domination" data-setting="dataDomination" type="checkbox"></label></td></tr><tr><td><span class="icon-bg-black icon-120x120-skill-recruit_speed_bonus"></span> <#= locale("simulator", "troops.training") #></td><td><span class="ff-cell-fix"><select data-setting="dataTraining" class="dataTraining" id="training"><option value="1.00" selected="selected">0</option><option value="1.04">1</option><option value="1.08">2</option><option value="1.12">3</option><option value="1.16">4</option><option value="1.20">5</option></select></span></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-bashpoints"><h5 class="twx-section"><#= locale("simulator", "bashpoints.header") #></h5><form class="addForm1"><table class="tbl-border-light tbl-striped"><colgroup><col></colgroup><tbody><tr><td class="item-check"><span class="btn btn-orange addSelected" tooltip="<#= locale("simulator", "check.tip") #>"><#= locale("simulator", "check.btn") #></span></td></tr></tbody></table></form><form class="addForm"><table class="table"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th colspan="2"><#= locale("simulator", "bashpoints.th") #></th></tr></thead><tbody><tr><td><#= locale("simulator", "bashpoints.attacker") #></td><td class="points-att"></td></tr><tr><td><#= locale("simulator", "bashpoints.defender") #></td><td class="points-def"></td></tr></tbody></table><br><table class="table" id="unitsBash"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th colspan="2"><#= locale("simulator", "bashpoints.killed") #></th></tr></thead><tbody><tr><td><span class="icon-bg-black icon-44x44-unit-spear"></span> <#= locale("common", "spear") #><input class="unit-bash" id="spearBash" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-sword"></span> <#= locale("common", "sword") #><input class="unit-bash" id="swordBash" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-axe"></span> <#= locale("common", "axe") #><input class="unit-bash" id="axeBash" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-archer"></span> <#= locale("common", "archer") #><input class="unit-bash" id="archerBash" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-light_cavalry"></span> <#= locale("common", "light_cavalry") #><input class="unit-bash" id="lcBash" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-mounted_archer"></span> <#= locale("common", "mounted_archer") #><input class="unit-bash" id="maBash" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-heavy_cavalry"></span> <#= locale("common", "heavy_cavalry") #><input class="unit-bash" id="hcBash" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-ram"></span> <#= locale("common", "ram") #><input class="unit-bash" id="ramBash" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-doppelsoldner"></span> <#= locale("common", "doppelsoldner") #><input class="unit-bash" id="berserkerBash" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-trebuchet"></span> <#= locale("common", "trebuchet") #><input class="unit-bash" id="trebuchetBash" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-snob"></span> <#= locale("common", "snob") #><input class="unit-bash" id="snobBash" type="text" value=""></td><td><span class="icon-bg-black icon-44x44-unit-knight"></span> <#= locale("common", "knight") #><input class="unit-bash" id="knightBash" type="text" value=""></td></tr><tr><td><span class="icon-bg-black icon-44x44-unit-catapult"></span> <#= locale("common", "catapult") #><input class="unit-bash" id="catapultBash" type="text" value=""></td><td></td></tr></tbody></table></form></div></div></div>',
css:"#BattleCalculator select{color:#000}#BattleCalculator .addForm1 td{text-align:center}#BattleCalculator .addForm1 th{text-align:center;padding:0}#BattleCalculator .addForm1 span{height:26px;line-height:26px;padding:0 10px}#BattleCalculator .addForm1 .buildingLevel{width:60px}#BattleCalculator .addForm .table{border-spacing:1px;border-collapse:separate;box-shadow:0 0 0 2px rgba(124,54,0,0.4);width:100%;background:url(data:image/png;base64,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) #d1ad86}#BattleCalculator .addForm .table th{background:url(data:image/png;base64,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);text-align:left;min-height:26px;line-height:26px;color:#fff3d0;font-size:14px;font-weight:normal;padding-left:5px;border:1px solid rgba(124,54,0,0.3);padding:1px}#BattleCalculator .addForm .table td{border:1px solid rgba(124,54,0,0.3);padding:1px}#BattleCalculator .addForm .table tr nth-child(odd) td{background:url(data:image/png;base64,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) #d1ad86}#BattleCalculator .addForm .table_vertical td:nth-child(odd){background:url(data:image/png;base64,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) #d1ad86}#BattleCalculator .addForm .center-34x{text-align:center;line-height:34px}#BattleCalculator .addForm span{text-align:right}#BattleCalculator .unit-bash{height:44px;line-height:26px;color:#fff;font-size:18px;background:#b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px;float:right;border:none}#BattleCalculator .unit-cost{height:44px;line-height:26px;color:#fff;font-size:18px;background:#b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px;float:right;border:none}#BattleCalculator .unit-barracks{height:44px;line-height:26px;color:#fff;font-size:18px;background:#b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px;float:right;border:none}#BattleCalculator .unit-preceptory{height:44px;line-height:26px;color:#fff;font-size:18px;background:#b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px;float:right;border:none}#BattleCalculator .unit-input-simulator{height:44px;line-height:26px;color:#fff;font-size:18px;background:#b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px;float:right;border:none;float:none;width:100%;height:34px}#BattleCalculator .dataTraining{width:60px}#BattleCalculator .dataTraining .custom-select-handler{text-align:left}#BattleCalculator .dataOrder{width:150px}#BattleCalculator .dataOrder .custom-select-handler{text-align:left}#BattleCalculator .dataDomination{width:60px}#BattleCalculator .dataDomination .custom-select-handler{text-align:left}#BattleCalculator .icon-120x120-skill-recruit_speed_bonus{zoom:.283333}#BattleCalculator .icon-120x120-skill-recruit_speed_bonus:before{-moz-transform:scale(.283333)}#BattleCalculator .icon-120x120-domination{zoom:.283333}#BattleCalculator .icon-120x120-domination:before{-moz-transform:scale(.283333)}#BattleCalculator .icon-26x26-night-mode{zoom:1.307692}#BattleCalculator .icon-26x26-night-mode:before{-moz-transform:scale(1.307692)}#BattleCalculator .icon-120x120-skill-medic{zoom:.283333}#BattleCalculator .icon-120x120-skill-medic:before{-moz-transform:scale(.283333)}#BattleCalculator .icon-120x120-skill-attack_bonus{zoom:.283333}#BattleCalculator .icon-120x120-skill-attack_bonus:before{-moz-transform:scale(.283333)}#BattleCalculator .icon-120x120-skill-iron_walls{zoom:.283333}#BattleCalculator .icon-120x120-skill-iron_walls:before{-moz-transform:scale(.283333)}#BattleCalculator .icon-120x120-skill-better_hospital{zoom:.283333}#BattleCalculator .icon-120x120-skill-better_hospital:before{-moz-transform:scale(.283333)}#BattleCalculator .icon-44x44-premium_officer_leader{zoom:.772727}#BattleCalculator .icon-44x44-premium_officer_leader:before{-moz-transform:scale(.772727)}#BattleCalculator .icon-44x44-premium_officer_medic{zoom:.772727}#BattleCalculator .icon-44x44-premium_officer_medic:before{-moz-transform:scale(.772727)}#BattleCalculator .dataMaster{width:60px}#BattleCalculator .dataMaster .custom-select-handler{text-align:left}#BattleCalculator .buildingLevel{width:60px}#BattleCalculator .beliefDefender{width:60px}#BattleCalculator .beliefDefender .custom-select-handler{text-align:left}#BattleCalculator .beliefAttacker{width:60px}#BattleCalculator .beliefAttacker .custom-select-handler{text-align:left}#BattleCalculator .dataWalls{width:60px}#BattleCalculator .dataWalls .custom-select-handler{text-align:left}#BattleCalculator .dataClinique{width:60px}#BattleCalculator .dataClinique .custom-select-handler{text-align:left}#BattleCalculator .dataHospital{width:60px}#BattleCalculator .dataHospital .custom-select-handler{text-align:left}#BattleCalculator .dataEquip1{width:200px}#BattleCalculator .dataEquip1 .custom-select-handler{text-align:left}#BattleCalculator .dataEquip2{width:200px}#BattleCalculator .dataEquip2 .custom-select-handler{text-align:left}#BattleCalculator .dataEquip3{width:200px}#BattleCalculator .dataEquip3 .custom-select-handler{text-align:left}#BattleCalculator .dataEquip4{width:200px}#BattleCalculator .dataEquip4 .custom-select-handler{text-align:left}#BattleCalculator .dataLevel1{width:60px}#BattleCalculator .dataLevel1 .custom-select-handler{text-align:left}#BattleCalculator .dataLevel2{width:60px}#BattleCalculator .dataLevel2 .custom-select-handler{text-align:left}#BattleCalculator .dataLevel3{width:60px}#BattleCalculator .dataLevel3 .custom-select-handler{text-align:left}#BattleCalculator .dataLevel4{width:60px}#BattleCalculator .dataLevel4 .custom-select-handler{text-align:left}#BattleCalculator .catapultTarget{width:200px}#BattleCalculator .catapultTarget .custom-select-handler{text-align:left}#BattleCalculator .icon-90x90-item-spear{background-image:url(https://twxen.innogamescdn.com/img/icons/no-alpha_3bfedc2e90.jpg);background-position:-1710px -1892px;zoom:.288888}#BattleCalculator .icon-90x90-item-spear:before{-moz-transform:scale(.288888)}#BattleCalculator .icon-90x90-item-sword:before{background-image:url(https://twxen.innogamescdn.com/img/icons/no-alpha_3bfedc2e90.jpg);background-position:-1620px -1892px;transform:scale(.288888);width:26px;height:26px}#BattleCalculator .icon-34x34-attackarc:before{background-image:url(https://i.imgur.com/qGoj36r.png);background-position:0 0}#BattleCalculator .icon-34x34-attackcav:before{background-image:url(https://i.imgur.com/etSiYUW.png);background-position:0 0}#BattleCalculator .icon-34x34-attackinf:before{background-image:url(https://i.imgur.com/z9hX6Au.png);background-position:0 0}#BattleCalculator .icon-90x90-item-axe{zoom:.288888}#BattleCalculator .icon-90x90-item-axe:before{-moz-transform:scale(.288888)}#BattleCalculator .icon-90x90-item-archer{zoom:.288888}#BattleCalculator .icon-90x90-item-archer:before{-moz-transform:scale(.288888)}#BattleCalculator .icon-90x90-item-light_cavalry{zoom:.288888}#BattleCalculator .icon-90x90-item-light_cavalry:before{-moz-transform:scale(.288888)}#BattleCalculator .icon-90x90-item-mounted_archer{zoom:.288888}#BattleCalculator .icon-90x90-item-mounted_archer:before{-moz-transform:scale(.288888)}#BattleCalculator .icon-90x90-item-heavy_cavalry{zoom:.288888}#BattleCalculator .icon-90x90-item-heavy_cavalry:before{-moz-transform:scale(.288888)}#BattleCalculator .icon-90x90-item-ram{zoom:.288888}#BattleCalculator .icon-90x90-item-ram:before{-moz-transform:scale(.288888)}#BattleCalculator .icon-90x90-item-catapult{zoom:.288888}#BattleCalculator .icon-90x90-item-catapult:before{-moz-transform:scale(.288888)}#BattleCalculator .icon-90x90-item-snob{zoom:.288888}#BattleCalculator .icon-90x90-item-snob:before{-moz-transform:scale(.288888)}#BattleCalculator .icon-34x34-paladin{zoom:.73529412}#BattleCalculator .icon-34x34-paladin:before{-moz-transform:scale(.73529412)}#BattleCalculator .icon-34x34-unit-special-ability-catapult{zoom:.73529412}#BattleCalculator .icon-34x34-unit-special-ability-catapult:before{-moz-transform:scale(.73529412)}",replaces:{locale:b,version:a.version,types:["village","character"]}}),l=new e(b("simulator","title"),{classHover:!1,classBlur:!1,onClick:function(){k.openWindow()}}),m=$(k.$window),kb=m.find(".item-simulate span"),lb=m.find(".item-check span"),mb=m.find(".points-att"),nb=m.find(".points-def"),ob=m.find(".item-check-T span"),pb=m.find(".wood"),qb=m.find(".clay"),rb=m.find(".iron"),sb=m.find(".food"),tb=m.find(".attack"),ub=m.find(".attackinf"),vb=m.find(".attackcav"),wb=m.find(".attackarc"),xb=m.find(".definf"),yb=m.find(".defcav"),zb=m.find(".defarc"),Ab=m.find(".speed"),Bb=m.find(".load"),Cb=m.find(".discipline"),Db=m.find(".buildtime"),Eb=m.find(".dataTraining"),Fb=m.find(".dataDomination"),Gb=m.find(".dataOrder"),Hb=m.find(".beliefAttacker"),Ib=m.find(".beliefDefender"),Jb=m.find(".nightBonus"),Kb=m.find(".officerLeader"),Lb=m.find(".officerMedic"),Mb=m.find(".skillMedic"),Nb=m.find(".dataMaster"),Ob=m.find(".dataWalls"),Pb=m.find(".dataClinique"),Qb=m.find(".dataHospital"),Rb=m.find(".catapultTarget"),Sb=m.find(".dataEquip1"),Tb=m.find(".dataEquip2"),Ub=m.find(".dataEquip3"),Vb=m.find(".dataEquip4"),Wb=m.find(".dataLevel1"),Xb=m.find(".dataLevel2"),Yb=m.find(".dataLevel3"),Zb=m.find(".dataLevel4"),D=m.find(".spearA-amount"),E=m.find(".spearA-losses"),F=m.find(".spearA-revived"),G=m.find(".spearA-survived"),H=m.find(".swordA-amount"),I=m.find(".swordA-losses"),J=m.find(".swordA-revived"),K=m.find(".swordA-survived"),L=m.find(".axeA-amount"),M=m.find(".axeA-losses"),N=m.find(".axeA-revived"),O=m.find(".axeA-survived"),P=m.find(".archerA-amount"),Q=m.find(".archerA-losses"),R=m.find(".archerA-revived"),S=m.find(".archerA-survived"),T=m.find(".lcA-amount"),U=m.find(".lcA-losses"),V=m.find(".lcA-revived"),W=m.find(".lcA-survived"),X=m.find(".maA-amount"),Y=m.find(".maA-losses"),Z=m.find(".maA-revived"),_=m.find(".maA-survived"),aa=m.find(".hcA-amount"),ba=m.find(".hcA-losses"),ca=m.find(".hcA-revived"),da=m.find(".hcA-survived"),ea=m.find(".ramA-amount"),fa=m.find(".ramA-losses"),ga=m.find(".ramA-revived"),ha=m.find(".ramA-survived"),ia=m.find(".catapultA-amount"),ja=m.find(".catapultA-losses"),ka=m.find(".catapultA-revived"),la=m.find(".catapultA-survived"),ma=m.find(".snobA-amount"),na=m.find(".snobA-losses"),oa=m.find(".snobA-revived"),pa=m.find(".snobA-survived"),qa=m.find(".knightA-amount"),ra=m.find(".knightA-losses"),sa=m.find(".knightA-revived"),ta=m.find(".knightA-survived"),$trebuchetAamount=m.find(".trebuchetA-amount"),$trebuchetAlosses=m.find(".trebuchetA-losses"),$trebuchetArevived=m.find(".trebuchetA-revived"),$trebuchetAsurvived=m.find(".trebuchetA-survived"),$berserkerAamount=m.find(".berserkerA-amount"),$berserkerAlosses=m.find(".berserkerA-losses"),$berserkerArevived=m.find(".berserkerA-revived"),$berserkerAsurvived=m.find(".berserkerA-survived"),ua=m.find(".spearD-amount"),va=m.find(".spearD-losses"),wa=m.find(".spearD-revived"),xa=m.find(".spearD-survived"),ya=m.find(".swordD-amount"),za=m.find(".swordD-losses"),Aa=m.find(".swordD-revived"),Ba=m.find(".swordD-survived"),Ca=m.find(".axeD-amount"),Da=m.find(".axeD-losses"),Ea=m.find(".axeD-revived"),Fa=m.find(".axeD-survived"),Ga=m.find(".archerD-amount"),Ha=m.find(".archerD-losses"),Ia=m.find(".archerD-revived"),Ja=m.find(".archerD-survived"),Ka=m.find(".lcD-amount"),La=m.find(".lcD-losses"),Ma=m.find(".lcD-revived"),Na=m.find(".lcD-survived"),Oa=m.find(".maD-amount"),Pa=m.find(".maD-losses"),Qa=m.find(".maD-revived"),Ra=m.find(".maD-survived"),Sa=m.find(".hcD-amount"),Ta=m.find(".hcD-losses"),Ua=m.find(".hcD-revived"),Va=m.find(".hcD-survived"),Wa=m.find(".ramD-amount"),Xa=m.find(".ramD-losses"),Ya=m.find(".ramD-revived"),Za=m.find(".ramD-survived"),$a=m.find(".catapultD-amount"),_a=m.find(".catapultD-losses"),ab=m.find(".catapultD-revived"),bb=m.find(".catapultD-survived"),cb=m.find(".snobD-amount"),db=m.find(".snobD-losses"),eb=m.find(".snobD-revived"),fb=m.find(".snobD-survived"),gb=m.find(".knightD-amount"),hb=m.find(".knightD-losses"),ib=m.find(".knightD-revived"),jb=m.find(".knightD-survived"),$trebuchetDamount=m.find(".trebuchetD-amount"),$trebuchetDlosses=m.find(".trebuchetD-losses"),$trebuchetDrevived=m.find(".trebuchetD-revived"),$trebuchetDsurvived=m.find(".trebuchetD-survived"),$berserkerDamount=m.find(".berserkerD-amount"),$berserkerDlosses=m.find(".berserkerD-losses"),$berserkerDrevived=m.find(".berserkerD-revived"),$berserkerDsurvived=m.find(".berserkerD-survived"),n=m.find(".attackModifier"),o=m.find(".attackProvisions"),p=m.find(".attackBashpoint"),q=m.find(".killrateA"),r=m.find(".strentghAttack"),s=m.find(".defenceModifier"),t=m.find(".defenceProvisions"),u=m.find(".defenceBashpoint"),v=m.find(".killrateD"),w=m.find(".strentghDefend"),x=m.find(".wallfrompre"),y=m.find(".walltopre"),z=m.find(".wallfrom"),A=m.find(".wallto"),B=m.find(".buildingfrom"),C=m.find(".buildingto"),$b(),a.interfaceInitialized=!0,k};a.interface=function(){a.interface=_b()}}),define("two/builder",["two/locale","two/utils","two/eventQueue","two/ready","Lockr","conf/upgradeabilityStates","conf/buildingTypes","conf/locationTypes"],function(a,b,d,h,i,k,l,m){var n,p,q,r,s,t=injector.get("buildingService"),u=!1,v=!1,w={},x={},y={};y.Essential=[l.HEADQUARTER,l.FARM,l.WAREHOUSE,l.RALLY_POINT,l.BARRACKS,l.TIMBER_CAMP,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.HEADQUARTER,l.RALLY_POINT,l.FARM,l.WAREHOUSE,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.WAREHOUSE,l.HEADQUARTER,l.STATUE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.HEADQUARTER,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.HOSPITAL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.WAREHOUSE,l.HEADQUARTER,l.WALL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.HEADQUARTER,l.MARKET,l.BARRACKS,l.WALL,l.WALL,l.FARM,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WALL,l.WALL,l.WALL,l.MARKET,l.MARKET,l.MARKET,l.BARRACKS,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.TAVERN,l.TAVERN,l.TAVERN,l.RALLY_POINT,l.BARRACKS,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.BARRACKS,l.BARRACKS,l.STATUE,l.STATUE,l.WALL,l.WALL,l.HEADQUARTER,l.HEADQUARTER,l.WAREHOUSE,l.FARM,l.FARM,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.WAREHOUSE,l.BARRACKS,l.BARRACKS,l.WAREHOUSE,l.FARM,l.WALL,l.WALL,l.TAVERN,l.TAVERN,l.TAVERN,l.MARKET,l.MARKET,l.MARKET,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.WAREHOUSE,l.FARM,l.IRON_MINE,l.IRON_MINE,l.IRON_MINE,l.RALLY_POINT,l.BARRACKS,l.BARRACKS,l.FARM,l.FARM,l.FARM,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.HEADQUARTER,l.HEADQUARTER,l.STATUE,l.STATUE,l.FARM,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.FARM,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.BARRACKS,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.ACADEMY,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.WAREHOUSE,l.MARKET,l.MARKET,l.MARKET,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.TIMBER_CAMP,l.WALL,l.WALL,l.MARKET,l.MARKET,l.MARKET,l.TIMBER_CAMP,l.CLAY_PIT,l.TIMBER_CAMP,l.CLAY_PIT,l.TAVERN,l.TAVERN,l.TAVERN,l.WALL,l.WALL,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.TAVERN,l.TAVERN,l.TAVERN,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.BARRACKS,l.BARRACKS,l.FARM,l.WAREHOUSE,l.WAREHOUSE,l.WALL,l.WALL,l.WALL,l.WALL,l.TAVERN,l.TAVERN,l.RALLY_POINT,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.CLAY_PIT,l.IRON_MINE,l.TIMBER_CAMP,l.CLAY_PIT,l.CLAY_PIT,l.IRON_MINE,l.WALL,l.WALL],y["Pełna rozbudowa"]=[l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.PRECEPTORY,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.HOSPITAL,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.PRECEPTORY,l.PRECEPTORY,l.MARKET,l.MARKET,l.MARKET,l.MARKET,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.HEADQUARTER,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY,l.PRECEPTORY],Array.prototype.unshift.apply(y["Pełna rozbudowa"],y.Essential),y["Standard bez murów"]=y.Essential.filter(function(a){return a!==l.WALL}),y.Mury=[l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL,l.WALL];var z={groupVillages:{default:"",inputType:"select"},buildingPreset:{default:"Essential",inputType:"select"},buildingOrder:{default:y,inputType:"buildingOrder"}};for(var A in l)w[l[A]]=0;var B=function(){a.create("builder",{en:{title:"Architekt","info.header":"Tytuł","info.content":"Zawartość","general.disabled":"— Wyłączony —","general.started":"Architekt Uruchomiony","general.stopped":"Architekt Zatrzymany",settings:"Ustawienia","settings.groupVillages":"Buduj w wioskach z grupy","settings.buildingPreset":"Szablon kolejki budowy","settings.buildingsOrder":"Kolejność budowy","settings.buildingsOrderFinal":"Poziom budynków","settings.saved":"Ustawienia zapisane!","logs.noBuilds":"Nie rozpoczęto żadnej rozbudowy","logs.clear":"Wyczyść logi"},pl:{title:"Architekt","info.header":"Tytuł","info.content":"Zawartość","general.disabled":"— Wyłączony —","general.started":"Architekt Uruchomiony","general.stopped":"Architekt Zatrzymany",settings:"Ustawienia","settings.groupVillages":"Buduj w wioskach z grupy","settings.buildingPreset":"Szablon kolejki budowy","settings.buildingsOrder":"Kolejność budowy","settings.buildingsOrderFinal":"Poziom budynków","settings.saved":"Ustawienia zapisane!","logs.noBuilds":"Nie rozpoczęto żadnej rozbudowy","logs.clear":"Wyczyść logi"},pt:{title:"BuilderQueue","info.header":"Título","info.content":"Conteúdo",
"general.disabled":"— Desativado —","general.started":"BuilderQueue iniciado","general.stopped":"BuilderQueue parado",settings:"Configurações","settings.groupVillages":"Construir apenas em aldeias do grupo","settings.buildingPreset":"Predefinições de ordens","settings.buildingsOrder":"Ordem de Construção","settings.buildingsOrderFinal":"Nível dos Edifícios","settings.saved":"Configurações salvas!","logs.noBuilds":"Nenhuma construção iniciada","logs.clear":"Limpar registros"},us:{title:"BuilderQueue","info.header":"Title","info.content":"Content","general.disabled":"— Disabled —","general.started":"BuilderQueue started","general.stopped":"BuilderQueue stopped",settings:"Settings","settings.groupVillages":"Build only on villages with the group","settings.buildingPreset":"Building order preset","settings.buildingsOrder":"Build Order","settings.buildingsOrderFinal":"Buildings Level","settings.saved":"Settings saved!","logs.noBuilds":"No builds started","logs.clear":"Clear logs"}},"pl"),u=!0,n=i.get("builder-settings",{},!0),s=i.get("builder-log",[],!0),r=e.getSelectedCharacter(),q=e.getGroupList();for(var b in z){var d=z[b].default;x[b]=n.hasOwnProperty(b)?n[b]:d}buildingOrderLimit=H(x.buildingPreset),c.$on(j.BUILDING_LEVEL_CHANGED,function(a,b){if(!v)return!1;setTimeout(function(){var a=r.getVillage(b.village_id);E(a)},1e3)})},C=function(){(x.groupVillages?q.getGroupVillageIds(x.groupVillages):D()).forEach(function(a){var b=r.getVillage(a),c=b.checkReadyState(),d=b.buildingQueue;return d.getAmountJobs()!==d.getUnlockedSlots()&&!(!c.buildingQueue||!c.buildings)&&(b.isInitialized()||o.initializeVillage(b),void E(b))})},D=function(){var a=[],b=r.getVillages();for(var c in b)a.push(c);return a},E=function(a){var b=angular.copy(a.buildingData.getBuildingLevels()),c=a.buildingQueue.getQueue(),e=angular.copy(w);if(c.forEach(function(a){b[a.building]++}),G(b))return!1;x.buildingOrder[x.buildingPreset].some(function(c){if(++e[c]>b[c])return t.compute(a),F(a,c,function(b,c){if(b){var e=Date.now(),f=[{x:a.getX(),y:a.getY(),name:a.getName(),id:a.getId()},c.job.building,c.job.level,e];d.trigger("Builder/jobStarted",f),s.unshift(f),i.set("builder-log",s)}}),!0})},F=function(a,b,c){a.getBuildingData().getDataForBuilding(b).upgradeability===k.POSSIBLE?f.emit(g.VILLAGE_UPGRADE_BUILDING,{building:b,village_id:a.getId(),location:m.MASS_SCREEN,premium:!1},function(a,b){c(!0,a)}):c(!1)},G=function(a){for(var b in a)if(a[b]<buildingOrderLimit[b])return!1;return!0},H=function(a){var b=x.buildingOrder[a],c=angular.copy(w);return b.forEach(function(a){c[a]++}),c},I=function(a){var b,c;for(c in a){if(!z[c])return d.trigger("Builder/settings/unknownSetting",[c]),!1;b=a[c],angular.equals(x[c],b)||(x[c]=b)}return buildingOrderLimit=H(a.buildingPreset),i.set("builder-settings",x),!0},J=function(){return x},K=function(){v=!0,p=setInterval(C,6e4),h(C,["all_villages_ready"]),d.trigger("Builder/start")},L=function(){v=!1,clearInterval(p),d.trigger("Builder/stop")},M=function(){return u};return{init:B,start:K,stop:L,updateSettings:I,isRunning:function(){return v},isInitialized:M,settingsMap:z,getSettings:J,getBuildLog:function(){return s},clearLogs:function(){s=[],i.set("builder-log",s),d.trigger("Builder/clearLogs")},version:"1.0.0"}}),require(["two/ready","two/builder","two/builder/ui"],function(a,b){if(b.isInitialized())return!1;a(function(){b.init(),b.interface()})}),define("two/builder/ui",["two/builder","two/locale","two/ui","two/FrontButton","two/eventQueue","two/utils","ejs","conf/buildingTypes","helper/time","two/ready"],function(a,b,d,f,g,h,i,l,m,n){var o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=[l.HEADQUARTER,l.TIMBER_CAMP,l.CLAY_PIT,l.IRON_MINE,l.FARM,l.WAREHOUSE,l.CHURCH,l.CHAPEL,l.RALLY_POINT,l.BARRACKS,l.STATUE,l.HOSPITAL,l.WALL,l.MARKET,l.TAVERN,l.ACADEMY,l.PRECEPTORY],D=function(){return q=e.getGroupList().getGroups(),B=b("builder","general.disabled"),o=new d("BuilderQueue",{activeTab:"settings",template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("builder", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-two-col"><div class="tab" tab="settings"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "settings") #></a></div></div></div><div class="tab" tab="log"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "logs") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-settings"><form class="settings"><h5 class="twx-section collapse"><#= locale("builder", "settings") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="50%"><col></colgroup><tbody><tr><td><span class="ff-cell-fix"><#= locale("builder", "settings.groupVillages") #></span></td><td><select data-setting="groupVillages" class="groupVillages"></select></td></tr><tr><td><span class="ff-cell-fix"><#= locale("builder", "settings.buildingPreset") #></span></td><td><select data-setting="buildingPreset" class="buildingPreset"></select></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("builder", "settings.buildingsOrderFinal") #></h5><table class="tbl-border-light header-center"><colgroup><col width="10%"><col width="50%"><col></colgroup><thead><tr><th colspan="2"><#= locale("common", "building") #></th><th><#= locale("common", "level") #></th></tr></thead><tbody class="buildingOrderFinal"></tbody></table><h5 class="twx-section collapse"><#= locale("builder", "settings.buildingsOrder") #></h5><table class="tbl-border-light header-center"><colgroup><col width="10%"><col width="24%"><col width="9%"><col width="15%"><col></colgroup><thead><tr><th colspan="2"><#= locale("common", "building") #></th><th><#= locale("common", "level") #></th><th><#= locale("common", "duration") #></th><th><#= locale("common", "costs") #></th></tr></thead><tbody class="buildingOrder"></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-log"><table class="tbl-border-light tbl-striped header-center"><colgroup><col width="40%"><col width="30%"><col width="5%"><col width="25%"><col></colgroup><thead><tr><th><#= locale("common", "village") #></th><th><#= locale("common", "building") #></th><th><#= locale("common", "level") #></th><th><#= locale("common", "started") #></th></tr></thead><tbody class="buildLog"><tr class="noBuilds"><td colspan="4"><#= locale("builder", "logs.noBuilds") #></td></tr></tbody></table></div></div><footer class="win-foot"><ul class="list-btn list-center buttons"><li class="twOverflow-button-settings"><a class="btn-orange btn-border save"><#= locale("common", "save") #></a></li><li class="twOverflow-button-log"><a class="btn-orange btn-border clearLogs"><#= locale("builder", "logs.clear") #></a></li><li><a class="btn-green btn-border switch"><#= locale("common", "start") #></a></li></ul></footer></div>',replaces:{locale:b,version:"1.0.0"},css:'#BuilderQueue .buildingOrder td,#BuilderQueue .buildingOrderFinal td{background:url("data:image/png;base64,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") #d1ad86}#BuilderQueue .buildingOrder tr.reached td,#BuilderQueue .buildingOrderFinal tr.reached td{background-color:#b9af7e}#BuilderQueue .buildingOrder tr.progress td,#BuilderQueue .buildingOrderFinal tr.progress td{background-color:#af9d57}#BuilderQueue input[type="text"],#BuilderQueue input[type="number"],#BuilderQueue select{color:#000;min-width:70%}#BuilderQueue .settings .helper{font-weight:bold;vertical-align:-1px;font-family:helvetica;color:rgba(0,0,0,0.3)}#BuilderQueue .settings .helper:hover{color:#000}#BuilderQueue .settings .custom-select{width:200px}#BuilderQueue .settings td{text-align:center}#BuilderQueue .buildLog td{text-align:center}#BuilderQueue .buildLog .village:hover{color:#fff;text-shadow:0 1px 0 #000}#BuilderQueue table.header-center th{text-align:center}#BuilderQueue .noBuilds td{height:26px;text-align:center}#BuilderQueue .force-26to20{transform:scale(.8);width:20px;height:20px}'}),p=new f(b("builder","title"),{classHover:!1,classBlur:!1,onClick:function(){o.openWindow(),Q()}}),r=$(o.$window),s=r.find(".buildingOrder"),$buildingOrderFinal=r.find(".buildingOrderFinal"),t=r.find(".groupVillages"),u=r.find(".buildingPreset"),v=r.find(".settings"),w=r.find(".save"),x=r.find(".switch"),y=r.find(".buildLog"),z=r.find(".noBuilds"),A=r.find(".clearLogs"),L(),G(),F(),U(),E(),o},E=function(){u.on("selectSelected",function(){M(this.dataset.value),N(this.dataset.value),Q()}),w.on("click",function(a){K()}),x.on("click",function(b){a.isRunning()?a.stop():a.start()}),A.on("click",function(b){a.clearLogs()}),g.bind("Builder/start",function(){x.html(b("common","stop")),x.removeClass("btn-green").addClass("btn-red"),p.$elem.removeClass("btn-green").addClass("btn-red"),h.emitNotif("success",b("builder","general.started"))}),g.bind("Builder/stop",function(){x.html(b("common","start")),x.removeClass("btn-red").addClass("btn-green"),p.$elem.removeClass("btn-red").addClass("btn-green"),h.emitNotif("success",b("builder","general.stopped"))}),g.bind("Builder/jobStarted",S),g.bind("Builder/clearLogs",T),c.$on(j.GROUPS_UPDATED,function(){G()}),c.$on(j.VILLAGE_SELECTED_CHANGED,function(){o.isVisible()&&Q()}),c.$on(j.BUILDING_UPGRADING,R),c.$on(j.BUILDING_LEVEL_CHANGED,R),c.$on(j.BUILDING_TEARING_DOWN,R),c.$on(j.VILLAGE_BUILDING_QUEUE_CHANGED,R)},F=function(){var b=u.find(".custom-select-handler").html(""),c=u.find(".custom-select-data").html(""),d=a.getSettings();for(var e in d.buildingOrder){d.buildingPreset==e&&(b.html(e),u[0].dataset.name=e,u[0].dataset.value=e),I(c,{name:e,value:e}),u.append(c)}},G=function(){var b=t.find(".custom-select-handler").html(""),c=t.find(".custom-select-data").html(""),d=a.getSettings();H(c,"");for(var e in q){var f=q[e].name;d.groupVillages;""===d.groupVillages?(b.html(B),t[0].dataset.name=B,t[0].dataset.value=""):d.groupVillages==e&&(b.html(f),t[0].dataset.name=f,t[0].dataset.value=e),I(c,{name:f,value:e,icon:q[e].icon}),t.append(c)}d.groupVillages||b.html(B)},H=function(a,b){var c=document.createElement("span");c.dataset.name=B,c.dataset.value=b||"",a.append(c)},I=function(a,b){var c=document.createElement("span");for(var d in b)c.dataset[d]=b[d];a.append(c)},J=function(a){r.find("[data-setting]").forEach(function(b){var c=b.dataset.setting;a(b,c)})},K=function(){var c={};return J(function(b,d){switch(a.settingsMap[d].inputType){case"text":c[d]="number"===b.type?parseInt(b.value,10):b.value;break;case"select":c[d]=b.dataset.value;break;case"checkbox":c[d]=b.checked}}),!!a.updateSettings(c)&&(h.emitNotif("success",b("builder","settings.saved")),!0)},L=function(){var b=a.getSettings();J(function(c,d){switch(a.settingsMap[d].inputType){case"text":c.value=b[d];break;case"select":c.dataset.value=b[d];break;case"checkbox":b[d]&&(c.checked=!0,c.parentElement.classList.add("icon-26x26-checkbox-checked"))}}),n(function(){M(),N(),Q()},["initial_village"])},M=function(c){var d={},f=a.getSettings(),g=f.buildingOrder[c||f.buildingPreset],h=e.getGameData().getBuildings();for(var j in l)d[l[j]]=0;s.html(""),g.forEach(function(a){var c=++d[a],e=document.createElement("tr"),f=h[a].individual_level_costs[c];e.innerHTML=i.render('<td><span class="building-icon icon-20x20-building-<#= building #>"></span></td><td><#= locale("common", building) #></td><td><#= level #></td><td><#= duration #></td><td><span class="icon-26x26-resource-wood force-26to20"></span> <#= wood #> <span class="icon-26x26-resource-clay force-26to20"></span> <#= clay #> <span class="icon-26x26-resource-iron force-26to20"></span> <#= iron #> </td>',{locale:b,building:a,level:c,duration:m.readableSeconds(f.build_time),wood:f.wood,clay:f.clay,iron:f.iron}),e.dataset.building=a,e.dataset.level=c,s.append(e)}),o.recalcScrollbar()},N=function(c){var d={},e=a.getSettings(),f=e.buildingOrder[c||e.buildingPreset];$buildingOrderFinal.html(""),f.forEach(function(a){d[a]=d[a]||0,++d[a]}),C.forEach(function(a){if(a in d){var c=document.createElement("tr"),e=d[a];c.innerHTML=i.render('<td><span class="building-icon icon-20x20-building-<#= building #>"></span></td><td><#= locale("common", building) #></td><td><#= level #></td>',{locale:b,building:a,level:e}),c.dataset.building=a,c.dataset.level=e,$buildingOrderFinal.append(c)}}),o.recalcScrollbar()},O=function(a,b){return e.getSelectedVillage().getBuildingData().getBuildingLevel(a)>=b},P=function(a,b){var c=e.getSelectedVillage().getBuildingQueue().getQueue(),d=!1;return c.some(function(c){if(c.building===a&&c.level===b)return d=!0}),d},Q=function(){s.find("tr").forEach(function(a){var b=a.dataset.building,c=parseInt(a.dataset.level,10),d="";O(b,c)?d="reached":P(b,c)&&(d="progress"),a.className=d}),$buildingOrderFinal.find("tr").forEach(function(a){var b=O(a.dataset.building,a.dataset.level);a.className=b?"reached":""})},R=function(a,b){var c=b.village_id||b.id;o.isVisible()&&e.getSelectedVillage().getId()===c&&Q()},S=function(a,c,d,e){z.hide();var f=document.createElement("tr");f.innerHTML=i.render('<td class="village"><#= village #></td><td><span class="building-icon icon-20x20-building-<#= building #>"></span> <#= locale("common", building) #></td><td><#= level #></td><td><#= started #></td>',{locale:b,village:h.genVillageLabel(a),building:c,level:d,started:h.formatDate(e)}),f.querySelector(".village").addEventListener("click",function(){k.openVillageInfo(a.id)}),y.prepend(f),o.recalcScrollbar()},T=function(){y.find("tr:not(.noBuilds)").remove(),z.css("display","")},U=function(){a.getBuildLog().forEach(function(a){S.apply(this,a)})};a.interface=function(){a.interface=D()}}),define("two/queue",["two/locale","two/utils","two/eventQueue","helper/time","helper/math","struct/MapData","conf/conf","Lockr"],function(b,c,d,h,i,j,k,l){var m,o,p={NOT_OWN_VILLAGE:"notOwnVillage",NOT_ENOUGH_UNITS:"notEnoughUnits",TIME_LIMIT:"timeLimit",COMMAND_REMOVED:"commandRemoved",COMMAND_SENT:"commandSent"},q={INVALID_ORIGIN:"invalidOrigin",INVALID_TARGET:"invalidTarget"},r=[],s={},t=[],u=[],v=!1,w={selectedVillage:function(a){return a.origin.id===e.getSelectedVillage().getId()},barbarianTarget:function(a){return!a.target.character_id},allowedTypes:function(a,b){return b.allowedTypes[a.type]},attack:function(a){return"attack"!==a.type},support:function(a){return"support"!==a.type},relocate:function(a){return"relocate"!==a.type},textMatch:function(a,b){var c=!0,d=b.textMatch.toLowerCase().split(/\W/),e=[a.origin.name,a.originCoords,a.originCoords,a.origin.character_name||"",a.target.name,a.targetCoords,a.target.character_name||"",a.target.tribe_name||"",a.target.tribe_tag||""];return e=e.join("").toLowerCase(),d.some(function(a){if(a.length&&!e.includes(a))return c=!1,!0}),c}},x=function(a){return a<h.gameTime()+o},y=function(a){var b={};for(var c in a){var d=a[c];"*"!==d&&0===d||(b[c]=d)}return b},z=function(){r=r.sort(function(a,b){return a.sendTime-b.sendTime})},A=function(a){r.push(a)},B=function(a){s[a.id]=a},C=function(a){t.push(a)},D=function(a){u.push(a)},E=function(){l.set("queue-commands",r)},F=function(){l.set("queue-sent",t)},G=function(){l.set("queue-expired",u)},H=function(){var a=l.get("queue-commands",[],!0);if(a.length)for(var b=0;b<a.length;b++){var c=a[b];h.gameTime()>c.sendTime?K.expireCommand(c,p.TIME_LIMIT):(A(c),B(c))}},I=function(a){var b=e.getVillages(),c=b[a.origin.id];if(!c)return p.NOT_OWN_VILLAGE;var d=c.unitInfo.units,f={};for(var g in a.units){var h=a.units[g];if("*"===h){if(0===(h=d[g].available))continue}else if(h<0){if((h=d[g].available-Math.abs(h))<0)return p.NOT_ENOUGH_UNITS}else if(h>0&&h>d[g].available)return p.NOT_ENOUGH_UNITS;f[g]=h}return angular.equals({},f)?p.NOT_ENOUGH_UNITS:f},J=function(){setInterval(function(){r.length&&r.some(function(a){if(!x(a.sendTime))return!0;v?K.sendCommand(a):K.expireCommand(a,p.TIME_LIMIT)})},100)},K={};return K.initialized=!1,K.version="1.2.0",K.init=function(){b.create("queue",{en:{title:"Generał",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",sent:"wysłany/e",activated:"włączony",deactivated:"wyłączony",expired:"przedawniony/e",removed:"usunięty/e",added:"dodany/e",clear:"wyczyść",insert:"Wybierz szablon","general.clear":"Wyczyść logi","general.nextCommand":"Następny rozkaz","add.basics":"Podstawowe informacje","add.origin":"Źródło","add.addSelected":"Aktywna wioska","add.target":"Cel","add.addMapSelected":"Wybrana wioska na mapie","add.arrive":"Czas dotarcia na cel","add.out":"Czas wyjścia z  twojej wioski","add.currentDate":"Obecny czas","add.currentDatePlus":"Zwiększ czas o 100 milisekund.","add.currentDateMinus":"Zmniejsz czas o 100 milisekund.","add.travelTimes":"Czas podróży jendostek","add.date":"Czas/Data","add.no-village":"Wybierz wioskę...","add.village-search":"Znajdź wioskę...","add.clear":"wyczyść","queue.waiting":"Rozkazy","queue.noneAdded":"Brak dodanych rozkazów.","queue.sent":"Rozkazy wysłane","queue.noneSent":"Brak wysłanych rozkazów.","queue.expired":"Przedawnione rozkazy","queue.noneExpired":"Brak przedawnionych rozkazów.","queue.remove":"Usuń rozkaz z listy","queue.filters":"Filtruj rozkazy","filters.selectedVillage":"Pokaż tylko rozkazy z aktywnej wioski","filters.barbarianTarget":"Pokaż tylko rozkazy na wioski barbarzyńskie","filters.attack":"Pokaż ataki","filters.support":"Pokaż wsparcia","filters.relocate":"Pokaż przeniesienia","filters.textMatch":"Filtruj za pomocą tekstu...","command.out":"Czas wyjścia","command.timeLeft":"Pozostały czas","command.arrive":"Czas dotarcia","error.noUnitsEnough":"Brak wystarczającej liczby jednostek do wysłania rozkazu!","error.notOwnVillage":"Wioska źródłowa nie należy do ciebie!","error.origin":"Nieprawidłowa wioska źródłowa!","error.target":"Nieprawidłowa wioska cel!","error.noUnits":"Nie wybrano jednostek!","error.invalidDate":"Nieprawidłowy Czas","error.alreadySent":"Ten rozkaz %{type} powinien zostać wysłany %{date}","error.noMapSelectedVillage":"Nie zaznaczono wioski na mapie.","error.removeError":"Błąd usuwania rozkazu."},pl:{title:"Generał",attack:"Atak",support:"Wsparcie",relocate:"Przeniesienie",sent:"wysłany/e",activated:"włączony",deactivated:"wyłączony",expired:"przedawniony/e",removed:"usunięty/e",added:"dodany/e",clear:"wyczyść",insert:"Wybierz szablon","general.clear":"Wyczyść logi","general.nextCommand":"Następny rozkaz","add.basics":"Podstawowe informacje","add.origin":"Źródło","add.addSelected":"Aktywna wioska","add.target":"Cel","add.addMapSelected":"Wybrana wioska na mapie","add.arrive":"Czas dotarcia na cel","add.out":"Czas wyjścia z  twojej wioski","add.currentDate":"Obecny czas","add.currentDatePlus":"Zwiększ czas o 100 milisekund.","add.currentDateMinus":"Zmniejsz czas o 100 milisekund.","add.travelTimes":"Czas podróży jendostek","add.date":"Czas/Data","add.no-village":"Wybierz wioskę...","add.village-search":"Znajdź wioskę...","add.clear":"wyczyść","queue.waiting":"Rozkazy","queue.noneAdded":"Brak dodanych rozkazów.","queue.sent":"Rozkazy wysłane","queue.noneSent":"Brak wysłanych rozkazów.","queue.expired":"Przedawnione rozkazy","queue.noneExpired":"Brak przedawnionych rozkazów.","queue.remove":"Usuń rozkaz z listy","queue.filters":"Filtruj rozkazy","filters.selectedVillage":"Pokaż tylko rozkazy z aktywnej wioski","filters.barbarianTarget":"Pokaż tylko rozkazy na wioski barbarzyńskie","filters.attack":"Pokaż ataki","filters.support":"Pokaż wsparcia","filters.relocate":"Pokaż przeniesienia","filters.textMatch":"Filtruj za pomocą tekstu...","command.out":"Czas wyjścia","command.timeLeft":"Pozostały czas","command.arrive":"Czas dotarcia","error.noUnitsEnough":"Brak wystarczającej liczby jednostek do wysłania rozkazu!","error.notOwnVillage":"Wioska źródłowa nie należy do ciebie!","error.origin":"Nieprawidłowa wioska źródłowa!","error.target":"Nieprawidłowa wioska cel!","error.noUnits":"Nie wybrano jednostek!","error.invalidDate":"Nieprawidłowy Czas","error.alreadySent":"Ten rozkaz %{type} powinien zostać wysłany %{date}","error.noMapSelectedVillage":"Nie zaznaczono wioski na mapie.","error.removeError":"Błąd usuwania rozkazu."},pt:{title:"CommandQueue",attack:"Ataque",support:"Apoio",relocate:"Transferência",sent:"enviado",activated:"ativado",deactivated:"desativado",expired:"expirado",removed:"removido",added:"adicionado","general.clear":"Limpar registros","general.nextCommand":"Próximo comando","add.basics":"Informações básicas","add.origin":"Coordenadas da origem","add.addSelected":"Aldeia ativa","add.target":"Coordenadas do alvo","add.addMapSelected":"Aldeia selecionada no mapa","add.arrive":"Data de chegada","add.out":"Data de saída","add.currentDate":"Data/hora","add.currentDatePlus":"Aumentar data em 100 milisegunds.","add.currentDateMinus":"Reduzir data em 100 milisegunds.","add.travelTimes":"Tempos de viagem","add.date":"Data","add.no-village":"selecione uma aldeia...","add.village-search":"Procurar aldeia...","add.clear":"limpar","queue.waiting":"Comandos em espera","queue.noneAdded":"Nenhum comando adicionado.","queue.sent":"Comandos enviados","queue.noneSent":"Nenhum comando enviado.","queue.expired":"Comandos expirados","queue.noneExpired":"Nenhum comando expirado.","queue.remove":"Remover comando da lista","queue.filters":"Filtro de comandos","filters.selectedVillage":"Mostrar apenas comandos com origem da aldeia selecionada","filters.barbarianTarget":"Mostrar apenas comandos com aldeias bárbaras como alvo","filters.attack":"Mostrar ataques","filters.support":"Mostrar apoios","filters.relocate":"Mostrar transferências","filters.textMatch":"Filtrar por texto...","command.out":"Saída na data","command.timeLeft":"Tempo restante","command.arrive":"Chegada na data","error.noUnitsEnough":"Sem unidades o sulficientes para enviar o comando!","error.origin":"Aldeia de origem inválida!","error.target":"Aldeia alvo inválida!","error.noUnits":"Nenhuma unidade especificada!","error.invalidDate":"Data inválida","error.alreadySent":"Esse %{type} deveria ter saído %{date}","error.noMapSelectedVillage":"Nenhuma aldeia selecionada no mapa.","error.removeError":"Erro ao remover comando."},us:{title:"CommandQueue",attack:"Attack",support:"Support",relocate:"Transfer",sent:"sent",activated:"enabled",deactivated:"disabled",expired:"expired",removed:"removed",added:"added",clear:"clear",insert:"Insert a preset","general.clear":"Clear logs","general.nextCommand":"Next command","add.basics":"Basic information","add.origin":"Origin","add.addSelected":"Active village","add.target":"Target","add.addMapSelected":"Selected village on a map","add.arrive":"Command arrive at date","add.out":"Command leave at date","add.currentDate":"Current date","add.currentDatePlus":"Increase date in 100 milliseconds.","add.currentDateMinus":"Reduce date in 100 milliseconds.","add.travelTimes":"Unit travel time","add.date":"Date/time","add.no-village":"select a village...","add.village-search":"Village search...","add.clear":"clear","queue.waiting":"Waiting commands","queue.noneAdded":"No command added.","queue.sent":"Commands sent","queue.noneSent":"No command sent.","queue.expired":"Expired commands","queue.noneExpired":"No command expired.","queue.remove":"Remove command form list","queue.filters":"Filter commands","filters.selectedVillage":"Show only commands from the selected village","filters.barbarianTarget":"Show only commands with barbarian villages as target","filters.attack":"Show attacks","filters.support":"Show supports","filters.relocate":"Show transfers","filters.textMatch":"Filter by text...","command.out":"Out","command.timeLeft":"Time remaining","command.arrive":"Arrival","error.noUnitsEnough":"No units enough to send the command!","error.notOwnVillage":"The origin village is not owned by you!","error.origin":"Invalid origin village!","error.target":"Invalid target village!","error.noUnits":"No units specified!","error.invalidDate":"Invalid date","error.alreadySent":"This %{type} should have left %{date}","error.noMapSelectedVillage":"No selected village on map.","error.removeError":"Error removing command."}},"pl"),o=c.getTimeOffset(),m=e.getSelectedCharacter(),K.initialized=!0,t=l.get("queue-sent",[],!0),u=l.get("queue-expired",[],!0),H(),J(),a.addEventListener("beforeunload",function(a){v&&r.length&&(a.returnValue=!0)})},K.sendCommand=function(a){var b=I(a);if("string"==typeof b)return K.expireCommand(a,b);a.units=b,f.emit(g.SEND_CUSTOM_ARMY,{start_village:a.origin.id,target_village:a.target.id,type:a.type,units:a.units,icon:0,officers:a.officers,catapult_target:a.catapultTarget}),C(a),F(),K.removeCommand(a,p.COMMAND_SENT),d.trigger("Queue/command/send",[a])},K.expireCommand=function(a,b){D(a),G(),K.removeCommand(a,b)},K.addCommand=function(a){if(!a.origin)return d.trigger("Queue/command/add/invalidOrigin",[a]);if(!a.target)return d.trigger("Queue/command/add/invalidTarget",[a]);if(!c.isValidDateTime(a.date))return d.trigger("Queue/command/add/invalidDate",[a]);if(!a.units||angular.equals(a.units,{}))return d.trigger("Queue/command/add/noUnits",[a]);a.originCoords=a.origin.x+"|"+a.origin.y,a.targetCoords=a.target.y+"|"+a.target.y;var b=new Promise(function(b,c){K.getVillageByCoords(a.origin.x,a.origin.y,function(a){a?b(a):c(q.INVALID_ORIGIN)})}),e=new Promise(function(b,c){K.getVillageByCoords(a.target.x,a.target.y,function(a){a?b(a):c(q.INVALID_TARGET)})}),f=Promise.all([b,e]);f.then(function(b){a.origin=b[0],a.target=b[1],a.units=y(a.units),a.date=c.fixDate(a.date),a.travelTime=K.getTravelTime(a.origin,a.target,a.units,a.type,a.officers);var e=c.getTimeFromString(a.date);if("arrive"===a.dateType?(a.sendTime=e-a.travelTime,a.arriveTime=e):(a.sendTime=e,a.arriveTime=e+a.travelTime),x(a.sendTime))return d.trigger("Queue/command/add/alreadySent",[a]);"attack"===a.type&&"supporter"in a.officers&&delete a.officers.supporter;for(var f in a.officers)a.officers[f]=1;"attack"===a.type&&a.units.catapult?a.catapultTarget=a.catapultTarget||"headquarter":a.catapultTarget=null,a.id=c.guid(),A(a),B(a),z(),E(),d.trigger("Queue/command/add",[a])}),f.catch(function(b){switch(b){case q.INVALID_ORIGIN:d.trigger("Queue/command/add/invalidOrigin",[a]);break;case q.INVALID_TARGET:d.trigger("Queue/command/add/invalidTarget",[a])}})},K.removeCommand=function(a,b){var c=!1;delete s[a.id];for(var e=0;e<r.length;e++)if(r[e].id==a.id){r.splice(e,1),E(),c=!0;break}if(c){switch(b){case p.TIME_LIMIT:d.trigger("Queue/command/send/timeLimit",[a]);break;case p.NOT_OWN_VILLAGE:d.trigger("Queue/command/send/notOwnVillage",[a]);break;case p.NOT_ENOUGH_UNITS:d.trigger("Queue/command/send/noUnitsEnough",[a]);break;case p.COMMAND_REMOVED:d.trigger("Queue/command/remove",[a])}return!0}return d.trigger("Queue/command/remove/error",[a]),!1},K.clearRegisters=function(){l.set("queue-expired",[]),l.set("queue-sent",[]),u=[],t=[]},K.start=function(a){v=!0,d.trigger("Queue/start",[a])},K.stop=function(){v=!1,d.trigger("Queue/stop")},K.isRunning=function(){return v},K.getWaitingCommands=function(){return r},K.getWaitingCommandsObject=function(){return s},K.getSentCommands=function(){return t},K.getExpiredCommands=function(){return u},K.getTravelTime=function(a,b,c,d,e){var f=!1,g=null===b.character_id,h=b.character_id&&b.tribe_id&&b.tribe_id===m.getTribeId();"attack"===d?("supporter"in e&&delete e.supporter,g&&(f=!0)):"support"===d&&(h&&(f=!0),"supporter"in e&&(f=!0));var j={units:c,officers:angular.copy(e)},k=n.calculateTravelTime(j,{barbarian:g,ownTribe:h,officers:e,effects:f},d),l=i.actualDistance(a,b);return 1e3*n.getTravelTimeForDistance(j,k,l,d)},K.getVillageByCoords=function(a,b,c){j.loadTownDataAsync(a,b,1,1,c)},K.filterCommands=function(a,b,c){var d=w[a];return(c||r).filter(function(a){return d(a,b)})},K}),define("two/queue/analytics",["two/queue","two/eventQueue"],function(a,b){a.analytics=function(){ga("create","UA-92130203-5","auto","CommandQueue");var a=e.getPlayer(),c=a.getSelectedCharacter(),d=[];d.push(c.getName()),d.push(c.getId()),d.push(c.getWorldId()),b.bind("Queue/send",function(a){ga("CommandQueue.send","event","commands",a.type,d.join("~"))}),b.bind("Queue/expired",function(){ga("CommandQueue.send","event","commands","expired",d.join("~"))})}}),require(["two/ready","two/queue","two/queue/ui","two/queue/analytics"],function(a,b){if(b.initialized)return!1;a(function(){b.init(),b.interface(),b.analytics(),b.getWaitingCommands().length>0&&b.start(!0)})}),
define("two/queue/ui",["two/queue","two/locale","two/ui","two/ui/buttonLink","two/ui/autoComplete","two/FrontButton","two/utils","two/eventQueue","helper/time","ejs"],function(a,b,d,h,i,k,l,m,n,o){function p(){M=l.getTimeOffset(),L=Object.keys(S.getBuildings()),J=e.getSelectedCharacter();var c={version:a.version,locale:b,units:Ha(),officers:X,buildings:L};return r=new d("CommandQueue",{activeTab:"add",template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("queue", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-three-col"><div class="tab" tab="add"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "add") #></a></div></div></div><div class="tab" tab="queue"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "waiting") #></a></div></div></div><div class="tab" tab="log"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "logs") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper rich-text twOverflow-content-add"><form class="addForm"><div><table class="tbl-border-light tbl-striped"><colgroup><col width="30%"><col width="5%"><col><col width="18%"></colgroup><tbody><tr><td><input data-setting="origin" type="text" class="textfield-border origin" pattern="\\d{2,3}\\|\\d{2,3}" placeholder="<#= locale("queue", "add.village-search") #>" required></td><td class="text-center"><span class="icon-26x26-rte-village"></span></td><td class="originVillage"><#= locale("queue", "add.no-village") #></td><td class="actions"><a class="btn btn-orange addSelected" tooltip="<#= locale("queue", "add.addSelected") #>"><#= locale("common", "selected") #></a></td></tr><tr><td><input data-setting="target" type="text" class="textfield-border target" pattern="\\d{2,3}\\|\\d{2,3}" placeholder="<#= locale("queue", "add.village-search") #>" required></td><td class="text-center"><span class="icon-26x26-rte-village"></span></td><td class="targetVillage"><#= locale("queue", "add.no-village") #></td><td class="actions"><a class="btn btn-orange addMapSelected" tooltip="<#= locale("queue", "add.addMapSelected") #>"><#= locale("common", "selected") #></a></td></tr><tr><td><input data-setting="date" type="text" class="textfield-border date" pattern="\\s*\\d{1,2}:\\d{1,2}:\\d{1,2}(:\\d{1,3})? \\d{1,2}\\/\\d{1,2}\\/\\d{4}\\s*" placeholder="<#= locale("queue", "add.date") #>" tooltip="00:00:00:000 00/00/0000" required></td><td class="text-center"><span class="icon-26x26-time"></span></td><td><span class="ff-cell-fix"><select data-setting="dateType" class="dateType"><option value="arrive" selected="selected"><#= locale("queue", "add.arrive") #></option><option value="out"><#= locale("queue", "add.out") #></option></select></span></td><td class="actions"><a class="btn btn-orange currentDateMinus" tooltip="<#= locale("queue", "add.currentDateMinus") #>">-</a><a class="btn btn-orange addCurrentDate" tooltip="<#= locale("queue", "add.currentDate") #>"><#= locale("common", "now") #></a><a class="btn btn-orange currentDatePlus" tooltip="<#= locale("queue", "add.currentDatePlus") #>">+</a></td></tr></tbody></table><table class="tbl-border-light tbl-units tbl-speed screen-village-info travelTimes" style="display:none"><thead><tr><th colspan="7"><#= locale("queue", "add.travelTimes") #></th></tr></thead><tbody><tr><td class="odd"><div class="unit-wrap"><span class="icon icon-34x34-unit-knight"></span> <span class="icon icon-34x34-unit-light_cavalry"></span> <span class="icon icon-34x34-unit-mounted_archer"></span></div><div class="travelTime box-time-sub-icon"><div class="time-icon icon-20x20-attack"></div><span class="attack" data-unit="knight"></span></div><div class="travelTime box-time-sub-icon"><div class="time-icon icon-20x20-support"></div><span class="support" data-unit="knight"></span></div></td><td><div class="unit-wrap"><span class="icon icon-single icon-34x34-unit-heavy_cavalry"></span></div><div class="travelTime"><span class="attack" data-unit="heavy_cavalry"></span></div><div class="travelTime"><span class="support" data-unit="heavy_cavalry"></span></div></td><td class="odd"><div class="unit-wrap"><span class="icon icon-34x34-unit-archer"></span> <span class="icon icon-34x34-unit-spear"></span> <span class="icon icon-34x34-unit-axe"></span> <span class="icon icon-34x34-unit-doppelsoldner"></span></div><div class="travelTime"><span class="attack" data-unit="axe"></span></div><div class="travelTime"><span class="support" data-unit="axe"></span></div></td><td><div class="unit-wrap"><span class="icon icon-single icon-34x34-unit-sword"></span></div><div class="travelTime"><span class="attack" data-unit="sword"></span></div><div class="travelTime"><span class="support" data-unit="sword"></span></div></td><td class="odd"><div class="unit-wrap"><span class="icon icon-34x34-unit-catapult"></span> <span class="icon icon-34x34-unit-ram"></span></div><div class="travelTime"><span class="attack" data-unit="ram"></span></div><div class="travelTime"><span class="support" data-unit="ram"></span></div></td><td><div class="unit-wrap"><span class="icon icon-single icon-34x34-unit-snob"></span></div><div class="travelTime"><span class="attack" data-unit="snob"></span></div><div class="travelTime"><span class="support" data-unit="snob"></span></div></td><td class="odd"><div class="unit-wrap"><span class="icon icon-single icon-34x34-unit-trebuchet"></span></div><div class="travelTime"><span class="attack" data-unit="trebuchet"></span></div><div class="travelTime"><span class="support" data-unit="trebuchet"></span></div></td></tr></tbody></table></div><h5 class="twx-section collapse"><#= locale("common", "units") #> <a href="#" class="clear-units">(<#= locale("queue", "clear") #>)</a></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="25%"><col width="25%"><col width="25%"><col width="25%"></colgroup><tbody class="add-units"><tr><td colspan="4"><select class="insert-preset"></select></td></tr><tr> <# units.forEach(function(unit, i) { #> <# if (i !== 0 && i % 4 === 0) { #> </tr><tr> <# } #> <td class="cell-space-left"><span class="unit-icon icon-bg-black icon-34x34-unit-<#= unit #>"></span> <input class="unit <#= unit #>" type="text" data-setting="<#= unit #>" placeholder="0"></td> <# }) #> <td class="text-center catapult-target" style="display:none" colspan="3"><select data-setting="catapultTarget"> <# buildings.forEach(function(building, i) { #> <# if (building === "headquarter") { #> <option value="headquarter" selected="selected"><#= locale("common", "headquarter") #></option> <# } else { #> <option value="<#= building #>"><#= locale("common", building) #></option> <# } #> <# }) #> </select></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("common", "officers") #></h5><table class="tbl-border-light tbl-striped officers"><tbody><tr> <# officers.forEach(function(officer) { #> <td><span class="icon-34x34-premium_officer_<#= officer #>"></span> <label class="btn-orange icon-26x26-checkbox"><input type="checkbox" data-setting="<#= officer #>" class="<#= officer #>"></label></td> <# }) #> </tr></tbody></table></form></div><div class="box-paper footer has-footer-upper rich-text twOverflow-content-queue"><div class="filters"><table class="tbl-border-light"><tbody><tr><td><div data-filter="selectedVillage" class="box-border-dark icon selectedVillage" tooltip="<#= locale("queue", "filters.selectedVillage") #>"><span class="icon-34x34-village-info icon-bg-black"></span></div><div data-filter="barbarianTarget" class="box-border-dark icon barbarianTarget" tooltip="<#= locale("queue", "filters.barbarianTarget") #>"><span class="icon-34x34-barbarian-village icon-bg-black"></span></div><div data-filter="attack" class="box-border-dark icon allowedTypes active" tooltip="<#= locale("queue", "filters.attack") #>"><span class="icon-34x34-attack icon-bg-black"></span></div><div data-filter="support" class="box-border-dark icon allowedTypes active" tooltip="<#= locale("queue", "filters.support") #>"><span class="icon-34x34-support icon-bg-black"></span></div><div data-filter="relocate" class="box-border-dark icon allowedTypes active" tooltip="<#= locale("queue", "filters.relocate") #>"><span class="icon-34x34-relocate icon-bg-black"></span></div><div class="text"><input data-filter="textMatch" type="text" class="box-border-dark textMatch" placeholder="<#= locale("queue", "filters.textMatch") #>"></div></td></tr></tbody></table></div><h5 class="twx-section collapse"><#= locale("queue", "queue.waiting") #></h5><div class="queue"><p class="center nothing"><#= locale("queue", "queue.noneAdded") #></p></div></div><div class="box-paper footer has-footer-upper rich-text twOverflow-content-log"><h5 class="twx-section collapse"><#= locale("queue", "queue.sent") #></h5><div class="sent"><p class="center nothing"><#= locale("queue", "queue.noneSent") #></p></div><h5 class="twx-section collapse"><#= locale("queue", "queue.expired") #></h5><div class="expired"><p class="center nothing"><#= locale("queue", "queue.noneExpired") #></p></div></div></div><footer class="win-foot"><ul class="list-btn list-center buttons"><li class="twOverflow-button-log"><a class="btn-orange btn-border clear"><#= locale("queue", "general.clear") #></a></li><li class="twOverflow-button-add"><a class="btn-orange btn-border add" name="attack"><span class="icon-26x26-attack-small"></span> <#= locale("common", "attack") #></a></li><li class="twOverflow-button-add"><a class="btn-orange btn-border add" name="support"><span class="icon-26x26-support"></span> <#= locale("common", "support") #></a></li><li class="twOverflow-button-add"><a class="btn-orange btn-border add" name="relocate"><span class="icon-26x26-relocate"></span> <#= locale("common", "relocate") #></a></li><li><a class="btn-green btn-border switch"><#= locale("common", "activate") #></a></li></ul></footer></div>',replaces:c,css:'#CommandQueue input[type="text"]{width:200px}#CommandQueue input.unit{width:80px;height:34px}#CommandQueue form .padded{padding:2px 8px}#CommandQueue .custom-select{width:240px}#CommandQueue .originVillage,#CommandQueue .targetVillage{padding:0 7px}#CommandQueue .actions{text-align:center}#CommandQueue .actions a{height:26px;line-height:26px;padding:0 10px}#CommandQueue .clear-units{font-size:12px;font-weight:normal;text-decoration:none;font-style:italic}#CommandQueue .clear-units:hover{text-shadow:0 1px 1px #000;color:#c4926f}#CommandQueue .add-units td{text-align:center}#CommandQueue .add-units .unit-icon{top:-1px}#CommandQueue .add-units input{height:34px;line-height:26px;color:#000;font-size:14px;background:url(data:image/png;base64,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) top left #b89064;box-shadow:inset 0 0 0 1px #000,inset 0 0 0 2px #a2682c,inset 0 0 0 3px #000,inset -3px -3px 2px 0 #fff,inset 0 0 9px 5px rgba(99,54,0,0.5);text-align:center;width:80px}#CommandQueue .command{margin-bottom:10px}#CommandQueue .command .time-left{width:93px;display:inline-block;padding:0 0 0 3px}#CommandQueue .command .sent-time,#CommandQueue .command .arrive-time{width:160px;display:inline-block;padding:0 0 0 5px}#CommandQueue .command td{padding:3px 6px}#CommandQueue .officers td{width:111px;text-align:center}#CommandQueue .officers label{margin-left:5px}#CommandQueue .officers span{margin-left:2px}#CommandQueue .units div.unit{float:left}#CommandQueue .units div.unit span.icon{transform:scale(.7);width:25px;height:25px}#CommandQueue .units div.unit span.amount{vertical-align:-2px;margin:0 5px 0 2px}#CommandQueue .units div.officer{float:left;margin:0 2px}#CommandQueue .units div.officer span{transform:scale(.7);width:25px;height:25px}#CommandQueue .remove-command{float:right;margin-top:3px}#CommandQueue .tbl-units td{text-align:center}#CommandQueue .travelTimes{margin-top:10px;font-size:13px}#CommandQueue .travelTimes th{text-align:center}#CommandQueue .travelTimes .travelTime{display:block;color:#1c4b1c}#CommandQueue .travelTimes .travelTime.box-time-sub-icon{position:relative}#CommandQueue .travelTimes .travelTime.box-time-sub-icon .time-icon{position:absolute;top:-4px;left:7px;transform:scale(.7)}#CommandQueue .dateType{width:200px}#CommandQueue .dateType .custom-select-handler{text-align:left}#CommandQueue .filters .icon{width:38px;float:left;margin:0 6px}#CommandQueue .filters .icon.active:before{box-shadow:0 0 0 1px #000,-1px -1px 0 2px #ac9c44,0 0 0 3px #ac9c44,0 0 0 4px #000;border-radius:1px;content:"";position:absolute;width:38px;height:38px;left:-1px;top:-1px}#CommandQueue .filters .text{margin-left:262px}#CommandQueue .filters .text input{height:36px;margin-top:1px;width:100%;text-align:left;padding:0 5px}#CommandQueue .filters .text input::placeholder{color:white}#CommandQueue .filters .text input:focus::placeholder{color:transparent}#CommandQueue .filters td{padding:6px}#CommandQueue .icon-34x34-barbarian-village:before{filter:grayscale(100%);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-220px -906px}#CommandQueue .icon-20x20-time-arrival:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-529px -454px}#CommandQueue .icon-20x20-attack:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-546px -1086px;width:26px;height:26px}#CommandQueue .icon-20x20-support:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-462px -360px;width:26px;height:26px}#CommandQueue .icon-20x20-relocate:before{transform:scale(.8);background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-1090px -130px;width:26px;height:26px}#CommandQueue .icon-26x26-attack:before{background-image:url(https://i.imgur.com/ozI4k0h.png);background-position:-546px -1086px}'}),s=new k(b("queue","title"),{classHover:!1,classBlur:!1,onClick:function(){r.openWindow()}}),t=$(r.$window),u=t.find("a.switch"),v=t.find("form.addForm"),w=t.find("input.origin"),x=t.find("input.target"),y=t.find("input.date"),z=t.find(".officers input"),$travelTimes=t.find("table.travelTimes"),B=t.find(".dateType"),C=t.find(".filters"),D=t.find("td.catapult-target"),E=t.find("input.unit.catapult"),F=t.find(".originVillage"),G=t.find(".targetVillage"),H=t.find(".clear-units"),I=t.find(".insert-preset"),A={queue:t.find("div.queue"),sent:t.find("div.sent"),expired:t.find("div.expired")},$travelTimes.find(".attack").forEach(function(a){O.attack[a.dataset.unit]=a}),$travelTimes.find(".support").forEach(function(a){O.support[a.dataset.unit]=a}),setInterval(function(){da()&&na()},1e3),Ba(),Ca(),ea(),va(),f.emit(g.GET_PRESETS,{},Ja),r}var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N={NOT_OWN_VILLAGE:"notOwnVillage",NOT_ENOUGH_UNITS:"notEnoughUnits",TIME_LIMIT:"timeLimit",COMMAND_REMOVED:"commandRemoved",COMMAND_SENT:"commandSent"},O={attack:{},support:{}},P=null,Q=null,R={},S=e.getGameData(),T={origin:!1,target:!1,date:!1},U={selectedVillage:!1,barbarianTarget:!1,allowedTypes:!0,attack:!0,support:!0,relocate:!0,textMatch:!0},V=["selectedVillage","barbarianTarget","allowedTypes","textMatch"],W={allowedTypes:{attack:!0,support:!0,relocate:!0},textMatch:""},X=S.getOrderedOfficerNames(),Y=S.getOrderedUnitNames(),Z=["knight","heavy_cavalry","axe","sword","ram","snob","trebuchet"],_="arrive",aa=!1,ba=function(){$travelTimes.css("display","none")},ca=function(){$travelTimes.css("display","")},da=function(){return r.isVisible("add")&&T.origin&&T.target&&T.date},ea=function(a){ha(),fa(),ga(),za()},fa=function(){a.getSentCommands().forEach(function(a){ua(a,"sent")})},ga=function(){a.getExpiredCommands().forEach(function(a){ua(a,"expired")})},ha=function(){a.getWaitingCommands().forEach(function(a){ua(a,"queue")})},ia=function(){A.queue.find(".command").remove(),R={}},ja=function(){ia(),ha()},ka=function(a){return Y.includes(a)},la=function(a){return X.includes(a)},ma=function(a){var b=new Date(a||n.gameTime()+l.getTimeOffset()),c=b.getMilliseconds(),d=n.zerofill(c-c%100,3),e=n.zerofill(b.getSeconds(),2),f=n.zerofill(b.getMinutes(),2);return n.zerofill(b.getHours(),2)+":"+f+":"+e+":"+d+" "+n.zerofill(b.getDate(),2)+"/"+n.zerofill(b.getMonth()+1,2)+"/"+b.getFullYear()},na=function(){if(!T.origin||!T.target)return $travelTimes.hide();var b=(w.val(),x.val(),Ga());if(T.date)var c=l.fixDate(y.val()),d=l.getTimeFromString(c);["attack","support"].forEach(function(c){Z.forEach(function(e){var f={};f[e]=1;var g=a.getTravelTime(P,Q,f,c,b),h=q("readableMillisecondsFilter")(g);if("arrive"===_)if(T.date){var i=d-g;Fa(i)||(h=oa(h))}else h=oa(h);O[c][e].innerHTML=h})}),ca()},oa=function(a){return'<span class="text-red">'+a+"</span>"},pa=function(a){a.css("color","#a1251f")},qa=function(a){a.css("color","")},ra=function(a){t.find("[data-setting]").forEach(function(b){var c=b.dataset.setting;a(b,c)})},sa=function(b){var c={units:{},officers:{},type:b,origin:P,target:Q};ra(function(a,b){var d=a.value;if("dateType"===b)c.dateType=a.dataset.value;else if("catapultTarget"===b)c.catapultTarget=a.dataset.value||null;else{if(!d)return!1;ka(b)?c.units[b]=isNaN(d)?d:parseInt(d,10):la(b)?a.checked&&(c.officers[b]=1):d&&(c[b]=d)}}),a.addCommand(c)},ta=function(a,b){var c=A[b].find(".command").filter(function(b){return b.dataset.id===a.id});$(c).remove(),xa(a.id),Aa(b),r.isVisible("queue")&&r.recalcScrollbar()},ua=function(c,d){var e=document.createElement("div");e.dataset.id=c.id,e.className="command";var f=h("village",l.genVillageLabel(c.origin),c.origin.id),g=h("village",l.genVillageLabel(c.target),c.target.id),i=l.formatDate(c.arriveTime-M),j=l.formatDate(c.sendTime-M),k=!!Object.keys(c.officers).length;if(e.innerHTML=o.render('<table class="tbl-border-light"><colgroup><col width="100px"></colgroup><tbody><tr><th colspan="2"><span class="icon-bg-<#= iconColor #> icon-26x26-<#= type #>" tooltip="<#= locale("common", type) #>"></span> <# if (section === "queue") { #> <span class="size-26x26 icon-bg-black icon-26x26-time-duration" tooltip="<#= locale("queue", "command.timeLeft") #>"></span> <span class="time-left">00:00:00</span> <# } #> <span class="size-26x26 icon-bg-black icon-20x20-units-outgoing" tooltip="<#= locale("queue", "command.out") #>"></span> <span class="sent-time"><#= sendTime #></span><span class="size-26x26 icon-bg-black icon-20x20-time-arrival" tooltip="<#= locale("queue", "command.arrive") #>"></span> <span class="arrive-time"><#= arriveTime #></span> <# if (section === "queue") { #> <a href="#" class="remove-command size-20x20 btn-red icon-20x20-close" tooltip="<#= locale("queue", "queue.remove") #>"></a> <# } #> </th></tr><tr><td><#= locale("common", "villages") #></td><td><a class="origin"></a> <span class="size-20x20 icon-26x26-<#= type #>"></span> <a class="target"></a></td></tr><tr><td><#= locale("common", "units") #></td><td class="units"> <# for (var unit in units) { #> <div class="unit"> <# if (unit === "catapult" && type === "attack") { #> <span class="icon-34x34-unit-<#= unit #> icon"></span><span class="amount"><#= units[unit] #> <span>(<#= locale("common", catapultTarget) #>)</span></span> <# } else { #> <span class="icon-34x34-unit-<#= unit #> icon"></span><span class="amount"><#= units[unit] #></span> <# } #> </div> <# } #> <# if (hasOfficers) { #> <# for (var officer in officers) { #> <div class="officer"><span class="icon-34x34-premium_officer_<#= officer #>"></span></div> <# } #> <# } #> </td></tr></tbody></table>',{sendTime:j,type:c.type,arriveTime:i,units:c.units,hasOfficers:k,officers:c.officers,section:d,locale:b,catapultTarget:c.catapultTarget,iconColor:"attack"===c.type?"red":"blue"}),e.querySelector(".origin").replaceWith(f.elem),e.querySelector(".target").replaceWith(g.elem),"queue"===d){var m=e.querySelector(".remove-command"),n=e.querySelector(".time-left");m.addEventListener("click",function(b){a.removeCommand(c,N.COMMAND_REMOVED)}),wa(n,c.id)}A[d].append(e),r.setTooltips(),Aa(d)},va=function(){var b=a.getWaitingCommandsObject();setInterval(function(){var a=n.gameTime()+M;if(!r.isVisible("queue"))return!1;for(var c in R){var d=b[c],e=d.sendTime-a;e>0&&(R[c].innerHTML=q("readableMillisecondsFilter")(e,!1,!0))}},1e3)},wa=function(a,b){R[b]=a},xa=function(a){delete R[a]},ya=function(b){var c=a.getWaitingCommandsObject();A.queue.find(".command").forEach(function(a){var d=c[a.dataset.id];d&&b(a,d)})},za=function(b){var c=a.getWaitingCommands();V.forEach(function(b){U[b]&&(c=a.filterCommands(b,W,c))});var d=c.map(function(a){return a.id});ya(function(a,b){a.style.display=d.includes(b.id)?"":"none"}),r.recalcScrollbar()},Aa=function(b){var c=A[b],d=c.find("p.nothing"),e="queue"===b?a.getWaitingCommands():c.find("div");d.css("display",0===e.length?"":"none")},Ba=function(){m.bind("Queue/command/add/invalidOrigin",function(a){l.emitNotif("error",b("queue","error.origin"))}),m.bind("Queue/command/add/invalidTarget",function(a){l.emitNotif("error",b("queue","error.target"))}),m.bind("Queue/command/add/invalidDate",function(a){l.emitNotif("error",b("queue","error.invalidDate"))}),m.bind("Queue/command/add/noUnits",function(a){l.emitNotif("error",b("queue","error.noUnits"))}),m.bind("Queue/command/add/alreadySent",function(a){l.emitNotif("error",b("queue","error.alreadySent",{date:l.formatDate(a.sendTime),type:b("common",a.type)}))}),m.bind("Queue/command/remove",function(a){ta(a,"queue"),c.$broadcast(j.TOOLTIP_HIDE,"twoverflow-tooltip"),l.emitNotif("success",Ea(a.type,"removed"))}),m.bind("Queue/command/remove/error",function(a){l.emitNotif("error",b("queue","error.removeError"))}),m.bind("Queue/command/send/timeLimit",function(a){ta(a,"queue"),ua(a,"expired"),l.emitNotif("error",Ea(a.type,"expired"))}),m.bind("Queue/command/send/notOwnVillage",function(a){ta(a,"queue"),ua(a,"expired"),l.emitNotif("error",b("queue","error.notOwnVillage"))}),m.bind("Queue/command/send/noUnitsEnough",function(a){ta(a,"queue"),ua(a,"expired"),l.emitNotif("error",b("queue","error.noUnitsEnough"))}),m.bind("Queue/command/add",function(a){ja(),za(),l.emitNotif("success",Ea(a.type,"added"))}),m.bind("Queue/command/send",function(a){ta(a,"queue"),ua(a,"sent"),l.emitNotif("success",Ea(a.type,"sent"))}),m.bind("Queue/start",function(a){s.$elem.removeClass("btn-green").addClass("btn-red"),u.removeClass("btn-green").addClass("btn-red"),u.html(b("common","deactivate")),a||l.emitNotif("success",Ea("title","activated"))}),m.bind("Queue/stop",function(){s.$elem.removeClass("btn-red").addClass("btn-green"),u.removeClass("btn-red").addClass("btn-green"),u.html(b("common","activate")),l.emitNotif("success",Ea("title","deactivated"))}),B.on("selectSelected",function(){_=B[0].dataset.value,na()}),u.on("click",function(b){a.isRunning()?a.stop():a.start()}),t.find(".buttons .add").on("click",function(){sa(this.name)}),t.find("a.clear").on("click",function(){Da()}),t.find("a.addSelected").on("click",function(){P=e.getSelectedVillage().data,F.html(l.genVillageLabel(P)),T.origin=!0,P&&Q&&ca(),a.getVillageByCoords(P.x,P.y,function(a){P=a,na()})}),t.find("a.addMapSelected").on("click",function(){if(!aa)return l.emitNotif("error",b("queue","error.noMapSelectedVillage"));Q=aa,G.html(l.genVillageLabel(Q)),T.target=!0,P&&Q&&ca(),a.getVillageByCoords(Q.x,Q.y,function(a){Q=a,na()})}),t.find("a.addCurrentDate").on("click",function(){y.val(ma()),y.trigger("input")}),t.find("a.currentDatePlus").on("click",function(){y.val(Ia(y.val(),100))}),t.find("a.currentDateMinus").on("click",function(){y.val(Ia(y.val(),-100))});var d=function(a){return function(){var b="origin"===a?w:x,c=b.val();if(c.length<2)return i.hide();i.search(c,function(c){c.length&&i.show(c,b[0],"commandQueue-"+a)},["village"])}};w.on("input",d("origin")),x.on("input",d("target")),c.$on(j.SELECT_SELECTED,function(a,b,c){"commandQueue-origin"===b?(T.origin=!0,P=c,qa(w),na(),F.html(c.name)):"commandQueue-target"===b&&(T.target=!0,Q=c,qa(x),na(),G.html(c.name)),P&&Q||ba()}),y.on("input",function(){T.date=l.isValidDateTime(y.val()),T.date?qa(y):pa(y),na()}),z.on("change",function(){na()}),E.on("input",function(a){a.target.value?D.css("display",""):D.css("display","none")}),H.on("click",La),c.$on(j.SHOW_CONTEXT_MENU,function(a,b){aa=b.data}),c.$on(j.DESTROY_CONTEXT_MENU,function(){aa=!1}),c.$on(j.VILLAGE_SELECTED_CHANGED,function(){za()}),c.$on(j.ARMY_PRESET_UPDATE,Ja),c.$on(j.ARMY_PRESET_DELETED,Ja),I.on("selectSelected",function(){var a=I[0].dataset.value;Ka(a)})},Ca=function(){C.find(".selectedVillage").on("click",function(){U.selectedVillage?this.classList.remove("active"):this.classList.add("active"),U.selectedVillage=!U.selectedVillage,za()}),C.find(".barbarianTarget").on("click",function(){U.barbarianTarget?this.classList.remove("active"):this.classList.add("active"),U.barbarianTarget=!U.barbarianTarget,za()}),C.find(".allowedTypes").on("click",function(){var a=this.dataset.filter,b=U[a];b?this.classList.remove("active"):this.classList.add("active"),U[a]=!b,W.allowedTypes[a]=!b,za()}),C.find(".textMatch").on("input",function(a){clearTimeout(K),W[this.dataset.filter]=this.value,K=setTimeout(function(){za()},250)})},Da=function(){a.getSentCommands().forEach(function(a){ta(a,"sent")}),a.getExpiredCommands().forEach(function(a){ta(a,"expired")}),a.clearRegisters()},Ea=function(a,c,d){return d&&(a=d+"."+a),b("queue",a)+" "+b("queue",c)},Fa=function(a){return!(n.gameTime()+M>a)},Ga=function(){var a={};return X.forEach(function(b){v.find(".officers ."+b).val()&&(a[b]=!0)}),a},Ha=function(){var a=Y.filter(function(a){return"catapult"!==a});return a.push("catapult"),a},Ia=function(a,b){return l.isValidDateTime(a)?(a=l.fixDate(a),a=l.getTimeFromString(a),a+=b,ma(a)):""},Ja=function(){var a=b("queue","insert"),c=e.getPresetList().presets,d=I.find(".custom-select-data").html(""),f=(I.find(".custom-select-handler").html(a),document.createElement("span"));f.dataset.name=a,f.dataset.value="",d.append(f),I[0].dataset.name=a;for(var g in c){var h=document.createElement("span");h.dataset.name=c[g].name,h.dataset.value=g,h.dataset.icon="size-26x26 icon-26x26-preset",d.append(h)}},Ka=function(a){var b=e.getPresetList().presets[a];if(!b)return!1;La(),t.find(".add-units input.unit").forEach(function(a){a.value=b.units[a.dataset.setting]||""}),z.forEach(function(a){var c=a.dataset.setting;b.officers[c]&&(a.checked=!0,$(a).parent().addClass("icon-26x26-checkbox-checked"))})},La=function(){t.find(".add-units input.unit").forEach(function(a){a.value=""}),z.forEach(function(a){a.checked=!1}),z.parent().forEach(function(a){$(a).removeClass("icon-26x26-checkbox-checked")})};a.interface=function(){a.interface=p()}}),define("two/faker",["two/locale","two/ready"],function(a,b){var c={};return c.version="0.9.9",c.init=function(){a.create("faker",{en:{title:"Marszałek",fake:"Auto fejki",rename:"Auto przemianowanie",renamev:"Zmień nazwe wszystkich wiosek",sended:"Wysłane",link:"Tw2Tools",text:"Najpierw utwórz szablon do fejk-karety z tagiem 'kareta' i przypisz go do wiosek z których chcesz go używać. 4 jednostki x 4 cele z 1 twojej.Jeśli dwa szablony karetowe na jednej wiosce, zadziała dla obu.",text1:"Najpierw utwórz szablon fejkowy z tagiem 'fejk' i przypisz go do wiosek z których chcesz go używać. 1 jednostka x pierwsze 6 celi z każdej twojej wioski która posiada przypisany szablon. Następne 6 celi kolejny szablon np: 'fejk pik0' 'fejk pik1'. Dwa różne szablony na jednej wiosce efekt sie dubluje.",text2:"Najpierw utwórz szablon fejkowy z tagiem 'fejk' i przypisz go do wiosek z których chcesz go używać. 1 jednostka x 1 cel z wszystkich twoich wiosek.",text3:"Zdezorientuj wroga zmieniając nazwy wszystkich swoich wiosek na jednakową.",text4:"Zdezorientuj wroga zmieniając nazwy wszystkich swoich wiosek na jednakową z iteracją rosnącą.",fakesend:"Fejk-kareta na wioski danego gracza",fakesend1:"Cele-wioski danego gracza",fakesend2:"Cel-określona wioska",send:"Wyślij",change:"Zmień","no-presets":"Brak wskazanych szablonów",sending:"Wysyła karete fejkową na 4 różne wioski wroga z każdej twojej wioski(z przypisanym szablonem)-zabiera 16 rozkazów z wioski.",sending1:"Wysyła jeden atak fejkowy na 6 różnych wioske z każdej twojej wioski(z przypisanym szablonem)-zabiera 6 rozkazów z wioski.",sending2:"Wysyła jeden atak fejkowy na wskazaną wioskę z kazdej twojej wioski(z przypisanym szablonem)- zabiera 1 rozkaz z wioski.",renaming:"Zmienia nazwy wszystkich wiosek na nową.","rename-done":"Przemianowanie w toku","entry/id":"ID gracza","entry/vid":"ID wioski","entry/name":"Nowa nazwa"},pl:{title:"Marszałek",fake:"Auto fejki",rename:"Auto przemianowanie",renamev:"Zmień nazwe wszystkich wiosek",sended:"Wysłane",link:"Tw2Tools",text:"Najpierw utwórz szablon do fejk-karety z tagiem 'kareta' i przypisz go do wiosek z których chcesz go używać. 4 jednostki x 4 cele z 1 twojej.Jeśli dwa szablony karetowe na jednej wiosce, zadziała dla obu.",text1:"Najpierw utwórz szablon fejkowy z tagiem 'fejk' i przypisz go do wiosek z których chcesz go używać. 1 jednostka x pierwsze 6 celi z każdej twojej wioski która posiada przypisany szablon. Następne 6 celi kolejny szablon np: 'fejk pik0' 'fejk pik1'. Dwa różne szablony na jednej wiosce efekt sie dubluje.",text2:"Najpierw utwórz szablon fejkowy z tagiem 'fejk' i przypisz go do wiosek z których chcesz go używać. 1 jednostka x 1 cel z wszystkich twoich wiosek.",text3:"Zdezorientuj wroga zmieniając nazwy wszystkich swoich wiosek na jednakową.",text4:"Zdezorientuj wroga zmieniając nazwy wszystkich swoich wiosek na jednakową z iteracją rosnącą.",fakesend:"Fejk-kareta na wioski danego gracza",fakesend1:"Cele-wioski danego gracza",fakesend2:"Cel-określona wioska",send:"Wyślij",change:"Zmień","no-presets":"Brak wskazanych szablonów",
sending:"Wysyła karete fejkową na 4 różne wioski wroga z każdej twojej wioski(z przypisanym szablonem)-zabiera 16 rozkazów z wioski.",sending1:"Wysyła jeden atak fejkowy na 6 różnych wioske z każdej twojej wioski(z przypisanym szablonem)-zabiera 6 rozkazów z wioski.",sending2:"Wysyła jeden atak fejkowy na wskazaną wioskę z kazdej twojej wioski(z przypisanym szablonem)- zabiera 1 rozkaz z wioski.",renaming:"Zmienia nazwy wszystkich wiosek na nową.","rename-done":"Przemianowanie w toku","entry/id":"ID gracza","entry/vid":"ID wioski","entry/name":"Nowa nazwa"},us:{title:"FakeMaster",fake:"Auto fake attacks",rename:"Auto rename villages",sended:"Sended",link:"Tw2Tools",text:"Create a preset with word key 'kareta' and assign it to choosen villages.",text1:"Create a preset with word key 'fejk' and assign it to choosen villages.",text2:"Create a preset with word key 'fejk' and assign it to choosen villages.",text3:"Set New name to distract enemy. Use correct symbols!",text4:"Set New name with +iteration to distract enemy. Use correct symbols!",fakesend:"Four-of-a-kind, target: inputed player villages",fakesend1:"Simple-fakes, target: inputed player villages",fakesend2:"Simple-fakes, target: inputed village",send:"Send",change:"Change","no-presets":"No presets to get",renamev:"Rename all villages",sending:"Sending 4 fake attacks to 4 random enemy villages from each own village(with preset)",sending1:"Sending 1 fake attack to 6 random enemy villages from each own village(with preset)",sending2:"Sending 1 fake attack to specified village from each own village(with preset).",renaming:"Changing all villages name with this one.","rename-done":"Renaming in progress","entry/id":"Player ID","entry/vid":"Village ID","entry/name":"New name"}},"pl"),c.initialized=!0},c.run=function(){if(!c.interfaceInitialized)throw new Error("FakeSender interface not initialized");b(function(){$player=e.getSelectedCharacter()},["initial_village"])},c}),define("two/faker/data",["two/faker"],function(a){var b={};a.data=b}),require(["two/ready","two/faker","two/faker/data","two/faker/ui"],function(a,b){if(b.initialized)return!1;a(function(){b.init(),b.interface(),b.run()})}),define("two/faker/ui",["two/faker","two/locale","two/ui","two/ui/autoComplete","two/FrontButton","two/utils","two/eventQueue","ejs","struct/MapData","cdn"],function(a,b,c,d,h,j,k,l,m,n){var o,p,q,r,s,t,u,v,w=function(){r.on("click",function(){function a(a){w.emit(x.CHAR_GET_PROFILE,{character_id:u},function(a){for(i=0;i<a.villages.length;i++)F.push(a.villages[i].village_id)}),setTimeout(c,3e3)}function c(){D.forEach(function(a){w.emit(x.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name.indexOf("kareta")>=0&&E.push(a.presets[i].assigned_villages)})}),setTimeout(d,1e3)}function d(){D[0]?(A.forEach(function(a,b){var c=a.getId();E[0].includes(c)?setTimeout(function(){Targets=F.slice(0,4),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[0],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[0],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[0],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[0],type:"attack"}),j.emitNotif("success","Kareta fejkowa wysłana z: "+c+" na: "+a+" z szablonu: "+D[0])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random()):j.emitNotif("error","Szablon nie przypisany do: "+c)}),setTimeout(e,C*Math.floor(5*Math.random()+1))):j.emitNotif("error",b("faker","no-presets"))}function e(){if(!D[1])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[1].includes(c))return console.log("Szablon: "+D[1]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(4,8),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[1],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[1],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[1],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[1],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[1])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(f,C*Math.floor(5*Math.random()+1))}function f(){if(!D[2])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[2].includes(c))return console.log("Szablon: "+D[2]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(8,12),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[2],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[2],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[2],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[2],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[2])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(g,C*Math.floor(5*Math.random()+1))}function g(){if(!D[2])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[3].includes(c))return console.log("Szablon: "+D[3]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(12,16),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[3],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[3],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[3],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[3],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[3])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(h,C*Math.floor(5*Math.random()+1))}function h(){if(!D[4])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[4].includes(c))return console.log("Szablon: "+D[4]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(16,20),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[4],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[4],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[4],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[4],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[4])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(k,C*Math.floor(5*Math.random()+1))}function k(){if(!D[5])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[5].includes(c))return console.log("Szablon: "+D[5]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(20,24),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[5],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[5],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[5],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[5],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[5])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(l,C*Math.floor(5*Math.random()+1))}function l(){if(!D[6])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[6].includes(c))return console.log("Szablon: "+D[6]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(24,28),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[6],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[6],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[6],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[6],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[6])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(m,C*Math.floor(5*Math.random()+1))}function m(){if(!D[7])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[7].includes(c))return console.log("Szablon: "+D[7]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(28,32),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[7],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[7],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[7],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[7],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[7])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(n,C*Math.floor(5*Math.random()+1))}function n(){if(!D[8])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[8].includes(c))return console.log("Szablon: "+D[8]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(32,36),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[8],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[8],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[8],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[8],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[8])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(o,C*Math.floor(5*Math.random()+1))}function o(){if(!D[9])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[9].includes(c))return console.log("Szablon: "+D[9]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(36,40),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[9],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[9],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[9],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[9],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[9])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(p,C*Math.floor(5*Math.random()+1))}function p(){if(!D[10])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[10].includes(c))return console.log("Szablon: "+D[10]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(40,44),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[10],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[10],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[10],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[10],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[10])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(q,C*Math.floor(5*Math.random()+1))}function q(){if(!D[11])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[11].includes(c))return console.log("Szablon: "+D[11]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(44,48),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[11],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[11],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[11],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[11],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[11])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(r,C*Math.floor(5*Math.random()+1))}function r(){if(!D[12])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[12].includes(c))return console.log("Szablon: "+D[12]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(48,52),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[12],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[12],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[12],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[12],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[12])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(s,C*Math.floor(5*Math.random()+1))}function s(){if(!D[13])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[13].includes(c))return console.log("Szablon: "+D[13]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(52,56),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[13],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[13],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[13],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[13],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[13])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())}),setTimeout(t,C*Math.floor(5*Math.random()+1))}function t(){if(!D[14])return console.log("Brak szablonów fejkowych!");A.forEach(function(a,b){var c=a.getId();if(!E[14].includes(c))return console.log("Szablon: "+D[14]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=F.slice(56,60),Targets.forEach(function(a,b){setTimeout(function(){w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[14],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[14],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[14],type:"attack"}),w.emit(x.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:D[14],type:"attack"}),console.log("4 commands Village: "+c+", Target: "+a+", Preset: "+D[14])},b*B*Math.floor(5*Math.random()+1))})},b*B*Math.random())})}var u=document.getElementById("fakes").value,v=injector.get("modelDataService"),w=injector.get("socketService"),x=injector.get("routeProvider"),y=v.getSelectedCharacter(),z=v.getPresetList(),A=(z.presets,y.getVillageList()),B=5e3,C=15e3,D=[],E=[],F=[];!function(){w.emit(x.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name.indexOf("kareta")>=0&&D.push(a.presets[i].id)}),setTimeout(a,3e3)}()}),s.on("click",function(){function a(a){u.emit(v.CHAR_GET_PROFILE,{character_id:s},function(a){for(i=0;i<a.villages.length;i++)console.log("Id: "+a.villages[i].village_id+", Nazwa: "+a.villages[i].village_name),D.push(a.villages[i].village_id)}),setTimeout(b,3e3)}function b(){B.forEach(function(a){u.emit(v.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name.indexOf("fejk")>=0&&C.push(a.presets[i].assigned_villages)})}),setTimeout(c,1e3)}function c(){if(!B[0])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[0].includes(c))return console.log("Szablon: "+B[0]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(0,6),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[0],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[0])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(d,A*Math.floor(5*Math.random()+1))}function d(){if(!B[1])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[1].includes(c))return console.log("Szablon: "+B[1]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(6,12),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[1],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[1])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(e,A*Math.floor(5*Math.random()+1))}function e(){if(!B[2])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[2].includes(c))return console.log("Szablon: "+B[2]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(12,18),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[2],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[2])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(f,A*Math.floor(5*Math.random()+1))}function f(){if(!B[2])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[3].includes(c))return console.log("Szablon: "+B[3]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(18,24),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[3],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[3])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(g,A*Math.floor(5*Math.random()+1))}function g(){if(!B[4])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[4].includes(c))return console.log("Szablon: "+B[4]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(24,30),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[4],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[4])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(h,A*Math.floor(5*Math.random()+1))}function h(){if(!B[5])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[5].includes(c))return console.log("Szablon: "+B[5]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(30,36),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[5],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[5])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(j,A*Math.floor(5*Math.random()+1))}function j(){if(!B[6])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[6].includes(c))return console.log("Szablon: "+B[6]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(36,42),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[6],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[6])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(k,A*Math.floor(5*Math.random()+1))}function k(){if(!B[7])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[7].includes(c))return console.log("Szablon: "+B[7]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(42,48),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[7],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[7])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(l,A*Math.floor(5*Math.random()+1))}function l(){if(!B[8])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[8].includes(c))return console.log("Szablon: "+B[8]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(48,54),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[8],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[8])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(m,A*Math.floor(5*Math.random()+1))}function m(){if(!B[9])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[9].includes(c))return console.log("Szablon: "+B[9]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(54,60),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[9],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[9])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(n,A*Math.floor(5*Math.random()+1))}function n(){if(!B[10])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[10].includes(c))return console.log("Szablon: "+B[10]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(60,66),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[10],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[10])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(o,A*Math.floor(5*Math.random()+1))}function o(){if(!B[11])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[11].includes(c))return console.log("Szablon: "+B[11]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(66,72),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[11],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[11])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(p,A*Math.floor(5*Math.random()+1))}function p(){if(!B[12])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[12].includes(c))return console.log("Szablon: "+B[12]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(72,78),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[12],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[12])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(q,A*Math.floor(5*Math.random()+1))}function q(){if(!B[13])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[13].includes(c))return console.log("Szablon: "+B[13]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(78,84),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[13],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[13])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())}),setTimeout(r,A*Math.floor(5*Math.random()+1))}function r(){if(!B[14])return console.log("Brak szablonów fejkowych!");y.forEach(function(a,b){var c=a.getId();if(!C[14].includes(c))return console.log("Szablon: "+B[14]+" nie przypisany do tej wioski: "+c);setTimeout(function(){Targets=D.slice(84,90),Targets.forEach(function(a,b){setTimeout(function(){u.emit(v.SEND_PRESET,{start_village:c,target_village:a,army_preset_id:B[14],type:"attack"}),console.log("Village: "+c+", Target: "+a+", Preset: "+B[14])},b*z*Math.floor(5*Math.random()+1))})},b*z*Math.random())})}var s=document.getElementById("fakes1").value,t=injector.get("modelDataService"),u=injector.get("socketService"),v=injector.get("routeProvider"),w=t.getSelectedCharacter(),x=t.getPresetList(),y=(x.presets,w.getVillageList()),z=4e3,A=15e3,B=[],C=[],D=[];!function(){u.emit(v.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name.indexOf("fejk")>=0&&(console.log("Preset: "+a.presets[i].id+", Name: "+a.presets[i].name),B.push(a.presets[i].id))}),setTimeout(a,3e3)}()}),t.on("click",function(){function a(){u.forEach(function(a){f.emit(g.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name.indexOf("fejk")>=0&&v.push(a.presets[i].assigned_villages)})}),setTimeout(b,1e3)}function b(){if(!u[0])return console.log("Brak szablonów fejkowych!");s.forEach(function(a,b){var c=a.getId();if(!v[0].includes(c))return console.log("Szablon: "+u[0]+" nie przypisany do tej wioski: "+c);setTimeout(function(){f.emit(g.SEND_PRESET,{start_village:c,target_village:p,army_preset_id:u[0],type:"attack"}),console.log("Village: "+c+", Target: "+p+", Preset: "+u[0])},b*t*Math.random())}),setTimeout(c,t*Math.floor(5*Math.random()+1))}function c(){if(!u[1])return console.log("Brak szablonów fejkowych!");s.forEach(function(a,b){var c=a.getId();if(!v[1].includes(c))return console.log("Szablon: "+u[1]+" nie przypisany do tej wioski: "+c);setTimeout(function(){f.emit(g.SEND_PRESET,{start_village:a.getId(),target_village:p,army_preset_id:u[1],type:"attack"}),console.log("Village: "+a.getId()+", Target: "+p+", Preset: "+u[1])},b*t*Math.random())}),setTimeout(d,t*Math.floor(5*Math.random()+1))}function d(){if(!u[2])return console.log("Brak szablonów fejkowych!");s.forEach(function(a,b){var c=a.getId();if(!v[2].includes(c))return console.log("Szablon: "+u[2]+" nie przypisany do tej wioski: "+c);setTimeout(function(){f.emit(g.SEND_PRESET,{start_village:a.getId(),target_village:p,army_preset_id:u[2],type:"attack"}),console.log("Village: "+a.getId()+", Target: "+p+", Preset: "+u[2])},b*t*Math.random())}),setTimeout(h,t*Math.floor(5*Math.random()+1))}function h(){if(!u[3])return console.log("Brak szablonów fejkowych!");s.forEach(function(a,b){var c=a.getId();if(!v[3].includes(c))return console.log("Szablon: "+u[3]+" nie przypisany do tej wioski: "+c);setTimeout(function(){f.emit(g.SEND_PRESET,{start_village:a.getId(),target_village:p,army_preset_id:u[3],type:"attack"}),console.log("Village: "+a.getId()+", Target: "+p+", Preset: "+u[3])},b*t*Math.random())}),setTimeout(j,t*Math.floor(5*Math.random()+1))}function j(){if(!u[4])return console.log("Brak szablonów fejkowych!");s.forEach(function(a,b){var c=a.getId();if(!v[4].includes(c))return console.log("Szablon: "+u[4]+" nie przypisany do tej wioski: "+c);setTimeout(function(){f.emit(g.SEND_PRESET,{start_village:a.getId(),target_village:p,army_preset_id:u[4],type:"attack"}),console.log("Village: "+a.getId()+", Target: "+p+", Preset: "+u[4])},b*t*Math.random())}),setTimeout(k,t*Math.floor(5*Math.random()+1))}function k(){if(!u[5])return console.log("Brak szablonów fejkowych!");s.forEach(function(a,b){var c=a.getId();if(!v[5].includes(c))return console.log("Szablon: "+u[5]+" nie przypisany do tej wioski: "+c);setTimeout(function(){f.emit(g.SEND_PRESET,{start_village:a.getId(),target_village:p,army_preset_id:u[5],type:"attack"}),console.log("Village: "+a.getId()+", Target: "+p+", Preset: "+u[5])},b*t*Math.random())}),setTimeout(l,t*Math.floor(5*Math.random()+1))}function l(){if(!u[6])return console.log("Brak szablonów fejkowych!");s.forEach(function(a,b){var c=a.getId();if(!v[6].includes(c))return console.log("Szablon: "+u[6]+" nie przypisany do tej wioski: "+c);setTimeout(function(){f.emit(g.SEND_PRESET,{start_village:a.getId(),target_village:p,army_preset_id:u[6],type:"attack"}),console.log("Village: "+a.getId()+", Target: "+p+", Preset: "+u[6])},b*t*Math.random())}),setTimeout(m,t*Math.floor(5*Math.random()+1))}function m(){if(!u[7])return console.log("Brak szablonów fejkowych!");s.forEach(function(a,b){var c=a.getId();if(!v[7].includes(c))return console.log("Szablon: "+u[7]+" nie przypisany do tej wioski: "+c);setTimeout(function(){f.emit(g.SEND_PRESET,{start_village:a.getId(),target_village:p,army_preset_id:u[7],type:"attack"}),console.log("Village: "+a.getId()+", Target: "+p+", Preset: "+u[7])},b*t*Math.random())}),setTimeout(n,t*Math.floor(5*Math.random()+1))}function n(){if(!u[8])return console.log("Brak szablonów fejkowych!");s.forEach(function(a,b){var c=a.getId();if(!v[8].includes(c))return console.log("Szablon: "+u[8]+" nie przypisany do tej wioski: "+c);setTimeout(function(){f.emit(g.SEND_PRESET,{start_village:a.getId(),target_village:p,army_preset_id:u[8],type:"attack"}),console.log("Village: "+a.getId()+", Target: "+p+", Preset: "+u[8])},b*t*Math.random())}),setTimeout(o,t*Math.floor(5*Math.random()+1))}function o(){if(!u[9])return console.log("Brak szablonów fejkowych!");s.forEach(function(a,b){var c=a.getId();if(!v[9].includes(c))return console.log("Szablon: "+u[9]+" nie przypisany do tej wioski: "+c);setTimeout(function(){f.emit(g.SEND_PRESET,{start_village:a.getId(),target_village:p,army_preset_id:u[9],type:"attack"}),console.log("Village: "+a.getId()+", Target: "+p+", Preset: "+u[9])},b*t*Math.random())})}var p=document.getElementById("fakes2").value,q=e.getSelectedCharacter(),r=e.getPresetList(),s=(r.presets,q.getVillageList()),t=3e3,u=[],v=[];!function(){f.emit(g.GET_PRESETS,{},function(a){for(i=0;i<a.presets.length;i++)a.presets[i].name.indexOf("fejk")>=0&&(console.log("Preset: "+a.presets[i].id+", Name: "+a.presets[i].name),u.push(a.presets[i].id))}),setTimeout(a,3e3)}()}),u.on("click",function(){var a=injector.get("modelDataService"),c=(injector.get("eventTypeProvider"),a.getSelectedCharacter()),d=c.getVillageList(),e=document.getElementById("rename").value,h=3e3;!function(){d.forEach(function(a,b){setTimeout(function(){f.emit(g.VILLAGE_CHANGE_NAME,{village_id:a.getId(),name:e})},b*h)}),j.emitNotif("success",b("faker","rename-done"))}()}),v.on("click",function(){var a=injector.get("modelDataService"),c=(injector.get("eventTypeProvider"),a.getSelectedCharacter()),d=c.getVillageList(),e=document.getElementById("rename1").value,h=3e3;!function(){d.forEach(function(a,b){var c=e+" "+b;setTimeout(function(){f.emit(g.VILLAGE_CHANGE_NAME,{village_id:a.getId(),name:c})},b*h)}),j.emitNotif("success",b("faker","rename-done"))}()})},x=function(){return o=new c("FakeSender",{activeTab:"faker",
template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("faker", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-two-col"><div class="tab" tab="faker"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("faker", "fake") #></a></div></div></div><div class="tab" tab="renamer"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("faker", "rename") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-faker"><p>ID gracza oraz ID wioski znajdziesz na <a href="http://www.tw2-tools.com/" target="_blank"><#= locale("faker", "link") #></a>oraz w minimapie.</p><h5 class="twx-section"><#= locale("faker", "fakesend") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="17%"><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="fakes" value="" autocomplete="off" placeholder="<#= locale("faker", "entry/id") #>"></td><td class="item-name"><#= locale("faker", "text") #></td><td class="item-send"><span class="btn btn-orange addSelected" tooltip="<#= locale("faker", "sending") #>"><#= locale("faker", "send") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("faker", "fakesend1") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="17%"><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="fakes1" value="" autocomplete="off" placeholder="<#= locale("faker", "entry/id") #>"></td><td class="item-name"><#= locale("faker", "text1") #></td><td class="item-send1"><span class="btn btn-orange addSelected" tooltip="<#= locale("faker", "sending1") #>"><#= locale("faker", "send") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("faker", "fakesend2") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="17%"><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="fakes2" value="" autocomplete="off" placeholder="<#= locale("faker", "entry/vid") #>"></td><td class="item-name"><#= locale("faker", "text2") #></td><td class="item-send2"><span class="btn btn-orange addSelected" tooltip="<#= locale("faker", "sending2") #>"><#= locale("faker", "send") #></span></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-renamer"><h5 class="twx-section"><#= locale("faker", "renamev") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col width="30%"><col width="15%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="rename" value="" autocomplete="off" placeholder="<#= locale("faker", "entry/name") #>"></td><td class="item-name"><#= locale("faker", "text3") #></td><td class="item-rename"><span class="btn btn-orange addSelected" tooltip="<#= locale("faker", "renaming") #>"><#= locale("faker", "change") #></span></td></tr></tbody></table></form><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col width="30%"><col width="15%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="rename1" value="" autocomplete="off" placeholder="<#= locale("faker", "entry/name") #>"></td><td class="item-name"><#= locale("faker", "text4") #></td><td class="item-rename1"><span class="btn btn-orange addSelected" tooltip="<#= locale("faker", "renaming") #>"><#= locale("faker", "change") #></span></td></tr></tbody></table></form></div></div></div>',css:"#FakeSender .addForm input{width:100%}#FakeSender .addForm td{text-align:center}#FakeSender .addForm span{height:26px;line-height:26px;padding:0 10px}#FakeSender .entry-name{text-align:left;padding:0 10px}",replaces:{locale:b,version:a.version,types:["village","character"]}}),p=new h(b("faker","title"),{classHover:!1,classBlur:!1,onClick:function(){o.openWindow()}}),q=$(o.$window),r=q.find(".item-send span"),s=q.find(".item-send1 span"),t=q.find(".item-send2 span"),u=q.find(".item-rename span"),v=q.find(".item-rename1 span"),w(),a.interfaceInitialized=!0,o};a.interface=function(){a.interface=x()}}),define("two/farm",["two/locale","two/farm/Village","two/utils","two/eventQueue","helper/math","conf/conf","struct/MapData","helper/mapconvert","helper/time","conf/locale","conf/gameStates","Lockr"],function(a,b,d,h,i,k,m,n,o,p,q,r){var s,t,u,v,w,x,y=!1,z=/(\(|\{|\[|\"|\')[^\)\}\]\"\']+(\)|\}|\]|\"|\')/,A=null,B=[],C=null,D=null,E={},F=null,G=!0,H=!0,I=[],J=null,K=null,L=null,M=[],N=[],O={},P=!1,Q="",R={},S="paused",T=[function(a){if(a.id<0)return!0},function(a){if(a.character_id===w.getId())return!0},function(a){if(a.attack_protection)return!0},function(a){if(a.character_id){if(!N.includes(a.id))return!0}},function(a){return a.points<xa.settings.minPoints||(a.points>xa.settings.maxPoints||void 0)},function(a){var b=C.position,c=i.actualDistance(b,a);return c<xa.settings.minDistance||(c>xa.settings.maxDistance||void 0)}],U=function(a){var b={};for(var c in a)a[c]>0&&(b[c]=a[c]);return b},V=function(){r.set("farm-lastEvents",s)},W=function(){var a=e.getGroupList().getGroups();J=xa.settings.groupIgnore in a&&a[xa.settings.groupIgnore],K=xa.settings.groupInclude in a&&a[xa.settings.groupInclude],L=xa.settings.groupOnly in a&&a[xa.settings.groupOnly]},X=function(){var a=e.getGroupList();M=[],N=[],J&&(M=a.getGroupVillageIds(J.id)),K&&(N=a.getGroupVillageIds(K.id))},Y=function(){var a=w.getVillageList().map(function(a){return new b(a)}).filter(function(a){return!M.includes(a.id)});if(L){var c=e.getGroupList(),d=c.getGroupVillageIds(L.id);a=a.filter(function(a){return d.includes(a.id)})}if(A=a,D=1===A.length,C=A[0],xa.commander.running&&P)for(var f=0;f<a.length;f++){var g=a[f];if(!O[g.id]){P=!1,xa.commander.analyse();break}}xa.triggerEvent("Farm/villagesUpdate")},Z=function(a){var b=function(b){if(I=[],!xa.settings.presetName)return void(a&&a());for(var c in b)if(b.hasOwnProperty(c)){var d=b[c].name,e=d.replace(z,"").trim();e===xa.settings.presetName&&(b[c].cleanName=e,b[c].units=U(b[c].units),I.push(b[c]))}a&&a()};e.getPresetList().isLoaded()?b(e.getPresetList().getPresets()):f.emit(g.GET_PRESETS,{},function(a){xa.triggerEvent("Farm/presets/loaded"),b(a.presets)})},$=function(){var a=[],b=function(a){var b=ka(a.target_village_id);return!!b&&(ja(b),!0)},d=function(a){oa(a.id,function(a){var b=a.ReportAttack,c=b.attVillageId,d=b.defVillageId;if(R.hasOwnProperty(c)||(R[c]=[]),R[c].includes(d))return!1;R[c].push(d),xa.triggerEvent("Farm/priorityTargetAdded",[{id:d,name:b.defVillageName,x:b.defVillageX,y:b.defVillageY}])})},e=function(){a.forEach(function(a){d(a)}),a=[]},f=function(c,e){if(!xa.commander.running||"attack"!==e.type)return!1;xa.settings.ignoreOnLoss&&1!==e.result&&b(e),xa.settings.priorityTargets&&"full"===e.haul&&(l.isTemplateOpen("report")?a.push(e):d(e))},g=function(a,b){"report"===b&&e()};c.$on(j.REPORT_NEW,f),c.$on(j.WINDOW_CLOSED,g)},_=function(){var a=function(a,b){var c=xa.settings.remoteId;if(1!==b.participants.length||b.title!==c)return!1;switch(b.message.content.trim().toLowerCase()){case"on":case"start":case"init":case"begin":xa.restart(),pa(b.message_id,qa()),xa.triggerEvent("Farm/remoteCommand",["on"]);break;case"off":case"stop":case"pause":case"end":xa.tempDisableNotifs(function(){xa.pause()}),pa(b.message_id,qa()),xa.triggerEvent("Farm/remoteCommand",["off"]);break;case"status":case"current":pa(b.message_id,qa()),xa.triggerEvent("Farm/remoteCommand",["status"])}return!1};c.$on(j.MESSAGE_SENT,a)},aa=function(){var a=function(){if(Z(),xa.triggerEvent("Farm/presets/change"),xa.commander.running){!!I.length?xa.getGlobalWaiting()&&(la(),xa.restart()):(xa.triggerEvent("Farm/noPreset"),xa.pause())}};c.$on(j.ARMY_PRESET_UPDATE,a),c.$on(j.ARMY_PRESET_DELETED,a)},ba=function(){var a=function(){W(),X(),xa.triggerEvent("Farm/groupsChanged")},b=function(a,b){if(Y(),!K)return!1;K.id===b.group_id&&(E={})};c.$on(j.GROUPS_UPDATED,a),c.$on(j.GROUPS_CREATED,a),c.$on(j.GROUPS_DESTROYED,a),c.$on(j.GROUPS_VILLAGE_LINKED,b),c.$on(j.GROUPS_VILLAGE_UNLINKED,b)},ca=function(){var a=function(a){if(delete O[a],P){if(P=!1,xa.settings.stepCycle)return!1;xa.commander.running&&(ha(a),xa.commander.analyse())}},b=function(b,c){var d=c.village_id,e=O[d]||!1;if("units"===e||"commands"===e)return a(d),!1},d=function(b,c){var d=c.villageId;if("fullStorage"===(O[d]||!1))a(d);else{var e=ga(d);xa.isFullStorage(e)&&xa.setWaitingVillage(d,"fullStorage")}};c.$on(j.VILLAGE_ARMY_CHANGED,b),c.$on(j.VILLAGE_RESOURCES_CHANGED,d)},da=function(){var a=function(){xa.commander.running&&setTimeout(function(){xa.restart()},5e3)};m.setRequestFn(function(a){f.emit(g.MAP_GETVILLAGES,a)}),c.$on(j.RECONNECT,a)},ea=function(){h.bind("Farm/sendCommand",function(){fa(),S="attacking"}),h.bind("Farm/noPreset",function(){S="paused"}),h.bind("Farm/noUnits",function(){S="noUnits"}),h.bind("Farm/noUnitsNoCommands",function(){S="noUnitsNoCommands"}),h.bind("Farm/start",function(){S="attacking"}),h.bind("Farm/pause",function(){S="paused"}),h.bind("Farm/loadingTargets/start",function(){S="loadingTargets"}),h.bind("Farm/loadingTargets/end",function(){S="analyseTargets"}),h.bind("Farm/commandLimit/single",function(){S="commandLimit"}),h.bind("Farm/commandLimit/multi",function(){S="noVillages"}),h.bind("Farm/stepCycle/end",function(){S="stepCycle/end",H&&xa.settings.stepCycleNotifs&&d.emitNotif("error",a("farm","events.stepCycle/end"))}),h.bind("Farm/stepCycle/end/noVillages",function(){S="stepCycle/end/noVillages",H&&d.emitNotif("error",a("farm","events.stepCycle/end/noVillages"))}),h.bind("Farm/stepCycle/next",function(){if(S="stepCycle/next",H&&xa.settings.stepCycleNotifs){var b=o.gameTime()+xa.cycle.getInterval();d.emitNotif("success",a("farm","events.stepCycle/next",{time:d.formatDate(b)}))}}),h.bind("Farm/fullStorage",function(){S="fullStorage"})},fa=function(){u=o.gameTime(),r.set("farm-lastAttack",u)},ga=function(a){var b=A.indexOf(a);return-1!==b&&A[b]},ha=function(a){var b=ga(a);return!!b&&(C=b,!0)},ia=function(a,b){f.emit(g.ASSIGN_PRESETS,{village_id:C.id,preset_ids:a},b)},ja=function(a){if(!J)return!1;f.emit(g.GROUPS_LINK_VILLAGE,{group_id:J.id,village_id:a.id},function(){xa.triggerEvent("Farm/ignoredVillage",[a])})},ka=function(a){for(var b in E)for(var c=E[b],d=0;d<c.length;d++){var e=c[d];if(e.id===a)return e}return!1},la=function(){O={}},ma=function(){setInterval(function(){if(xa.commander.running){var a=3e5;xa.settings.stepCycle&&xa.cycle.intervalEnabled()&&(a+=xa.cycle.getInterval()+6e4);o.gameTime()-u>a&&xa.tempDisableNotifs(function(){xa.pause(),xa.start(!0)})}},6e4)},na=function(){setInterval(function(){E={}},3e5)},oa=function(a,b){f.emit(g.REPORT_GET,{id:a},b)},pa=function(a,b){f.emit(g.MESSAGE_REPLY,{message_id:a,message:b})},qa=function(){var b=a("common","status"),c=a("farm","events.selectedVillage"),e=a("farm","events.lastAttack"),f={};if("stepCycle/next"===S){var g=o.gameTime()+xa.cycle.getInterval();f.time=d.formatDate(g)}var h=a("farm","events."+S,f),i=d.genVillageLabel(C),j=d.formatDate(u),k=C.id,l=[];return l.push("[b]",b,":[/b] ",h,"[br]"),l.push("[b]",c,":[/b] "),l.push("[village=",k,"]",i,"[/village][br]"),l.push("[b]",e,":[/b] ",j),l.join("")},ra=function(){var a=o.gameTime();if(xa.settings.stepCycle&&xa.cycle.intervalEnabled()){if(a>t+xa.cycle.getInterval()+6e4)return!0}else if(a>t+18e5)return!0;return!1},sa=function(a,b,c,d,e,f){if(m.hasTownDataInChunk(a,b)){var g=m.loadTownData(a,b,c,d,e);return f(g)}xa.triggerEvent("Farm/loadingTargets/start");var h=n.scaledGridCoordinates(a,b,c,d,e),i=h.length,j=0;m.loadTownDataAsync(a,b,c,d,function(){if(++j===i){xa.triggerEvent("Farm/loadingTargets/end");var g=m.loadTownData(a,b,c,d,e);f(g)}})},ta=function(a){for(var b=a.length,c=[];b--;){var d=a[b],e=d.data;for(var f in e){var g=e[f];for(var h in g){var i=g[h];c.push(i)}}}return c},ua=function(a){return a.filter(function(a){return T.every(function(b){return!b(a)})})},va=function(a){for(var b,c=[],d=C.position,e=0;e<a.length;e++)b=a[e],c.push({x:b.x,y:b.y,distance:i.actualDistance(d,b),id:b.id,name:b.name,pid:b.character_id});return c},wa=function(){var a=r.get("farm-settings",{},!0);for(var b in xa.settingsMap)xa.settings[b]=a.hasOwnProperty(b)?a[b]:xa.settingsMap[b].default},xa={};return xa.version="4.0.1",xa.settings={},xa.settingsMap={maxDistance:{default:10,updates:["targets"],inputType:"text",min:0,max:50},minDistance:{default:0,updates:["targets"],inputType:"text",min:0,max:50},maxTravelTime:{default:"01:00:00",updates:[],inputType:"text",pattern:/\d{1,2}\:\d{2}\:\d{2}/},randomBase:{default:3,updates:[],inputType:"text",min:0,max:9999},presetName:{default:"",updates:["preset"],inputType:"select"},groupIgnore:{default:"0",updates:["groups"],inputType:"select"},groupInclude:{default:"0",updates:["groups","targets"],inputType:"select"},groupOnly:{default:"0",updates:["groups","villages","targets"],inputType:"select"},minPoints:{default:0,updates:["targets"],inputType:"text",min:0,max:13e3},maxPoints:{default:12500,updates:["targets"],inputType:"text",min:0,max:13e3},eventsLimit:{default:20,updates:["events"],inputType:"text",min:0,max:150},ignoreOnLoss:{default:!0,updates:[],inputType:"checkbox"},priorityTargets:{default:!0,updates:[],inputType:"checkbox"},eventAttack:{default:!0,updates:["events"],inputType:"checkbox"},eventVillageChange:{default:!0,updates:["events"],inputType:"checkbox"},eventPriorityAdd:{default:!0,updates:["events"],inputType:"checkbox"},eventIgnoredVillage:{default:!0,updates:["events"],inputType:"checkbox"},remoteId:{default:"remote",updates:[],inputType:"text"},hotkeySwitch:{default:"shift+z",updates:[],inputType:"text"},hotkeyWindow:{default:"z",updates:[],inputType:"text"},stepCycle:{default:!1,updates:["villages"],inputType:"checkbox"},stepCycleNotifs:{default:!1,updates:[],inputType:"checkbox"},stepCycleInterval:{default:"00:00:00",updates:[],inputType:"text",pattern:/\d{1,2}\:\d{2}\:\d{2}/},commandsPerVillage:{default:48,updates:["waitingVillages"],inputType:"text",min:1,max:50},ignoreFullStorage:{default:!0,updates:["fullStorage"],inputType:"checkbox"}},xa.init=function(){a.create("farm",{en:{langName:"Polski",title:"Farmer","events.attacking":"Atakuje.","events.commandLimit":"Limit 50 ataków osiągnięty, oczekiwanie na powrót wojsk.","events.lastAttack":"Ostatni atak","events.nextVillage":"Przejście do wioski %{village}","events.noPreset":"Brak dostępnych szablonów.","events.noSelectedVillage":"Brak dostępnych wiosek.","events.noUnits":"Brak dostępnych jednostek w wiosce, oczekiwanie na powrót wojsk.","events.noUnitsNoCommands":"Brak jednostek w wioskach lub powracających wojsk.","events.noVillages":"Brak dostępnych wiosek, oczekiwanie na powrót wojsk.","events.nothingYet":"Odpoczywam...","events.presetFirst":"Wybierz najpierw szablon!","events.selectedVillage":"Wybrana wioska","events.sendCommand":"%{origin} atakuje %{target}","events.loadingTargets":"Ładowanie celów...","events.checkingTargets":"Sprawdzanie celów...","events.restartingCommands":"Restartowanie poleceń...","events.ignoredVillage":"Cel %{target} pominięty! (caused loss)","events.priorityTargetAdded":"%{target} dodany do priorytetowych.","events.analyseTargets":"Analizowanie celów.","events.stepCycle/restart":"Restartowanie cyklu poleceń...","events.stepCycle/end":"Lista wiosek zakończona, oczekiwanie na następny cykl.","events.stepCycle/end/noVillages":"Brak wiosek do rozpoczęcia cyklu.","events.stepCycle/next":"Lista wiosek się skończyła, następny cykl: %{time}.","events.stepCycle/next/noVillages":"Brak wioski do rozpoczęcia cyklu, następny cykl: %{time}.","events.fullStorage":"Magazyn w wiosce jest pełny","general.disabled":"— Wyłączony —","general.paused":"Farmer zatrzymany","general.started":"Farmer uruchomiony","settings.docs":"Miłego farmienia!","settings.settings":"Ustawienia","settings.presets":"Szablony","settings.groupIgnore":"Pomijaj wioski z grupy","settings.groupInclude":"Dodaj wioski z grupy","settings.groupOnly":"Tylko wioski z grupy","settings.randomBase":"Domyślny odstęp (sek)","settings.commandsPerVillage":"Limit poleceń","settings.priorityTargets":"Priorytyzuj cele","settings.ignoreOnLoss":"Pomijaj cele jeśli straty","settings.ignoreFullStorage":"Pomijaj wioski jeśli magazyn pełny","settings.stepCycle/header":"Cykl Farmienia","settings.stepCycle":"Włącz Cykl farmienia","settings.stepCycle/interval":"Odstęp między cyklami","settings.stepCycle/notifs":"Powiadomienia","settings.targetFilters":"Filtry celów","settings.minDistance":"Minimalna odległość","settings.maxDistance":"Maksymalna odległość","settings.minPoints":"Minimalna liczba punktów","settings.maxPoints":"Maksymalna liczba punktów","settings.maxTravelTime":"Maksymalny czas podróży","settings.eventsLimit":"Limit logów","settings.eventAttack":"Logi ataków","settings.eventVillageChange":"Logi zmiany wiosek","settings.eventPriorityAdd":"Logi celów priorytetowych","settings.eventIgnoredVillage":"Logi pominiętych wiosek","settings.remote":"Sterowanie Zdalne za pomocą wiadomości PW","settings.hotkeySwitch":"Skrót Start/Pauza","settings.hotkeyWindow":"Skrót okna Farmera","settings.saved":"Ustawienia zapisane!","settingError.minDistance":"Odległość celu musi być większa niż %{min}.","settingError.maxDistance":"Odległość celu nie może przekraczać %{max}.","settingError.maxTravelTime":"Maksymalny czas podróży hh:mm:ss.","settingError.randomBase":"Domyślny odstęp musi być pomiędzy %{min} and %{max}.","settingError.minPoints":"Minimalna liczba punktów celu to %{min}.","settingError.maxPoints":"Maksymalna liczba punktów celu to %{max}.","settingError.eventsLimit":"Liczba zdarzeń musi być wartością między %{min} i %{max}.","settingError.stepCycle/interval":"Format odstępu między cyklami powinien mieć postać hh:mm:ss.","settingError.commandsPerVillage":"Limit poleceń na wioskę musi być wartością między %{min} and %{max}."},pl:{langName:"Polski",title:"Farmer","events.attacking":"Atakuje.","events.commandLimit":"Limit 50 ataków osiągnięty, oczekiwanie na powrót wojsk.","events.lastAttack":"Ostatni atak","events.nextVillage":"Przejście do wioski %{village}","events.noPreset":"Brak dostępnych szablonów.","events.noSelectedVillage":"Brak dostępnych wiosek.","events.noUnits":"Brak dostępnych jednostek w wiosce, oczekiwanie na powrót wojsk.","events.noUnitsNoCommands":"Brak jednostek w wioskach lub powracających wojsk.","events.noVillages":"Brak dostępnych wiosek, oczekiwanie na powrót wojsk.","events.nothingYet":"Odpoczywam...","events.presetFirst":"Wybierz najpierw szablon!","events.selectedVillage":"Wybrana wioska","events.sendCommand":"%{origin} atakuje %{target}","events.loadingTargets":"Ładowanie celów...","events.checkingTargets":"Sprawdzanie celów...","events.restartingCommands":"Restartowanie poleceń...","events.ignoredVillage":"Cel %{target} pominięty! (caused loss)","events.priorityTargetAdded":"%{target} dodany do priorytetowych.","events.analyseTargets":"Analizowanie celów.","events.stepCycle/restart":"Restartowanie cyklu poleceń...","events.stepCycle/end":"Lista wiosek zakończona, oczekiwanie na następny cykl.","events.stepCycle/end/noVillages":"Brak wiosek do rozpoczęcia cyklu.","events.stepCycle/next":"Lista wiosek się skończyła, następny cykl: %{time}.","events.stepCycle/next/noVillages":"Brak wioski do rozpoczęcia cyklu, następny cykl: %{time}.","events.fullStorage":"Magazyn w wiosce jest pełny","general.disabled":"— Wyłączony —","general.paused":"Farmer zatrzymany","general.started":"Farmer uruchomiony","settings.docs":"Miłego farmienia!","settings.settings":"Ustawienia","settings.presets":"Szablony","settings.groupIgnore":"Pomijaj wioski z grupy","settings.groupInclude":"Dodaj wioski z grupy","settings.groupOnly":"Tylko wioski z grupy","settings.randomBase":"Domyślny odstęp (sek)","settings.commandsPerVillage":"Limit poleceń","settings.priorityTargets":"Priorytyzuj cele","settings.ignoreOnLoss":"Pomijaj cele jeśli straty","settings.ignoreFullStorage":"Pomijaj wioski jeśli magazyn pełny","settings.stepCycle/header":"Cykl Farmienia","settings.stepCycle":"Włącz Cykl farmienia","settings.stepCycle/interval":"Odstęp między cyklami","settings.stepCycle/notifs":"Powiadomienia","settings.targetFilters":"Filtry celów","settings.minDistance":"Minimalna odległość","settings.maxDistance":"Maksymalna odległość","settings.minPoints":"Minimalna liczba punktów","settings.maxPoints":"Maksymalna liczba punktów","settings.maxTravelTime":"Maksymalny czas podróży","settings.eventsLimit":"Limit logów","settings.eventAttack":"Logi ataków","settings.eventVillageChange":"Logi zmiany wiosek","settings.eventPriorityAdd":"Logi celów priorytetowych","settings.eventIgnoredVillage":"Logi pominiętych wiosek","settings.remote":"Sterowanie Zdalne za pomocą wiadomości PW","settings.hotkeySwitch":"Skrót Start/Pauza","settings.hotkeyWindow":"Skrót okna Farmera","settings.saved":"Ustawienia zapisane!","settingError.minDistance":"Odległość celu musi być większa niż %{min}.","settingError.maxDistance":"Odległość celu nie może przekraczać %{max}.","settingError.maxTravelTime":"Maksymalny czas podróży hh:mm:ss.","settingError.randomBase":"Domyślny odstęp musi być pomiędzy %{min} and %{max}.","settingError.minPoints":"Minimalna liczba punktów celu to %{min}.","settingError.maxPoints":"Maksymalna liczba punktów celu to %{max}.","settingError.eventsLimit":"Liczba zdarzeń musi być wartością między %{min} i %{max}.","settingError.stepCycle/interval":"Format odstępu między cyklami powinien mieć postać hh:mm:ss.","settingError.commandsPerVillage":"Limit poleceń na wioskę musi być wartością między %{min} and %{max}."},pt:{langName:"Português",title:"FarmOverflow","events.attacking":"Atacando.","events.commandLimit":"Limite de 50 ataques atingido, aguardando retorno.","events.lastAttack":"Último ataque","events.nextVillage":"Alternando para a aldeia %{village}","events.noPreset":"Nenhuma predefinição disponível.","events.noSelectedVillage":"Nenhuma aldeia disponível.","events.noUnits":"Sem unidades na aldeia, aguardando ataques retornarem.","events.noUnitsNoCommands":"Nenhuma aldeia tem tropas nem ataques retornando.","events.noVillages":"Nenhuma aldeia disponível, aguardando ataques retornarem.","events.nothingYet":"Nada por aqui ainda...","events.presetFirst":"Configure uma predefinição primeiro!","events.selectedVillage":"Aldeia selecionada","events.sendCommand":"%{origin} ataca %{target}","events.loadingTargets":"Carregando alvos...","events.checkingTargets":"Checando alvos...","events.restartingCommands":"Reiniciando comandos...","events.ignoredVillage":"Alvo %{target} ignorado! (causou baixas)","events.priorityTargetAdded":"%{target} adicionado as prioridades.","events.analyseTargets":"Analisando alvos.","events.stepCycle/restart":"Reiniciando o ciclo de comandos..","events.stepCycle/end":"A lista de aldeias acabou, esperando próxima execução.","events.stepCycle/end/noVillages":"Nenhuma aldeia disponível para iniciar o ciclo.","events.stepCycle/next":"A lista de aldeias acabou, próximo ciclo: %{time}.","events.stepCycle/next/noVillages":"Nenhuma aldeia disponível para iniciar o ciclo, próximo ciclo: %{time}.","events.fullStorage":"O armazém da aldeia está cheio.","general.disabled":"— Desativado —","general.paused":"FarmOverflow pausado.","general.started":"FarmOverflow iniciado.","settings.docs":"Para entender as configurações, leia a documentação","settings.settings":"Configurações","settings.presets":"Predefinições","settings.groupIgnore":"Grupo Ignorar","settings.groupInclude":"Grupo Incluir","settings.groupOnly":"Grupo Apenas","settings.randomBase":"Intervalo Aleatório","settings.commandsPerVillage":"Limite de Comandos","settings.priorityTargets":"Priorizar Alvos","settings.ignoreOnLoss":"Ignorar Alvos Hostis","settings.ignoreFullStorage":"Ignorar Armazéns Lotados","settings.stepCycle/header":"Configurações de Ciclos","settings.stepCycle":"Ativar Ciclo","settings.stepCycle/interval":"Intervalo","settings.stepCycle/notifs":"Notificações","settings.targetFilters":"Filtro de Alvos","settings.minDistance":"Distância mínima","settings.maxDistance":"Distância máxima","settings.minPoints":"Pontuação mínima","settings.maxPoints":"Pontuação máxima","settings.maxTravelTime":"Tempo máximo de viagem","settings.eventsLimit":"Limite de registros","settings.eventAttack":"Registrar ataques","settings.eventVillageChange":"Registrar troca de aldeias","settings.eventPriorityAdd":"Registrar alvos prioritarios","settings.eventIgnoredVillage":"Registrar alvos ignorados","settings.remote":"Controle Remoto - Mensagem","settings.hotkeySwitch":"Atalho para inicar/pausar","settings.hotkeyWindow":"Atalho para abrir janela","settings.saved":"Configurações salvas!","settingError.minDistance":"A distância deve ser um valor entre %{min} e %{max}.","settingError.maxDistance":"A distância deve ser um valor entre %{min} e %{max}.","settingError.maxTravelTime":"O formato do tempo máximo de viagem deve ser hh:mm:ss.","settingError.randomBase":"O intervalo entre cada ataque deve ser um valor entre %{min} e %{max}.","settingError.minPoints":"A pontuação do alvo deve ser entre %{min} e %{max}.","settingError.maxPoints":"A pontuação do alvo deve ser entre %{min} e %{max}.","settingError.eventsLimit":"O número de eventos deve ser entre %{min} e %{max}.","settingError.stepCycle/interval":"O formato do intervalo entre ataques deve ser hh:mm:ss.","settingError.commandsPerVillage":"A limite de comandos por aldeia deve ser um valor entre %{min} e %{max}."},us:{langName:"English",title:"FarmOverflow","events.attacking":"Attacking.","events.commandLimit":"Limit of 50 attacks reached, waiting return.","events.lastAttack":"Last attack","events.nextVillage":"Changing to village %{village}","events.noPreset":"No presets avaliable.","events.noSelectedVillage":"No villages avaliable.","events.noUnits":"No units avaliable in village, waiting attacks return.","events.noUnitsNoCommands":"No villages has units or commands returning.","events.noVillages":"No villages avaliable, waiting attacks return.","events.nothingYet":"Nothing available yet...","events.presetFirst":"Set a preset first!","events.selectedVillage":"Village selected","events.sendCommand":"%{origin} attack %{target}","events.loadingTargets":"Loading targets...","events.checkingTargets":"Checking targets...","events.restartingCommands":"Restarting commands...","events.ignoredVillage":"Target %{target} ignored! (caused loss)","events.priorityTargetAdded":"%{target} added to priorities.","events.analyseTargets":"Analysing targets.","events.stepCycle/restart":"Restarting the cycle of commands..","events.stepCycle/end":"The list of villages ended, waiting for the next run.","events.stepCycle/end/noVillages":"No villages available to start the cycle.","events.stepCycle/next":"The list of villages is over, next cycle: %{time}.","events.stepCycle/next/noVillages":"No village available to start the cycle, next cycle: %{time}.","events.fullStorage":"The storage of the village is full.","general.disabled":"— Disabled —","general.paused":"FarmOverflow paused.","general.started":"FarmOverflow started.","settings.docs":"To understand the settings, read the documentation","settings.settings":"Settings","settings.presets":"Presets","settings.groupIgnore":"Ignore Group","settings.groupInclude":"Include Group","settings.groupOnly":"Only Group","settings.randomBase":"Random Interval","settings.commandsPerVillage":"Commands Limit","settings.priorityTargets":"Prioritize Targets","settings.ignoreOnLoss":"Ignore on Loss","settings.ignoreFullStorage":"Skip Full Storage","settings.stepCycle/header":"Step Cycle Settings","settings.stepCycle":"Enable Step Cycle","settings.stepCycle/interval":"Interval","settings.stepCycle/notifs":"Notifications","settings.targetFilters":"Target Filters","settings.minDistance":"Minimum distance","settings.maxDistance":"Maximum distance","settings.minPoints":"Minimum points","settings.maxPoints":"Maximum points","settings.maxTravelTime":"Maximum travel time","settings.eventsLimit":"Limit of logs","settings.eventAttack":"Log attacks","settings.eventVillageChange":"Log village changes","settings.eventPriorityAdd":"Log priority targets","settings.eventIgnoredVillage":"Log ignored villages","settings.remote":"Remote Control Message Subject","settings.hotkeySwitch":"Start/pause hotkey","settings.hotkeyWindow":"Open window hotkey","settings.saved":"Settings saved!","settingError.minDistance":"The target distance must be between %{min} and %{max}.","settingError.maxDistance":"The target distance must be between %{min} and %{max}.","settingError.maxTravelTime":"Maximum travel time format must be hh:mm:ss.","settingError.randomBase":"The random interval base must be between %{min} and %{max}.","settingError.minPoints":"The target pontuation must be a value between %{min} and %{max}.","settingError.maxPoints":"The target pontuation must be a value between %{min} and %{max}.","settingError.eventsLimit":"The amount of events must be a value between %{min} and %{max}.","settingError.stepCycle/interval":"Format of interval between cycles must be hh:mm:ss.","settingError.commandsPerVillage":"The limit of commands per village must be a value between %{min} and %{max}."}},"pl"),y=!0,xa.commander=xa.createCommander(),w=e.getSelectedCharacter(),x=e.getGameState(),s=r.get("farm-lastEvents",[],!0),t=r.get("farm-lastActivity",o.gameTime(),!0),u=r.get("farm-lastAttack",-1,!0),v=r.get("farm-indexes",{},!0),wa(),W(),X(),Y(),Z(),$(),_(),ba(),aa(),ca(),da(),ea(),ma(),na()},xa.start=function(b){if(!I.length)return!b&&H&&d.emitNotif("error",a("farm","events.presetFirst")),!1;if(!C)return!b&&H&&d.emitNotif("error",a("farm","events.noSelectedVillage")),!1;if(!x.getGameState(q.ALL_VILLAGES_READY)){var e=c.$on(j.GAME_STATE_ALL_VILLAGES_READY,function(){e(),xa.start()});return!1}return ra()&&(R={},v={}),xa.settings.stepCycle?xa.cycle.startStep(b):xa.cycle.startContinuous(),xa.updateActivity(),!0},xa.pause=function(){return xa.breakCommander(),xa.triggerEvent("Farm/pause"),clearTimeout(xa.cycle.getTimeoutId()),H&&d.emitNotif("success",a("common","paused")),!0},xa.breakCommander=function(){clearTimeout(xa.commander.timeoutId),xa.commander.running=!1},xa.restart=function(){xa.tempDisableNotifs(function(){xa.pause(),xa.start()})},xa.switch=function(){xa.commander.running?xa.pause():xa.start()},xa.updateActivity=function(){t=o.gameTime(),r.set("farm-lastActivity",t)},xa.updateSettings=function(a){var b,c,d,e={};for(var f in a)if(b=xa.settingsMap[f],c=a[f],b&&c!==xa.settings[f]){if(b.hasOwnProperty("pattern")){if(!b.pattern.test(c))return xa.triggerEvent("Farm/settingError",[f]),!1}else if(b.hasOwnProperty("min")&&(c<b.min||c>b.max))return xa.triggerEvent("Farm/settingError",[f,{min:b.min,max:b.max}]),!1;b.updates.forEach(function(a){e[a]=!0}),xa.settings[f]=c}if(r.set("farm-settings",xa.settings),e.groups&&(W(),X()),e.villages&&Y(),e.preset&&(Z(),la()),e.targets&&(E={}),e.events&&xa.triggerEvent("Farm/resetEvents"),e.fullStorage)for(d in O)"fullStorage"===O[d]&&delete O[d];if(e.waitingVillages)for(d in O)"commands"===O[d]&&delete O[d];return xa.commander.running&&xa.tempDisableEvents(function(){xa.restart()}),xa.triggerEvent("Farm/settingsChange",[e]),!0},xa.nextTarget=function(a){var b=C.id;if(!E[b])return xa.commander.analyse(),!1;var c=E[b];if(xa.settings.priorityTargets&&R[b])for(var d;d=R[b].shift();)if(!M.includes(d))for(var e=0;e<c.length;e++)if(c[e].id===d)return F=c[e],!0;var f=v[b],g=!1;for(a||(f=++v[b]);f<c.length;f++){var h=c[f];{
if(!M.includes(h.id)){F=h,g=!0;break}xa.triggerEvent("Farm/ignoredTarget",[h])}}return g?v[b]=f:(F=c[0],v[b]=0),r.set("farm-indexes",v),!0},xa.hasTarget=function(){var a=C.id,b=v[a],c=E[a];return!!c.length&&((void 0===b||b>c.length)&&(v[a]=b=0),!!c[b])},xa.getTargets=function(a){var b=C.position,c=C.id;if(c in E)return a();var d=k.MAP_CHUNK_SIZE,e=b.x-d,f=b.y-d;sa(e,f,2*d,2*d,d,function(b){var d=ta(b),e=ua(d),f=va(e);if(0===f.length)return xa.nextVillage()?xa.getTargets(a):xa.triggerEvent("Farm/noTargets"),!1;E[c]=f.sort(function(a,b){return a.distance-b.distance}),v.hasOwnProperty(c)?v[c]>E[c].length&&(v[c]=0,r.set("farm-indexes",v)):(v[c]=0,r.set("farm-indexes",v)),a()})},xa.nextVillage=function(){if(D)return!1;if(xa.settings.stepCycle)return xa.cycle.nextVillage();var a=B.shift();if(a){return xa.getFreeVillages().some(function(b){return b.id===a.id})?(C=a,xa.triggerEvent("Farm/nextVillage",[C]),xa.updateActivity(),!0):xa.nextVillage()}return B=xa.getFreeVillages(),B.length?xa.nextVillage():(D?xa.triggerEvent("Farm/noUnits"):xa.triggerEvent("Farm/noVillages"),!1)},xa.checkPresets=function(a){if(!I.length)return xa.pause(),xa.triggerEvent("Farm/noPreset"),!1;var b=C.id,c=e.getPresetList().getPresetsByVillageId(b),d=!1,f=[];if(I.forEach(function(a){c.hasOwnProperty(a.id)||(d=!0,f.push(a.id))}),d){for(var g in c)f.push(g);ia(f,a)}else a()},xa.targetsLoaded=function(){return E.hasOwnProperty(C.id)},xa.hasVillage=function(){return!!C},xa.isWaiting=function(){return O.hasOwnProperty(C.id)},xa.isIgnored=function(){return M.includes(C.id)},xa.isAllWaiting=function(){for(var a=0;a<A.length;a++){var b=A[a].id;if(!O.hasOwnProperty(b))return!1}return!0},xa.setLastEvents=function(a){s=a,V()},xa.getLastEvents=function(){return s},xa.getSelectedVillage=function(){return C},xa.isSingleVillage=function(){return D},xa.getSelectedTarget=function(){return F},xa.getNotifsEnabled=function(){return H},xa.getEventsEnabled=function(){return G},xa.getSelectedPresets=function(){return I},xa.setWaitingVillage=function(a,b){O[a]=b||!0},xa.getWaitingVillages=function(){return O},xa.setGlobalWaiting=function(){P=!0},xa.getGlobalWaiting=function(){return P},xa.getLastError=function(){return Q},xa.setLastError=function(a){Q=a},xa.isInitialized=function(){return y},xa.getLastAttack=function(){return u},xa.createCommander=function(){return new(require("two/farm/Commander"))},xa.setSelectedVillage=function(a){C=a},xa.setLeftVillages=function(a){B=a},xa.isFullStorage=function(a){if(a=a||C,a.original.isReady()){var b=a.original.getResources(),c=b.getComputed(),d=b.getMaxStorage();return["wood","clay","iron"].every(function(a){return c[a].currentStock===d})}return!1},xa.getFreeVillages=function(){return A.filter(function(a){return!O[a.id]&&(!xa.settings.ignoreFullStorage||!xa.isFullStorage(a)||(O[a.id]="fullStorage",!1))})},xa.tempDisableNotifs=function(a){H=!1,a(),H=!0},xa.tempDisableEvents=function(a){G=!1,a(),G=!0},xa.triggerEvent=function(a,b){G&&h.trigger(a,b)},xa}),define("two/farm/analytics",["two/farm","two/eventQueue","Lockr"],function(a,b,c){a.analytics=function(){ga("create","UA-92130203-4","auto","FarmOverflow");var a=e.getPlayer(),c=a.getSelectedCharacter(),d=[];d.push(c.getName()),d.push(c.getId()),d.push(c.getWorldId()),b.bind("Farm/sendCommand",function(){ga("FarmOverflow.send","event","commands","attack",d.join("~"))})}}),define("two/farm/Commander",["two/farm","two/utils","helper/math"],function(a,b,d){function e(){return this.preventNextCommand=!1,this.timeoutId=null,this.running=!1,this}var h=!1;return e.prototype.analyse=function(){var b=this;if(b.running){if(!a.getSelectedPresets().length)return a.pause(),void a.triggerEvent("Farm/noPreset");if(!a.hasVillage())return a.triggerEvent("Farm/noVillageSelected");var c=a.getSelectedVillage();if(!c.loaded())return void c.load(function(){b.analyse()});if(a.isWaiting()||a.isIgnored())return void(a.nextVillage()?b.analyse():a.triggerEvent(a.getLastError()));if(a.settings.ignoreFullStorage&&a.isFullStorage())return void(a.nextVillage()?b.analyse():b.handleError("fullStorage"));if(!a.targetsLoaded())return a.getTargets(function(){b.analyse()});if(!a.hasTarget())return void(a.nextVillage()?b.analyse():a.triggerEvent("Farm/noTargets"));a.nextTarget(!0),a.checkPresets(function(){if(c.countCommands()>=a.settings.commandsPerVillage)return b.handleError("commandLimit");var d=b.getPreset();if(d.error)return b.handleError(d.error);b.getPresetNext(d),b.send(d)})}},e.prototype.handleError=function(b){a.setLastError(b||this.preventNextCommand),this.preventNextCommand=!1;var c=a.getSelectedVillage(),d=c.id;switch(a.getLastError()){case"timeLimit":a.nextTarget(),this.analyse();break;case"noUnits":if(a.triggerEvent("Farm/noUnits",[c]),a.setWaitingVillage(d,"units"),a.isSingleVillage())return void(0===c.countCommands()?a.triggerEvent("Farm/noUnitsNoCommands"):(a.setGlobalWaiting(),a.settings.stepCycle&&a.cycle.endStep()));a.nextVillage()?this.analyse():a.setGlobalWaiting();break;case"commandLimit":a.setWaitingVillage(d,"commands");var e=a.isSingleVillage(),f=a.isAllWaiting();if(e||f){var g=e?"Farm/commandLimit/single":"Farm/commandLimit/multi";if(a.triggerEvent(g,[c]),a.setGlobalWaiting(),a.settings.stepCycle)return a.cycle.endStep()}a.nextVillage(),this.analyse();break;case"fullStorage":if(a.setWaitingVillage(d,"fullStorage"),a.isSingleVillage()){if(a.setGlobalWaiting(),a.settings.stepCycle)return a.cycle.endStep();a.triggerEvent("Farm/fullStorage")}}},e.prototype.getPreset=function(b){for(var c=!1,d=b||a.getSelectedVillage().units,e=a.getSelectedPresets(),f=0;f<e.length;f++){var g=e[f],h=!0;for(var i in g.units)d[i].in_town<g.units[i]&&(h=!1);if(h){if(this.checkPresetTime(g))return g;c=!0}else;}return{error:c?"timeLimit":"noUnits"}},e.prototype.getPresetNext=function(b){var c=angular.copy(a.getSelectedVillage().units),d=b.units;for(var e in d)c[e].in_town-=d[e];var f=this.getPreset(c);f.error&&(this.preventNextCommand=f.error)},e.prototype.checkPresetTime=function(c){var e=a.getSelectedTarget(),f=n.calculateTravelTime(c,{barbarian:!e.pid,officers:!1}),g=a.getSelectedVillage().position,h={x:e.x,y:e.y},i=d.actualDistance(g,h),j=n.getTravelTimeForDistance(c,f,i,"attack");return b.time2seconds(a.settings.maxTravelTime)>j},e.prototype.send=function(c,d){var e=Date.now();if(h&&e-h<100)return!1;if(h=e,!this.running)return!1;var i,j,k=this,l=a.getSelectedVillage();return k.simulate(),i=k.onCommandError(function(){j(),l.updateCommands(function(){k.analyse()})}),j=k.onCommandSend(function(){i(),a.nextTarget();var c;c=b.randomSeconds(a.settings.randomBase),c=100+1e3*c,k.timeoutId=setTimeout(function(){if(k.preventNextCommand)return k.handleError();k.analyse()},c),a.updateActivity()}),f.emit(g.SEND_PRESET,{start_village:l.id,target_village:a.getSelectedTarget().id,army_preset_id:c.id,type:"attack"}),!0},e.prototype.onCommandSend=function(b){var d=a.getSelectedVillage(),e=angular.copy(d.units),f=c.$on(j.VILLAGE_UNIT_INFO,function(c,g){if(d.id!==g.village_id)return!1;var h=d.units;if(angular.equals(e,h))return!1;a.triggerEvent("Farm/sendCommand",[d,a.getSelectedTarget()]),f(),b()});return f},e.prototype.onCommandError=function(b){var d=c.$on(j.MESSAGE_ERROR,function(c,e){return!(!e.cause||!e.code)&&("Command/sendPreset"===e.cause&&("Command/attackLimitExceeded"===e.code&&(a.triggerEvent("Farm/sendCommandError",[e.code]),d(),void b())))});return d},e.prototype.simulate=function(b){!function(){f.emit(g.GET_ATTACKING_FACTOR,{target_id:a.getSelectedTarget().id})}(),b&&b()},e}),define("two/farm/cycle",["two/farm","two/locale","two/utils","two/eventQueue"],function(a,b,c,d){var e=[],f=null,g={};g.intervalEnabled=function(){return!!g.getInterval()},g.startContinuous=function(){if(a.commander=a.createCommander(),a.commander.running=!0,a.triggerEvent("Farm/start"),a.getNotifsEnabled()&&c.emitNotif("success",b("farm","general.started")),!a.getFreeVillages().length)return void(a.isSingleVillage()?a.isFullStorage()?a.triggerEvent("Farm/fullStorage"):a.triggerEvent("Farm/noUnits"):a.triggerEvent("Farm/noVillages"));a.setLeftVillages(a.getFreeVillages()),a.commander.analyse()},g.startStep=function(f){a.commander=a.createCommander(),a.commander.running=!0,a.tempDisableNotifs(function(){a.triggerEvent("Farm/start")});var h=a.getFreeVillages();if(0===h.length)return void(g.intervalEnabled()?(a.triggerEvent("Farm/stepCycle/next/noVillages"),g.setNextCycle()):(a.triggerEvent("Farm/stepCycle/next/noVillages"),a.tempDisableNotifs(function(){a.pause()})));f?d.bind("Farm/stepCycle/restart"):a.getNotifsEnabled()&&c.emitNotif("success",b("farm","general.started")),e=h,a.commander.analyse()},g.endStep=function(){return g.intervalEnabled()?(a.triggerEvent("Farm/stepCycle/next"),a.breakCommander(),g.setNextCycle()):(a.triggerEvent("Farm/stepCycle/end"),a.tempDisableNotifs(function(){a.pause()})),!1},g.setNextCycle=function(){var a=g.getInterval();f=setTimeout(function(){g.startStep(!0)},a)},g.nextVillage=function(){var b=e.shift();return b?a.getFreeVillages().some(function(a){return a.id===b.id})?(a.setSelectedVillage(b),a.triggerEvent("Farm/nextVillage",[b]),!0):g.nextVillage():g.endStep()},g.getInterval=function(){var b=a.settings.stepCycleInterval,c=!1;return!!b&&(b=b.split(/\:/g).map(function(a){return isNaN(c)&&(c=!0),parseInt(a,10)}),!c&&(b=1e3*b[0]*60*60+1e3*b[1]*60+1e3*b[2]))},g.getTimeoutId=function(){return f},a.cycle=g}),define("two/farm/Village",["models/CommandListModel","models/CommandModel","conf/village"],function(a,b,c){function d(a){this.original=a,this.id=a.data.villageId,this.x=a.data.x,this.y=a.data.y,this.name=a.data.name,this.units=a.unitInfo.units,this.position=a.getPosition()}return d.prototype.countCommands=function(){return this.original.getCommandListModel().getOutgoingCommands(!0).length},d.prototype.updateCommands=function(c){var d=this;f.emit(g.GET_OWN_COMMANDS,{village_id:d.id},function(e){for(var f=new a([],d.id),g=0;g<e.commands.length;g++){var h=new b(e.commands[g]);f.add(h)}d.original.setCommandListModel(f),c()})},d.prototype.commandsLoaded=function(){return this.original.isReady(c.OWN_COMMANDS)},d.prototype.unitsLoaded=function(){return this.original.isReady(c.UNITS)},d.prototype.loaded=function(){return!!this.original.isReady()&&(!!this.original.isInitialized()&&(this.commandsLoaded()&&this.unitsLoaded()))},d.prototype.load=function(a){var b=this;return o.ensureVillageDataLoaded(this.id,function(){b.original.isInitialized()||o.initializeVillage(b.original),a()})},d}),require(["two/ready","two/farm","two/farm/ui","two/farm/analytics","two/farm/cycle"],function(a,b){if(b.isInitialized())return!1;a(function(){b.init(),b.interface(),b.analytics()})}),define("two/farm/ui",["two/farm","two/locale","two/ui","two/ui/buttonLink","two/FrontButton","two/utils","two/eventQueue","helper/time","ejs"],function(a,b,c,d,f,g,h,i,j){function k(){return w=e.getGroupList().getGroups(),v=b("farm","general.disabled"),l=new c("FarmOverflow",{activeTab:"settings",template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2 class="ng-binding"><#= locale("farm", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-two-col"><div class="tab" tab="settings"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "settings") #></a></div></div></div><div class="tab" tab="log"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "logs") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-settings"><p class="center"><#= locale("farm", "settings.docs") #> <a href="https://gitlab.com/twoverflow/farmoverflow/wikis/Documentation" target="_blank"><#= locale("common", "here") #></a>.</p><form class="settings"><h5 class="twx-section collapse"><#= locale("farm", "settings.settings") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="40%"><col></colgroup><tbody><tr><td><span class="icon-34x34-preset"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.presets") #></span></td><td><select data-setting="presetName" class="preset"></select></td></tr><tr><td><span class="icon-20x20-queue-indicator-short"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.groupIgnore") #></span></td><td><select data-setting="groupIgnore" class="ignore"></select></td></tr><tr><td><span class="icon-20x20-queue-indicator-long"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.groupInclude") #></span></td><td><select data-setting="groupInclude" class="include"></select></td></tr><tr><td><span class="icon-20x20-favourite"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.groupOnly") #></span></td><td><select data-setting="groupOnly" class="only"></select></td></tr><tr><td><span class="ff-cell-fix"><#= locale("farm", "settings.randomBase") #></span></td><td><input data-setting="randomBase" type="number" class="textfield-border" min="0" required></td></tr><tr><td><span class="ff-cell-fix"><#= locale("farm", "settings.commandsPerVillage") #></span></td><td><input data-setting="commandsPerVillage" type="number" class="textfield-border" min="0" max="50" required></td></tr><tr><td><span class="icon-34x34-name_changed"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.priorityTargets") #></span></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-priorityTargets"><input id="settings-priorityTargets" type="checkbox" data-setting="priorityTargets"></label></td></tr><tr><td><span class="ff-cell-fix"><#- locale("farm", "settings.ignoreOnLoss") #></span></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-ignoreOnLoss"><input id="settings-ignoreOnLoss" type="checkbox" data-setting="ignoreOnLoss"></label></td></tr><tr><td><span class="ff-cell-fix"><#- locale("farm", "settings.ignoreFullStorage") #></span></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-ignoreFullStorage"><input id="settings-ignoreFullStorage" type="checkbox" data-setting="ignoreFullStorage"></label></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("farm", "settings.stepCycle/header") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="40%"><col></colgroup><tbody><tr><td><span class="ff-cell-fix"><#= locale("farm", "settings.stepCycle") #></span></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-stepCycle"><input id="settings-stepCycle" type="checkbox" data-setting="stepCycle"></label></td></tr><tr><td><span class="ff-cell-fix"><#= locale("farm", "settings.stepCycle/interval") #></span></td><td><input data-setting="stepCycleInterval" type="text" class="textfield-border" placeholder="00:00:00"></td></tr><tr><td><span class="ff-cell-fix"><#= locale("farm", "settings.stepCycle/notifs") #></span></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-stepCycle/notifs"><input id="settings-stepCycle/notifs" type="checkbox" data-setting="stepCycleNotifs"></label></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("farm", "settings.targetFilters") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="40%"><col></colgroup><tbody><tr><td><span class="icon-26x26-double-arrow"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.minDistance") #></span></td><td><input data-setting="minDistance" type="number" class="textfield-border" min="0" max="60" required></td></tr><tr><td><span class="icon-26x26-double-arrow"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.maxDistance") #></span></td><td><input data-setting="maxDistance" type="number" class="textfield-border" min="1" max="60" required></td></tr><tr><td><span class="icon-34x34-points-per-village"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.minPoints") #></span></td><td><input data-setting="minPoints" type="number" class="textfield-border" required></td></tr><tr><td><span class="icon-34x34-points-per-village"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.maxPoints") #></span></td><td><input data-setting="maxPoints" type="number" class="textfield-border" required></td></tr><tr><td><span class="icon-26x26-time"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.maxTravelTime") #></span></td><td><input data-setting="maxTravelTime" type="text" class="textfield-border" pattern="\\d{1,2}:\\d{1,2}:\\d{1,2}" required></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("common", "logs") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="40%"><col></colgroup><tbody><tr><td><span class="icon-26x26-info"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.eventsLimit") #></span></td><td><input data-setting="eventsLimit" type="number" class="textfield-border" min="1" required></td></tr><tr><td><#= locale("farm", "settings.eventAttack") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-eventAttack"><input id="settings-eventAttack" type="checkbox" data-setting="eventAttack"></label></td></tr><tr><td><#= locale("farm", "settings.eventVillageChange") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-eventVillageChange"><input id="settings-eventVillageChange" type="checkbox" data-setting="eventVillageChange"></label></td></tr><tr><td><#= locale("farm", "settings.eventPriorityAdd") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-eventPriorityAdd"><input id="settings-eventPriorityAdd" type="checkbox" data-setting="eventPriorityAdd"></label></td></tr><tr><td><#= locale("farm", "settings.eventIgnoredVillage") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-eventIgnoredVillage"><input id="settings-eventIgnoredVillage" type="checkbox" data-setting="eventIgnoredVillage"></label></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("common", "others") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="40%"><col></colgroup><tbody><tr><td><span class="icon-26x26-message-misc"></span> <span class="ff-cell-fix"><#= locale("farm", "settings.remote") #></span></td><td><input data-setting="remoteId" type="text" class="textfield-border" min="3" max="45"></td></tr><tr><td><#= locale("farm", "settings.hotkeySwitch") #></td><td><input data-setting="hotkeySwitch" type="text" class="textfield-border"></td></tr><tr><td><#= locale("farm", "settings.hotkeyWindow") #></td><td><input data-setting="hotkeyWindow" type="text" class="textfield-border"></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-log"><div class="screen-tribe-news rich-text"><h5 class="twx-section collapse"><#= locale("common", "status") #></h5><table class="tbl-border-light tbl-news tbl-big-header"><colgroup><col width="135px"><col width="*"></colgroup><tbody><tr class="list-item"><td class="status" colspan="2" class="cell-center"><#= locale("common", "paused") #></td></tr><tr class="reduced"><td><#= locale("farm", "events.selectedVillage") #></td><td class="selected"></td></tr><tr class="reduced"><td><#= locale("farm", "events.lastAttack") #></td><td class="last"><#= locale("common", "none") #></td></tr></tbody></table><h5 class="twx-section collapse"><#= locale("common", "logs") #></h5><table class="tbl-border-light tbl-news tbl-big-header"><colgroup><col width="76px"><col></colgroup><tbody class="events"><tr class="reduced nothing"><td colspan="2"><div><span><#= locale("farm", "events.nothingYet") #></span></div></td></tr></tbody></table></div></div></div><footer class="win-foot"><ul class="list-btn list-center"><li class="twOverflow-button-settings"><a class="btn-orange btn-border save"><#= locale("common", "save") #></a></li><li><a class="btn-green btn-border start"><#= locale("common", "start") #></a></li></ul></footer></div>',replaces:{version:a.version,author:{name:"Rafael Mafra",email:"mafrazzrafael@gmail.com",url:"https://github.com/mafrazz"},locale:b},css:'#FarmOverflow input[type="text"],#FarmOverflow input[type="number"],#FarmOverflow select{color:#000;min-width:70%}#FarmOverflow .info a{font-weight:bold;color:#544231}#FarmOverflow .settings .custom-select{width:70%}#FarmOverflow .settings .helper{font-weight:bold;vertical-align:-1px;font-family:helvetica;color:rgba(0,0,0,0.3)}#FarmOverflow .settings .helper:hover{color:#000}#FarmOverflow .settings [class^="icon-"]{display:inline;margin:0 9px 0 0}#FarmOverflow .settings .icon-34x34-preset,#FarmOverflow .settings .icon-26x26-time,#FarmOverflow .settings .icon-26x26-info,#FarmOverflow .settings .icon-26x26-double-arrow{zoom:.6}#FarmOverflow .settings .icon-34x34-preset:before,#FarmOverflow .settings .icon-26x26-time:before,#FarmOverflow .settings .icon-26x26-info:before,#FarmOverflow .settings .icon-26x26-double-arrow:before{-moz-transform:scale(.6)}#FarmOverflow .settings .icon-20x20-queue-indicator-short,#FarmOverflow .settings .icon-20x20-queue-indicator-long,#FarmOverflow .settings .icon-20x20-favourite{vertical-align:0;margin:0 5px 0 0}#FarmOverflow .settings .icon-34x34-preset,#FarmOverflow .settings .icon-26x26-time{vertical-align:3px}#FarmOverflow .settings .icon-26x26-double-arrow{vertical-align:4px}#FarmOverflow .settings .icon-26x26-info{vertical-align:5px}#FarmOverflow .settings .icon-34x34-points-per-village,#FarmOverflow .settings .icon-34x34-name_changed{vertical-align:6px;zoom:.5}#FarmOverflow .settings .icon-34x34-points-per-village:before,#FarmOverflow .settings .icon-34x34-name_changed:before{-moz-transform:scale(.5)}#FarmOverflow .settings .icon-26x26-message-misc{vertical-align:1px}#FarmOverflow .settings .icon-34x34-general{zoom:.5}#FarmOverflow .settings .icon-34x34-general:before{-moz-transform:scale(.5)}#FarmOverflow .settings .icon-26x26-time-spy{zoom:.7}#FarmOverflow .settings .icon-26x26-time-spy:before{-moz-transform:scale(.7)}#FarmOverflow .settings td{text-align:center}#FarmOverflow .events tr{height:30px}#FarmOverflow .events tr td.tribe-event-time{white-space:nowrap}'}),n=new f(b("farm","title"),{classHover:!1,classBlur:!1,onClick:function(){l.openWindow()}}),o=$(l.$window),p=o.find(".events"),q=o.find(".last"),r=o.find(".status"),s=o.find(".start"),t=o.find(".settings"),u=o.find(".preset"),x={groupIgnore:o.find(".ignore"),groupInclude:o.find(".include"),groupOnly:o.find(".only")},h.bind("Farm/sendCommand",function(c,d){if(r.html(b("farm","events.attacking")),I(i.gameTime()),!a.settings.eventAttack)return!1;F({links:{origin:{type:"village",name:g.genVillageLabel(c),id:c.id},target:{type:"village",name:g.genVillageLabel(d),id:d.id}},icon:"attack-small",type:"sendCommand"})}),h.bind("Farm/nextVillage",function(b){if(H(),!a.settings.eventVillageChange)return!1;F({links:{village:{type:"village",name:g.genVillageLabel(b),id:b.id}},icon:"village",type:"nextVillage"})}),h.bind("Farm/ignoredVillage",function(b){if(!a.settings.eventIgnoredVillage)return!1;F({links:{target:{type:"village",name:g.genVillageLabel(b),id:b.id}},icon:"check-negative",type:"ignoredVillage"})}),h.bind("Farm/priorityTargetAdded",function(b){if(!a.settings.eventPriorityAdd)return!1;F({links:{target:{type:"village",name:g.genVillageLabel(b),id:b.id}},icon:"parallel-recruiting",type:"priorityTargetAdded"})}),h.bind("Farm/noPreset",function(){F({icon:"info",type:"noPreset"}),r.html(b("common","paused"))}),h.bind("Farm/noUnits",function(){a.isSingleVillage()&&r.html(b("farm","events.noUnits"))}),h.bind("Farm/noUnitsNoCommands",function(){r.html(b("farm","events.noUnitsNoCommands"))}),h.bind("Farm/start",function(){r.html(b("farm","events.attacking"))}),h.bind("Farm/pause",function(){r.html(b("common","paused"))}),h.bind("Farm/noVillages",function(){r.html(b("farm","events.noVillages"))}),h.bind("Farm/stepCycle/end",function(){r.html(b("farm","events.stepCycle/nnd"))}),h.bind("Farm/stepCycle/next",function(){var c=i.gameTime()+a.cycle.getInterval();r.html(b("farm","events.stepCycle/next",{time:g.formatDate(c)}))}),h.bind("Farm/stepCycle/next/noVillages",function(){var c=i.gameTime()+a.cycle.getInterval();r.html(b("farm","events.stepCycle/next/noVillages",{time:g.formatDate(c)}))}),h.bind("Farm/villagesUpdate",function(){H()}),h.bind("Farm/loadingTargets/start",function(){r.html(b("farm","events.loadingTargets"))}),h.bind("Farm/loadingTargets/end",function(){r.html(b("farm","events.analyseTargets"))}),h.bind("Farm/attacking",function(){r.html(b("farm","events.attacking"))}),h.bind("Farm/commandLimit/single",function(){r.html(b("farm","events.commandLimit"))}),h.bind("Farm/commandLimit/multi",function(){r.html(b("farm","events.noVillages"))}),h.bind("Farm/resetEvents",function(){y=0,D()}),h.bind("Farm/groupsChanged",function(){J()}),h.bind("Farm/presets/loaded",function(){K()}),h.bind("Farm/presets/change",function(){K()}),h.bind("Farm/start",function(){s.html(b("common","pause")),s.removeClass("btn-green").addClass("btn-red"),n.$elem.removeClass("btn-green").addClass("btn-red")}),h.bind("Farm/pause",function(){s.html(b("common","start")),s.removeClass("btn-red").addClass("btn-green"),n.$elem.removeClass("btn-red").addClass("btn-green")}),h.bind("Farm/settingError",function(a,c){var d="settingError."+a;g.emitNotif("error",b("farm",d,c))}),h.bind("Farm/fullStorage",function(){r.html(b("farm","events.fullStorage"))}),e.getPresetList().isLoaded()&&K(),C(),E(),J(),H(),I(),D(),l}var l,n,o,p,q,r,s,t,u,v,w,x,y=1,z=/(\(|\{|\[|\"|\')[^\)\}\]\"\']+(\)|\}|\]|\"|\')/,A=function(a){o.find("[data-setting]").forEach(function(b){var c=b.dataset.setting;a(b,c)})},B=function(){var c={};return A(function(b,d){switch(a.settingsMap[d].inputType){case"text":c[d]="number"===b.type?parseInt(b.value,10):b.value;break;case"select":c[d]=b.dataset.value;break;case"checkbox":c[d]=b.checked}}),!!a.updateSettings(c)&&(g.emitNotif("success",b("farm","settings.saved")),!0)},C=function(){A(function(b,c){switch(a.settingsMap[c].inputType){case"text":b.value=a.settings[c];break;case"select":b.dataset.value=a.settings[c];break;case"checkbox":a.settings[c]&&(b.checked=!0,b.parentElement.classList.add("icon-26x26-checkbox-checked"))}})},D=function(){var b=a.getLastEvents();b.length>0&&p.find(".nothing").remove(),b.some(function(b){return y>=a.settings.eventsLimit||!(!a.settings.eventAttack&&"sendCommand"===b.type)&&(!(!a.settings.eventVillageChange&&"nextVillage"===b.type)&&(!(!a.settings.eventPriorityAdd&&"priorityTargetAdded"===b.type)&&(!(!a.settings.eventIgnoredVillage&&"ignoredVillage"===b.type)&&void F(b,!0))))})},E=function(){m.add(a.settings.hotkeySwitch,function(){a.switch()}),m.add(a.settings.hotkeyWindow,function(){l.openWindow()}),s.on("click",function(){a.switch()}),o.find(".save").on("click",function(a){B()})},F=function(b,c){p.find(".nothing").remove(),y>=a.settings.eventsLimit&&p.find("tr:last-child").remove();var d=a.getLastEvents();d.length>=a.settings.eventsLimit&&d.pop(),G(p,b,c),y++,c||(b.timestamp=i.gameTime(),d.unshift(b),a.setLastEvents(d))},G=function(a,c,e){var f={},h={},k=c.links,m=c.timestamp||i.gameTime(),n=document.createElement("tr");if(k){for(var o in k)f[o]=d(k[o].type,k[o].name,k[o].id),h[o]='<a id="'+f[o].id+'"></a>';c.content=b("farm","events."+c.type,h)}var p=g.formatDate(m),q=g.formatDate(m,"HH:mm:ss");if(n.innerHTML=j.render('<td class="tribe-event-time" tooltip="<#= longDate #>"><#= shortDate #></td><td class="tribe-event-detail"><span class="icon-bg-black icon-26x26-<#= icon #>"></span><div class="text-tribe-news"><span><#- content #></span></div></td>',{longDate:p,shortDate:q,icon:c.icon,content:c.content}),k)for(var o in f)n.querySelector("#"+f[o].id).replaceWith(f[o].elem);a[e?"append":"prepend"](n),l.isVisible("log")&&l.recalcScrollbar(),l.setTooltips()},H=function(){var c=o.find(".selected"),e=a.getSelectedVillage();if(!e)return c.html(b("common","none"));var f=d("village",g.genVillageLabel(e),e.id);c.html(""),c.append(f.elem)},I=function(b){if(!b&&-1===(b=a.getLastAttack()))return!1;q.html(g.formatDate(b))},J=function(){for(var b in x){var c=x[b].find(".custom-select-handler").html(""),d=x[b].find(".custom-select-data").html("");L(d,"0");for(var e in w){var f=w[e].name,g=a.settings[b];""===g||"0"===g?(c.html(v),x[b][0].dataset.name=v,x[b][0].dataset.value=""):g==e&&(c.html(f),x[b][0].dataset.name=f,x[b][0].dataset.value=e),M(d,{name:f,value:e,icon:w[e].icon}),x[b].append(d)}a.settings[b]||c.html(v)}},K=function(){var b={},c=e.getPresetList().presets,d=!1,f=a.settings.presetName,g=u.find(".custom-select-handler").html(""),h=u.find(".custom-select-data").html("");L(h);for(var i in c){var j=c[i].name.replace(z,"").trim();j in b||j&&(""===f?(g.html(v),u[0].dataset.name=v,u[0].dataset.value=""):f===j&&(g.html(j),u[0].dataset.name=j,u[0].dataset.value=j,d=!0),M(h,{name:j,value:j,icon:"size-26x26 icon-26x26-preset"}),b[j]=!0)}d||(g.html(v),u[0].dataset.name=v,u[0].dataset.value="")},L=function(a,b){var c=document.createElement("span");c.dataset.name=v,c.dataset.value=b||"",a.append(c)},M=function(a,b){var c=document.createElement("span");for(var d in b)c.dataset[d]=b[d];a.append(c)};a.interface=function(){a.interface=k()}}),define("two/ui",["two/utils","queues/EventQueue","helper/dom","ejs"],function(b,d,e,f){function g(a,b){var d=this;return i.push(d),d.windowId=a,d.activeTab=b.activeTab,d.settings=b,m(a,b.css),d.buildWindow(),d.bindTabs(),d.setCollapse(),d.setTooltips(),d.setCheckboxes(),d.setSelects(),d.$window.querySelector(".twOverflow-close").addEventListener("click",function(){d.closeWindow()}),c.$on(j.WINDOW_CLOSED,function(b,c,e){(e||c===a)&&d.closeWindow()}),d}var h=!1,i=[],k=function(){i.forEach(function(a){a.closeWindow()})},m=function(a,b){var c=document.createElement("style");c.type="text/css",c.id="twOverflow-style-"+a,c.innerHTML=b,document.querySelector("head").appendChild(c)},n=function(d){var e=!1,f=document.createElement("span"),g=document.createElement("span"),h=document.createElement("span"),i=document.createElement("span"),k=function(a){var c=a.srcElement||a.target;b.matchesElem(c,".custom-select")||l()},l=function(){c.$broadcast(j.SELECT_HIDE,"custom-select"),$(a).off("click",k),$(".win-main").off("mousewheel",l),e=!1,o()},m=function(a,b){g.innerHTML=a.name,f.dataset.name=a.name,f.dataset.value=a.value,$(f).trigger("selectSelected"),l()},n=function(){h.classList.remove("icon-26x26-arrow-down"),h.classList.add("icon-26x26-arrow-up")},o=function(){h.classList.remove("icon-26x26-arrow-up"),h.classList.add("icon-26x26-arrow-down")};d.querySelectorAll("option").forEach(function(a){var b=document.createElement("span");b.dataset.name=a.innerText,b.dataset.value=a.value,i.appendChild(b),a.hasAttribute("selected")&&(g.innerHTML=a.innerText,f.dataset.name=a.innerText,f.dataset.value=a.value)});for(var p in d.dataset)f.dataset[p]=d.dataset[p];f.className="custom-select "+d.className,h.className="custom-select-button icon-26x26-arrow-down",g.className="custom-select-handler",i.className="custom-select-data",f.appendChild(g),f.appendChild(h),f.appendChild(i),f.addEventListener("click",function(){if(e)return l();var b=i.querySelectorAll("span"),d=[],h={};b.forEach(function(a){var b={name:a.dataset.name,value:a.dataset.value};a.dataset.icon&&(b.leftIcon=isNaN(a.dataset.icon)?a.dataset.icon:parseInt(a.dataset.icon,10)),a.dataset.name===g.innerHTML&&(h=b),d.push(b)}),c.$broadcast(j.SELECT_SHOW,"custom-select",d,h,m,f,!0),e=!0,n(),$(".win-main").on("mousewheel",l),$(a).on("click",k)}),d.replaceWith(f)};return g.prototype.buildWindow=function(){this.$wrapper=$("#wrapper"),this.$window=document.createElement("section"),this.$window.id=this.windowId,this.$window.className="twOverflow-window twx-window screen left",this.$window.style.visibility="hidden",
this.$window.innerHTML=f.render(this.settings.template,this.settings.replaces),this.$wrapper.append(this.$window),this.$scrollbar=jsScrollbar(this.$window.querySelector(".win-main"))},g.prototype.openWindow=function(){l.closeAll(),k(),this.$window.style.visibility="visible",this.$wrapper.addClass("window-open"),this.resizeWindowFrame()},g.prototype.resizeWindowFrame=function(){d.trigger(d.types.RESIZE,{instant:!0,right:!0})},g.prototype.closeWindow=function(){"visible"===this.$window.style.visibility&&(this.settings.onClose&&this.settings.onClose(),this.$window.style.visibility="hidden",this.$wrapper.removeClass("window-open"),this.resizeWindowFrame())},g.prototype.toggleWindow=function(a){this.$window.style.visibility=a,this.$wrapper.toggleClass("window-open"),this.resizeWindowFrame()},g.prototype.tabsState=function(a,b){var c=this;if(a===b)return!1;c.$tabs.forEach(function(d){var e=d.getAttribute("tab");if(e!==a&&e!==b)return!1;c.$window.querySelector(".twOverflow-content-"+e),c.$window.querySelectorAll(".twOverflow-button-"+e),d.querySelector(".tab-inner > div"),d.querySelector("a");e===a?c.disableTab(e,d):e===b&&c.enableTab(e,d)})},g.prototype.bindTabs=function(){var a=this;a.$tabs=a.$window.querySelectorAll(".tab"),a.$tabs.forEach(function(b){var c=b.getAttribute("tab");b.addEventListener("click",function(){a.tabsState(a.activeTab,c),a.activeTab=c,a.settings.onTabClick&&a.settings.onTabClick(c)}),a.activeTab===c?a.enableTab(c,b):a.disableTab(c,b),a.recalcScrollbar()})},g.prototype.enableTab=function(a,b){var c=this.$window.querySelector(".twOverflow-content-"+a),d=this.$window.querySelectorAll(".twOverflow-button-"+a),e=b.querySelector(".tab-inner > div"),f=b.querySelector("a");c.style.display="",b.classList.add("tab-active"),e.classList.add("box-border-light"),f.classList.remove("btn-icon","btn-orange"),d.length&&d.forEach(function(a){a.style.display=""}),this.$scrollbar.content=c,this.recalcScrollbar()},g.prototype.disableTab=function(a,b){var c=this.$window.querySelector(".twOverflow-content-"+a),d=this.$window.querySelectorAll(".twOverflow-button-"+a),e=b.querySelector(".tab-inner > div"),f=b.querySelector("a");c.style.display="none",b.classList.remove("tab-active"),e.classList.remove("box-border-light"),f.classList.add("btn-icon","btn-orange"),d.length&&d.forEach(function(a){a.style.display="none"})},g.prototype.destroy=function(){document.querySelector("#twOverflow-style-"+this.windowId).remove(),this.$window.remove()},g.prototype.setCollapse=function(){var a=this;a.$window.querySelectorAll(".twx-section.collapse").forEach(function(b){var c=!b.classList.contains("hidden-content"),d=document.createElement("span");d.className="min-max-btn";var e=document.createElement("a");e.className="btn-orange icon-26x26-"+(c?"minus":"plus"),c||(b.nextSibling.style.display="none"),d.appendChild(e),b.appendChild(d),d.addEventListener("click",function(){"none"===b.nextSibling.style.display?(b.nextSibling.style.display="",e.className=e.className.replace("plus","minus"),c=!0):(b.nextSibling.style.display="none",e.className=e.className.replace("minus","plus"),c=!1),a.recalcScrollbar()})})},g.prototype.setTooltips=function(){var a=this,b=$("#tooltip");b.find(".tooltip-content-wrapper");a.$window.querySelectorAll("[tooltip]").forEach(function(a){var b=a.getAttribute("tooltip");a.removeAttribute("tooltip"),a.addEventListener("mouseenter",function(a){c.$broadcast(j.TOOLTIP_SHOW,"twoverflow-tooltip",b,!0,a)}),a.addEventListener("mouseleave",function(){c.$broadcast(j.TOOLTIP_HIDE,"twoverflow-tooltip")})})},g.prototype.setCheckboxes=function(){this.$window.querySelectorAll("input[type=checkbox]").forEach(function(a){a.addEventListener("click",function(){$(a).parent().toggleClass("icon-26x26-checkbox-checked")})})},g.prototype.isVisible=function(a){var b="visible"===this.$window.style.visibility;return b&&a&&(b=this.activeTab===a),b},g.prototype.recalcScrollbar=function(){this.$scrollbar.recalc()},g.prototype.setSelects=function(){this.$window.querySelectorAll("select").forEach(function(a){n(a)})},g.init=function(){h=!0,m("own",'#twOverflow-leftbar{position:relative;top:0;left:0;margin-bottom:7px}#twOverflow-leftbar .button{white-space:nowrap;position:relative;top:-17px;left:0;min-width:70px;height:24px;padding:0 3px}#twOverflow-leftbar .label,#twOverflow-leftbar .quickview{margin:5px 0;font-size:12px}#twOverflow-leftbar .quickview{display:none}#wrapper.window-open #twOverflow-leftbar .button{left:720px}.twOverflow-window{visibility:hidden}.twOverflow-window h3{color:#000}.twOverflow-window p{color:#000;margin:7px 0;padding:0 40px}.twOverflow-window p span.sample{font-weight:bold;font-style:italic}.twOverflow-window p span.brazil{color:green;font-weight:bold}.twOverflow-window p .opensource{background:url(https://i.imgur.com/KFHdWXN.png);width:15px;height:15px;display:inline-block;vertical-align:-2px}.twOverflow-window input::placeholder{color:#6d563c}.twOverflow-window input[type="text"],.twOverflow-window input[type="number"],.twOverflow-window select{color:black;text-align:center}.twOverflow-window select{width:100%;padding:0 0 0 5px;font-size:14px;border:1px solid #976543;height:28px;text-decoration:none;text-align-last:center;border-radius:2px;font-weight:600;font-family:"Trebuchet MS";color:white;box-shadow:0 0 0 1px #421f09 inset,0 0 0 2px #976543 inset,0 0 0 3px #421f09 inset,0 -1px 1px 4px rgba(215,181,144,0.7) inset,0 0 1px 5px rgba(0,0,0,0.4) inset;-webkit-appearance:none;-moz-appearance:none;outline:none;background-image:url(https://i.imgur.com/SlaWRrX.png),url(https://i.imgur.com/e2qKrmX.png);background-repeat:no-repeat,repeat;background-position:293px -3px,top left;background-color:#b28e68}.twOverflow-window .custom-select{position:relative;display:inline-block}.twOverflow-window .custom-select .custom-select-button{height:21px;position:absolute;right:1px;top:1px}.twOverflow-window .custom-select .custom-select-handler{text-align:center;line-height:25px;height:25px;display:block;background:url("data:image/png;base64,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") top left #ceab84;box-shadow:inset 0 0 0 1px #533a1f,inset 0 0 0 2px #dcba94,0 0 2px rgba(0,0,0,0.6);padding:0 10px}.twOverflow-window .custom-select .custom-select-data{display:none}.twOverflow-window .center{text-align:center}.twOverflow-window .reduced{height:30px}@keyframes expand-button{100%{width:250px}}@keyframes contract-button{0%{width:250px}}.expand-button{animation:expand-button .1s forwards}.contract-button{animation:contract-button .1s forwards}.icon-26x26-preset{background-image:url(data:image/png;base64,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);margin-top:2px;margin-left:5px}')},g.isInitialized=function(){return h},g}),define("two/ui/autoComplete",["two/utils","two/locale","helper/dom","struct/MapData"],function(b,d,e,h){var i="two-autocomplete",k=!1,l=function(a){var c=a.srcElement||a.target;b.matchesElem(c,".custom-select")||n.hide()},m=function(a){n.hide(),c.$broadcast(j.SELECT_HIDE,i),c.$broadcast(j.SELECT_SELECTED,i,a)},n={};return n.hide=function(){c.$broadcast(j.SELECT_HIDE,i),$(a).off("click",l),$(".win-main").off("mousewheel",n.hide),k=!1},n.show=function(b,e,f,g){return i=f,!!b.length&&(c.$broadcast(j.SELECT_SHOW,i,b,null,m,e,!0,0,d("common","no-results")),k||(k=!0,$(".win-main").on("mousewheel",n.hide),$(a).on("click",l)),!0)},n.search=function(a,c,d,e){var i=[];if(b.isValidCoords(a)){var j=a.split("|").map(function(a){return parseInt(a,10)});return void h.loadTownDataAsync(j[0],j[1],1,1,function(a){a&&i.push({id:a.id,type:"village",name:b.genVillageLabel(a)}),c(i)})}f.emit(g.AUTOCOMPLETE,{types:d||["village","character","tribe"],string:a,amount:e||5},function(a){for(var d in a.result)a.result[d].forEach(function(a,c){a.type=d,a.leftIcon="size-34x34 icon-26x26-rte-"+d,"village"===d&&(a.name=b.genVillageLabel(a)),i.push(a)});c(i)})},n}),define("two/ui/buttonLink",["ejs"],function(a){return function(b,c,d){var e=Math.round(1e5*Math.random()),f=a.render('<a id="l<#= uid #>" class="img-link icon-20x20-<#= type #> btn btn-orange padded"><#= text #></a>',{type:b,text:c,uid:e}),g=document.createElement("div");g.innerHTML=f,g=g.firstChild;var h;switch(b){case"village":h=function(){k.openVillageInfo(d)};break;case"character":h=function(){k.openCharacterProfile(d)}}return g.addEventListener("click",h),{html:f,id:"l"+e,elem:g}}}),define("two/FrontButton",["ejs"],function(a){function b(a,b){this.options=b=angular.merge({label:a,className:"",classHover:"expand-button",classBlur:"contract-button",tooltip:!1,onClick:function(){}},b),this.buildWrapper(),this.appendButton();var d=this.$elem,e=d.find(".label"),f=d.find(".quickview");return b.classHover&&d.on("mouseenter",function(){d.addClass(b.classHover),d.removeClass(b.classBlur),e.hide(),f.show()}),b.classBlur&&d.on("mouseleave",function(){d.addClass(b.classBlur),d.removeClass(b.classHover),f.hide(),e.show()}),b.tooltip&&(d.on("mouseenter",function(a){c.$broadcast(j.TOOLTIP_SHOW,"twoverflow-tooltip",b.tooltip,!0,a)}),d.on("mouseleave",function(){c.$broadcast(j.TOOLTIP_HIDE,"twoverflow-tooltip")})),b.onClick&&this.click(b.onClick),this}return b.prototype.updateQuickview=function(a){this.$elem.find(".quickview").html(a)},b.prototype.hover=function(a){this.$elem.on("mouseenter",a)},b.prototype.click=function(a){this.$elem.on("click",a)},b.prototype.buildWrapper=function(){var a=document.getElementById("twOverflow-leftbar");a||(a=document.createElement("div"),a.id="twOverflow-leftbar",$("#toolbar-left").prepend(a)),this.$wrapper=a},b.prototype.appendButton=function(){var b=a.render('<div class="btn-border btn-green button <#= className #>"><div class="top-left"></div><div class="top-right"></div><div class="middle-top"></div><div class="middle-bottom"></div><div class="middle-left"></div><div class="middle-right"></div><div class="bottom-left"></div><div class="bottom-right"></div><div class="label"><#= label #></div><div class="quickview"></div></div>',{className:this.options.className,label:this.options.label}),c=document.createElement("div");c.innerHTML=b;var d=c.children[0];this.$wrapper.appendChild(d),this.$elem=$(d)},b.prototype.destroy=function(){this.$elem.remove()},b}),require(["two/ready","two/ui"],function(a,b){if(b.isInitialized())return!1;a(function(){b.init()})}),define("two/minimap",["two/locale","two/eventQueue","two/ready","Lockr","struct/MapData","conf/conf","helper/time","helper/mapconvert","cdn"],function(b,d,f,g,h,i,k,l,m){var n,o,p,q,r,s,t,u,v,w,x,y,z=5,A=1,B=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,C={village:{},character:{},tribe:{}},D={},E=null,F={},G={},H=!0,I={},J=function(a){var b=da.getVillageBlock(),c=da.getVillageAxisOffset(),d=Math.ceil(F.x+a.offsetX),e=Math.ceil(F.y+a.offsetY);return Math.floor(e/b%2)%2&&(d-=c),d-=d%b,e-=e%b,{x:Math.ceil((d-G.x/2)/b),y:Math.ceil((e-G.y/2)/b)}},K=function(a,b){return{x:a/i.TILESIZE.x,y:b/i.TILESIZE.y/i.TILESIZE.off}},L=function(a,b){b=1/(b||1);var c=K(a[0]*b,a[1]*b),d=K(a[2]*b,a[3]*b);return[c.x-1,c.y-1,d.x+3||1,d.y+3||1]},M=function(){var a=!1,b={};s.addEventListener("mousedown",function(c){c.preventDefault(),H=!0,a=!0,b={x:F.x+c.pageX,y:F.y+c.pageY},E&&(d.trigger("minimap/villageClick",[E,c]),3===c.which&&ca(E))}),s.addEventListener("mouseup",function(){a=!1,b={},H||d.trigger("minimap/stop-move")}),s.addEventListener("mousemove",function(c){H=!1,a&&(F.x=b.x-c.pageX,F.y=b.y-c.pageY,d.trigger("minimap/start-move"));var e=J(c);if(e.x in C.village&&e.y in C.village[e.x]){var f=h.getTownAt(e.x,e.y);return!(!I.showBarbarians&&!f.character_id)&&$(e,c)}_()}),s.addEventListener("mouseleave",function(){E&&_(),d.trigger("minimap/mouseLeave")}),s.addEventListener("click",function(a){if(!H)return!1;var b=J(a);c.$broadcast(j.MAP_CENTER_ON_POSITION,b.x,b.y,!0),Y(2,b.x,b.y)}),s.addEventListener("contextmenu",function(a){return a.preventDefault(),!1})},N=function(a,b){for(var c,d,e,f,g=v.getId(),h=v.getTribeId(),i=da.getVillageBlock(),j=da.getVillageSize(),k=da.getVillageAxisOffset(),l=0;l<a.length;l++)if(c=a[l],!(c.id<0)){if(b)f=b,d=c[0]*i,e=c[1]*i,c[1]%2&&(d+=k);else if(d=c.x*i,e=c.y*i,c.y%2&&(d+=k),null===c.character_id){if(!I.showBarbarians)continue;f=c.id in n.village?n.village[c.id].color:I.colorBarbarian}else f=c.character_id===g?c.id===x.getId()?I.colorSelected:c.character_id in n.character?n.character[c.character_id].color:I.colorPlayer:c.id in n.village?n.village[c.id].color:c.character_id in n.character?n.character[c.character_id].color:c.tribe_id in n.tribe?n.tribe[c.tribe_id].color:h&&h===c.tribe_id?I.colorTribe:w&&I.highlightDiplomacy?w.isAlly(c.tribe_id)?I.colorAlly:w.isEnemy(c.tribe_id)?I.colorEnemy:w.isNAP(c.tribe_id)?I.colorFriendly:I.colorUgly:I.colorUgly;r.fillStyle=f,r.fillRect(d,e,j,j)}},O=function(a){var b,c=m.getPath(i.getMapPath());b=new XMLHttpRequest,b.open("GET",c,!0),b.responseType="arraybuffer",b.addEventListener("load",function(c){a(b.response)},!1),b.send()},P=function(){var a,b,c,d=da.getVillageBlock(),e=Math.round(d/2);O(function(f){for(y=new DataView(f),b=1;b<999;b++)for(c=1;c<999;c++)a=l.toTile(y,b,c),a.key.b&&(a.key.c?(r.fillStyle=I.colorContinent,r.fillRect(b*d+e-1,c*d+e-1,3,1),r.fillRect(b*d+e,c*d+e-2,1,3)):(r.fillStyle=I.colorProvince,r.fillRect(b*d+e,c*d+e-1,1,1)))})},Q=function(){N(h.getTowns())},R=function(){var a,b,c,d,e,f=da.getVillageBlock(),g=da.getVillageSize(),h=da.getVillageAxisOffset();for(a in D)for(c=0;c<D[a].length;c++)b=D[a][c],d=a*f,e=b*f,b%2&&(d+=h),r.fillStyle=I.colorGhost,r.fillRect(d,e,g,g)},S=function(a){T(),p.drawImage(q,-a.x,-a.y)},T=function(){p.clearRect(0,0,o.width,o.height)},U=function(a){V();var b=da.getVillageBlock(),c=da.getLineSize(),d=da.getMapPosition(),e=(d[0]+d[2]-2)*b-a.x,f=(d[1]+d[3]-2)*b-a.y;t.fillStyle="rgba(255,255,255,0.25)",t.fillRect(0|e,0,1,c),t.fillRect(0,0|f,c,1)},V=function(){t.clearRect(0,0,s.width,s.height)},W=function(){var a={id:x.getId(),x:x.getX(),y:x.getY()};x=v.getSelectedVillage(),N([{character_id:v.getId(),id:a.id,x:a.x,y:a.y},{character_id:v.getId(),id:x.getId(),x:x.getX(),y:x.getY()}])},X=function(){if(da.interface.isVisible("minimap")){var b={x:F.x-G.x/2,y:F.y-G.y/2};S(b),U(b)}a.requestAnimationFrame(X)},Y=function(a,b,c){var d=25*a,e=(b||x.getX())-d/2,f=(c||x.getY())-d/2;h.loadTownDataAsync(e,f,d,d,function(){})},Z=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.id<0||(c.x in C.village||(C.village[c.x]={}),c.x in D||(D[c.x]=[]),C.village[c.x][c.y]=c.character_id||0,D[c.x].push(c.y),c.character_id&&(c.character_id in C.character?C.character[c.character_id].push([c.x,c.y]):C.character[c.character_id]=[[c.x,c.y]],c.tribe_id&&(c.tribe_id in C.tribe?C.tribe[c.tribe_id].push(c.character_id):C.tribe[c.tribe_id]=[c.character_id])))}g.set("minimap-cacheVillages",D)},$=function(a,b){if(E){if(E.x===a.x&&E.y===a.y)return!1;_()}d.trigger("minimap/villageHover",[h.getTownAt(a.x,a.y),b]),E={x:a.x,y:a.y};var c=C.village[a.x][a.y];aa(c?C.character[c]:[[a.x,a.y]])},_=function(){if(!E)return!1;var a=C.village[E.x][E.y];ba(a?C.character[a]:[[E.x,E.y]]),E=!1,d.trigger("minimap/villageBlur")},aa=function(a){N(a,I.colorQuickHighlight)},ba=function(a){for(var b=[],c=0;c<a.length;c++)b.push(h.getTownAt(a[c][0],a[c][1]));N(b)},ca=function(a){var b,c,d=h.getTownAt(a.x,a.y);I.rightClickAction;if(!d)return!1;switch(I.rightClickAction){case"highlight-player":if(!d.character_id)return!1;b="character",c=d.character_id;break;case"highlight-tribe":if(!d.tribe_id)return!1;b="tribe",c=d.tribe_id;break;case"highlight-village":b="village",c=d.id}da.addHighlight({type:b,id:c},da.colorPalette.random())},da={};return da.version="1.2.0",da.colorPalette=["#000000","#FFFFFF","#969696","#F0C800","#0000DB","#00A0F4","#ED1212","#BF4DA4","#A96534","#3E551C","#436213","#CCCCCC","#868900","#5100AF","#7CC600","#CC4DFF","#DEC701","#0120B0","#98AB00","#D512D7","#01C46F","#FF63FB","#009132","#190086","#95D86F","#0045CF","#C7CD53","#6C75FF","#CC8F00","#008FFA","#DF0004","#22CBFF","#FF3F28","#00B184","#99009F","#96D68E","#DD0080","#0E5200","#FF77E8","#00602D","#FF477C","#01ACA2","#C80030","#01AFB8","#BD3100","#006AC3","#DC5B00","#031A70","#EAC162","#381058","#FF9949","#98B1FF","#9A6B00","#FAABFE","#5F5500","#FF78C3","#94D3B9","#BA004C","#CAC0F0","#6B2E00","#EEB3EF","#4A1F00","#F8B5BC","#43152D","#FFAE82","#6C004C","#DEC2A0","#990066","#E6B9A8","#8D0025","#9B7892","#FF745C"],da.settingsMap={rightClickAction:{default:"highlight-player",inputType:"select",update:!1},floatingMinimap:{default:!1,inputType:"checkbox",update:!1},showDemarcations:{default:!0,inputType:"checkbox",update:!0},showBarbarians:{default:!0,inputType:"checkbox",update:!0},showGhostVillages:{default:!0,inputType:"checkbox",update:!0},highlightDiplomacy:{default:!0,inputType:"checkbox",update:!0},colorSelected:{default:"#ffffff",inputType:"colorPicker",update:!0},colorBarbarian:{default:"#969696",inputType:"colorPicker",update:!0},colorPlayer:{default:"#f0c800",inputType:"colorPicker",update:!0},colorTribe:{default:"#0000DB",inputType:"colorPicker",update:!0},colorAlly:{default:"#00a0f4",inputType:"colorPicker",update:!0},colorEnemy:{default:"#ED1212",inputType:"colorPicker",update:!0},colorFriendly:{default:"#BF4DA4",inputType:"colorPicker",update:!0},colorUgly:{default:"#A96534",inputType:"colorPicker",update:!0},colorGhost:{default:"#3E551C",inputType:"colorPicker",update:!0},colorQuickHighlight:{default:"#ffffff",inputType:"colorPicker",update:!0},colorBackground:{default:"#436213",inputType:"colorPicker",update:!0},colorProvince:{default:"#ffffff",inputType:"colorPicker",update:!0},colorContinent:{default:"#cccccc",inputType:"colorPicker",update:!0}},da.setVillageSize=function(a){z=a},da.getVillageSize=function(){return z},da.setVillageMargin=function(a){A=a},da.getVillageMargin=function(){return A},da.getVillageBlock=function(){return z+A},da.getLineSize=function(){return 1e3*(z+A)},da.getVillageAxisOffset=function(){return Math.round(z/2)},da.addHighlight=function(a,b){var c=!1;if(!a.type||!a.id)return d.trigger("minimap/highlight/add/error/no-entry"),!1;if(!B.test(b))return d.trigger("minimap/highlight/add/error/invalid-color"),!1;n[a.type].hasOwnProperty(a.id)&&(c=!0);var e={color:b};return"village"===a.type&&(e.x=a.x,e.y=a.y),n[a.type][a.id]=e,g.set("minimap-highlights",n),c?d.trigger("minimap/highlight/update",[a,b]):d.trigger("minimap/highlight/add",[a,b]),Q(),!0},da.removeHighlight=function(a){return!!n[a.type][a.id]&&(delete n[a.type][a.id],g.set("minimap-highlights",n),d.trigger("minimap/highlight/remove",[a]),Q(),!0)},da.getHighlight=function(a,b){return!!n[a].hasOwnProperty(b)&&n[a][b]},da.getHighlights=function(){return n},da.eachHighlight=function(a){for(var b in n)for(var c in n[b])a(b,c,n[b][c])},da.setViewport=function(a){o=a,o.style.background=I.colorBackground,p=o.getContext("2d")},da.setCross=function(a){s=a,t=s.getContext("2d")},da.setCurrentPosition=function(a,b){var c=da.getVillageBlock();F.x=a*c+50,F.y=b*c+(1e3-(document.body.clientHeight-238)/2)+50},da.getMapPosition=function(){var b=a.twx.game.map.engine.getView();return L([-b.x,-b.y,u.width/2,u.height/2],b.z)},da.updateSettings=function(a){var b,c,d,e=!1;for(c in a)d=da.settingsMap[c],b=a[c],d&&!angular.equals(I[c],b)&&(d.update&&(e=!0),I[c]=b);return g.set("minimap-settings",I),e&&da.update(),!0},da.getSettings=function(){return I},da.update=function(){var a=da.getVillageBlock();o.style.background=I.colorBackground,q=document.createElement("canvas"),r=q.getContext("2d"),q.setAttribute("width",1e3*a),q.setAttribute("height",1e3*a),q.imageSmoothingEnabled=!1,I.showDemarcations&&P(),I.showGhostVillages&&R(),Q()},da.init=function(){b.create("minimap",{en:{title:"Minimapa",minimap:"Kartograf",highlights:"Podświetlenie",add:"Dodaj podświetlenie",remove:"Usuń podświetlenie","entry/id":"Wioska/gracz/plemie","highlight/add/success":"Podświetlenie dodane","highlight/add/error":"Najpierw sprecyzuj podświetlenie","highlight/update/success":"Podświetlenie zaktualizowane","highlight/remove/success":"Podświetlenie usunięte","highlight/villages":"Wioski","highlight/players":"Gracze","highlight/tribes":"Plemiona","highlight/add/error/exists":"Podświetlenie już istnieje!","highlight/add/error/no-entry":"Najpierw wybierz wioskę/gracza/plemię!","highlight/add/error/invalid-color":"Nieprawidłowy kolor!",village:"Wioska",player:"Gracz",tribe:"Plemie",color:"Kolor (Hex)","color-picker":"Wybierz kolor","misc-colors":"Różnorodne kolory","diplomacy-colors":"Dyplomacja - kolory","settings.saved":"Ustawienia zapisane!","settings.right-click-action":"Działanie PPM","settings.easy-highlight-village":"Podświetl wioskę","settings.easy-highlight-player":"Podświetl gracza","settings.easy-highlight-tribe":"Podświetl plemię","settings.show-floating-minimap":"Pokaż ruchomą mapę","settings.show-demarcations":"Pokaż granice prowincji/królestw","settings.show-barbarians":"Pokaż wioski barbarzyńskie","settings.show-ghost-villages":"Pokaż nie-załadowane wioski","settings.highlight-diplomacy":"Auto-podświetlenie dyplomacji plemiennej","settings.colors.background":"Tło minimapy","settings.colors.province":"Granica prowincji","settings.colors.continent":"Granica królestwa","settings.colors.quick-highlight":"Szybkie podświetlenie","settings.colors.player":"Własne wioski","settings.colors.selected":"Wybrana wioska","settings.colors.ghost":"Nie-załadowane wioski","settings.colors.ally":"Sojusznik","settings.colors.pna":"PON","settings.colors.enemy":"Wróg","settings.colors.other":"Inne","settings.colors.barbarian":"Barbarzyńskie","tooltip.village":"Wioska","tooltip.village-id":"Id wioski","tooltip.village-points":"Punkty wioski","tooltip.player":"Nazwa gracza","tooltip.player-id":"Id gracza","tooltip.player-points":"Punkty gracza","tooltip.tribe":"Plemie","tooltip.tribe-id":"Id plemienia","tooltip.tribe-points":"Punkty plemienia","tooltip.province":"Nazwa prowincji"},pl:{title:"Minimapa",minimap:"Kartograf",highlights:"Podświetlenie",add:"Dodaj podświetlenie",remove:"Usuń podświetlenie","entry/id":"Wioska/gracz/plemie","highlight/add/success":"Podświetlenie dodane","highlight/add/error":"Najpierw sprecyzuj podświetlenie","highlight/update/success":"Podświetlenie zaktualizowane","highlight/remove/success":"Podświetlenie usunięte","highlight/villages":"Wioski","highlight/players":"Gracze","highlight/tribes":"Plemiona","highlight/add/error/exists":"Podświetlenie już istnieje!","highlight/add/error/no-entry":"Najpierw wybierz wioskę/gracza/plemię!","highlight/add/error/invalid-color":"Nieprawidłowy kolor!",village:"Wioska",player:"Gracz",tribe:"Plemie",color:"Kolor (Hex)","color-picker":"Wybierz kolor","misc-colors":"Różnorodne kolory","diplomacy-colors":"Dyplomacja - kolory","settings.saved":"Ustawienia zapisane!","settings.right-click-action":"Działanie PPM","settings.easy-highlight-village":"Podświetl wioskę","settings.easy-highlight-player":"Podświetl gracza","settings.easy-highlight-tribe":"Podświetl plemię","settings.show-floating-minimap":"Pokaż ruchomą mapę","settings.show-demarcations":"Pokaż granice prowincji/królestw","settings.show-barbarians":"Pokaż wioski barbarzyńskie","settings.show-ghost-villages":"Pokaż nie-załadowane wioski","settings.highlight-diplomacy":"Auto-podświetlenie dyplomacji plemiennej","settings.colors.background":"Tło minimapy","settings.colors.province":"Granica prowincji","settings.colors.continent":"Granica królestwa","settings.colors.quick-highlight":"Szybkie podświetlenie","settings.colors.player":"Własne wioski","settings.colors.selected":"Wybrana wioska","settings.colors.ghost":"Nie-załadowane wioski","settings.colors.ally":"Sojusznik","settings.colors.pna":"PON","settings.colors.enemy":"Wróg","settings.colors.other":"Inne","settings.colors.barbarian":"Barbarzyńskie","tooltip.village":"Wioska","tooltip.village-id":"Id wioski","tooltip.village-points":"Punkty wioski","tooltip.player":"Nazwa gracza","tooltip.player-id":"Id gracza","tooltip.player-points":"Punkty gracza","tooltip.tribe":"Plemie","tooltip.tribe-id":"Id plemienia","tooltip.tribe-points":"Punkty plemienia","tooltip.province":"Nazwa prowincji"},pt:{title:"Minimap",minimap:"Minimapa",highlights:"Marcações",add:"Adicionar marcação",remove:"Remover marcação","entry/id":"Aldeia/jogador/tribo","highlight/add/success":"Marcação adicionada","highlight/add/error":"Especifique uma marcação primeiro","highlight/update/success":"Marcação atualizada","highlight/remove/success":"Marcação removida","highlight/villages":"Aldeias","highlight/players":"Jogadores","highlight/tribes":"Tribos","highlight/add/error/exists":"Marcação já existe!","highlight/add/error/no-entry":"Selecione uma aldeia/jogador/tribo primeiro!","highlight/add/error/invalid-color":"Cor inválida!",village:"Aldeia",player:"Jogador",tribe:"Tribo",color:"Cor (Hex)"},us:{title:"Minimap",minimap:"Minimap",highlights:"Highlights",add:"Add highlight",remove:"Remove highlight","entry/id":"Village/player/tribe","highlight/add/success":"Highlight added","highlight/add/error":"Specify a highlight first","highlight/update/success":"Highlight updated","highlight/remove/success":"Highlight removed","highlight/villages":"Villages","highlight/players":"Players","highlight/tribes":"Tribes","highlight/add/error/exists":"Highlight already exists!","highlight/add/error/no-entry":"Select a village/player/tribe first!","highlight/add/error/invalid-color":"Invalid color!",village:"Village",player:"Player",tribe:"Tribe",color:"Color (Hex)","color-picker":"Select a color","misc-colors":"Miscellaneous colors","diplomacy-colors":"Diplomacy colors","settings.saved":"Settings saved!","settings.right-click-action":"Village's right click action","settings.easy-highlight-village":"Highlight village","settings.easy-highlight-player":"Highlight player","settings.easy-highlight-tribe":"Highlight tribe","settings.show-floating-minimap":"Show floating minimap","settings.show-demarcations":"Show province/continent demarcations","settings.show-barbarians":"Show barbarian villages","settings.show-ghost-villages":"Show non-loaded villages","settings.highlight-diplomacy":"Auto highlight tribe diplomacies","settings.colors.background":"Minimap background","settings.colors.province":"Province demarcation","settings.colors.continent":"Continent demarcation","settings.colors.quick-highlight":"Quick highlight","settings.colors.player":"Own villages","settings.colors.selected":"Selected village","settings.colors.ghost":"Non-loaded villages","settings.colors.ally":"Ally","settings.colors.pna":"PNA","settings.colors.enemy":"Enemy","settings.colors.other":"Other","settings.colors.barbarian":"Barbarian","tooltip.village":"Village","tooltip.village-points":"Village points","tooltip.player":"Player name","tooltip.player-points":"Player points","tooltip.tribe":"Tribe","tooltip.tribe-points":"Tribe points","tooltip.province":"Province name"}},"en"),da.initialized=!0,q=document.createElement("canvas"),r=q.getContext("2d");var a=g.get("minimap-settings",{},!0);for(var c in da.settingsMap){var d=da.settingsMap[c].default;I[c]=a.hasOwnProperty(c)?a[c]:d}n=g.get("minimap-highlights",{village:{},character:{},tribe:{}},!0)},da.run=function(){if(!da.interfaceInitialized)throw new Error("Minimap interface not initialized");f(function(){u=document.getElementById("main-canvas"),v=e.getSelectedCharacter(),w=v.getTribeRelations(),D=g.get("minimap-cacheVillages",{},!0);var a=da.getVillageBlock();F.x=500*a,F.y=500*a,G.x=686,G.y=2e3,o.setAttribute("width",G.x),o.setAttribute("height",G.y),p.imageSmoothingEnabled=!1,q.setAttribute("width",1e3*a),q.setAttribute("height",1e3*a),q.imageSmoothingEnabled=!1,s.setAttribute("width",G.x),s.setAttribute("height",G.y),t.imageSmoothingEnabled=!1,x=v.getSelectedVillage(),F.x=x.getX()*a,F.y=x.getY()*a,I.showDemarcations&&P(),I.showGhostVillages&&R(),M(),Q(),Z(h.getTowns()),Y(2),X(),c.$on(j.MAP_VILLAGE_DATA,function(a,b){N(b.villages),Z(b.villages)}),
c.$on(j.VILLAGE_SELECTED_CHANGED,function(){W()}),c.$on(j.TRIBE_RELATION_CHANGED,function(a,b){Q()})},["initial_village","tribe_relations"])},da}),define("two/minimap/data",["two/minimap"],function(a){var b={};a.data=b}),require(["two/ready","two/minimap","two/minimap/data","two/minimap/ui"],function(a,b){if(b.initialized)return!1;a(function(){b.init(),b.interface(),b.run()})}),define("two/minimap/ui",["two/minimap","two/locale","two/ui","two/ui/autoComplete","two/FrontButton","two/utils","two/eventQueue","ejs","struct/MapData","cdn"],function(b,d,e,h,i,l,m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,H={},I=function(a,b){f.emit(g.TRIBE_GET_PROFILE,{tribe_id:a},b)},J=function(a,b){f.emit(g.CHAR_GET_PROFILE,{character_id:a},b)},K=function(a,b,c){o.loadTownDataAsync(a,b,1,1,c)},L=function(a,c,e){e&&t[a.type].find("[id$="+a.id+"]").remove();var f=document.createElement("tr");f.id=a.type+"-"+a.id,f.innerHTML=n.render('<td class="entry-icon"><span class="icon-26x26-rte-<#= type #>"></span></td><td class="entry-name"></td><td class="entry-id"></td><td><input class="entry-color" style="background:<#= color #>" disabled="disabled"></td><td><a href="#" class="entry-remove size-26x26 btn-red icon-20x20-close" tooltip="<#= locale("minimap", "remove") #>"></a></td>',{type:a.type,id:a.id,color:c,locale:d}),t[a.type].append(f);var g=f.querySelector(".entry-icon"),h=f.querySelector(".entry-name"),i=f.querySelector(".entry-id"),j=f.querySelector(".entry-remove"),k=f.querySelector(".entry-color");g.addEventListener("click",function(){Q(a.type,a.id)}),h.addEventListener("click",function(){Q(a.type,a.id)}),i.addEventListener("click",function(){Q(a.type,a.id)}),j.addEventListener("click",function(){b.removeHighlight(a)}),k.addEventListener("click",function(){V.set(this,function(c){k.style.background=c,b.addHighlight(a,c)})}),"tribe"===a.type?I(a.id,function(a){h.innerHTML=a.name,i.innerHTML=a.tribe_id}):"character"===a.type?J(a.id,function(a){h.innerHTML=a.character_name,i.innerHTML=a.character_id}):"village"===a.type&&K(a.x,a.y,function(a){h.innerHTML=l.genVillageLabel(a),i.innerHTML=a.id}),q.setTooltips()},M=function(a){var b=q.$window.querySelector("#"+a.type+"-"+a.id);b&&b.remove()},N=function(){b.eachHighlight(function(a,b,c){var d={type:a,id:b};"village"===a&&(d.x=c.x,d.y=c.y),L(d,c.color)})},O=function(a,b){D.villageName.html(l.genVillageLabel(a)),D.villagePoints.html(a.points.toLocaleString()),D.villageId.html(a.id.toLocaleString()),a.character_id?(D.playerName.html(a.character_name),D.playerPoints.html(a.character_points.toLocaleString()),D.playerId.html(a.character_id.toLocaleString())):(D.playerName.html("-"),D.playerPoints.html("-"),D.playerId.html("-")),a.tribe_id?(D.tribeName.html(a.tribe_name+"("+a.tribe_tag+")"),D.tribePoints.html(a.tribe_points.toLocaleString()),D.tribeId.html(a.tribe_id.toLocaleString())):(D.tribeName.html("-"),D.tribePoints.html("-"),D.tribeId.html("-")),D.provinceName.html(a.province_name),C.css("display",""),C.css("top",b.pageY-83+"px"),C.css("left",b.pageX+80+"px")},P=function(){C.css("display","none")},Q=function(a,b){"village"===a?k.openVillageInfo(b):"character"===a?k.openCharacterProfile(b):"tribe"===a&&k.openTribeProfile(b)},R=function(){u.on("input",function(){var a=u.val();if(a.length<2)return h.hide();h.search(a,function(a){a.length&&h.show(a,u[0],"minimap")})}),A.on("click",function(){V.set(this,function(a){U(a)})}),z.on("click",function(){b.addHighlight(H,y.val())}),y.on("keyup",function(){U(this.value)}),s.find(".save").on("click",function(a){X()}),c.$on(j.SELECT_SELECTED,function(a,b,c){if("minimap"!==b)return!1;H.id=c.id,H.type=c.type,"village"===c.type&&(H.x=c.x,H.y=c.y),v[0].className="icon-26x26-rte-"+c.type,w.html(c.name),x.html(c.id)}),m.bind("minimap/highlight/add",function(a,b){L(a,b),l.emitNotif("success",d("minimap","highlight/add/success"))}),m.bind("minimap/highlight/update",function(a,b){L(a,b,!0),l.emitNotif("success",d("minimap","highlight/update/success"))}),m.bind("minimap/highlight/remove",function(a){M(a),l.emitNotif("success",d("minimap","highlight/remove/success"))}),m.bind("minimap/highlight/add/error/exists",function(){l.emitNotif("error",d("minimap","highlight/add/error/exists"))}),m.bind("minimap/highlight/add/error/no-entry",function(){l.emitNotif("error",d("minimap","highlight/add/error/no-entry"))}),m.bind("minimap/highlight/add/error/invalid-color",function(){l.emitNotif("error",d("minimap","highlight/add/error/invalid-color"))}),m.bind("minimap/villageHover",O),m.bind("minimap/villageBlur",P),m.bind("minimap/mouseLeave",function(){P(),E.trigger("mouseup")}),m.bind("minimap/start-move",function(){P(),E.css("cursor","url("+p.getPath("/img/cursor/grab_pushed.png")+"), move")}),m.bind("minimap/stop-move",function(){E.css("cursor","")})},S=function(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},T=function(a){var b=S(a);return(299*b.r+587*b.g+114*b.b)/1e3>127.5?"#000":"#fff"},U=function(a){if(!G.test(a))return!1;y.val(a),y.css("background",a),y.css("color",T(a))},V={callback:function(){},visible:!1};V.init=function(){B.find("div").click(function(){V.callback(this.dataset.color),V.hide()})},V.setCallback=function(a){V.callback=a},V.hideHandler=function(a){var b=a.srcElement||a.target;l.matchesElem(b,".color-picker")||V.hide()},V.show=function(){B[0].style.display="",V.visible=!0},V.hide=function(){B.hide(),V.visible=!1,$(a).off("click",V.hideHandler)},V.set=function(b,c){V.visible&&V.hide(),V.show(),V.setCallback(c);var d=b.getBoundingClientRect(),e=B[0].getBoundingClientRect();B.css("left",d.left-e.width+"px"),B.css("top",d.top-e.height/2+"px"),setTimeout(function(){$(a).on("click",V.hideHandler)},100)};var W=function(a){s.find("[data-setting]").forEach(function(b){var c=b.dataset.setting;a(b,c)})},X=function(){var a={};return W(function(c,d){switch(b.settingsMap[d].inputType){case"select":a[d]=c.dataset.value;break;case"checkbox":a[d]=c.checked;break;case"colorPicker":a[d]=c.style.background}}),!!b.updateSettings(a)&&(l.emitNotif("success",d("minimap","settings.saved")),!0)},Y=function(){var a=b.getSettings();W(function(c,d){var e,f,g=b.settingsMap[d].inputType,h=a[d];switch(g){case"select":c.dataset.value=h,e=c.querySelector(".custom-select-handler"),f=c.querySelector(".custom-select-data [data-value="+h+"]"),e.innerText=f.dataset.name;break;case"checkbox":h&&(c.checked=!0,c.parentElement.classList.add("icon-26x26-checkbox-checked"));break;case"colorPicker":c.style.background=h,c.addEventListener("click",function(){V.set(this,function(a){c.style.background=a})})}})},Z=function(){return q=new e("Minimap",{activeTab:"minimap",template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("minimap", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-three-col"><div class="tab" tab="minimap"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("minimap", "minimap") #></a></div></div></div><div class="tab" tab="highlights"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("minimap", "highlights") #></a></div></div></div><div class="tab" tab="settings"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("common", "settings") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-minimap"><canvas class="cross"></canvas><canvas class="minimap"></canvas></div><div class="box-paper footer has-footer-upper twOverflow-content-highlights"><h5 class="twx-section"><#= locale("minimap", "add") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="30%"><col width="6%"><col><col width="12%"><col width="25%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" autocomplete="off" placeholder="<#= locale("minimap", "entry/id") #>"></td><td><span class="item-icon"></span></td><td class="item-name"></td><td class="item-id"></td><td><input type="text" class="item-color textfield-border" value="#000000" tooltip="<#= locale("minimap", "color") #>"> <span class="open-color-picker btn-orange icon-26x26-rte-color-picker" tooltip="<#= locale("minimap", "color-picker") #>"></span> <span class="item-add btn-orange icon-26x26-plus" tooltip="<#= locale("minimap", "add") #>"></span></td></tr></tbody></table></form><div class="highlights"><h5 class="twx-section"><#= locale("minimap", "highlights") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="6%"><col><col width="15%"><col width="7%"><col width="7%"></colgroup> <# types.forEach(function (type) { #> <tbody class="<#= type #>"></tbody> <# }) #> </table></div></div><div class="box-paper footer has-footer-upper twOverflow-content-settings"><h5 class="twx-section"><#= locale("common", "misc") #></h5><form class="settings"><table class="tbl-border-light tbl-striped"><colgroup><col width="60%"><col></colgroup><tbody><tr><td><#= locale("minimap", "settings.right-click-action") #></td><td><select data-setting="rightClickAction"><option value="highlight-village"><#= locale("minimap", "settings.easy-highlight-village") #></option><option value="highlight-player"><#= locale("minimap", "settings.easy-highlight-player") #></option><option value="highlight-tribe"><#= locale("minimap", "settings.easy-highlight-tribe") #></option></select></td></tr><tr><td><#= locale("minimap", "settings.show-demarcations") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-showDemarcations"><input id="settings-showDemarcations" type="checkbox" data-setting="showDemarcations"></label></td></tr><tr><td><#= locale("minimap", "settings.show-barbarians") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-showBarbarians"><input id="settings-showBarbarians" type="checkbox" data-setting="showBarbarians"></label></td></tr><tr><td><#= locale("minimap", "settings.show-ghost-villages") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-showGhostVillages"><input id="settings-showGhostVillages" type="checkbox" data-setting="showGhostVillages"></label></td></tr><tr><td><#= locale("minimap", "settings.highlight-diplomacy") #></td><td><label class="size-26x26 btn-orange icon-26x26-checkbox" for="settings-highlightDiplomacy"><input id="settings-highlightDiplomacy" type="checkbox" data-setting="highlightDiplomacy"></label></td></tr></tbody></table><h5 class="twx-section"><#= locale("minimap", "misc-colors") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="60%"><col></colgroup><tbody><tr><td><#= locale("minimap", "settings.colors.background") #></td><td><input class="entry-color" data-setting="colorBackground"></td></tr><tr><td><#= locale("minimap", "settings.colors.province") #></td><td><input class="entry-color" data-setting="colorProvince"></td></tr><tr><td><#= locale("minimap", "settings.colors.continent") #></td><td><input class="entry-color" data-setting="colorContinent"></td></tr><tr><td><#= locale("minimap", "settings.colors.quick-highlight") #></td><td><input class="entry-color" data-setting="colorQuickHighlight"></td></tr><tr><td><#= locale("minimap", "settings.colors.player") #></td><td><input class="entry-color" data-setting="colorPlayer"></td></tr><tr><td><#= locale("minimap", "settings.colors.selected") #></td><td><input class="entry-color" data-setting="colorSelected"></td></tr><tr><td><#= locale("minimap", "settings.colors.ghost") #></td><td><input class="entry-color" data-setting="colorGhost"></td></tr></tbody></table><h5 class="twx-section"><#= locale("minimap", "diplomacy-colors") #></h5><table class="tbl-border-light tbl-striped"><colgroup><col width="60%"><col></colgroup><tbody><tr><td><#= locale("minimap", "settings.colors.ally") #></td><td><input class="entry-color" data-setting="colorAlly"></td></tr><tr><td><#= locale("minimap", "settings.colors.pna") #></td><td><input class="entry-color" data-setting="colorFriendly"></td></tr><tr><td><#= locale("minimap", "settings.colors.enemy") #></td><td><input class="entry-color" data-setting="colorEnemy"></td></tr><tr><td><#= locale("minimap", "settings.colors.other") #></td><td><input class="entry-color" data-setting="colorUgly"></td></tr><tr><td><#= locale("minimap", "settings.colors.barbarian") #></td><td><input class="entry-color" data-setting="colorBarbarian"></td></tr></tbody></table></form></div></div><footer class="win-foot"><ul class="list-btn list-center buttons"><li class="twOverflow-button-settings"><a class="btn-orange btn-border save"><#= locale("common", "save") #></a></li></ul></footer></div><div class="minimap-tooltip box-border-darker box-wrapper" style="display: none"><table class="tbl-border-light tbl-striped"><colgroup><col width="33%"><col width="33%"><col width="33%"></colgroup><tbody><tr><td class="cell-space-left"><div class="ff-cell-fix"><span class="size-34x34 icon-bg-black icon-26x26-village"></span><div class="text"><span><#= locale("minimap", "tooltip.village") #></span><span class="overflow-ellipsis village-name"></span></div></div></td><td class="cell-space-left"><div class="ff-cell-fix"><span class="size-34x34 icon-bg-black icon-26x26-points"></span><div class="text"><span><#= locale("minimap", "tooltip.village-points") #></span><span class="village-points"></span></div></div></td><td class="cell-space-left"><div class="ff-cell-fix"><span class="size-34x34 icon-bg-black icon-26x26-id"></span><div class="text"><span><#= locale("minimap", "tooltip.village-id") #></span><span class="village-id"></span></div></div></td></tr><tr><td class="cell-space-left"><div class="ff-cell-fix"><span class="size-34x34 icon-bg-black icon-34x34-player"></span><div class="text text-limited"><span><#= locale("minimap", "tooltip.player") #></span><span class="overflow-ellipsis player-name"></span></div></div></td><td class="cell-space-left"><div class="ff-cell-fix"><span class="size-34x34 icon-bg-black icon-26x26-points"></span><div class="text"><span><#= locale("minimap", "tooltip.player-points") #></span><span class="player-points"></span></div></div></td><td class="cell-space-left"><div class="ff-cell-fix"><span class="size-34x34 icon-bg-black icon-26x26-id"></span><div class="text"><span><#= locale("minimap", "tooltip.player-id") #></span><span class="player-id"></span></div></div></td></tr><tr><td class="cell-space-left"><div class="ff-cell-fix"><span class="size-34x34 icon-bg-black icon-34x34-tribe"></span><div class="text text-limited"><span><#= locale("minimap", "tooltip.tribe") #></span><span class="overflow-ellipsis tribe-name"></span></div></div></td><td class="cell-space-left"><div class="ff-cell-fix"><span class="size-34x34 icon-bg-black icon-34x34-tribe-points"></span><div class="text"><span><#= locale("minimap", "tooltip.tribe-points") #></span><span class="tribe-points"></span></div></div></td><td class="cell-space-left"><div class="ff-cell-fix"><span class="size-34x34 icon-bg-black icon-34x34-tribe-id"></span><div class="text"><span><#= locale("minimap", "tooltip.tribe-id") #></span><span class="tribe-id"></span></div></div></td></tr><tr><td colspan="2" class="cell-space-left"><div class="ff-cell-fix"><span class="size-34x34 icon-bg-black icon-34x34-province"></span><div class="text"><span><#= locale("minimap", "tooltip.province") #></span><span class="overflow-ellipsis province-name"></span></div></div></td></tr></tbody></table></div><div class="color-picker box-border-dark" style="display: none"> <# colorPalette.forEach(function (color) { #> <div style="background: <#= color #>" data-color="<#= color #>"></div> <# }) #> </div>',css:'#Minimap .minimap{position:absolute;left:0;top:0;z-index:0}#Minimap .cross{position:absolute;left:0;top:0;z-index:2}#Minimap .addForm input{width:100%}#Minimap .addForm .item-color{font-weight:100;width:83px}#Minimap .addForm td{text-align:center}#Minimap .highlights table{margin-bottom:10px}#Minimap .highlights td{text-align:center}#Minimap .highlights td.entry-name{text-align:left}#Minimap .highlights td.entry-name:hover{color:#fff;text-shadow:0 1px 0 #000}#Minimap .highlights td.entry-id{text-align:left}#Minimap .highlights td.entry-id:hover{color:#fff;text-shadow:0 1px 0 #000}#Minimap .settings td{text-align:center}#Minimap .entry-color{background:#000000;height:26px;width:26px;display:inline-block;box-shadow:0 0 0 1px #421f09 inset,0 0 0 2px #976543 inset,0 0 0 3px #421f09 inset,0 0 1px 5px rgba(0,0,0,0.4) inset;text-shadow:1px 1px 0 #000;outline:none;border:none}#Minimap .entry-name{text-align:left;padding:0 10px}#Minimap .entry-id{text-align:left;padding:0 10px}#Minimap .color-picker{width:317px;position:absolute;padding-left:2px;padding-bottom:2px;z-index:1000}#Minimap .color-picker div{width:25px;height:25px;float:left;box-shadow:0 0 0 1px #000000 inset,0 0 0 2px #976543 inset;margin-right:1px;margin-top:1px}#Minimap .minimap-tooltip{position:absolute;width:540px;z-index:4000;padding:3px;background:url("data:image/png; base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAA8ySURBVHjaTJl9WJblGcZ/vA+KaICIKO9AX81XBRRzoOgINbOlNit1ZZlrmsvclvaxnMu01frcZtbarFmrLZ3a9/pay1LT0rDUlTTSJab5FWIJIiiaCvtjv+c4Xo6DA3je57nv6zqv8zyv67lJKh42einQBhgNdAIeAjKBcqAv//9qBk5534vANOB9YDmQD9QBQ4BLgVbgTmAecD+wBkgGrgNe8rsZeA24CmgPLAFuB14F4sAk4ADwKHCl1zcYVzNQCgwH1gIBkAtkBNFYfLKL3QkMA9oBk4HOwCFgI3CTQW7wen9gk9dT3Dgf2OUzuf6dBXzPDUcZwLnAF8CbBnORQPUDPgK+BT4BFgKVwBFgm/usA6q9dpV7FALLgAnJwAgf+qULNgG/BdKBQcB2YIr3vWNSlwBD3eArKzYU+AZ423u3AV2AgcB5Bt4VmAXssfLdgI+Bwd7zpQm9aRUqreQs4ENB3GjVk4AVQAPQE6gMorF4o6Vs68LfMbhKIAf4MZBmeXsBLxvkZDcsAk4DMROd4zMfAD8HrgX+a8XbieoM4FMDSgVq/Bmxct2AE8CFxlNjbDtkxPvAfqu0BtgJ/CDigmXAUeBrNxti6ZPUzAQp0kckBgNPAFuA3ZY6MJnRUvZWn3tT1N8A7pLvJVI6H1jv53HR3wI8rcZmGttJ95wIbHWf94AbZVEp8IsI8EMF1wp0N5l0SzcC+CeQATwPjJE2HYC7DahBzfzRxMrdfDlQLA3XA/WCM0gq/dVA+gPnuO93BeYVKVnk7/cCF0u3wwI9QeouteIZQTQWH+yGlTpKGwO5DXhKSt0HVMnRTBccZjAVQDYwFfgHMB34vnrqBIwH9lrtiw1gPXCBdOpuJVqBt1y3J3CFoJ4GfgDcLLgvem+q1N/n9elBNBb/l6XsAHQ02NfdDFHs5aLVauWkiQ1X9PsV5WXAQZ9bZxIHDbrG3+8Bfg08q0lcr+mkAiMFpsJ9k4ABApBmTHuAF6ToQHWUDzQF0Vh8qOWtkwqvy+lCESrXHDZbzkar1l7djNJqAzlfqkXfIkipBpwukqu01RMaTBeDLze4H4r0dtly2qp09l7UY7l/97Ja44NoLD7A/jFFGzxmUF2AH4loRMe4VAveLfdrFG4/YCzwnAiOTqDuX0xqts/MAearhxvVW1upg3t9H/ibVdlvQmEfa1Vf24HPrfY1wFtBNBbPFfFaESmTw72tUJMO0qQ9Pi8qOQbbXX3kKvh3tNcNWn6NyLb1vp/KgHFSJrBqw723yRgGq9MjTgC1Tg1F0m2zuioEzgAbku0FLwNR4LhNaZr8X6jXZ0qXz1y81cQ2i+5f3HCnE8AdUuqMqJ7Wdc4ToBk60n7X2ywb7pBqLaK+G7hcF/23n/3b5pqiXur8Hh7RFvvqUBt0s9cMJNNNBloBNIA0O/2TTg577S33Ac8o4g1SdrZr5ug8veV8WkJ/Wuf152ym663MZYq/wsoNMvBiPz9qJXOArGQXbDbYbO11DrBSpJdoweNcfKb6GuSmQ3Sh3wFX2ySHWr1sAfhWCu3ULFZ6vUbgBpto3GCTDDDJJGqtTqX77NKIkowvH3gjWbutduEPDPBuxd9RalU4MI4wsW5u2mpVH1PwL9kn7rHbr9DGc71vBrBYjR4wyFpBqLU5ZyWsHX5WAzyi076h5i5yWnjI6vw62Wa3yQ3f0pnu8nfkZ1wr/rMOg9RZCPzevgHwuD1gohV732o8qOaapBPqbJfU7Ox6m5yYD6mXRwS1QLBa1VKqAN5kbGuArRFt7bAPF0mJxS66zCRmSYXwaxtwNsGlKuT2GuB8dfgTYK5jxwMmGrEqq63YcQWdpgn10QzWAAs0h/edGQ8BefaUj4EbfPaYSR4NJ4CPLPscURhrwzzj7LUDWORi4TiTIw2PaqFbpcdcgRhjUhcZ1C+04llW4nzd63bvu9S1n3AkShf9WrVRoxN2tU+11x0PCk5pRKRHOMJXaounpFBvPb+tC+eJyjbd7FEDv8Kkz0ipKimV51q7pd+XVqlcF0MdbPQ14T/SvY8UKzCGA855mVIYK/Z3k5sHnAiisfid3pyaMNWmSbGjWu0k3yv22Y/SRDbLRPc6hlwkRYoMbIT3hi2g3sROSOe/2skX2GyTvN7fme9Z97xWsCql1Srv3WLVy4G+ETOslstpWmu92Y5RP/NEo1XBt3GiXu+1QP5WmPhZTeSfrtvTNdsZfKbUmKehLNG1Njpl9/a+G2zKreoryaRCIyoWpGZgVRCNxbvYa+qkVJYZT3FAzJaXbaVAuZyvM9kMNXXcBrvX9VoM4oxWnqXO4jpdvTRKsSnvlq5pHoC00QnPAg9b6Z4C0jfhNfq008e+iO8KzS66zDL3taM/rEvdKhVzdZZFLvS4U8Ai7xvopmOtyoc2xYj6OWZVnrPnBGorQ7e61b6GWqhT+OOsXKZA/9gk2rr2JKBtEI3F/+SMVGjD224Jk5x+w9mnVhdbbwCXOd2W+9L1sBQYZoV32MPKpW4J0MNnlyvoRq/vUAffdX+06l6ul6oTXuB0sddKV6nVHsAnQTQWf8BSfp7wZveu2S5y8yMOn7v9mZnwprfTzyfad9JEequNt4fBdbS3pArIEUeo8FU9nN7HSpurrdwqp48mm3MnHbRGh2xSa1cnu1EfP8i2Su2sTDddpav35TpbtTHgVdIyRYda7CvCCqtyjuA8Kn32CNwSA/iZNH1EjRbqoLdp2ROk83HPAu537xd8wTvs1NArPAMYKXob7AlhQkO02E2+g3zjXHaOyTdqlbmOGjn2pnsFoUVQJqqXCvW2XQD2ODq9bPC3aAAxA05xRmxn8i8lnLR29ZVipu7XFfgsiMbitXbfngZeqBjPU8yvJLjMci240M+STXiXIp2kuHOdvjuLYqbc729Cl4vm96RThV3/lBNAsX2twaRKtOt9UvI+28nNTi+NQGkQjcVni3qZG+b6TvGMZ1f9vPkNUV/nRjE5Xa2FrxOhVKlSr2N9ZTU/dVSv0gXXqrdhBtot4SDypM25zp/7nCHzjWWc979rkx8IPJ0sZ6sSmuQz0mKG5X5bQY5SR0+qnw9EuaP06uRhxiGBKbbP5Jl4kc8VmeB8e1CjHb7WcSds2pW+y+x0fBrvPhElMFNDanAezAiisfhOnadMZyiVl4Vmnq3/J5t0vkG1VcCDtOZndcOzNsN0X6TG2yjftpvPMoCbDP5TK3pcCt3o/VMEMFUaR5TBJK08x7OGqEnnBtFYPMXgV+vjVxvIGdE6qIOlmsA2BVlsn7lETezxZ2+Hxjz5/CcHwgZfsbsbRAe/w8Z9o002PGPLcq+vffVenXBwXulYNdJG/B0gGkRj8SLFPcrMuxv8UtHbaIXypFC6fJ9m2UvV2R/8fZOgdFArY31uqhrINLHV0ra7L2rtpOAY3fV53bO300SBBlHtc7cJdovVTYuIXJkfNFriXja8uaLxRztthoEulLej3Hi8m29V/DNd7y2TSxW9V30FqEg4dq02oXz7xgHfVXJc416BOyQtM5zGT/hMOCy3BNFY/LBW2UXqbPbvznbaNs5q+x3xz9ocr5S/z4rUp+os240PepC30p9J9o0WLbXSfcqkS0vC6c0A32ybFXnUyhzXeXtI1cdsAenAx8lu8luRau+bX1LCsFdiAmcd8pp1rgYPLlKkYp7CHCcdbhaEeo1loToIJ/ERHjZOl3KjnBLS1W04n71nHPX2vruMb7O/b1TL+UE0Fj+rK5UlvApP9+YFVuZ5G1x/EQ+PlY4q7iel5lYRznYUmS3KIZoFCeIP1Gadou/i5/29vtiED6jFDiZaKCOOCMKVPtctiMbiS0Whr3QYqJP1losVHk7kiHh4+vmNU+4VLvaUb5m/Sfh/S3cn3Lnae7PNtY+9p6du1FE69bE5n5AhUwx2g4lMcI1zTbSH1GwEXgqisXiTD57y/X2+DbNEtBYqtMku2lOLPWJVSn0PukEQhupY4elji0HtllYPyf1fSo/wAH50wjSQIyO+SJhKSgRurXad4n5feP2JIBqLl9gvTlv6oY4wB3WTNSJ9vXa4xdJfKPJ3mMha7TfVPnOvvaezDnhaxLe49t1yfqwNdYZjzCDpOshEqhOa6wndN66BZEu5M0D3iCWaL4I/NZkCb6iSguG/Brcq9JaEsWOWSCGHw4PDcI5KS5gYGgw62WOtet9twuPXsdpzkjR8x7W3ud8Y18qTkh8K2IPAA8kuPsSqnBbV4dLnuIcH/9Wm86zSLqs3IEEbV6qllVZotsFeYuUfd1a7zQa5wHVT1cAW7XiB/eew70uXmnCpbrhfML60Or/Sha8NorH4Csfuck8LV/iOXWGSddKkKuFf12tsgp85sgRen6995svlfPlf4PpnpOtw9dPBKqz03lfU22S/w/9C32plSzWgB22+aX5eBhREpEw3+0ixFowCqzfoiF34qMjN9d4Unx0gx8NzrSWK9k2rtsfm1kGUvxT5YwnnX9W++/TTVadrAkWCN1Vdnqv7VRpDg+uvDqKxeKVBvWrg15vMARP9QgRWSoN3pFM7qdfo9Q+0yTnab7YIFiWsk+TzF2irP5NGnXXJLVL4cp/PkVYnbdSjbR0TBatKmu4E3o3YX/rZH8L3g2kiV6Xw92jRo0TrKxO/y+8MA50mENeZxNOuM9TvFoNoI2XW6mon/HueDna+ySx1erjYZzpY9WXuM8Q4TgKxIBqLv2q5l+sWnaTXRzrVf8y+q1QakTDBfqwTrVPoJW6SZbUzDeIWER7mGvuk6yETKLBSx0X5GSs10ljqE6rTIMDZTh4Rv0cnW+Jh2lyTIh9tp33Q7KfbmdtLvx1Wok5UpxrEE07MjxnocGnVzjWf8r8BZX4+0PHkdp2u1FiusbkGPn+NWrvO+z7REJZ5QLIYeDyIxuJ362KLRKxMgbboFKXOXYdc4HOHuyyp1FmBPuyzaQ6HDVKqnxa80soPEOEBHh31ct2LvW+mzpguBS908qixGi9L3QIniwu06qPJVuN+SzrVJjXGuex3JhWevIRCfs++ctK+s0/ttNihy0Vwq3qaIFWLTTD86m11J2gg+QmBznW6+NbPLzGRfBN8Sg01W/lrIvaGSZYrovhOOXL8QZGOtAJTbJIPWZWudv2rrE6NY0x4InODWmljMufJ/3s8+OuqNr72/gIpXeuRVokUypfmBwW6SCdMMu6bgWP/GwDmXORXKDEySwAAAABJRU5ErkJggg==") #45505c;transition:opacity .5s;top:20px;left:20px}#Minimap .minimap-tooltip.left{left:-410px}#Minimap .minimap-tooltip.top{top:-220px}#Minimap .minimap-tooltip .text span{width:100%;float:left;line-height:17px;font-size:13px;display:inline-block}#Minimap .minimap-tooltip .text-limited span{width:180px}#Minimap .custom-select .custom-select-handler{width:220px}',replaces:{locale:d,version:b.version,types:["village","character","tribe"],colorPalette:b.colorPalette,settings:b.getSettings()},onTabClick:function(a){"minimap"===a?q.$scrollbar.disable():q.$scrollbar.enable()}}),r=new i(d("minimap","title"),{classHover:!1,classBlur:!1,onClick:function(){var a=b.getMapPosition();b.setCurrentPosition(a[0],a[1]),q.openWindow()}}),q.$scrollbar.disable(),s=$(q.$window),u=s.find(".item-input input"),v=s.find(".item-icon"),w=s.find(".item-name"),x=s.find(".item-id"),y=s.find(".item-color"),z=s.find(".item-add"),A=s.find(".open-color-picker"),B=s.find(".color-picker"),C=s.find(".minimap-tooltip"),D={villageName:C.find(".village-name"),villagePoints:C.find(".village-points"),villageId:C.find(".village-id"),playerName:C.find(".player-name"),playerPoints:C.find(".player-points"),playerId:C.find(".player-id"),tribeName:C.find(".tribe-name"),tribePoints:C.find(".tribe-points"),tribeId:C.find(".tribe-id"),provinceName:C.find(".province-name")},t={village:s.find(".village"),character:s.find(".character"),tribe:s.find(".tribe")},E=s.find(".cross"),F=s.find(".minimap"),b.setViewport(F[0]),b.setCross(E[0]),V.init(),Y(),R(),N(),b.interfaceInitialized=!0,q};b.interface=function(){b.interface=Z()}}),define("two/mintHelper",["two/eventQueue","helper/time","two/locale","two/utils","Lockr"],function(a,b,c,d,e){function f(){g.getSelectedCharacter().getVillageList().forEach(function(a){var b=0,c=0,e=0,f=a.data,g=f.buildings,j=g.academy,k=j.level,m=a.getResources(),n=m.getComputed(),o=(m.getMaxStorage(),n.wood),p=n.clay,q=n.iron,r=o.currentStock,s=p.currentStock,t=q.currentStock;setTimeout(function(){k>0&&r>=28e3&&s>=3e4&&t>=25e3&&(b=Math.floor(r/28e3),c=Math.floor(s/3e4),e=Math.floor(t/25e3),b<=e&&b<=c?(h.emit(i.MINT_COINS,{village_id:a.getId(),amount:b}),d.emitNotif("success","W wiosce "+a.getName()+" wybito "+b+" monet.")):c<=e&&c<=b?(h.emit(i.MINT_COINS,{village_id:a.getId(),amount:c}),d.emitNotif("success","W wiosce "+a.getName()+" wybito "+c+" monet.")):(h.emit(i.MINT_COINS,{village_id:a.getId(),amount:e}),d.emitNotif("success","W wiosce "+a.getName()+" wybito "+e+" monet.")))},l)}),setTimeout(f,3e4)}var g=injector.get("modelDataService"),h=injector.get("socketService"),i=injector.get("routeProvider"),j=!1,k=!1,l=3e3,m={};return m.init=function(){j=!0},m.start=function(){a.trigger("Minter/started"),k=!0,f()},m.stop=function(){a.trigger("Minter/stopped"),k=!1},m.isRunning=function(){return k},m.isInitialized=function(){return j},m}),require(["two/ready","two/mintHelper","Lockr","two/eventQueue","two/mintHelper/ui"],function(a,b,c,d){if(b.isInitialized())return!1;a(function(){b.init(),b.interface(),a(function(){c.get("minter-active",!1,!0)&&b.start(),d.bind("Minter/started",function(){c.set("minter-active",!0)}),d.bind("Minter/stopped",function(){c.set("minter-active",!1)})},["initial_village"])})}),define("two/mintHelper/ui",["two/mintHelper","two/FrontButton","two/locale","two/utils","two/eventQueue"],function(a,b,c,d,e){function f(){return c.create("minter",{en:{title:"Podskarbi",description:"Automatycznie wybija monety gdy włączony.",activated:"Podskarbi aktywowany",deactivated:"Podskarbi deaktywowany"},pl:{title:"Podskarbi",description:"Automatycznie wybija monety gdy w��czony.",activated:"Podskarbi aktywowany",deactivated:"Podskarbi deaktywowany"},us:{title:"MintHelper",description:"Automatic Minter coins when turned on.",activated:"Automatic Minter activated",deactivated:"Automatic Minter deactivated"}},"pl"),g=new b(c("minter","title"),{classHover:!1,classBlur:!1,tooltip:c("minter","description")}),g.click(function(){a.isRunning()?(a.stop(),d.emitNotif("success",c("minter","deactivated"))):(a.start(),d.emitNotif("success",c("minter","activated")))}),e.bind("Minter/started",function(){g.$elem.removeClass("btn-green").addClass("btn-red")}),e.bind("Minter/stopped",function(){g.$elem.removeClass("btn-red").addClass("btn-green")}),a.isRunning()&&e.trigger("Minter/started"),g}var g;a.interface=function(){a.interface=f()}}),define("two/spymaster",["two/locale","two/eventQueue","two/ready","Lockr","struct/MapData","conf/conf","helper/time","cdn"],function(a,b,d,f,g,h,i,k){var l,m,n={village:{},character:{}},o={},p=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.id<0||(c.x in n.village||(n.village[c.x]={}),c.x in o||(o[c.x]=[]),n.village[c.x][c.y]=c.character_id||0,o[c.x].push(c.y),c.character_id&&(c.character_id in n.character?n.character[c.character_id].push([c.x,c.y]):n.character[c.character_id]=[[c.x,c.y]]))}f.set("spymaster-cacheVillages",o)},q={};return q.version="0.9.9",q.addHighlight=function(a){return a.type&&a.id?(l[a.type][a.id]=_data,f.set("spymaster-sended",l),b.trigger("spymaster/sended/add",[a]),!0):(b.trigger("spymaster/no-entry"),!1)},q.getHighlight=function(a,b){return!!l[a].hasOwnProperty(b)&&l[a][b]},q.getHighlights=function(){return l},q.eachHighlight=function(a){for(var b in l)for(var c in l[b])a(b,c,l[b][c])},q.init=function(){a.create("spymaster",{en:{title:"Zwiadowca",spy:"Akcje Szpiegowskie",recruit:"Auto-Rekrutacja",countermeasures:"Kontrwywiad",light_cavalry:"LK",mounted_archer:"ŁK",heavy_cavalry:"CK",spyU:"Szpieguj jednostki",spyB:"Szpieguj budynki",spyA:"Efektywne szpiegowanie",spyP:"Szpieguj całego gracza",sabotage:"Sabotuj wioskę","spyU.text":"Wysyła 7 szpiegów z twoich wiosek na wioskę wskazaną aby zdobyć informacje tylko jednostkach.","spyB.text":"Wysyła 7 szpiegów z twoich wiosek na wioskę wskazaną aby zdobyć informacje tylko budynkach.","sabotage.text":"Wysyła po 3 szpiegów z twoich wiosek na wioskę wskazaną aby dokonać sabotażu na budynkach.","spyA.text":"Wysyła 8-10 szpiegów z twoich wiosek na wioskę wskazaną aby zdobyć informacje o budynkach oraz jednostkach(pierwsi szpiedzy na budynki ostatni na jednostki).","spyP.text":"Wysyła szpiegów z twoich wiosek na wioski gracza aby zdobyć informacje o budynkach oraz jednostkach(pierwsi szpiedzy na budynki ostatni na jednostki).",send:"Wyślij",sabote:"Sabotuj",sendingU:"Wszyscy na jednostki",sendingB:"Wszyscy na budynki",sendingS:"3 do sabotowania budynków na wrogiej wiosce",sendingA:"Pierwsi na budynki kolejni na jednsotki - największa efektwnosc.",sendingP:"Pierwsi na budynki kolejni na jednsotki - największa efektwnosc.","entry/id":"ID gracza","entry/vid":"ID wioski","entry/building":"Wpisz budynek","entry/level":"Wpisz poziom","entry/unit":"Jednostka","entry/replacement":"Zamiennik",revived:"Szpiedzy dodani do kolejki rekrutacji",recruiting:"Rekrutacja","recruit.text":"Rekrutuje wszystkich szpiegów na wszystkich wioskach.","recruit.tip":"xxx","recruit.btn":"Rekrutuj",camouflage:"Kamuflaż","camouflage.text":"Wybierz budynek oraz poziom jaki ma być widoczny dla wrogiego szpiega.","camouflage.tip":"Zmienia widoczność poziomu wybranego budynku na wszystkich wioskach gdzie jest dostępna opcja kamuflażu","camouflage.btn":"Kamufluj","camouflage.set":"Kamuflaż ustawiony.",switch:"Zamiana broni","switch.text":"Wybierz typy jednostek które zamienią się bronią by oszukać wrogiego szpiega.","switch.tip":"Zamienia broń między dwoma typami jednostek na wszystkich wioskach, na których jest to możliwe.","switch.btn":"Zamień","switch.set":"Zamiana broni ustawiona.",dummies:"Atrapy","dummies.text":"Wybierz jednostkę, która ma posłużyć jako atrapa widoczna dla wrogiego szpiega.","dummies.tip":"Aktywuje Atrapy, uzupełnia wolny prowiant o wybrane jednotski na wszystkich wioskach gdzie są one dostępne.","dummies.btn":"Aktywuj","dummies.set":"Atrapy ustawione.",exchange:"Wymiana","exchange.text":"Dzięki tej opcji wrogi szpieg pozostawi raport na temat swojej własnej wioski.","exchange.tip":"Aktywuje Wymianę na wszystkich wioskach gdzie jest ona dostępna.","exchange.btn":"Aktywuj","exchange.set":"Wymiana ustawiona."},pl:{title:"Zwiadowca",spy:"Akcje Szpiegowskie",recruit:"Auto-Rekrutacja",countermeasures:"Kontrwywiad",light_cavalry:"LK",mounted_archer:"ŁK",heavy_cavalry:"CK",spyU:"Szpieguj jednostki",spyB:"Szpieguj budynki",spyA:"Efektywne szpiegowanie",spyP:"Szpieguj całego gracza",sabotage:"Sabotuj wioskę","spyU.text":"Wysyła 7 szpiegów z twoich wiosek na wioskę wskazaną aby zdobyć informacje tylko jednostkach.","spyB.text":"Wysyła 7 szpiegów z twoich wiosek na wioskę wskazaną aby zdobyć informacje tylko budynkach.","sabotage.text":"Wysyła po 3 szpiegów z twoich wiosek na wioskę wskazaną aby dokonać sabotażu na budynkach.","spyA.text":"Wysyła 8-10 szpiegów z twoich wiosek na wioskę wskazaną aby zdobyć informacje o budynkach oraz jednostkach(pierwsi szpiedzy na budynki ostatni na jednostki).","spyP.text":"Wysyła szpiegów z twoich wiosek na wioski gracza aby zdobyć informacje o budynkach oraz jednostkach(pierwsi szpiedzy na budynki ostatni na jednostki).",send:"Wyślij",sabote:"Sabotuj",sendingU:"Wszyscy na jednostki",sendingB:"Wszyscy na budynki",sendingS:"3 do sabotowania budynków na wrogiej wiosce",
sendingA:"Pierwsi na budynki kolejni na jednsotki - największa efektwnosc.",sendingP:"Pierwsi na budynki kolejni na jednsotki - największa efektwnosc.","entry/id":"ID gracza","entry/vid":"ID wioski","entry/building":"Wpisz budynek","entry/level":"Wpisz poziom","entry/unit":"Jednostka","entry/replacement":"Zamiennik",revived:"Szpiedzy dodani do kolejki rekrutacji",recruiting:"Rekrutacja","recruit.text":"Rekrutuje wszystkich szpiegów na wszystkich wioskach.","recruit.tip":"xxx","recruit.btn":"Rekrutuj",camouflage:"Kamuflaż","camouflage.text":"Wybierz budynek oraz poziom jaki ma być widoczny dla wrogiego szpiega.","camouflage.tip":"Zmienia widoczność poziomu wybranego budynku na wszystkich wioskach gdzie jest dostępna opcja kamuflażu","camouflage.btn":"Kamufluj","camouflage.set":"Kamuflaż ustawiony.",switch:"Zamiana broni","switch.text":"Wybierz typy jednostek które zamienią się bronią by oszukać wrogiego szpiega.","switch.tip":"Zamienia broń między dwoma typami jednostek na wszystkich wioskach, na których jest to możliwe.","switch.btn":"Zamień","switch.set":"Zamiana broni ustawiona.",dummies:"Atrapy","dummies.text":"Wybierz jednostkę, która ma posłużyć jako atrapa widoczna dla wrogiego szpiega.","dummies.tip":"Aktywuje Atrapy, uzupełnia wolny prowiant o wybrane jednotski na wszystkich wioskach gdzie są one dostępne.","dummies.btn":"Aktywuj","dummies.set":"Atrapy ustawione.",exchange:"Wymiana","exchange.text":"Dzięki tej opcji wrogi szpieg pozostawi raport na temat swojej własnej wioski.","exchange.tip":"Aktywuje Wymianę na wszystkich wioskach gdzie jest ona dostępna.","exchange.btn":"Aktywuj","exchange.set":"Wymiana ustawiona."},us:{title:"Zwiadowca",spy:"Akcje Szpiegowskie",recruit:"Auto-Rekrutacja",countermeasures:"Kontrwywiad",light_cavalry:"LK",mounted_archer:"ŁK",heavy_cavalry:"CK",spyU:"Szpieguj jednostki",spyB:"Szpieguj budynki",spyA:"Efektywne szpiegowanie",spyP:"Szpieguj całego gracza",sabotage:"Sabotuj wioskę","spyU.text":"Wysyła 7 szpiegów z twoich wiosek na wioskę wskazaną aby zdobyć informacje tylko jednostkach.","spyB.text":"Wysyła 7 szpiegów z twoich wiosek na wioskę wskazaną aby zdobyć informacje tylko budynkach.","sabotage.text":"Wysyła po 3 szpiegów z twoich wiosek na wioskę wskazaną aby dokonać sabotażu na budynkach.","spyA.text":"Wysyła 8-10 szpiegów z twoich wiosek na wioskę wskazaną aby zdobyć informacje o budynkach oraz jednostkach(pierwsi szpiedzy na budynki ostatni na jednostki).","spyP.text":"Wysyła szpiegów z twoich wiosek na wioski gracza aby zdobyć informacje o budynkach oraz jednostkach(pierwsi szpiedzy na budynki ostatni na jednostki).",send:"Wyślij",sabote:"Sabotuj",sendingU:"Wszyscy na jednostki",sendingB:"Wszyscy na budynki",sendingS:"3 do sabotowania budynków na wrogiej wiosce",sendingA:"Pierwsi na budynki kolejni na jednsotki - największa efektwnosc.",sendingP:"Pierwsi na budynki kolejni na jednsotki - największa efektwnosc.","entry/id":"ID gracza","entry/vid":"ID wioski","entry/building":"Wpisz budynek","entry/level":"Wpisz poziom","entry/unit":"Jednostka","entry/replacement":"Zamiennik",revived:"Spies added to recruiting queue",recruiting:"Rekrutacja","recruit.text":"Rekrutuje wszystkich szpiegów na wszystkich wioskach.","recruit.tip":"xxx","recruit.btn":"Rekrutuj",camouflage:"Kamuflaż","camouflage.text":"Wybierz budynek oraz poziom jaki ma być widoczny dla wrogiego szpiega.","camouflage.tip":"Zmienia widoczność poziomu wybranego budynku na wszystkich wioskach gdzie jest dostępna opcja kamuflażu","camouflage.btn":"Kamufluj","camouflage.set":"Kamuflaż ustawiony.",switch:"Zamiana broni","switch.text":"Wybierz typy jednostek które zamienią się bronią by oszukać wrogiego szpiega.","switch.tip":"Zamienia broń między dwoma typami jednostek na wszystkich wioskach, na których jest to możliwe.","switch.btn":"Zamień","switch.set":"Zamiana broni ustawiona.",dummies:"Atrapy","dummies.text":"Wybierz jednostkę, która ma posłużyć jako atrapa widoczna dla wrogiego szpiega.","dummies.tip":"Aktywuje Atrapy, uzupełnia wolny prowiant o wybrane jednotski na wszystkich wioskach gdzie są one dostępne.","dummies.btn":"Aktywuj","dummies.set":"Atrapy ustawione.",exchange:"Wymiana","exchange.text":"Dzięki tej opcji wrogi szpieg pozostawi raport na temat swojej własnej wioski.","exchange.tip":"Aktywuje Wymianę na wszystkich wioskach gdzie jest ona dostępna.","exchange.btn":"Aktywuj","exchange.set":"Wymiana ustawiona."}},"pl"),q.initialized=!0,l=f.get("spymaster-sended",{village:{},character:{}},!0)},q.run=function(){if(!q.interfaceInitialized)throw new Error("AutoSpy interface not initialized");d(function(){$map=document.getElementById("main-canvas"),m=e.getSelectedCharacter(),o=f.get("spymaster-cacheVillages",{},!0),p(g.getTowns()),c.$on(j.MAP_VILLAGE_DATA,function(a,b){p(b.villages)})},["initial_village"])},q}),define("two/spymaster/data",["two/spymaster"],function(a){var b={};a.data=b}),require(["two/ready","two/spymaster","two/spymaster/data","two/spymaster/ui"],function(a,b){if(b.initialized)return!1;a(function(){b.init(),b.interface(),b.run()})}),define("two/spymaster/ui",["two/spymaster","two/locale","two/ui","two/ui/autoComplete","two/FrontButton","two/utils","two/eventQueue","ejs","struct/MapData","cdn"],function(a,b,c,d,j,k,l,m,n,o){var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=function(){y.on("click",function(){var a=injector.get("modelDataService"),c=injector.get("socketService"),d=injector.get("routeProvider"),e=a.getSelectedCharacter(),f=e.getVillageList(),g=F[0].dataset.value,h=document.getElementById("level").value;f.forEach(function(a,b){a.data.buildings.tavern.level>=3&&setTimeout(function(){c.emit(d.SCOUTING_SET_COUNTER_MEASURE,{village_id:a.getId(),type:"camouflage",status:1,building:g,level:h,unit:"",replacement:""})},3200*b*Math.random())}),k.emitNotif("success",b("spymaster","camouflage.set"))}),z.on("click",function(){var a=injector.get("modelDataService"),c=injector.get("socketService"),d=injector.get("routeProvider"),e=a.getSelectedCharacter(),f=e.getVillageList(),g=D[0].dataset.value,h=E[0].dataset.value;f.forEach(function(a,b){a.data.buildings.tavern.level>=6&&setTimeout(function(){c.emit(d.SCOUTING_SET_COUNTER_MEASURE,{village_id:a.getId(),type:"switch_weapons",status:1,building:"",level:"",unit:g,replacement:h})},5e3*b*Math.random())}),k.emitNotif("success",b("spymaster","switch.set"))}),A.on("click",function(){var a=injector.get("modelDataService"),c=injector.get("socketService"),d=injector.get("routeProvider"),e=a.getSelectedCharacter(),f=e.getVillageList(),g=C[0].dataset.value;f.forEach(function(a,b){a.data.buildings.tavern.level>=9&&setTimeout(function(){c.emit(d.SCOUTING_SET_COUNTER_MEASURE,{village_id:a.getId(),type:"dummies",status:1,building:"",level:"",unit:g,replacement:""})},5e3*b*Math.random())}),k.emitNotif("success",b("spymaster","dummies.set"))}),B.on("click",function(){var a=injector.get("modelDataService"),c=injector.get("socketService"),d=injector.get("routeProvider");a.getSelectedCharacter().getVillageList().forEach(function(a,b){a.data.buildings.tavern.level>=12&&setTimeout(function(){c.emit(d.SCOUTING_SET_COUNTER_MEASURE,{village_id:a.getId(),type:"exchange",status:1,building:"",level:"",unit:"",replacement:""})},5e3*b*Math.random())}),k.emitNotif("success",b("spymaster","exchange.set"))}),s.on("click",function(){var a=document.getElementById("SpU").value,b=injector.get("modelDataService"),c=injector.get("socketService"),d=injector.get("routeProvider"),e=b.getSelectedCharacter(),f=e.getVillageList(),g=0;f.forEach(function(b,e){var f=b.scoutingInfo,h=f.spies;setTimeout(function(){h.forEach(function(e,f){1==e.type&&(g+=1)<=7&&(setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"units"})},5e3*f*Math.random()),k.emitNotif("success","Szpieg nr "+g+" wysłany na "+a+". Cel: jednostki"))})},7e3*e*Math.random())})}),t.on("click",function(){var a=document.getElementById("SpB").value,b=injector.get("modelDataService"),c=injector.get("socketService"),d=injector.get("routeProvider"),e=b.getSelectedCharacter(),f=e.getVillageList(),g=0;f.forEach(function(b,e){var f=b.scoutingInfo,h=f.spies;setTimeout(function(){h.forEach(function(e,f){1==e.type&&(g+=1)<=7&&(setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"buildings"})},5e3*f*Math.random()),k.emitNotif("success","Szpieg nr "+g+" wysłany na "+a+". Cel: budynki"))})},7e3*e*Math.random())})}),u.on("click",function(){var a=document.getElementById("SpA").value,b=injector.get("modelDataService"),c=injector.get("socketService"),d=injector.get("routeProvider"),e=b.getSelectedCharacter(),f=e.getVillageList(),g=0;f.forEach(function(b,e){var f=b.scoutingInfo,h=f.spies,i=f.numSpies;2==i?setTimeout(function(){h.forEach(function(e,f){1==e.type&&(g+=1)<=4&&(setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"buildings"}),setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"units"})},5e3*f)},5e3*f*Math.random()),k.emitNotif("success","Szpieg nr "+g+" wysłany na "+a))})},7e3*e*Math.random()):3==i?setTimeout(function(){h.forEach(function(e,f){1==e.type&&(g+=1)<=3&&(setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"buildings"}),console.log("Szpiegowanie budynków w "+a),setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"buildings"}),setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"units"})},5e3*f)},5e3*f)},5e3*f*Math.random()),k.emitNotif("success","Szpieg nr "+g+" wysłany na "+a))})},7e3*e*Math.random()):4==i?setTimeout(function(){h.forEach(function(e,f){1==e.type&&(g+=1)<=2&&(setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"buildings"}),setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"buildings"}),setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"units"}),setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"units"})},5e3*f)},5e3*f)},5e3*f)},5e3*f*Math.random()),k.emitNotif("success","Szpieg nr "+g+" wysłany na "+a))})},7e3*e*Math.random()):5==i&&setTimeout(function(){h.forEach(function(e,f){1==e.type&&(g+=1)<=2&&(setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"buildings"}),setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"buildings"}),setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"buildings"}),setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"units"}),setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:1,type:"units"})},5e3*f)},5e3*f)},5e3*f)},5e3*f)},5e3*f*Math.random()),k.emitNotif("success","Szpieg nr "+g+" wysłany na "+a))})},7e3*e*Math.random())})}),v.on("click",function(){var a=document.getElementById("sabotage").value,b=injector.get("modelDataService"),c=injector.get("socketService"),d=injector.get("routeProvider"),e=b.getSelectedCharacter(),f=e.getVillageList();f.forEach(function(b,e){var f=b.scoutingInfo,g=f.spies,h=f.numSpies;setTimeout(function(){g.forEach(function(e,f){1==e.type&&h>=3&&setTimeout(function(){c.emit(d.SCOUTING_SEND_COMMAND,{startVillage:b.getId(),targetVillage:a,spys:3,type:"sabotage"})},5e3*f*Math.random())})},7e3*e*Math.random()),k.emitNotif("success","Szpiedzy z wioski "+b.getId()+" sabotują wioskę "+a)})}),w.on("click",function(){function a(){for(h=0;h<m.length;h++)g.forEach(function(a,b){var c=a.scoutingInfo,f=c.spies,g=c.numSpies;2==g?setTimeout(function(){f.forEach(function(b,c){1==b.type&&(l+=1)<=4&&(setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"buildings"}),console.log("Szpiegowanie budynków w "+m[h]),setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"units"}),console.log("Szpiegowanie jednostek w "+m[h])},c*j)},c*j*Math.random()),console.log(l))})},b*k*Math.random()):3==g?setTimeout(function(){f.forEach(function(b,c){1==b.type&&(l+=1)<=3&&(setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"buildings"}),console.log("Szpiegowanie budynków w "+m[h]),setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"buildings"}),console.log("Szpiegowanie budynków w "+m[h]),setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"units"}),console.log("Szpiegowanie jednostek "+m[h])},c*j)},c*j)},c*j*Math.random()),console.log(l))})},b*k*Math.random()):4==g?setTimeout(function(){f.forEach(function(b,c){1==b.type&&(l+=1)<=2&&(setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"buildings"}),console.log("Szpiegowanie budynków w "+m[h]),setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"buildings"}),console.log("Szpiegowanie budynków w "+m[h]),setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"units"}),console.log("Szpiegowanie jednostek w "+m[h]),setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"units"}),console.log("Szpiegowanie jednostek w "+m[h])},c*j)},c*j)},c*j)},c*j*Math.random()),console.log(l))})},b*k*Math.random()):5==g&&setTimeout(function(){f.forEach(function(b,c){1==b.type&&(l+=1)<=2&&(setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"buildings"}),console.log("Szpiegowanie budynków w "+m[h]),setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"buildings"}),console.log("Szpiegowanie budynków w "+m[h]),setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"buildings"}),console.log("Szpiegowanie budynków w "+m[h]),setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"units"}),console.log("Szpiegowanie jednostek w "+m[h]),setTimeout(function(){d.emit(e.SCOUTING_SEND_COMMAND,{startVillage:a.getId(),targetVillage:m[h],spys:1,type:"units"}),console.log("Szpiegowanie jednostek w "+m[h])},c*j)},c*j)},c*j)},c*j)},c*j*Math.random()),console.log(l))})},b*k*Math.random())})}var b=document.getElementById("SpP").value,c=injector.get("modelDataService"),d=injector.get("socketService"),e=injector.get("routeProvider"),f=c.getSelectedCharacter(),g=f.getVillageList(),j=5e3,k=7e3,l=0,m=[];!function(c){d.emit(e.CHAR_GET_PROFILE,{character_id:b},function(a){for(i=0;i<a.villages.length;i++)m.push(a.villages[i].village_id)}),setTimeout(a,3e3)}()}),x.on("click",function(){k.emitNotif("success",b("spymaster","revived")),function(){e.getSelectedCharacter().getVillageList().forEach(function(a){var b=a.data,c=b.buildings,d=c.tavern,e=d.level,h=a.scoutingInfo,i=h.spies,j=a.getResources(),k=j.getComputed(),l=(j.getMaxStorage(),k.wood),m=k.clay,n=k.iron,o=l.currentStock,p=m.currentStock,q=n.currentStock,r=[500,1e3,2200,7e3,12e3],s=[500,800,2e3,6500,1e4],t=[500,1200,2400,8e3,18e3];e<1||(e>=1&&e<3?(i.forEach(function(b){1==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[1]&&p>=s[1]&&q>=t[1]&&f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1})}),console.log("spy",1,"from village",a.getId(),"can be recruited")):e>=3&&e<6?i.forEach(function(b){1==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[1]&&p>=s[1]&&q>=t[1]?(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1}),console.log("spy",1,"from village",a.getId(),"can be recruited")):2==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[2]&&p>=s[2]&&q>=t[2]&&(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:2}),console.log("spy",2,"from village",a.getId(),"can be recruited"))}):e>=6&&e<9?i.forEach(function(b){3==b.id&&1==b.recruitingInProgress&&1==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:3}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1}),console.log("spy",3,"from village",a.getId(),"recruit cancelled"),console.log("spy",1,"from village",a.getId(),"can be recruited")):1==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[1]&&p>=s[1]&&q>=t[1]?(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1}),console.log("spy",1,"from village",a.getId(),"can be recruited")):2==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[2]&&p>=s[2]&&q>=t[2]?(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:2}),console.log("spy",2,"from village",a.getId(),"can be recruited")):3==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[3]&&p>=s[3]&&q>=t[3]&&(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:3}),console.log("spy",3,"from village",a.getId(),"can be recruited"))}):e>=9&&e<12?i.forEach(function(b){4==b.id&&1==b.recruitingInProgress&&1==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:4}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1}),console.log("spy",4,"from village",a.getId(),"recruit cancelled"),console.log("spy",1,"from village",a.getId(),"can be recruited")):4==b.id&&1==b.recruitingInProgress&&2==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:4}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:2}),console.log("spy",4,"from village",a.getId(),"recruit cancelled"),console.log("spy",2,"from village",a.getId(),"can be recruited")):3==b.id&&1==b.recruitingInProgress&&1==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:3}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1}),console.log("spy",3,"from village",a.getId(),"recruit cancelled"),console.log("spy",1,"from village",a.getId(),"can be recruited")):3==b.id&&1==b.recruitingInProgress&&2==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:3}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:2}),console.log("spy",3,"from village",a.getId(),"recruit cancelled"),console.log("spy",2,"from village",a.getId(),"can be recruited")):1==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[1]&&p>=s[1]&&q>=t[1]?(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1}),console.log("spy",1,"from village",a.getId(),"can be recruited")):2==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[2]&&p>=s[2]&&q>=t[2]?(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:2}),console.log("spy",2,"from village",a.getId(),"can be recruited")):3==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[3]&&p>=s[3]&&q>=t[3]?(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:3}),console.log("spy",3,"from village",a.getId(),"can be recruited")):4==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[4]&&p>=s[4]&&q>=t[4]&&(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:4}),console.log("spy",4,"from village",a.getId(),"can be recruited"))}):e>=12&&i.forEach(function(b){5==b.id&&1==b.recruitingInProgress&&1==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:5}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1}),console.log("spy",5,"from village",a.getId(),"recruit cancelled"),console.log("spy",1,"from village",a.getId(),"can be recruited")):5==b.id&&1==b.recruitingInProgress&&2==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:5}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:2}),console.log("spy",5,"from village",a.getId(),"recruit cancelled"),console.log("spy",2,"from village",a.getId(),"can be recruited")):4==b.id&&1==b.recruitingInProgress&&1==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:4}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1}),console.log("spy",4,"from village",a.getId(),"recruit cancelled"),console.log("spy",1,"from village",a.getId(),"can be recruited")):3==b.id&&1==b.recruitingInProgress&&1==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:3}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1}),console.log("spy",3,"from village",a.getId(),"recruit cancelled"),console.log("spy",1,"from village",a.getId(),"can be recruited")):4==b.id&&1==b.recruitingInProgress&&2==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:4}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:2}),console.log("spy",4,"from village",a.getId(),"recruit cancelled"),console.log("spy",2,"from village",a.getId(),"can be recruited")):5==b.id&&1==b.recruitingInProgress&&3==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:5}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:3}),console.log("spy",5,"from village",a.getId(),"recruit cancelled"),console.log("spy",3,"from village",a.getId(),"can be recruited")):3==b.id&&1==b.recruitingInProgress&&2==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:3}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:2}),console.log("spy",3,"from village",a.getId(),"recruit cancelled"),console.log("spy",2,"from village",a.getId(),"can be recruited")):4==b.id&&1==b.recruitingInProgress&&3==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:4}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:3}),console.log("spy",4,"from village",a.getId(),"recruit cancelled"),console.log("spy",3,"from village",a.getId(),"can be recruited")):5==b.id&&1==b.recruitingInProgress&&4==b.id&&1!=b.active?(f.emit(g.SCOUTING_CANCEL_RECRUIT,{village_id:a.getId(),slot:5}),f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:4}),console.log("spy",5,"from village",a.getId(),"recruit cancelled"),console.log("spy",4,"from village",a.getId(),"can be recruited")):1==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[1]&&p>=s[1]&&q>=t[1]?(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:1}),console.log("spy",1,"from village",a.getId(),"can be recruited")):2==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[2]&&p>=s[2]&&q>=t[2]?(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:2}),console.log("spy",2,"from village",a.getId(),"can be recruited")):3==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[3]&&p>=s[3]&&q>=t[3]?(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:3}),console.log("spy",3,"from village",a.getId(),"can be recruited")):4==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[4]&&p>=s[4]&&q>=t[4]?(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:4}),console.log("spy",4,"from village",a.getId(),"can be recruited")):5==b.id&&1!=b.active&&1!=b.recruitingInProgress&&o>=r[5]&&p>=s[5]&&q>=t[5]&&(f.emit(g.SCOUTING_RECRUIT,{village_id:a.getId(),slot:5}),console.log("spy",5,"from village",a.getId(),"can be recruited"))}))})}()}),C.on("selectSelected",function(){unitD=C[0].dataset.value}),D.on("selectSelected",function(){unitD=D[0].dataset.value}),E.on("selectSelected",function(){unitD=E[0].dataset.value}),F.on("selectSelected",function(){unitD=F[0].dataset.value})},H=function(){return p=new c("AutoSpy",{activeTab:"spy",
template:'<div class="win-content message-list-wrapper searchable-list ng-scope"><header class="win-head"><h2><#= locale("spymaster", "title") #> <span class="small">v<#= version #></span></h2><ul class="list-btn"><li><a href="#" class="twOverflow-close size-34x34 btn-red icon-26x26-close"></a></li></ul></header><div class="tabs tabs-bg"><div class="tabs-three-col"><div class="tab" tab="spy"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("spymaster", "spy") #></a></div></div></div><div class="tab" tab="recruit"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("spymaster", "recruit") #></a></div></div></div><div class="tab" tab="countermeasures"><div class="tab-inner"><div><a href="#" class="btn-icon btn-orange"><#= locale("spymaster", "countermeasures") #></a></div></div></div></div></div><div class="win-main"><div class="box-paper footer has-footer-upper twOverflow-content-spy"><p>ID gracza oraz ID wioski znajdziesz na <a href="http://www.tw2-tools.com/" target="_blank"><#= locale("faker", "link") #></a>oraz w minimapie.</p><h5 class="twx-section"><#= locale("spymaster", "spyU") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="17%"><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="spyU" value="" autocomplete="off" placeholder="<#= locale("spymaster", "entry/vid") #>"></td><td class="item-name"><#= locale("spymaster", "spyU.text") #></td><td class="item-send"><span class="btn btn-orange addSelected" tooltip="<#= locale("spymaster", "sendingU") #>"><#= locale("spymaster", "send") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("spymaster", "spyB") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="17%"><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="spyB" value="" autocomplete="off" placeholder="<#= locale("spymaster", "entry/vid") #>"></td><td class="item-name"><#= locale("spymaster", "spyB.text") #></td><td class="item-send1"><span class="btn btn-orange addSelected" tooltip="<#= locale("spymaster", "sendingB") #>"><#= locale("spymaster", "send") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("spymaster", "spyA") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="17%"><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="spyA" value="" autocomplete="off" placeholder="<#= locale("spymaster", "entry/vid") #>"></td><td class="item-name"><#= locale("spymaster", "spyA.text") #></td><td class="item-send3"><span class="btn btn-orange addSelected" tooltip="<#= locale("spymaster", "sendingA") #>"><#= locale("spymaster", "send") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("spymaster", "sabotage") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="17%"><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="sabotage" value="" autocomplete="off" placeholder="<#= locale("spymaster", "entry/vid") #>"></td><td class="item-name"><#= locale("spymaster", "sabotage.text") #></td><td class="item-send2"><span class="btn btn-orange addSelected" tooltip="<#= locale("spymaster", "sendingS") #>"><#= locale("spymaster", "sabote") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("spymaster", "spyP") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="17%"><col width="18%"></colgroup><tbody><tr><td class="item-input"><input type="text" class="textfield-border" id="spyP" value="" autocomplete="off" placeholder="<#= locale("spymaster", "entry/id") #>"></td><td class="item-name"><#= locale("spymaster", "spyP.text") #></td><td class="item-send4"><span class="btn btn-orange addSelected" tooltip="<#= locale("spymaster", "sendingP") #>"><#= locale("spymaster", "send") #></span></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-recruit"><h5 class="twx-section"><#= locale("spymaster", "recruiting") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="50%"><col></colgroup><tbody><tr><td class="item-name"><#= locale("spymaster", "recruit.text") #></td><td class="item-recruit"><span class="btn btn-orange addSelected" tooltip="<#= locale("spymaster", "recruit.tip") #>"><#= locale("spymaster", "recruit.btn") #></span></td></tr></tbody></table></form></div><div class="box-paper footer has-footer-upper twOverflow-content-countermeasures"><h5 class="twx-section"><#= locale("spymaster", "camouflage") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="25%"><col width="17%"><col><col width="18%"></colgroup><tbody><tr><td><span class="ff-cell-fix"><select data-setting="dataBuilding" class="dataBuilding" id="building"><option value="headquarter"><#= locale("common", "headquarter") #></option><option value="timber_camp"><#= locale("common", "timber_camp") #></option><option value="clay_pit"><#= locale("common", "clay_pit") #></option><option value="iron_mine"><#= locale("common", "iron_mine") #></option><option value="farm"><#= locale("common", "farm") #></option><option value="warehouse"><#= locale("common", "warehouse") #></option><option value="church"><#= locale("common", "church") #></option><option value="chapel"><#= locale("common", "chapel") #></option><option value="rally_point"><#= locale("common", "rally_point") #></option><option value="barracks"><#= locale("common", "barracks") #></option><option value="statue"><#= locale("common", "statue") #></option><option value="hospital"><#= locale("common", "hospital") #></option><option value="wall"><#= locale("common", "wall") #></option><option value="market"><#= locale("common", "market") #></option><option value="tavern"><#= locale("common", "tavern") #></option><option value="academy"><#= locale("common", "academy") #></option><option value="preceptory"><#= locale("common", "preceptory") #></option></select></span></td><td class="item-input"><input type="text" class="textfield-border" id="level" value="" autocomplete="off" placeholder="<#= locale("spymaster", "entry/level") #>"></td><td class="item-name"><#= locale("spymaster", "camouflage.text") #></td><td class="item-camouflage"><span class="btn btn-orange addSelected" tooltip="<#= locale("spymaster", "camouflage.tip") #>"><#= locale("spymaster", "camouflage.btn") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("spymaster", "switch") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col width="20%"><col><col width="18%"></colgroup><tbody><tr><td><span class="ff-cell-fix"><select data-setting="dataUnit" class="dataUnit" id="unit"><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("spymaster", "light_cavalry") #></option><option value="mounted_archer"><#= locale("spymaster", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("spymaster", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option><option value="knight"><#= locale("common", "knight") #></option></select></span></td><td><span class="ff-cell-fix"><select data-setting="dataReplacement" class="dataReplacement" id="replacement"><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("spymaster", "light_cavalry") #></option><option value="mounted_archer"><#= locale("spymaster", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("spymaster", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option><option value="knight"><#= locale("common", "knight") #></option></select></span></td><td class="item-name"><#= locale("spymaster", "switch.text") #></td><td class="item-switch"><span class="btn btn-orange addSelected" tooltip="<#= locale("spymaster", "switch.tip") #>"><#= locale("spymaster", "switch.btn") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("spymaster", "dummies") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col width="20%"><col><col width="18%"></colgroup><tbody><tr><td><span class="ff-cell-fix"><select data-setting="dataDummies" class="dataDummies" id="unitD"><option value="spear"><#= locale("common", "spear") #></option><option value="sword"><#= locale("common", "sword") #></option><option value="axe"><#= locale("common", "axe") #></option><option value="archer"><#= locale("common", "archer") #></option><option value="light_cavalry"><#= locale("spymaster", "light_cavalry") #></option><option value="mounted_archer"><#= locale("spymaster", "mounted_archer") #></option><option value="heavy_cavalry"><#= locale("spymaster", "heavy_cavalry") #></option><option value="ram"><#= locale("common", "ram") #></option><option value="catapult"><#= locale("common", "catapult") #></option><option value="trebuchet"><#= locale("common", "trebuchet") #></option><option value="doppelsoldner"><#= locale("common", "doppelsoldner") #></option><option value="snob"><#= locale("common", "snob") #></option><option value="knight"><#= locale("common", "knight") #></option></select></span></td><td class="item-name"><#= locale("spymaster", "dummies.text") #></td><td class="item-dummies"><span class="btn btn-orange addSelected" tooltip="<#= locale("spymaster", "dummies.tip") #>"><#= locale("spymaster", "dummies.btn") #></span></td></tr></tbody></table></form><h5 class="twx-section"><#= locale("spymaster", "exchange") #></h5><form class="addForm"><table class="tbl-border-light tbl-striped"><colgroup><col><col width="18%"></colgroup><tbody><tr><td class="item-name"><#= locale("spymaster", "exchange.text") #></td><td class="item-exchange"><span class="btn btn-orange addSelected" tooltip="<#= locale("spymaster", "exchange.tip") #>"><#= locale("spymaster", "exchange.btn") #></span></td></tr></tbody></table></form></div></div></div>',css:"#AutoSpy .addForm input{width:100%}#AutoSpy .addForm td{text-align:center}#AutoSpy .addForm span{height:26px;line-height:26px;padding:0 10px}#AutoSpy .entry-name{text-align:left;padding:0 10px}#AutoSpy .dataDummies{width:120px}#AutoSpy .dataDummies .custom-select-handler{text-align:left}#AutoSpy .dataUnit{width:120px}#AutoSpy .dataUnit .custom-select-handler{text-align:left}#AutoSpy .dataReplacement{width:120px}#AutoSpy .dataReplacement .custom-select-handler{text-align:left}#AutoSpy .dataBuilding{width:150px}#AutoSpy .dataBuilding .custom-select-handler{text-align:left}",replaces:{locale:b,version:a.version,types:["village","character"]}}),q=new j(b("spymaster","title"),{classHover:!1,classBlur:!1,onClick:function(){p.openWindow()}}),r=$(p.$window),s=r.find(".item-send span"),t=r.find(".item-send1 span"),u=r.find(".item-send2 span"),v=r.find(".item-send3 span"),w=r.find(".item-send4 span"),x=r.find(".item-recruit span"),y=r.find(".item-camouflage span"),z=r.find(".item-switch span"),A=r.find(".item-dummies span"),B=r.find(".item-exchange span"),C=r.find(".dataDummies"),D=r.find(".dataUnit"),E=r.find(".dataReplacement"),F=r.find(".dataBuilding"),G(),a.interfaceInitialized=!0,p};a.interface=function(){a.interface=H()}})}(this);
//# sourceMappingURL=tw2overflow.map